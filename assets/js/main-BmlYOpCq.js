function VL(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function zL(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var d1={exports:{}},nm={},f1={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph=Symbol.for("react.element"),HL=Symbol.for("react.portal"),jL=Symbol.for("react.fragment"),WL=Symbol.for("react.strict_mode"),qL=Symbol.for("react.profiler"),$L=Symbol.for("react.provider"),XL=Symbol.for("react.context"),KL=Symbol.for("react.forward_ref"),YL=Symbol.for("react.suspense"),JL=Symbol.for("react.memo"),ZL=Symbol.for("react.lazy"),rb=Symbol.iterator;function eP(n){return n===null||typeof n!="object"?null:(n=rb&&n[rb]||n["@@iterator"],typeof n=="function"?n:null)}var p1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m1=Object.assign,A1={};function yc(n,e,t){this.props=n,this.context=e,this.refs=A1,this.updater=t||p1}yc.prototype.isReactComponent={};yc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};yc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function g1(){}g1.prototype=yc.prototype;function zv(n,e,t){this.props=n,this.context=e,this.refs=A1,this.updater=t||p1}var Hv=zv.prototype=new g1;Hv.constructor=zv;m1(Hv,yc.prototype);Hv.isPureReactComponent=!0;var ob=Array.isArray,y1=Object.prototype.hasOwnProperty,jv={current:null},v1={key:!0,ref:!0,__self:!0,__source:!0};function x1(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)y1.call(e,i)&&!v1.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Ph,type:n,key:r,ref:o,props:s,_owner:jv.current}}function tP(n,e){return{$$typeof:Ph,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Wv(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ph}function nP(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ab=/\/+/g;function Qm(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nP(""+n.key):e.toString(36)}function bf(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ph:case HL:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+Qm(o,0):i,ob(s)?(t="",n!=null&&(t=n.replace(ab,"$&/")+"/"),bf(s,e,t,"",function(c){return c})):s!=null&&(Wv(s)&&(s=tP(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ab,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",ob(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+Qm(r,a);o+=bf(r,e,t,l,s)}else if(l=eP(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+Qm(r,a++),o+=bf(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zh(n,e,t){if(n==null)return n;var i=[],s=0;return bf(n,i,"","",function(r){return e.call(t,r,s++)}),i}function iP(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ti={current:null},_f={transition:null},sP={ReactCurrentDispatcher:ti,ReactCurrentBatchConfig:_f,ReactCurrentOwner:jv};function E1(){throw Error("act(...) is not supported in production builds of React.")}Ye.Children={map:Zh,forEach:function(n,e,t){Zh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Zh(n,function(){e++}),e},toArray:function(n){return Zh(n,function(e){return e})||[]},only:function(n){if(!Wv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ye.Component=yc;Ye.Fragment=jL;Ye.Profiler=qL;Ye.PureComponent=zv;Ye.StrictMode=WL;Ye.Suspense=YL;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sP;Ye.act=E1;Ye.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=m1({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=jv.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)y1.call(e,l)&&!v1.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ph,type:n.type,key:s,ref:r,props:i,_owner:o}};Ye.createContext=function(n){return n={$$typeof:XL,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:$L,_context:n},n.Consumer=n};Ye.createElement=x1;Ye.createFactory=function(n){var e=x1.bind(null,n);return e.type=n,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(n){return{$$typeof:KL,render:n}};Ye.isValidElement=Wv;Ye.lazy=function(n){return{$$typeof:ZL,_payload:{_status:-1,_result:n},_init:iP}};Ye.memo=function(n,e){return{$$typeof:JL,type:n,compare:e===void 0?null:e}};Ye.startTransition=function(n){var e=_f.transition;_f.transition={};try{n()}finally{_f.transition=e}};Ye.unstable_act=E1;Ye.useCallback=function(n,e){return ti.current.useCallback(n,e)};Ye.useContext=function(n){return ti.current.useContext(n)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(n){return ti.current.useDeferredValue(n)};Ye.useEffect=function(n,e){return ti.current.useEffect(n,e)};Ye.useId=function(){return ti.current.useId()};Ye.useImperativeHandle=function(n,e,t){return ti.current.useImperativeHandle(n,e,t)};Ye.useInsertionEffect=function(n,e){return ti.current.useInsertionEffect(n,e)};Ye.useLayoutEffect=function(n,e){return ti.current.useLayoutEffect(n,e)};Ye.useMemo=function(n,e){return ti.current.useMemo(n,e)};Ye.useReducer=function(n,e,t){return ti.current.useReducer(n,e,t)};Ye.useRef=function(n){return ti.current.useRef(n)};Ye.useState=function(n){return ti.current.useState(n)};Ye.useSyncExternalStore=function(n,e,t){return ti.current.useSyncExternalStore(n,e,t)};Ye.useTransition=function(){return ti.current.useTransition()};Ye.version="18.3.1";f1.exports=Ye;var V=f1.exports;const rP=zL(V),oP=VL({__proto__:null,default:rP},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aP=V,lP=Symbol.for("react.element"),cP=Symbol.for("react.fragment"),uP=Object.prototype.hasOwnProperty,hP=aP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dP={key:!0,ref:!0,__self:!0,__source:!0};function b1(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)uP.call(e,i)&&!dP.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:lP,type:n,key:r,ref:o,props:s,_owner:hP.current}}nm.Fragment=cP;nm.jsx=b1;nm.jsxs=b1;d1.exports=nm;var b=d1.exports,_1={exports:{}},Ci={},w1={exports:{}},S1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,j){var K=D.length;D.push(j);e:for(;0<K;){var te=K-1>>>1,ae=D[te];if(0<s(ae,j))D[te]=j,D[K]=ae,K=te;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var j=D[0],K=D.pop();if(K!==j){D[0]=K;e:for(var te=0,ae=D.length,we=ae>>>1;te<we;){var X=2*(te+1)-1,ne=D[X],he=X+1,ce=D[he];if(0>s(ne,K))he<ae&&0>s(ce,ne)?(D[te]=ce,D[he]=K,te=he):(D[te]=ne,D[X]=K,te=X);else if(he<ae&&0>s(ce,K))D[te]=ce,D[he]=K,te=he;else break e}}return j}function s(D,j){var K=D.sortIndex-j.sortIndex;return K!==0?K:D.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,m=!1,g=!1,A=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var j=t(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=D)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(c)}}function x(D){if(g=!1,v(D),!m)if(t(l)!==null)m=!0,Q(E);else{var j=t(c);j!==null&&z(x,j.startTime-D)}}function E(D,j){m=!1,g&&(g=!1,p(C),C=-1),f=!0;var K=d;try{for(v(j),h=t(l);h!==null&&(!(h.expirationTime>j)||D&&!R());){var te=h.callback;if(typeof te=="function"){h.callback=null,d=h.priorityLevel;var ae=te(h.expirationTime<=j);j=n.unstable_now(),typeof ae=="function"?h.callback=ae:h===t(l)&&i(l),v(j)}else i(l);h=t(l)}if(h!==null)var we=!0;else{var X=t(c);X!==null&&z(x,X.startTime-j),we=!1}return we}finally{h=null,d=K,f=!1}}var w=!1,M=null,C=-1,S=5,_=-1;function R(){return!(n.unstable_now()-_<S)}function O(){if(M!==null){var D=n.unstable_now();_=D;var j=!0;try{j=M(!0,D)}finally{j?N():(w=!1,M=null)}}else w=!1}var N;if(typeof y=="function")N=function(){y(O)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,H=F.port2;F.port1.onmessage=O,N=function(){H.postMessage(null)}}else N=function(){A(O,0)};function Q(D){M=D,w||(w=!0,N())}function z(D,j){C=A(function(){D(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,Q(E))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var K=d;d=j;try{return D()}finally{d=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var K=d;d=D;try{return j()}finally{d=K}},n.unstable_scheduleCallback=function(D,j,K){var te=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,D){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=K+ae,D={id:u++,callback:j,priorityLevel:D,startTime:K,expirationTime:ae,sortIndex:-1},K>te?(D.sortIndex=K,e(c,D),t(l)===null&&D===t(c)&&(g?(p(C),C=-1):g=!0,z(x,K-te))):(D.sortIndex=ae,e(l,D),m||f||(m=!0,Q(E))),D},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(D){var j=d;return function(){var K=d;d=j;try{return D.apply(this,arguments)}finally{d=K}}}})(S1);w1.exports=S1;var fP=w1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP=V,_i=fP;function re(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C1=new Set,Zu={};function ba(n,e){$l(n,e),$l(n+"Capture",e)}function $l(n,e){for(Zu[n]=e,n=0;n<e.length;n++)C1.add(e[n])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R0=Object.prototype.hasOwnProperty,mP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lb={},cb={};function AP(n){return R0.call(cb,n)?!0:R0.call(lb,n)?!1:mP.test(n)?cb[n]=!0:(lb[n]=!0,!1)}function gP(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function yP(n,e,t,i){if(e===null||typeof e>"u"||gP(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ni(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Mn[n]=new ni(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Mn[e]=new ni(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Mn[n]=new ni(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Mn[n]=new ni(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Mn[n]=new ni(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Mn[n]=new ni(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Mn[n]=new ni(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Mn[n]=new ni(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Mn[n]=new ni(n,5,!1,n.toLowerCase(),null,!1,!1)});var qv=/[\-:]([a-z])/g;function $v(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(qv,$v);Mn[e]=new ni(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(qv,$v);Mn[e]=new ni(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(qv,$v);Mn[e]=new ni(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Mn[n]=new ni(n,1,!1,n.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Mn[n]=new ni(n,1,!1,n.toLowerCase(),null,!0,!0)});function Xv(n,e,t,i){var s=Mn.hasOwnProperty(e)?Mn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yP(e,t,s,i)&&(t=null),i||s===null?AP(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var xr=pP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ed=Symbol.for("react.element"),ul=Symbol.for("react.portal"),hl=Symbol.for("react.fragment"),Kv=Symbol.for("react.strict_mode"),B0=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),Yv=Symbol.for("react.forward_ref"),D0=Symbol.for("react.suspense"),L0=Symbol.for("react.suspense_list"),Jv=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),T1=Symbol.for("react.offscreen"),ub=Symbol.iterator;function Rc(n){return n===null||typeof n!="object"?null:(n=ub&&n[ub]||n["@@iterator"],typeof n=="function"?n:null)}var Ht=Object.assign,Gm;function pu(n){if(Gm===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Gm=e&&e[1]||""}return`
`+Gm+n}var Vm=!1;function zm(n,e){if(!n||Vm)return"";Vm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vm=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?pu(n):""}function vP(n){switch(n.tag){case 5:return pu(n.type);case 16:return pu("Lazy");case 13:return pu("Suspense");case 19:return pu("SuspenseList");case 0:case 2:case 15:return n=zm(n.type,!1),n;case 11:return n=zm(n.type.render,!1),n;case 1:return n=zm(n.type,!0),n;default:return""}}function P0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case hl:return"Fragment";case ul:return"Portal";case B0:return"Profiler";case Kv:return"StrictMode";case D0:return"Suspense";case L0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case I1:return(n.displayName||"Context")+".Consumer";case M1:return(n._context.displayName||"Context")+".Provider";case Yv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Jv:return e=n.displayName||null,e!==null?e:P0(n.type)||"Memo";case kr:e=n._payload,n=n._init;try{return P0(n(e))}catch{}}return null}function xP(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P0(e);case 8:return e===Kv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function R1(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EP(n){var e=R1(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function td(n){n._valueTracker||(n._valueTracker=EP(n))}function B1(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=R1(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Jf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function N0(n,e){var t=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function hb(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=uo(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D1(n,e){e=e.checked,e!=null&&Xv(n,"checked",e,!1)}function F0(n,e){D1(n,e);var t=uo(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?k0(n,e.type,t):e.hasOwnProperty("defaultValue")&&k0(n,e.type,uo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function db(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function k0(n,e,t){(e!=="number"||Jf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var mu=Array.isArray;function Nl(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+uo(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function U0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function fb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(re(92));if(mu(t)){if(1<t.length)throw Error(re(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:uo(t)}}function L1(n,e){var t=uo(e.value),i=uo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function pb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function P1(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function O0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?P1(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var nd,N1=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(nd=nd||document.createElement("div"),nd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function eh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bP=["Webkit","ms","Moz","O"];Object.keys(Ru).forEach(function(n){bP.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ru[e]=Ru[n]})});function F1(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ru.hasOwnProperty(n)&&Ru[n]?(""+e).trim():e+"px"}function k1(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=F1(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var _P=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q0(n,e){if(e){if(_P[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function G0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V0=null;function Zv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var z0=null,Fl=null,kl=null;function mb(n){if(n=kh(n)){if(typeof z0!="function")throw Error(re(280));var e=n.stateNode;e&&(e=am(e),z0(n.stateNode,n.type,e))}}function U1(n){Fl?kl?kl.push(n):kl=[n]:Fl=n}function O1(){if(Fl){var n=Fl,e=kl;if(kl=Fl=null,mb(n),e)for(n=0;n<e.length;n++)mb(e[n])}}function Q1(n,e){return n(e)}function G1(){}var Hm=!1;function V1(n,e,t){if(Hm)return n(e,t);Hm=!0;try{return Q1(n,e,t)}finally{Hm=!1,(Fl!==null||kl!==null)&&(G1(),O1())}}function th(n,e){var t=n.stateNode;if(t===null)return null;var i=am(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(re(231,e,typeof t));return t}var H0=!1;if(Ar)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){H0=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{H0=!1}function wP(n,e,t,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Bu=!1,Zf=null,ep=!1,j0=null,SP={onError:function(n){Bu=!0,Zf=n}};function CP(n,e,t,i,s,r,o,a,l){Bu=!1,Zf=null,wP.apply(SP,arguments)}function MP(n,e,t,i,s,r,o,a,l){if(CP.apply(this,arguments),Bu){if(Bu){var c=Zf;Bu=!1,Zf=null}else throw Error(re(198));ep||(ep=!0,j0=c)}}function _a(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function z1(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ab(n){if(_a(n)!==n)throw Error(re(188))}function IP(n){var e=n.alternate;if(!e){if(e=_a(n),e===null)throw Error(re(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return Ab(s),n;if(r===i)return Ab(s),e;r=r.sibling}throw Error(re(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(re(189))}}if(t.alternate!==i)throw Error(re(190))}if(t.tag!==3)throw Error(re(188));return t.stateNode.current===t?n:e}function H1(n){return n=IP(n),n!==null?j1(n):null}function j1(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=j1(n);if(e!==null)return e;n=n.sibling}return null}var W1=_i.unstable_scheduleCallback,gb=_i.unstable_cancelCallback,TP=_i.unstable_shouldYield,RP=_i.unstable_requestPaint,Zt=_i.unstable_now,BP=_i.unstable_getCurrentPriorityLevel,ex=_i.unstable_ImmediatePriority,q1=_i.unstable_UserBlockingPriority,tp=_i.unstable_NormalPriority,DP=_i.unstable_LowPriority,$1=_i.unstable_IdlePriority,im=null,Ss=null;function LP(n){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(im,n,void 0,(n.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:FP,PP=Math.log,NP=Math.LN2;function FP(n){return n>>>=0,n===0?32:31-(PP(n)/NP|0)|0}var id=64,sd=4194304;function Au(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function np(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=Au(a):(r&=o,r!==0&&(i=Au(r)))}else o=t&~s,o!==0?i=Au(o):r!==0&&(i=Au(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ls(e),s=1<<t,i|=n[t],e&=~s;return i}function kP(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UP(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-ls(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&i)&&(s[o]=kP(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function W0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function X1(){var n=id;return id<<=1,!(id&4194240)&&(id=64),n}function jm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Nh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ls(e),n[e]=t}function OP(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-ls(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function tx(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ls(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var yt=0;function K1(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Y1,nx,J1,Z1,eT,q0=!1,rd=[],Zr=null,eo=null,to=null,nh=new Map,ih=new Map,Qr=[],QP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yb(n,e){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":nh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(e.pointerId)}}function Dc(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=kh(e),e!==null&&nx(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function GP(n,e,t,i,s){switch(e){case"focusin":return Zr=Dc(Zr,n,e,t,i,s),!0;case"dragenter":return eo=Dc(eo,n,e,t,i,s),!0;case"mouseover":return to=Dc(to,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return nh.set(r,Dc(nh.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,ih.set(r,Dc(ih.get(r)||null,n,e,t,i,s)),!0}return!1}function tT(n){var e=Ko(n.target);if(e!==null){var t=_a(e);if(t!==null){if(e=t.tag,e===13){if(e=z1(t),e!==null){n.blockedOn=e,eT(n.priority,function(){J1(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);V0=i,t.target.dispatchEvent(i),V0=null}else return e=kh(t),e!==null&&nx(e),n.blockedOn=t,!1;e.shift()}return!0}function vb(n,e,t){wf(n)&&t.delete(e)}function VP(){q0=!1,Zr!==null&&wf(Zr)&&(Zr=null),eo!==null&&wf(eo)&&(eo=null),to!==null&&wf(to)&&(to=null),nh.forEach(vb),ih.forEach(vb)}function Lc(n,e){n.blockedOn===e&&(n.blockedOn=null,q0||(q0=!0,_i.unstable_scheduleCallback(_i.unstable_NormalPriority,VP)))}function sh(n){function e(s){return Lc(s,n)}if(0<rd.length){Lc(rd[0],n);for(var t=1;t<rd.length;t++){var i=rd[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Zr!==null&&Lc(Zr,n),eo!==null&&Lc(eo,n),to!==null&&Lc(to,n),nh.forEach(e),ih.forEach(e),t=0;t<Qr.length;t++)i=Qr[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Qr.length&&(t=Qr[0],t.blockedOn===null);)tT(t),t.blockedOn===null&&Qr.shift()}var Ul=xr.ReactCurrentBatchConfig,ip=!0;function zP(n,e,t,i){var s=yt,r=Ul.transition;Ul.transition=null;try{yt=1,ix(n,e,t,i)}finally{yt=s,Ul.transition=r}}function HP(n,e,t,i){var s=yt,r=Ul.transition;Ul.transition=null;try{yt=4,ix(n,e,t,i)}finally{yt=s,Ul.transition=r}}function ix(n,e,t,i){if(ip){var s=$0(n,e,t,i);if(s===null)tA(n,e,i,sp,t),yb(n,i);else if(GP(s,n,e,t,i))i.stopPropagation();else if(yb(n,i),e&4&&-1<QP.indexOf(n)){for(;s!==null;){var r=kh(s);if(r!==null&&Y1(r),r=$0(n,e,t,i),r===null&&tA(n,e,i,sp,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else tA(n,e,i,null,t)}}var sp=null;function $0(n,e,t,i){if(sp=null,n=Zv(i),n=Ko(n),n!==null)if(e=_a(n),e===null)n=null;else if(t=e.tag,t===13){if(n=z1(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return sp=n,null}function nT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BP()){case ex:return 1;case q1:return 4;case tp:case DP:return 16;case $1:return 536870912;default:return 16}default:return 16}}var jr=null,sx=null,Sf=null;function iT(){if(Sf)return Sf;var n,e=sx,t=e.length,i,s="value"in jr?jr.value:jr.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return Sf=s.slice(n,1<i?1-i:void 0)}function Cf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function od(){return!0}function xb(){return!1}function Mi(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?od:xb,this.isPropagationStopped=xb,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),e}var vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rx=Mi(vc),Fh=Ht({},vc,{view:0,detail:0}),jP=Mi(Fh),Wm,qm,Pc,sm=Ht({},Fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ox,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pc&&(Pc&&n.type==="mousemove"?(Wm=n.screenX-Pc.screenX,qm=n.screenY-Pc.screenY):qm=Wm=0,Pc=n),Wm)},movementY:function(n){return"movementY"in n?n.movementY:qm}}),Eb=Mi(sm),WP=Ht({},sm,{dataTransfer:0}),qP=Mi(WP),$P=Ht({},Fh,{relatedTarget:0}),$m=Mi($P),XP=Ht({},vc,{animationName:0,elapsedTime:0,pseudoElement:0}),KP=Mi(XP),YP=Ht({},vc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),JP=Mi(YP),ZP=Ht({},vc,{data:0}),bb=Mi(ZP),eN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=nN[n])?!!e[n]:!1}function ox(){return iN}var sN=Ht({},Fh,{key:function(n){if(n.key){var e=eN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Cf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ox,charCode:function(n){return n.type==="keypress"?Cf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Cf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),rN=Mi(sN),oN=Ht({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_b=Mi(oN),aN=Ht({},Fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ox}),lN=Mi(aN),cN=Ht({},vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),uN=Mi(cN),hN=Ht({},sm,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dN=Mi(hN),fN=[9,13,27,32],ax=Ar&&"CompositionEvent"in window,Du=null;Ar&&"documentMode"in document&&(Du=document.documentMode);var pN=Ar&&"TextEvent"in window&&!Du,sT=Ar&&(!ax||Du&&8<Du&&11>=Du),wb=" ",Sb=!1;function rT(n,e){switch(n){case"keyup":return fN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dl=!1;function mN(n,e){switch(n){case"compositionend":return oT(e);case"keypress":return e.which!==32?null:(Sb=!0,wb);case"textInput":return n=e.data,n===wb&&Sb?null:n;default:return null}}function AN(n,e){if(dl)return n==="compositionend"||!ax&&rT(n,e)?(n=iT(),Sf=sx=jr=null,dl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sT&&e.locale!=="ko"?null:e.data;default:return null}}var gN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!gN[n.type]:e==="textarea"}function aT(n,e,t,i){U1(i),e=rp(e,"onChange"),0<e.length&&(t=new rx("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Lu=null,rh=null;function yN(n){yT(n,0)}function rm(n){var e=ml(n);if(B1(e))return n}function vN(n,e){if(n==="change")return e}var lT=!1;if(Ar){var Xm;if(Ar){var Km="oninput"in document;if(!Km){var Mb=document.createElement("div");Mb.setAttribute("oninput","return;"),Km=typeof Mb.oninput=="function"}Xm=Km}else Xm=!1;lT=Xm&&(!document.documentMode||9<document.documentMode)}function Ib(){Lu&&(Lu.detachEvent("onpropertychange",cT),rh=Lu=null)}function cT(n){if(n.propertyName==="value"&&rm(rh)){var e=[];aT(e,rh,n,Zv(n)),V1(yN,e)}}function xN(n,e,t){n==="focusin"?(Ib(),Lu=e,rh=t,Lu.attachEvent("onpropertychange",cT)):n==="focusout"&&Ib()}function EN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return rm(rh)}function bN(n,e){if(n==="click")return rm(e)}function _N(n,e){if(n==="input"||n==="change")return rm(e)}function wN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ds=typeof Object.is=="function"?Object.is:wN;function oh(n,e){if(ds(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!R0.call(e,s)||!ds(n[s],e[s]))return!1}return!0}function Tb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rb(n,e){var t=Tb(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Tb(t)}}function uT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?uT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function hT(){for(var n=window,e=Jf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Jf(n.document)}return e}function lx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function SN(n){var e=hT(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&uT(t.ownerDocument.documentElement,t)){if(i!==null&&lx(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=Rb(t,r);var o=Rb(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var CN=Ar&&"documentMode"in document&&11>=document.documentMode,fl=null,X0=null,Pu=null,K0=!1;function Bb(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;K0||fl==null||fl!==Jf(i)||(i=fl,"selectionStart"in i&&lx(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Pu&&oh(Pu,i)||(Pu=i,i=rp(X0,"onSelect"),0<i.length&&(e=new rx("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=fl)))}function ad(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var pl={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},Ym={},dT={};Ar&&(dT=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function om(n){if(Ym[n])return Ym[n];if(!pl[n])return n;var e=pl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in dT)return Ym[n]=e[t];return n}var fT=om("animationend"),pT=om("animationiteration"),mT=om("animationstart"),AT=om("transitionend"),gT=new Map,Db="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(n,e){gT.set(n,e),ba(e,[n])}for(var Jm=0;Jm<Db.length;Jm++){var Zm=Db[Jm],MN=Zm.toLowerCase(),IN=Zm[0].toUpperCase()+Zm.slice(1);Ao(MN,"on"+IN)}Ao(fT,"onAnimationEnd");Ao(pT,"onAnimationIteration");Ao(mT,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao(AT,"onTransitionEnd");$l("onMouseEnter",["mouseout","mouseover"]);$l("onMouseLeave",["mouseout","mouseover"]);$l("onPointerEnter",["pointerout","pointerover"]);$l("onPointerLeave",["pointerout","pointerover"]);ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TN=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function Lb(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,MP(i,e,void 0,n),n.currentTarget=null}function yT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;Lb(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;Lb(s,a,c),r=l}}}if(ep)throw n=j0,ep=!1,j0=null,n}function Bt(n,e){var t=e[ty];t===void 0&&(t=e[ty]=new Set);var i=n+"__bubble";t.has(i)||(vT(e,n,2,!1),t.add(i))}function eA(n,e,t){var i=0;e&&(i|=4),vT(t,n,i,e)}var ld="_reactListening"+Math.random().toString(36).slice(2);function ah(n){if(!n[ld]){n[ld]=!0,C1.forEach(function(t){t!=="selectionchange"&&(TN.has(t)||eA(t,!1,n),eA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ld]||(e[ld]=!0,eA("selectionchange",!1,e))}}function vT(n,e,t,i){switch(nT(e)){case 1:var s=zP;break;case 4:s=HP;break;default:s=ix}t=s.bind(null,e,t,n),s=void 0,!H0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function tA(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ko(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}V1(function(){var c=r,u=Zv(t),h=[];e:{var d=gT.get(n);if(d!==void 0){var f=rx,m=n;switch(n){case"keypress":if(Cf(t)===0)break e;case"keydown":case"keyup":f=rN;break;case"focusin":m="focus",f=$m;break;case"focusout":m="blur",f=$m;break;case"beforeblur":case"afterblur":f=$m;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=qP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=lN;break;case fT:case pT:case mT:f=KP;break;case AT:f=uN;break;case"scroll":f=jP;break;case"wheel":f=dN;break;case"copy":case"cut":case"paste":f=JP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=_b}var g=(e&4)!==0,A=!g&&n==="scroll",p=g?d!==null?d+"Capture":null:d;g=[];for(var y=c,v;y!==null;){v=y;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,p!==null&&(x=th(y,p),x!=null&&g.push(lh(y,x,v)))),A)break;y=y.return}0<g.length&&(d=new f(d,m,null,t,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==V0&&(m=t.relatedTarget||t.fromElement)&&(Ko(m)||m[gr]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?Ko(m):null,m!==null&&(A=_a(m),m!==A||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(g=Eb,x="onMouseLeave",p="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(g=_b,x="onPointerLeave",p="onPointerEnter",y="pointer"),A=f==null?d:ml(f),v=m==null?d:ml(m),d=new g(x,y+"leave",f,t,u),d.target=A,d.relatedTarget=v,x=null,Ko(u)===c&&(g=new g(p,y+"enter",m,t,u),g.target=v,g.relatedTarget=A,x=g),A=x,f&&m)t:{for(g=f,p=m,y=0,v=g;v;v=Ia(v))y++;for(v=0,x=p;x;x=Ia(x))v++;for(;0<y-v;)g=Ia(g),y--;for(;0<v-y;)p=Ia(p),v--;for(;y--;){if(g===p||p!==null&&g===p.alternate)break t;g=Ia(g),p=Ia(p)}g=null}else g=null;f!==null&&Pb(h,d,f,g,!1),m!==null&&A!==null&&Pb(h,A,m,g,!0)}}e:{if(d=c?ml(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=vN;else if(Cb(d))if(lT)E=_N;else{E=EN;var w=xN}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=bN);if(E&&(E=E(n,c))){aT(h,E,t,u);break e}w&&w(n,d,c),n==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&k0(d,"number",d.value)}switch(w=c?ml(c):window,n){case"focusin":(Cb(w)||w.contentEditable==="true")&&(fl=w,X0=c,Pu=null);break;case"focusout":Pu=X0=fl=null;break;case"mousedown":K0=!0;break;case"contextmenu":case"mouseup":case"dragend":K0=!1,Bb(h,t,u);break;case"selectionchange":if(CN)break;case"keydown":case"keyup":Bb(h,t,u)}var M;if(ax)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else dl?rT(n,t)&&(C="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(C="onCompositionStart");C&&(sT&&t.locale!=="ko"&&(dl||C!=="onCompositionStart"?C==="onCompositionEnd"&&dl&&(M=iT()):(jr=u,sx="value"in jr?jr.value:jr.textContent,dl=!0)),w=rp(c,C),0<w.length&&(C=new bb(C,n,null,t,u),h.push({event:C,listeners:w}),M?C.data=M:(M=oT(t),M!==null&&(C.data=M)))),(M=pN?mN(n,t):AN(n,t))&&(c=rp(c,"onBeforeInput"),0<c.length&&(u=new bb("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=M))}yT(h,e)})}function lh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function rp(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=th(n,t),r!=null&&i.unshift(lh(n,r,s)),r=th(n,e),r!=null&&i.push(lh(n,r,s))),n=n.return}return i}function Ia(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Pb(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=th(t,r),l!=null&&o.unshift(lh(t,l,a))):s||(l=th(t,r),l!=null&&o.push(lh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var RN=/\r\n?/g,BN=/\u0000|\uFFFD/g;function Nb(n){return(typeof n=="string"?n:""+n).replace(RN,`
`).replace(BN,"")}function cd(n,e,t){if(e=Nb(e),Nb(n)!==e&&t)throw Error(re(425))}function op(){}var Y0=null,J0=null;function Z0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ey=typeof setTimeout=="function"?setTimeout:void 0,DN=typeof clearTimeout=="function"?clearTimeout:void 0,Fb=typeof Promise=="function"?Promise:void 0,LN=typeof queueMicrotask=="function"?queueMicrotask:typeof Fb<"u"?function(n){return Fb.resolve(null).then(n).catch(PN)}:ey;function PN(n){setTimeout(function(){throw n})}function nA(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),sh(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);sh(e)}function no(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function kb(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var xc=Math.random().toString(36).slice(2),bs="__reactFiber$"+xc,ch="__reactProps$"+xc,gr="__reactContainer$"+xc,ty="__reactEvents$"+xc,NN="__reactListeners$"+xc,FN="__reactHandles$"+xc;function Ko(n){var e=n[bs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[gr]||t[bs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=kb(n);n!==null;){if(t=n[bs])return t;n=kb(n)}return e}n=t,t=n.parentNode}return null}function kh(n){return n=n[bs]||n[gr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ml(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(re(33))}function am(n){return n[ch]||null}var ny=[],Al=-1;function go(n){return{current:n}}function Lt(n){0>Al||(n.current=ny[Al],ny[Al]=null,Al--)}function Ct(n,e){Al++,ny[Al]=n.current,n.current=e}var ho={},Qn=go(ho),ai=go(!1),ca=ho;function Xl(n,e){var t=n.type.contextTypes;if(!t)return ho;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function li(n){return n=n.childContextTypes,n!=null}function ap(){Lt(ai),Lt(Qn)}function Ub(n,e,t){if(Qn.current!==ho)throw Error(re(168));Ct(Qn,e),Ct(ai,t)}function xT(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(re(108,xP(n)||"Unknown",s));return Ht({},t,i)}function lp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ho,ca=Qn.current,Ct(Qn,n),Ct(ai,ai.current),!0}function Ob(n,e,t){var i=n.stateNode;if(!i)throw Error(re(169));t?(n=xT(n,e,ca),i.__reactInternalMemoizedMergedChildContext=n,Lt(ai),Lt(Qn),Ct(Qn,n)):Lt(ai),Ct(ai,t)}var sr=null,lm=!1,iA=!1;function ET(n){sr===null?sr=[n]:sr.push(n)}function kN(n){lm=!0,ET(n)}function yo(){if(!iA&&sr!==null){iA=!0;var n=0,e=yt;try{var t=sr;for(yt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}sr=null,lm=!1}catch(s){throw sr!==null&&(sr=sr.slice(n+1)),W1(ex,yo),s}finally{yt=e,iA=!1}}return null}var gl=[],yl=0,cp=null,up=0,Fi=[],ki=0,ua=null,or=1,ar="";function Fo(n,e){gl[yl++]=up,gl[yl++]=cp,cp=n,up=e}function bT(n,e,t){Fi[ki++]=or,Fi[ki++]=ar,Fi[ki++]=ua,ua=n;var i=or;n=ar;var s=32-ls(i)-1;i&=~(1<<s),t+=1;var r=32-ls(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,or=1<<32-ls(e)+s|t<<s|i,ar=r+n}else or=1<<r|t<<s|i,ar=n}function cx(n){n.return!==null&&(Fo(n,1),bT(n,1,0))}function ux(n){for(;n===cp;)cp=gl[--yl],gl[yl]=null,up=gl[--yl],gl[yl]=null;for(;n===ua;)ua=Fi[--ki],Fi[ki]=null,ar=Fi[--ki],Fi[ki]=null,or=Fi[--ki],Fi[ki]=null}var Ei=null,yi=null,Ot=!1,ss=null;function _T(n,e){var t=Qi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Qb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ei=n,yi=no(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ei=n,yi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ua!==null?{id:or,overflow:ar}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Qi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ei=n,yi=null,!0):!1;default:return!1}}function iy(n){return(n.mode&1)!==0&&(n.flags&128)===0}function sy(n){if(Ot){var e=yi;if(e){var t=e;if(!Qb(n,e)){if(iy(n))throw Error(re(418));e=no(t.nextSibling);var i=Ei;e&&Qb(n,e)?_T(i,t):(n.flags=n.flags&-4097|2,Ot=!1,Ei=n)}}else{if(iy(n))throw Error(re(418));n.flags=n.flags&-4097|2,Ot=!1,Ei=n}}}function Gb(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ei=n}function ud(n){if(n!==Ei)return!1;if(!Ot)return Gb(n),Ot=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Z0(n.type,n.memoizedProps)),e&&(e=yi)){if(iy(n))throw wT(),Error(re(418));for(;e;)_T(n,e),e=no(e.nextSibling)}if(Gb(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(re(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){yi=no(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}yi=null}}else yi=Ei?no(n.stateNode.nextSibling):null;return!0}function wT(){for(var n=yi;n;)n=no(n.nextSibling)}function Kl(){yi=Ei=null,Ot=!1}function hx(n){ss===null?ss=[n]:ss.push(n)}var UN=xr.ReactCurrentBatchConfig;function Nc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(re(309));var i=t.stateNode}if(!i)throw Error(re(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(re(284));if(!t._owner)throw Error(re(290,n))}return n}function hd(n,e){throw n=Object.prototype.toString.call(e),Error(re(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Vb(n){var e=n._init;return e(n._payload)}function ST(n){function e(p,y){if(n){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function t(p,y){if(!n)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function i(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function s(p,y){return p=oo(p,y),p.index=0,p.sibling=null,p}function r(p,y,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=2,y):v):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,y,v,x){return y===null||y.tag!==6?(y=uA(v,p.mode,x),y.return=p,y):(y=s(y,v),y.return=p,y)}function l(p,y,v,x){var E=v.type;return E===hl?u(p,y,v.props.children,x,v.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kr&&Vb(E)===y.type)?(x=s(y,v.props),x.ref=Nc(p,y,v),x.return=p,x):(x=Lf(v.type,v.key,v.props,null,p.mode,x),x.ref=Nc(p,y,v),x.return=p,x)}function c(p,y,v,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=hA(v,p.mode,x),y.return=p,y):(y=s(y,v.children||[]),y.return=p,y)}function u(p,y,v,x,E){return y===null||y.tag!==7?(y=ia(v,p.mode,x,E),y.return=p,y):(y=s(y,v),y.return=p,y)}function h(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=uA(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ed:return v=Lf(y.type,y.key,y.props,null,p.mode,v),v.ref=Nc(p,null,y),v.return=p,v;case ul:return y=hA(y,p.mode,v),y.return=p,y;case kr:var x=y._init;return h(p,x(y._payload),v)}if(mu(y)||Rc(y))return y=ia(y,p.mode,v,null),y.return=p,y;hd(p,y)}return null}function d(p,y,v,x){var E=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(p,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ed:return v.key===E?l(p,y,v,x):null;case ul:return v.key===E?c(p,y,v,x):null;case kr:return E=v._init,d(p,y,E(v._payload),x)}if(mu(v)||Rc(v))return E!==null?null:u(p,y,v,x,null);hd(p,v)}return null}function f(p,y,v,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(v)||null,a(y,p,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ed:return p=p.get(x.key===null?v:x.key)||null,l(y,p,x,E);case ul:return p=p.get(x.key===null?v:x.key)||null,c(y,p,x,E);case kr:var w=x._init;return f(p,y,v,w(x._payload),E)}if(mu(x)||Rc(x))return p=p.get(v)||null,u(y,p,x,E,null);hd(y,x)}return null}function m(p,y,v,x){for(var E=null,w=null,M=y,C=y=0,S=null;M!==null&&C<v.length;C++){M.index>C?(S=M,M=null):S=M.sibling;var _=d(p,M,v[C],x);if(_===null){M===null&&(M=S);break}n&&M&&_.alternate===null&&e(p,M),y=r(_,y,C),w===null?E=_:w.sibling=_,w=_,M=S}if(C===v.length)return t(p,M),Ot&&Fo(p,C),E;if(M===null){for(;C<v.length;C++)M=h(p,v[C],x),M!==null&&(y=r(M,y,C),w===null?E=M:w.sibling=M,w=M);return Ot&&Fo(p,C),E}for(M=i(p,M);C<v.length;C++)S=f(M,p,C,v[C],x),S!==null&&(n&&S.alternate!==null&&M.delete(S.key===null?C:S.key),y=r(S,y,C),w===null?E=S:w.sibling=S,w=S);return n&&M.forEach(function(R){return e(p,R)}),Ot&&Fo(p,C),E}function g(p,y,v,x){var E=Rc(v);if(typeof E!="function")throw Error(re(150));if(v=E.call(v),v==null)throw Error(re(151));for(var w=E=null,M=y,C=y=0,S=null,_=v.next();M!==null&&!_.done;C++,_=v.next()){M.index>C?(S=M,M=null):S=M.sibling;var R=d(p,M,_.value,x);if(R===null){M===null&&(M=S);break}n&&M&&R.alternate===null&&e(p,M),y=r(R,y,C),w===null?E=R:w.sibling=R,w=R,M=S}if(_.done)return t(p,M),Ot&&Fo(p,C),E;if(M===null){for(;!_.done;C++,_=v.next())_=h(p,_.value,x),_!==null&&(y=r(_,y,C),w===null?E=_:w.sibling=_,w=_);return Ot&&Fo(p,C),E}for(M=i(p,M);!_.done;C++,_=v.next())_=f(M,p,C,_.value,x),_!==null&&(n&&_.alternate!==null&&M.delete(_.key===null?C:_.key),y=r(_,y,C),w===null?E=_:w.sibling=_,w=_);return n&&M.forEach(function(O){return e(p,O)}),Ot&&Fo(p,C),E}function A(p,y,v,x){if(typeof v=="object"&&v!==null&&v.type===hl&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ed:e:{for(var E=v.key,w=y;w!==null;){if(w.key===E){if(E=v.type,E===hl){if(w.tag===7){t(p,w.sibling),y=s(w,v.props.children),y.return=p,p=y;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kr&&Vb(E)===w.type){t(p,w.sibling),y=s(w,v.props),y.ref=Nc(p,w,v),y.return=p,p=y;break e}t(p,w);break}else e(p,w);w=w.sibling}v.type===hl?(y=ia(v.props.children,p.mode,x,v.key),y.return=p,p=y):(x=Lf(v.type,v.key,v.props,null,p.mode,x),x.ref=Nc(p,y,v),x.return=p,p=x)}return o(p);case ul:e:{for(w=v.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){t(p,y.sibling),y=s(y,v.children||[]),y.return=p,p=y;break e}else{t(p,y);break}else e(p,y);y=y.sibling}y=hA(v,p.mode,x),y.return=p,p=y}return o(p);case kr:return w=v._init,A(p,y,w(v._payload),x)}if(mu(v))return m(p,y,v,x);if(Rc(v))return g(p,y,v,x);hd(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(t(p,y.sibling),y=s(y,v),y.return=p,p=y):(t(p,y),y=uA(v,p.mode,x),y.return=p,p=y),o(p)):t(p,y)}return A}var Yl=ST(!0),CT=ST(!1),hp=go(null),dp=null,vl=null,dx=null;function fx(){dx=vl=dp=null}function px(n){var e=hp.current;Lt(hp),n._currentValue=e}function ry(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Ol(n,e){dp=n,dx=vl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(oi=!0),n.firstContext=null)}function zi(n){var e=n._currentValue;if(dx!==n)if(n={context:n,memoizedValue:e,next:null},vl===null){if(dp===null)throw Error(re(308));vl=n,dp.dependencies={lanes:0,firstContext:n}}else vl=vl.next=n;return e}var Yo=null;function mx(n){Yo===null?Yo=[n]:Yo.push(n)}function MT(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,mx(e)):(t.next=s.next,s.next=t),e.interleaved=t,yr(n,i)}function yr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ur=!1;function Ax(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function io(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,at&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,yr(n,t)}return s=i.interleaved,s===null?(e.next=e,mx(i)):(e.next=s.next,s.next=e),i.interleaved=e,yr(n,t)}function Mf(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,tx(n,t)}}function zb(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function fp(n,e,t,i){var s=n.updateQueue;Ur=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,g=a;switch(d=e,f=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,d=typeof m=="function"?m.call(f,h,d):m,d==null)break e;h=Ht({},h,d);break e;case 2:Ur=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);da|=o,n.lanes=o,n.memoizedState=h}}function Hb(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(re(191,s));s.call(i)}}}var Uh={},Cs=go(Uh),uh=go(Uh),hh=go(Uh);function Jo(n){if(n===Uh)throw Error(re(174));return n}function gx(n,e){switch(Ct(hh,e),Ct(uh,n),Ct(Cs,Uh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:O0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=O0(e,n)}Lt(Cs),Ct(Cs,e)}function Jl(){Lt(Cs),Lt(uh),Lt(hh)}function TT(n){Jo(hh.current);var e=Jo(Cs.current),t=O0(e,n.type);e!==t&&(Ct(uh,n),Ct(Cs,t))}function yx(n){uh.current===n&&(Lt(Cs),Lt(uh))}var Gt=go(0);function pp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sA=[];function vx(){for(var n=0;n<sA.length;n++)sA[n]._workInProgressVersionPrimary=null;sA.length=0}var If=xr.ReactCurrentDispatcher,rA=xr.ReactCurrentBatchConfig,ha=0,zt=null,ln=null,pn=null,mp=!1,Nu=!1,dh=0,ON=0;function Tn(){throw Error(re(321))}function xx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ds(n[t],e[t]))return!1;return!0}function Ex(n,e,t,i,s,r){if(ha=r,zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,If.current=n===null||n.memoizedState===null?zN:HN,n=t(i,s),Nu){r=0;do{if(Nu=!1,dh=0,25<=r)throw Error(re(301));r+=1,pn=ln=null,e.updateQueue=null,If.current=jN,n=t(i,s)}while(Nu)}if(If.current=Ap,e=ln!==null&&ln.next!==null,ha=0,pn=ln=zt=null,mp=!1,e)throw Error(re(300));return n}function bx(){var n=dh!==0;return dh=0,n}function ys(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?zt.memoizedState=pn=n:pn=pn.next=n,pn}function Hi(){if(ln===null){var n=zt.alternate;n=n!==null?n.memoizedState:null}else n=ln.next;var e=pn===null?zt.memoizedState:pn.next;if(e!==null)pn=e,ln=n;else{if(n===null)throw Error(re(310));ln=n,n={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},pn===null?zt.memoizedState=pn=n:pn=pn.next=n}return pn}function fh(n,e){return typeof e=="function"?e(n):e}function oA(n){var e=Hi(),t=e.queue;if(t===null)throw Error(re(311));t.lastRenderedReducer=n;var i=ln,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((ha&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,zt.lanes|=u,da|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,ds(i,e.memoizedState)||(oi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,zt.lanes|=r,da|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function aA(n){var e=Hi(),t=e.queue;if(t===null)throw Error(re(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);ds(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function RT(){}function BT(n,e){var t=zt,i=Hi(),s=e(),r=!ds(i.memoizedState,s);if(r&&(i.memoizedState=s,oi=!0),i=i.queue,_x(PT.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||pn!==null&&pn.memoizedState.tag&1){if(t.flags|=2048,ph(9,LT.bind(null,t,i,s,e),void 0,null),vn===null)throw Error(re(349));ha&30||DT(t,e,s)}return s}function DT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function LT(n,e,t,i){e.value=t,e.getSnapshot=i,NT(e)&&FT(n)}function PT(n,e,t){return t(function(){NT(e)&&FT(n)})}function NT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ds(n,t)}catch{return!0}}function FT(n){var e=yr(n,1);e!==null&&cs(e,n,1,-1)}function jb(n){var e=ys();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fh,lastRenderedState:n},e.queue=n,n=n.dispatch=VN.bind(null,zt,n),[e.memoizedState,n]}function ph(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function kT(){return Hi().memoizedState}function Tf(n,e,t,i){var s=ys();zt.flags|=n,s.memoizedState=ph(1|e,t,void 0,i===void 0?null:i)}function cm(n,e,t,i){var s=Hi();i=i===void 0?null:i;var r=void 0;if(ln!==null){var o=ln.memoizedState;if(r=o.destroy,i!==null&&xx(i,o.deps)){s.memoizedState=ph(e,t,r,i);return}}zt.flags|=n,s.memoizedState=ph(1|e,t,r,i)}function Wb(n,e){return Tf(8390656,8,n,e)}function _x(n,e){return cm(2048,8,n,e)}function UT(n,e){return cm(4,2,n,e)}function OT(n,e){return cm(4,4,n,e)}function QT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function GT(n,e,t){return t=t!=null?t.concat([n]):null,cm(4,4,QT.bind(null,e,n),t)}function wx(){}function VT(n,e){var t=Hi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&xx(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function zT(n,e){var t=Hi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&xx(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function HT(n,e,t){return ha&21?(ds(t,e)||(t=X1(),zt.lanes|=t,da|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,oi=!0),n.memoizedState=t)}function QN(n,e){var t=yt;yt=t!==0&&4>t?t:4,n(!0);var i=rA.transition;rA.transition={};try{n(!1),e()}finally{yt=t,rA.transition=i}}function jT(){return Hi().memoizedState}function GN(n,e,t){var i=ro(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},WT(n))qT(e,t);else if(t=MT(n,e,t,i),t!==null){var s=Jn();cs(t,n,i,s),$T(t,e,i)}}function VN(n,e,t){var i=ro(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(WT(n))qT(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,ds(a,o)){var l=e.interleaved;l===null?(s.next=s,mx(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=MT(n,e,s,i),t!==null&&(s=Jn(),cs(t,n,i,s),$T(t,e,i))}}function WT(n){var e=n.alternate;return n===zt||e!==null&&e===zt}function qT(n,e){Nu=mp=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function $T(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,tx(n,t)}}var Ap={readContext:zi,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},zN={readContext:zi,useCallback:function(n,e){return ys().memoizedState=[n,e===void 0?null:e],n},useContext:zi,useEffect:Wb,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Tf(4194308,4,QT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Tf(4194308,4,n,e)},useInsertionEffect:function(n,e){return Tf(4,2,n,e)},useMemo:function(n,e){var t=ys();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=ys();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=GN.bind(null,zt,n),[i.memoizedState,n]},useRef:function(n){var e=ys();return n={current:n},e.memoizedState=n},useState:jb,useDebugValue:wx,useDeferredValue:function(n){return ys().memoizedState=n},useTransition:function(){var n=jb(!1),e=n[0];return n=QN.bind(null,n[1]),ys().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=zt,s=ys();if(Ot){if(t===void 0)throw Error(re(407));t=t()}else{if(t=e(),vn===null)throw Error(re(349));ha&30||DT(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,Wb(PT.bind(null,i,r,n),[n]),i.flags|=2048,ph(9,LT.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=ys(),e=vn.identifierPrefix;if(Ot){var t=ar,i=or;t=(i&~(1<<32-ls(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=dh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ON++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},HN={readContext:zi,useCallback:VT,useContext:zi,useEffect:_x,useImperativeHandle:GT,useInsertionEffect:UT,useLayoutEffect:OT,useMemo:zT,useReducer:oA,useRef:kT,useState:function(){return oA(fh)},useDebugValue:wx,useDeferredValue:function(n){var e=Hi();return HT(e,ln.memoizedState,n)},useTransition:function(){var n=oA(fh)[0],e=Hi().memoizedState;return[n,e]},useMutableSource:RT,useSyncExternalStore:BT,useId:jT,unstable_isNewReconciler:!1},jN={readContext:zi,useCallback:VT,useContext:zi,useEffect:_x,useImperativeHandle:GT,useInsertionEffect:UT,useLayoutEffect:OT,useMemo:zT,useReducer:aA,useRef:kT,useState:function(){return aA(fh)},useDebugValue:wx,useDeferredValue:function(n){var e=Hi();return ln===null?e.memoizedState=n:HT(e,ln.memoizedState,n)},useTransition:function(){var n=aA(fh)[0],e=Hi().memoizedState;return[n,e]},useMutableSource:RT,useSyncExternalStore:BT,useId:jT,unstable_isNewReconciler:!1};function ns(n,e){if(n&&n.defaultProps){e=Ht({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function oy(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Ht({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var um={isMounted:function(n){return(n=n._reactInternals)?_a(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Jn(),s=ro(n),r=hr(i,s);r.payload=e,t!=null&&(r.callback=t),e=io(n,r,s),e!==null&&(cs(e,n,s,i),Mf(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Jn(),s=ro(n),r=hr(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=io(n,r,s),e!==null&&(cs(e,n,s,i),Mf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Jn(),i=ro(n),s=hr(t,i);s.tag=2,e!=null&&(s.callback=e),e=io(n,s,i),e!==null&&(cs(e,n,i,t),Mf(e,n,i))}};function qb(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!oh(t,i)||!oh(s,r):!0}function XT(n,e,t){var i=!1,s=ho,r=e.contextType;return typeof r=="object"&&r!==null?r=zi(r):(s=li(e)?ca:Qn.current,i=e.contextTypes,r=(i=i!=null)?Xl(n,s):ho),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=um,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function $b(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&um.enqueueReplaceState(e,e.state,null)}function ay(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Ax(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=zi(r):(r=li(e)?ca:Qn.current,s.context=Xl(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(oy(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&um.enqueueReplaceState(s,s.state,null),fp(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Zl(n,e){try{var t="",i=e;do t+=vP(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function lA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ly(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var WN=typeof WeakMap=="function"?WeakMap:Map;function KT(n,e,t){t=hr(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){yp||(yp=!0,yy=i),ly(n,e)},t}function YT(n,e,t){t=hr(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){ly(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){ly(n,e),typeof i!="function"&&(so===null?so=new Set([this]):so.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Xb(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new WN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=oF.bind(null,n,e,t),e.then(n,n))}function Kb(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Yb(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=hr(-1,1),e.tag=2,io(t,e,1))),t.lanes|=1),n)}var qN=xr.ReactCurrentOwner,oi=!1;function qn(n,e,t,i){e.child=n===null?CT(e,null,t,i):Yl(e,n.child,t,i)}function Jb(n,e,t,i,s){t=t.render;var r=e.ref;return Ol(e,s),i=Ex(n,e,t,i,r,s),t=bx(),n!==null&&!oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,vr(n,e,s)):(Ot&&t&&cx(e),e.flags|=1,qn(n,e,i,s),e.child)}function Zb(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!Dx(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,JT(n,e,r,i,s)):(n=Lf(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:oh,t(o,i)&&n.ref===e.ref)return vr(n,e,s)}return e.flags|=1,n=oo(r,i),n.ref=e.ref,n.return=e,e.child=n}function JT(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(oh(r,i)&&n.ref===e.ref)if(oi=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(oi=!0);else return e.lanes=n.lanes,vr(n,e,s)}return cy(n,e,t,i,s)}function ZT(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(El,mi),mi|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ct(El,mi),mi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,Ct(El,mi),mi|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,Ct(El,mi),mi|=i;return qn(n,e,s,t),e.child}function eR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function cy(n,e,t,i,s){var r=li(t)?ca:Qn.current;return r=Xl(e,r),Ol(e,s),t=Ex(n,e,t,i,r,s),i=bx(),n!==null&&!oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,vr(n,e,s)):(Ot&&i&&cx(e),e.flags|=1,qn(n,e,t,s),e.child)}function e_(n,e,t,i,s){if(li(t)){var r=!0;lp(e)}else r=!1;if(Ol(e,s),e.stateNode===null)Rf(n,e),XT(e,t,i),ay(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=zi(c):(c=li(t)?ca:Qn.current,c=Xl(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&$b(e,o,i,c),Ur=!1;var d=e.memoizedState;o.state=d,fp(e,i,o,s),l=e.memoizedState,a!==i||d!==l||ai.current||Ur?(typeof u=="function"&&(oy(e,t,u,i),l=e.memoizedState),(a=Ur||qb(e,t,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,IT(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:ns(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=zi(l):(l=li(t)?ca:Qn.current,l=Xl(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&$b(e,o,i,l),Ur=!1,d=e.memoizedState,o.state=d,fp(e,i,o,s);var m=e.memoizedState;a!==h||d!==m||ai.current||Ur?(typeof f=="function"&&(oy(e,t,f,i),m=e.memoizedState),(c=Ur||qb(e,t,c,i,d,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),i=!1)}return uy(n,e,t,i,r,s)}function uy(n,e,t,i,s,r){eR(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&Ob(e,t,!1),vr(n,e,r);i=e.stateNode,qN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Yl(e,n.child,null,r),e.child=Yl(e,null,a,r)):qn(n,e,a,r),e.memoizedState=i.state,s&&Ob(e,t,!0),e.child}function tR(n){var e=n.stateNode;e.pendingContext?Ub(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Ub(n,e.context,!1),gx(n,e.containerInfo)}function t_(n,e,t,i,s){return Kl(),hx(s),e.flags|=256,qn(n,e,t,i),e.child}var hy={dehydrated:null,treeContext:null,retryLane:0};function dy(n){return{baseLanes:n,cachePool:null,transitions:null}}function nR(n,e,t){var i=e.pendingProps,s=Gt.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Ct(Gt,s&1),n===null)return sy(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=fm(o,i,0,null),n=ia(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=dy(t),e.memoizedState=hy,n):Sx(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return $N(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=oo(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=oo(a,r):(r=ia(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?dy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=hy,i}return r=n.child,n=r.sibling,i=oo(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Sx(n,e){return e=fm({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function dd(n,e,t,i){return i!==null&&hx(i),Yl(e,n.child,null,t),n=Sx(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function $N(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=lA(Error(re(422))),dd(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=fm({mode:"visible",children:i.children},s,0,null),r=ia(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Yl(e,n.child,null,o),e.child.memoizedState=dy(o),e.memoizedState=hy,r);if(!(e.mode&1))return dd(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(re(419)),i=lA(r,i,void 0),dd(n,e,o,i)}if(a=(o&n.childLanes)!==0,oi||a){if(i=vn,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,yr(n,s),cs(i,n,s,-1))}return Bx(),i=lA(Error(re(421))),dd(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=aF.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,yi=no(s.nextSibling),Ei=e,Ot=!0,ss=null,n!==null&&(Fi[ki++]=or,Fi[ki++]=ar,Fi[ki++]=ua,or=n.id,ar=n.overflow,ua=e),e=Sx(e,i.children),e.flags|=4096,e)}function n_(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),ry(n.return,e,t)}function cA(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function iR(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(qn(n,e,i.children,t),i=Gt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&n_(n,t,e);else if(n.tag===19)n_(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Ct(Gt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&pp(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),cA(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&pp(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}cA(e,!0,t,null,r);break;case"together":cA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function vr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),da|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(re(153));if(e.child!==null){for(n=e.child,t=oo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=oo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function XN(n,e,t){switch(e.tag){case 3:tR(e),Kl();break;case 5:TT(e);break;case 1:li(e.type)&&lp(e);break;case 4:gx(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ct(hp,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ct(Gt,Gt.current&1),e.flags|=128,null):t&e.child.childLanes?nR(n,e,t):(Ct(Gt,Gt.current&1),n=vr(n,e,t),n!==null?n.sibling:null);Ct(Gt,Gt.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return iR(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ct(Gt,Gt.current),i)break;return null;case 22:case 23:return e.lanes=0,ZT(n,e,t)}return vr(n,e,t)}var sR,fy,rR,oR;sR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};fy=function(){};rR=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Jo(Cs.current);var r=null;switch(t){case"input":s=N0(n,s),i=N0(n,i),r=[];break;case"select":s=Ht({},s,{value:void 0}),i=Ht({},i,{value:void 0}),r=[];break;case"textarea":s=U0(n,s),i=U0(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=op)}Q0(t,i);var o;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zu.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Bt("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};oR=function(n,e,t,i){t!==i&&(e.flags|=4)};function Fc(n,e){if(!Ot)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Rn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function KN(n,e,t){var i=e.pendingProps;switch(ux(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(e),null;case 1:return li(e.type)&&ap(),Rn(e),null;case 3:return i=e.stateNode,Jl(),Lt(ai),Lt(Qn),vx(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(ud(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(Ey(ss),ss=null))),fy(n,e),Rn(e),null;case 5:yx(e);var s=Jo(hh.current);if(t=e.type,n!==null&&e.stateNode!=null)rR(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(re(166));return Rn(e),null}if(n=Jo(Cs.current),ud(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[bs]=e,i[ch]=r,n=(e.mode&1)!==0,t){case"dialog":Bt("cancel",i),Bt("close",i);break;case"iframe":case"object":case"embed":Bt("load",i);break;case"video":case"audio":for(s=0;s<gu.length;s++)Bt(gu[s],i);break;case"source":Bt("error",i);break;case"img":case"image":case"link":Bt("error",i),Bt("load",i);break;case"details":Bt("toggle",i);break;case"input":hb(i,r),Bt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Bt("invalid",i);break;case"textarea":fb(i,r),Bt("invalid",i)}Q0(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&cd(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&cd(i.textContent,a,n),s=["children",""+a]):Zu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Bt("scroll",i)}switch(t){case"input":td(i),db(i,r,!0);break;case"textarea":td(i),pb(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=op)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=P1(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[bs]=e,n[ch]=i,sR(n,e,!1,!1),e.stateNode=n;e:{switch(o=G0(t,i),t){case"dialog":Bt("cancel",n),Bt("close",n),s=i;break;case"iframe":case"object":case"embed":Bt("load",n),s=i;break;case"video":case"audio":for(s=0;s<gu.length;s++)Bt(gu[s],n);s=i;break;case"source":Bt("error",n),s=i;break;case"img":case"image":case"link":Bt("error",n),Bt("load",n),s=i;break;case"details":Bt("toggle",n),s=i;break;case"input":hb(n,i),s=N0(n,i),Bt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ht({},i,{value:void 0}),Bt("invalid",n);break;case"textarea":fb(n,i),s=U0(n,i),Bt("invalid",n);break;default:s=i}Q0(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?k1(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&N1(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&eh(n,l):typeof l=="number"&&eh(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Zu.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Bt("scroll",n):l!=null&&Xv(n,r,l,o))}switch(t){case"input":td(n),db(n,i,!1);break;case"textarea":td(n),pb(n);break;case"option":i.value!=null&&n.setAttribute("value",""+uo(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?Nl(n,!!i.multiple,r,!1):i.defaultValue!=null&&Nl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=op)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rn(e),null;case 6:if(n&&e.stateNode!=null)oR(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(re(166));if(t=Jo(hh.current),Jo(Cs.current),ud(e)){if(i=e.stateNode,t=e.memoizedProps,i[bs]=e,(r=i.nodeValue!==t)&&(n=Ei,n!==null))switch(n.tag){case 3:cd(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cd(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[bs]=e,e.stateNode=i}return Rn(e),null;case 13:if(Lt(Gt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ot&&yi!==null&&e.mode&1&&!(e.flags&128))wT(),Kl(),e.flags|=98560,r=!1;else if(r=ud(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(re(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(re(317));r[bs]=e}else Kl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rn(e),r=!1}else ss!==null&&(Ey(ss),ss=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Gt.current&1?cn===0&&(cn=3):Bx())),e.updateQueue!==null&&(e.flags|=4),Rn(e),null);case 4:return Jl(),fy(n,e),n===null&&ah(e.stateNode.containerInfo),Rn(e),null;case 10:return px(e.type._context),Rn(e),null;case 17:return li(e.type)&&ap(),Rn(e),null;case 19:if(Lt(Gt),r=e.memoizedState,r===null)return Rn(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)Fc(r,!1);else{if(cn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=pp(n),o!==null){for(e.flags|=128,Fc(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ct(Gt,Gt.current&1|2),e.child}n=n.sibling}r.tail!==null&&Zt()>ec&&(e.flags|=128,i=!0,Fc(r,!1),e.lanes=4194304)}else{if(!i)if(n=pp(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Fc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ot)return Rn(e),null}else 2*Zt()-r.renderingStartTime>ec&&t!==1073741824&&(e.flags|=128,i=!0,Fc(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Zt(),e.sibling=null,t=Gt.current,Ct(Gt,i?t&1|2:t&1),e):(Rn(e),null);case 22:case 23:return Rx(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?mi&1073741824&&(Rn(e),e.subtreeFlags&6&&(e.flags|=8192)):Rn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function YN(n,e){switch(ux(e),e.tag){case 1:return li(e.type)&&ap(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Jl(),Lt(ai),Lt(Qn),vx(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return yx(e),null;case 13:if(Lt(Gt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Kl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Lt(Gt),null;case 4:return Jl(),null;case 10:return px(e.type._context),null;case 22:case 23:return Rx(),null;case 24:return null;default:return null}}var fd=!1,kn=!1,JN=typeof WeakSet=="function"?WeakSet:Set,ge=null;function xl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){$t(n,e,i)}else t.current=null}function py(n,e,t){try{t()}catch(i){$t(n,e,i)}}var i_=!1;function ZN(n,e){if(Y0=ip,n=hT(),lx(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===s&&(a=o),d===r&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(J0={focusedElem:n,selectionRange:t},ip=!1,ge=e;ge!==null;)if(e=ge,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ge=n;else for(;ge!==null;){e=ge;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,A=m.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:ns(e.type,g),A);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(x){$t(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}return m=i_,i_=!1,m}function Fu(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&py(e,t,r)}s=s.next}while(s!==i)}}function hm(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function my(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aR(n){var e=n.alternate;e!==null&&(n.alternate=null,aR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[bs],delete e[ch],delete e[ty],delete e[NN],delete e[FN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lR(n){return n.tag===5||n.tag===3||n.tag===4}function s_(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ay(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=op));else if(i!==4&&(n=n.child,n!==null))for(Ay(n,e,t),n=n.sibling;n!==null;)Ay(n,e,t),n=n.sibling}function gy(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(gy(n,e,t),n=n.sibling;n!==null;)gy(n,e,t),n=n.sibling}var En=null,is=!1;function _r(n,e,t){for(t=t.child;t!==null;)cR(n,e,t),t=t.sibling}function cR(n,e,t){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(im,t)}catch{}switch(t.tag){case 5:kn||xl(t,e);case 6:var i=En,s=is;En=null,_r(n,e,t),En=i,is=s,En!==null&&(is?(n=En,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):En.removeChild(t.stateNode));break;case 18:En!==null&&(is?(n=En,t=t.stateNode,n.nodeType===8?nA(n.parentNode,t):n.nodeType===1&&nA(n,t),sh(n)):nA(En,t.stateNode));break;case 4:i=En,s=is,En=t.stateNode.containerInfo,is=!0,_r(n,e,t),En=i,is=s;break;case 0:case 11:case 14:case 15:if(!kn&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&py(t,e,o),s=s.next}while(s!==i)}_r(n,e,t);break;case 1:if(!kn&&(xl(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){$t(t,e,a)}_r(n,e,t);break;case 21:_r(n,e,t);break;case 22:t.mode&1?(kn=(i=kn)||t.memoizedState!==null,_r(n,e,t),kn=i):_r(n,e,t);break;default:_r(n,e,t)}}function r_(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new JN),e.forEach(function(i){var s=lF.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Ki(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:En=a.stateNode,is=!1;break e;case 3:En=a.stateNode.containerInfo,is=!0;break e;case 4:En=a.stateNode.containerInfo,is=!0;break e}a=a.return}if(En===null)throw Error(re(160));cR(r,o,s),En=null,is=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){$t(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uR(e,n),e=e.sibling}function uR(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ki(e,n),As(n),i&4){try{Fu(3,n,n.return),hm(3,n)}catch(g){$t(n,n.return,g)}try{Fu(5,n,n.return)}catch(g){$t(n,n.return,g)}}break;case 1:Ki(e,n),As(n),i&512&&t!==null&&xl(t,t.return);break;case 5:if(Ki(e,n),As(n),i&512&&t!==null&&xl(t,t.return),n.flags&32){var s=n.stateNode;try{eh(s,"")}catch(g){$t(n,n.return,g)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&D1(s,r),G0(a,o);var c=G0(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?k1(s,h):u==="dangerouslySetInnerHTML"?N1(s,h):u==="children"?eh(s,h):Xv(s,u,h,c)}switch(a){case"input":F0(s,r);break;case"textarea":L1(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?Nl(s,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?Nl(s,!!r.multiple,r.defaultValue,!0):Nl(s,!!r.multiple,r.multiple?[]:"",!1))}s[ch]=r}catch(g){$t(n,n.return,g)}}break;case 6:if(Ki(e,n),As(n),i&4){if(n.stateNode===null)throw Error(re(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(g){$t(n,n.return,g)}}break;case 3:if(Ki(e,n),As(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{sh(e.containerInfo)}catch(g){$t(n,n.return,g)}break;case 4:Ki(e,n),As(n);break;case 13:Ki(e,n),As(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Ix=Zt())),i&4&&r_(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(kn=(c=kn)||u,Ki(e,n),kn=c):Ki(e,n),As(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(ge=n,u=n.child;u!==null;){for(h=ge=u;ge!==null;){switch(d=ge,f=d.child,d.tag){case 0:case 11:case 14:case 15:Fu(4,d,d.return);break;case 1:xl(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){i=d,t=d.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){$t(i,t,g)}}break;case 5:xl(d,d.return);break;case 22:if(d.memoizedState!==null){a_(h);continue}}f!==null?(f.return=d,ge=f):a_(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=F1("display",o))}catch(g){$t(n,n.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){$t(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ki(e,n),As(n),i&4&&r_(n);break;case 21:break;default:Ki(e,n),As(n)}}function As(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lR(t)){var i=t;break e}t=t.return}throw Error(re(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(eh(s,""),i.flags&=-33);var r=s_(n);gy(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=s_(n);Ay(n,a,o);break;default:throw Error(re(161))}}catch(l){$t(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function eF(n,e,t){ge=n,hR(n)}function hR(n,e,t){for(var i=(n.mode&1)!==0;ge!==null;){var s=ge,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||fd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||kn;a=fd;var c=kn;if(fd=o,(kn=l)&&!c)for(ge=s;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?l_(s):l!==null?(l.return=o,ge=l):l_(s);for(;r!==null;)ge=r,hR(r),r=r.sibling;ge=s,fd=a,kn=c}o_(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,ge=r):o_(n)}}function o_(n){for(;ge!==null;){var e=ge;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kn||hm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!kn)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ns(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Hb(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Hb(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&sh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}kn||e.flags&512&&my(e)}catch(d){$t(e,e.return,d)}}if(e===n){ge=null;break}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}}function a_(n){for(;ge!==null;){var e=ge;if(e===n){ge=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ge=t;break}ge=e.return}}function l_(n){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hm(4,e)}catch(l){$t(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){$t(e,s,l)}}var r=e.return;try{my(e)}catch(l){$t(e,r,l)}break;case 5:var o=e.return;try{my(e)}catch(l){$t(e,o,l)}}}catch(l){$t(e,e.return,l)}if(e===n){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var tF=Math.ceil,gp=xr.ReactCurrentDispatcher,Cx=xr.ReactCurrentOwner,Vi=xr.ReactCurrentBatchConfig,at=0,vn=null,sn=null,Sn=0,mi=0,El=go(0),cn=0,mh=null,da=0,dm=0,Mx=0,ku=null,ri=null,Ix=0,ec=1/0,nr=null,yp=!1,yy=null,so=null,pd=!1,Wr=null,vp=0,Uu=0,vy=null,Bf=-1,Df=0;function Jn(){return at&6?Zt():Bf!==-1?Bf:Bf=Zt()}function ro(n){return n.mode&1?at&2&&Sn!==0?Sn&-Sn:UN.transition!==null?(Df===0&&(Df=X1()),Df):(n=yt,n!==0||(n=window.event,n=n===void 0?16:nT(n.type)),n):1}function cs(n,e,t,i){if(50<Uu)throw Uu=0,vy=null,Error(re(185));Nh(n,t,i),(!(at&2)||n!==vn)&&(n===vn&&(!(at&2)&&(dm|=t),cn===4&&Gr(n,Sn)),ci(n,i),t===1&&at===0&&!(e.mode&1)&&(ec=Zt()+500,lm&&yo()))}function ci(n,e){var t=n.callbackNode;UP(n,e);var i=np(n,n===vn?Sn:0);if(i===0)t!==null&&gb(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&gb(t),e===1)n.tag===0?kN(c_.bind(null,n)):ET(c_.bind(null,n)),LN(function(){!(at&6)&&yo()}),t=null;else{switch(K1(i)){case 1:t=ex;break;case 4:t=q1;break;case 16:t=tp;break;case 536870912:t=$1;break;default:t=tp}t=vR(t,dR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dR(n,e){if(Bf=-1,Df=0,at&6)throw Error(re(327));var t=n.callbackNode;if(Ql()&&n.callbackNode!==t)return null;var i=np(n,n===vn?Sn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=xp(n,i);else{e=i;var s=at;at|=2;var r=pR();(vn!==n||Sn!==e)&&(nr=null,ec=Zt()+500,na(n,e));do try{sF();break}catch(a){fR(n,a)}while(!0);fx(),gp.current=r,at=s,sn!==null?e=0:(vn=null,Sn=0,e=cn)}if(e!==0){if(e===2&&(s=W0(n),s!==0&&(i=s,e=xy(n,s))),e===1)throw t=mh,na(n,0),Gr(n,i),ci(n,Zt()),t;if(e===6)Gr(n,i);else{if(s=n.current.alternate,!(i&30)&&!nF(s)&&(e=xp(n,i),e===2&&(r=W0(n),r!==0&&(i=r,e=xy(n,r))),e===1))throw t=mh,na(n,0),Gr(n,i),ci(n,Zt()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(re(345));case 2:ko(n,ri,nr);break;case 3:if(Gr(n,i),(i&130023424)===i&&(e=Ix+500-Zt(),10<e)){if(np(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Jn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=ey(ko.bind(null,n,ri,nr),e);break}ko(n,ri,nr);break;case 4:if(Gr(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-ls(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Zt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tF(i/1960))-i,10<i){n.timeoutHandle=ey(ko.bind(null,n,ri,nr),i);break}ko(n,ri,nr);break;case 5:ko(n,ri,nr);break;default:throw Error(re(329))}}}return ci(n,Zt()),n.callbackNode===t?dR.bind(null,n):null}function xy(n,e){var t=ku;return n.current.memoizedState.isDehydrated&&(na(n,e).flags|=256),n=xp(n,e),n!==2&&(e=ri,ri=t,e!==null&&Ey(e)),n}function Ey(n){ri===null?ri=n:ri.push.apply(ri,n)}function nF(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!ds(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(n,e){for(e&=~Mx,e&=~dm,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ls(e),i=1<<t;n[t]=-1,e&=~i}}function c_(n){if(at&6)throw Error(re(327));Ql();var e=np(n,0);if(!(e&1))return ci(n,Zt()),null;var t=xp(n,e);if(n.tag!==0&&t===2){var i=W0(n);i!==0&&(e=i,t=xy(n,i))}if(t===1)throw t=mh,na(n,0),Gr(n,e),ci(n,Zt()),t;if(t===6)throw Error(re(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ko(n,ri,nr),ci(n,Zt()),null}function Tx(n,e){var t=at;at|=1;try{return n(e)}finally{at=t,at===0&&(ec=Zt()+500,lm&&yo())}}function fa(n){Wr!==null&&Wr.tag===0&&!(at&6)&&Ql();var e=at;at|=1;var t=Vi.transition,i=yt;try{if(Vi.transition=null,yt=1,n)return n()}finally{yt=i,Vi.transition=t,at=e,!(at&6)&&yo()}}function Rx(){mi=El.current,Lt(El)}function na(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,DN(t)),sn!==null)for(t=sn.return;t!==null;){var i=t;switch(ux(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ap();break;case 3:Jl(),Lt(ai),Lt(Qn),vx();break;case 5:yx(i);break;case 4:Jl();break;case 13:Lt(Gt);break;case 19:Lt(Gt);break;case 10:px(i.type._context);break;case 22:case 23:Rx()}t=t.return}if(vn=n,sn=n=oo(n.current,null),Sn=mi=e,cn=0,mh=null,Mx=dm=da=0,ri=ku=null,Yo!==null){for(e=0;e<Yo.length;e++)if(t=Yo[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Yo=null}return n}function fR(n,e){do{var t=sn;try{if(fx(),If.current=Ap,mp){for(var i=zt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}mp=!1}if(ha=0,pn=ln=zt=null,Nu=!1,dh=0,Cx.current=null,t===null||t.return===null){cn=1,mh=e,sn=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=Sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Kb(o);if(f!==null){f.flags&=-257,Yb(f,o,a,r,e),f.mode&1&&Xb(r,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){Xb(r,c,e),Bx();break e}l=Error(re(426))}}else if(Ot&&a.mode&1){var A=Kb(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Yb(A,o,a,r,e),hx(Zl(l,a));break e}}r=l=Zl(l,a),cn!==4&&(cn=2),ku===null?ku=[r]:ku.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var p=KT(r,l,e);zb(r,p);break e;case 1:a=l;var y=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(so===null||!so.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var x=YT(r,a,e);zb(r,x);break e}}r=r.return}while(r!==null)}AR(t)}catch(E){e=E,sn===t&&t!==null&&(sn=t=t.return);continue}break}while(!0)}function pR(){var n=gp.current;return gp.current=Ap,n===null?Ap:n}function Bx(){(cn===0||cn===3||cn===2)&&(cn=4),vn===null||!(da&268435455)&&!(dm&268435455)||Gr(vn,Sn)}function xp(n,e){var t=at;at|=2;var i=pR();(vn!==n||Sn!==e)&&(nr=null,na(n,e));do try{iF();break}catch(s){fR(n,s)}while(!0);if(fx(),at=t,gp.current=i,sn!==null)throw Error(re(261));return vn=null,Sn=0,cn}function iF(){for(;sn!==null;)mR(sn)}function sF(){for(;sn!==null&&!TP();)mR(sn)}function mR(n){var e=yR(n.alternate,n,mi);n.memoizedProps=n.pendingProps,e===null?AR(n):sn=e,Cx.current=null}function AR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=YN(t,e),t!==null){t.flags&=32767,sn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{cn=6,sn=null;return}}else if(t=KN(t,e,mi),t!==null){sn=t;return}if(e=e.sibling,e!==null){sn=e;return}sn=e=n}while(e!==null);cn===0&&(cn=5)}function ko(n,e,t){var i=yt,s=Vi.transition;try{Vi.transition=null,yt=1,rF(n,e,t,i)}finally{Vi.transition=s,yt=i}return null}function rF(n,e,t,i){do Ql();while(Wr!==null);if(at&6)throw Error(re(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(re(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(OP(n,r),n===vn&&(sn=vn=null,Sn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||pd||(pd=!0,vR(tp,function(){return Ql(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Vi.transition,Vi.transition=null;var o=yt;yt=1;var a=at;at|=4,Cx.current=null,ZN(n,t),uR(t,n),SN(J0),ip=!!Y0,J0=Y0=null,n.current=t,eF(t),RP(),at=a,yt=o,Vi.transition=r}else n.current=t;if(pd&&(pd=!1,Wr=n,vp=s),r=n.pendingLanes,r===0&&(so=null),LP(t.stateNode),ci(n,Zt()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(yp)throw yp=!1,n=yy,yy=null,n;return vp&1&&n.tag!==0&&Ql(),r=n.pendingLanes,r&1?n===vy?Uu++:(Uu=0,vy=n):Uu=0,yo(),null}function Ql(){if(Wr!==null){var n=K1(vp),e=Vi.transition,t=yt;try{if(Vi.transition=null,yt=16>n?16:n,Wr===null)var i=!1;else{if(n=Wr,Wr=null,vp=0,at&6)throw Error(re(331));var s=at;for(at|=4,ge=n.current;ge!==null;){var r=ge,o=r.child;if(ge.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ge=c;ge!==null;){var u=ge;switch(u.tag){case 0:case 11:case 15:Fu(8,u,r)}var h=u.child;if(h!==null)h.return=u,ge=h;else for(;ge!==null;){u=ge;var d=u.sibling,f=u.return;if(aR(u),u===c){ge=null;break}if(d!==null){d.return=f,ge=d;break}ge=f}}}var m=r.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var A=g.sibling;g.sibling=null,g=A}while(g!==null)}}ge=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,ge=o;else e:for(;ge!==null;){if(r=ge,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Fu(9,r,r.return)}var p=r.sibling;if(p!==null){p.return=r.return,ge=p;break e}ge=r.return}}var y=n.current;for(ge=y;ge!==null;){o=ge;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ge=v;else e:for(o=y;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hm(9,a)}}catch(E){$t(a,a.return,E)}if(a===o){ge=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ge=x;break e}ge=a.return}}if(at=s,yo(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(im,n)}catch{}i=!0}return i}finally{yt=t,Vi.transition=e}}return!1}function u_(n,e,t){e=Zl(t,e),e=KT(n,e,1),n=io(n,e,1),e=Jn(),n!==null&&(Nh(n,1,e),ci(n,e))}function $t(n,e,t){if(n.tag===3)u_(n,n,t);else for(;e!==null;){if(e.tag===3){u_(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(so===null||!so.has(i))){n=Zl(t,n),n=YT(e,n,1),e=io(e,n,1),n=Jn(),e!==null&&(Nh(e,1,n),ci(e,n));break}}e=e.return}}function oF(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Jn(),n.pingedLanes|=n.suspendedLanes&t,vn===n&&(Sn&t)===t&&(cn===4||cn===3&&(Sn&130023424)===Sn&&500>Zt()-Ix?na(n,0):Mx|=t),ci(n,e)}function gR(n,e){e===0&&(n.mode&1?(e=sd,sd<<=1,!(sd&130023424)&&(sd=4194304)):e=1);var t=Jn();n=yr(n,e),n!==null&&(Nh(n,e,t),ci(n,t))}function aF(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),gR(n,t)}function lF(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(re(314))}i!==null&&i.delete(e),gR(n,t)}var yR;yR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ai.current)oi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return oi=!1,XN(n,e,t);oi=!!(n.flags&131072)}else oi=!1,Ot&&e.flags&1048576&&bT(e,up,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Rf(n,e),n=e.pendingProps;var s=Xl(e,Qn.current);Ol(e,t),s=Ex(null,e,i,n,s,t);var r=bx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,li(i)?(r=!0,lp(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ax(e),s.updater=um,e.stateNode=s,s._reactInternals=e,ay(e,i,n,t),e=uy(null,e,i,!0,r,t)):(e.tag=0,Ot&&r&&cx(e),qn(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Rf(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=uF(i),n=ns(i,n),s){case 0:e=cy(null,e,i,n,t);break e;case 1:e=e_(null,e,i,n,t);break e;case 11:e=Jb(null,e,i,n,t);break e;case 14:e=Zb(null,e,i,ns(i.type,n),t);break e}throw Error(re(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ns(i,s),cy(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ns(i,s),e_(n,e,i,s,t);case 3:e:{if(tR(e),n===null)throw Error(re(387));i=e.pendingProps,r=e.memoizedState,s=r.element,IT(n,e),fp(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Zl(Error(re(423)),e),e=t_(n,e,i,t,s);break e}else if(i!==s){s=Zl(Error(re(424)),e),e=t_(n,e,i,t,s);break e}else for(yi=no(e.stateNode.containerInfo.firstChild),Ei=e,Ot=!0,ss=null,t=CT(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Kl(),i===s){e=vr(n,e,t);break e}qn(n,e,i,t)}e=e.child}return e;case 5:return TT(e),n===null&&sy(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,Z0(i,s)?o=null:r!==null&&Z0(i,r)&&(e.flags|=32),eR(n,e),qn(n,e,o,t),e.child;case 6:return n===null&&sy(e),null;case 13:return nR(n,e,t);case 4:return gx(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Yl(e,null,i,t):qn(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ns(i,s),Jb(n,e,i,s,t);case 7:return qn(n,e,e.pendingProps,t),e.child;case 8:return qn(n,e,e.pendingProps.children,t),e.child;case 12:return qn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,Ct(hp,i._currentValue),i._currentValue=o,r!==null)if(ds(r.value,o)){if(r.children===s.children&&!ai.current){e=vr(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=hr(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),ry(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(re(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),ry(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}qn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Ol(e,t),s=zi(s),i=i(s),e.flags|=1,qn(n,e,i,t),e.child;case 14:return i=e.type,s=ns(i,e.pendingProps),s=ns(i.type,s),Zb(n,e,i,s,t);case 15:return JT(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ns(i,s),Rf(n,e),e.tag=1,li(i)?(n=!0,lp(e)):n=!1,Ol(e,t),XT(e,i,s),ay(e,i,s,t),uy(null,e,i,!0,n,t);case 19:return iR(n,e,t);case 22:return ZT(n,e,t)}throw Error(re(156,e.tag))};function vR(n,e){return W1(n,e)}function cF(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(n,e,t,i){return new cF(n,e,t,i)}function Dx(n){return n=n.prototype,!(!n||!n.isReactComponent)}function uF(n){if(typeof n=="function")return Dx(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Yv)return 11;if(n===Jv)return 14}return 2}function oo(n,e){var t=n.alternate;return t===null?(t=Qi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Lf(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")Dx(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case hl:return ia(t.children,s,r,e);case Kv:o=8,s|=8;break;case B0:return n=Qi(12,t,e,s|2),n.elementType=B0,n.lanes=r,n;case D0:return n=Qi(13,t,e,s),n.elementType=D0,n.lanes=r,n;case L0:return n=Qi(19,t,e,s),n.elementType=L0,n.lanes=r,n;case T1:return fm(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M1:o=10;break e;case I1:o=9;break e;case Yv:o=11;break e;case Jv:o=14;break e;case kr:o=16,i=null;break e}throw Error(re(130,n==null?n:typeof n,""))}return e=Qi(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function ia(n,e,t,i){return n=Qi(7,n,i,e),n.lanes=t,n}function fm(n,e,t,i){return n=Qi(22,n,i,e),n.elementType=T1,n.lanes=t,n.stateNode={isHidden:!1},n}function uA(n,e,t){return n=Qi(6,n,null,e),n.lanes=t,n}function hA(n,e,t){return e=Qi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function hF(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jm(0),this.expirationTimes=jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jm(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lx(n,e,t,i,s,r,o,a,l){return n=new hF(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Qi(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ax(r),n}function dF(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ul,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function xR(n){if(!n)return ho;n=n._reactInternals;e:{if(_a(n)!==n||n.tag!==1)throw Error(re(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(n.tag===1){var t=n.type;if(li(t))return xT(n,t,e)}return e}function ER(n,e,t,i,s,r,o,a,l){return n=Lx(t,i,!0,n,s,r,o,a,l),n.context=xR(null),t=n.current,i=Jn(),s=ro(t),r=hr(i,s),r.callback=e??null,io(t,r,s),n.current.lanes=s,Nh(n,s,i),ci(n,i),n}function pm(n,e,t,i){var s=e.current,r=Jn(),o=ro(s);return t=xR(t),e.context===null?e.context=t:e.pendingContext=t,e=hr(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=io(s,e,o),n!==null&&(cs(n,s,o,r),Mf(n,s,o)),o}function Ep(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function h_(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Px(n,e){h_(n,e),(n=n.alternate)&&h_(n,e)}function fF(){return null}var bR=typeof reportError=="function"?reportError:function(n){console.error(n)};function Nx(n){this._internalRoot=n}mm.prototype.render=Nx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(re(409));pm(n,e,null,null)};mm.prototype.unmount=Nx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;fa(function(){pm(null,n,null,null)}),e[gr]=null}};function mm(n){this._internalRoot=n}mm.prototype.unstable_scheduleHydration=function(n){if(n){var e=Z1();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Qr.length&&e!==0&&e<Qr[t].priority;t++);Qr.splice(t,0,n),t===0&&tT(n)}};function Fx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Am(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function d_(){}function pF(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Ep(o);r.call(c)}}var o=ER(e,i,n,0,null,!1,!1,"",d_);return n._reactRootContainer=o,n[gr]=o.current,ah(n.nodeType===8?n.parentNode:n),fa(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Ep(l);a.call(c)}}var l=Lx(n,0,!1,null,null,!1,!1,"",d_);return n._reactRootContainer=l,n[gr]=l.current,ah(n.nodeType===8?n.parentNode:n),fa(function(){pm(e,l,t,i)}),l}function gm(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Ep(o);a.call(l)}}pm(e,o,n,s)}else o=pF(t,e,n,s,i);return Ep(o)}Y1=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Au(e.pendingLanes);t!==0&&(tx(e,t|1),ci(e,Zt()),!(at&6)&&(ec=Zt()+500,yo()))}break;case 13:fa(function(){var i=yr(n,1);if(i!==null){var s=Jn();cs(i,n,1,s)}}),Px(n,1)}};nx=function(n){if(n.tag===13){var e=yr(n,134217728);if(e!==null){var t=Jn();cs(e,n,134217728,t)}Px(n,134217728)}};J1=function(n){if(n.tag===13){var e=ro(n),t=yr(n,e);if(t!==null){var i=Jn();cs(t,n,e,i)}Px(n,e)}};Z1=function(){return yt};eT=function(n,e){var t=yt;try{return yt=n,e()}finally{yt=t}};z0=function(n,e,t){switch(e){case"input":if(F0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=am(i);if(!s)throw Error(re(90));B1(i),F0(i,s)}}}break;case"textarea":L1(n,t);break;case"select":e=t.value,e!=null&&Nl(n,!!t.multiple,e,!1)}};Q1=Tx;G1=fa;var mF={usingClientEntryPoint:!1,Events:[kh,ml,am,U1,O1,Tx]},kc={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AF={bundleType:kc.bundleType,version:kc.version,rendererPackageName:kc.rendererPackageName,rendererConfig:kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=H1(n),n===null?null:n.stateNode},findFiberByHostInstance:kc.findFiberByHostInstance||fF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{im=md.inject(AF),Ss=md}catch{}}Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mF;Ci.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fx(e))throw Error(re(200));return dF(n,e,null,t)};Ci.createRoot=function(n,e){if(!Fx(n))throw Error(re(299));var t=!1,i="",s=bR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lx(n,1,!1,null,null,t,!1,i,s),n[gr]=e.current,ah(n.nodeType===8?n.parentNode:n),new Nx(e)};Ci.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(re(188)):(n=Object.keys(n).join(","),Error(re(268,n)));return n=H1(e),n=n===null?null:n.stateNode,n};Ci.flushSync=function(n){return fa(n)};Ci.hydrate=function(n,e,t){if(!Am(e))throw Error(re(200));return gm(null,n,e,!0,t)};Ci.hydrateRoot=function(n,e,t){if(!Fx(n))throw Error(re(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=bR;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=ER(e,null,n,1,t??null,s,!1,r,o),n[gr]=e.current,ah(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new mm(e)};Ci.render=function(n,e,t){if(!Am(e))throw Error(re(200));return gm(null,n,e,!1,t)};Ci.unmountComponentAtNode=function(n){if(!Am(n))throw Error(re(40));return n._reactRootContainer?(fa(function(){gm(null,null,n,!1,function(){n._reactRootContainer=null,n[gr]=null})}),!0):!1};Ci.unstable_batchedUpdates=Tx;Ci.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Am(t))throw Error(re(200));if(n==null||n._reactInternals===void 0)throw Error(re(38));return gm(n,e,t,!1,i)};Ci.version="18.3.1-next-f1338f8080-20240426";function _R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_R)}catch(n){console.error(n)}}_R(),_1.exports=Ci;var gF=_1.exports,wR,f_=gF;wR=f_.createRoot,f_.hydrateRoot;const yF="modulepreload",vF=function(n){return"/"+n},p_={},ym=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=vF(l),l in p_)return;p_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":yF,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ah(){return Ah=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ah.apply(this,arguments)}var qr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(qr||(qr={}));const m_="popstate";function xF(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return by("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:bp(s)}return bF(e,t,null,n)}function on(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function SR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EF(){return Math.random().toString(36).substr(2,8)}function A_(n,e){return{usr:n.state,key:n.key,idx:e}}function by(n,e,t,i){return t===void 0&&(t=null),Ah({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ec(e):e,{state:t,key:e&&e.key||i||EF()})}function bp(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ec(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function bF(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=qr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ah({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=qr.Pop;let A=u(),p=A==null?null:A-c;c=A,l&&l({action:a,location:g.location,delta:p})}function d(A,p){a=qr.Push;let y=by(g.location,A,p);c=u()+1;let v=A_(y,c),x=g.createHref(y);try{o.pushState(v,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(x)}r&&l&&l({action:a,location:g.location,delta:1})}function f(A,p){a=qr.Replace;let y=by(g.location,A,p);c=u();let v=A_(y,c),x=g.createHref(y);o.replaceState(v,"",x),r&&l&&l({action:a,location:g.location,delta:0})}function m(A){let p=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof A=="string"?A:bp(A);return y=y.replace(/ $/,"%20"),on(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let g={get action(){return a},get location(){return n(s,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(m_,h),l=A,()=>{s.removeEventListener(m_,h),l=null}},createHref(A){return e(s,A)},createURL:m,encodeLocation(A){let p=m(A);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:f,go(A){return o.go(A)}};return g}var g_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(g_||(g_={}));function _F(n,e,t){return t===void 0&&(t="/"),wF(n,e,t,!1)}function wF(n,e,t,i){let s=typeof e=="string"?Ec(e):e,r=kx(s.pathname||"/",t);if(r==null)return null;let o=CR(n);SF(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=FF(r);a=PF(o[l],c,i)}return a}function CR(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(on(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ao([i,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(on(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),CR(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:DF(c,r.index),routesMeta:u})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of MR(r.path))s(r,o,l)}),e}function MR(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=MR(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function SF(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LF(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const CF=/^:[\w-]+$/,MF=3,IF=2,TF=1,RF=10,BF=-2,y_=n=>n==="*";function DF(n,e){let t=n.split("/"),i=t.length;return t.some(y_)&&(i+=BF),e&&(i+=IF),t.filter(s=>!y_(s)).reduce((s,r)=>s+(CF.test(r)?MF:r===""?TF:RF),i)}function LF(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function PF(n,e,t){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",h=v_({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&t&&!i[i.length-1].route.index&&(h=v_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ao([r,h.pathname]),pathnameBase:QF(ao([r,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(r=ao([r,h.pathnameBase]))}return o}function v_(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=NF(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let g=a[h]||"";o=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return f&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function NF(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),SR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function FF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return SR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function kx(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function kF(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Ec(n):n;return{pathname:t?t.startsWith("/")?t:UF(t,e):e,search:GF(i),hash:VF(s)}}function UF(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function dA(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IR(n,e){let t=OF(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function TR(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Ec(n):(s=Ah({},n),on(!s.pathname||!s.pathname.includes("?"),dA("?","pathname","search",s)),on(!s.pathname||!s.pathname.includes("#"),dA("#","pathname","hash",s)),on(!s.search||!s.search.includes("#"),dA("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=kF(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ao=n=>n.join("/").replace(/\/\/+/g,"/"),QF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),GF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function zF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const RR=["post","put","patch","delete"];new Set(RR);const HF=["get",...RR];new Set(HF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gh(){return gh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gh.apply(this,arguments)}const Ux=V.createContext(null),jF=V.createContext(null),wa=V.createContext(null),vm=V.createContext(null),Sa=V.createContext({outlet:null,matches:[],isDataRoute:!1}),BR=V.createContext(null);function WF(n,e){let{relative:t}=e===void 0?{}:e;Oh()||on(!1);let{basename:i,navigator:s}=V.useContext(wa),{hash:r,pathname:o,search:a}=LR(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ao([i,o])),s.createHref({pathname:l,search:a,hash:r})}function Oh(){return V.useContext(vm)!=null}function Fs(){return Oh()||on(!1),V.useContext(vm).location}function DR(n){V.useContext(wa).static||V.useLayoutEffect(n)}function xm(){let{isDataRoute:n}=V.useContext(Sa);return n?rk():qF()}function qF(){Oh()||on(!1);let n=V.useContext(Ux),{basename:e,future:t,navigator:i}=V.useContext(wa),{matches:s}=V.useContext(Sa),{pathname:r}=Fs(),o=JSON.stringify(IR(s,t.v7_relativeSplatPath)),a=V.useRef(!1);return DR(()=>{a.current=!0}),V.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=TR(c,JSON.parse(o),r,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ao([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,r,n])}function LR(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=V.useContext(wa),{matches:s}=V.useContext(Sa),{pathname:r}=Fs(),o=JSON.stringify(IR(s,i.v7_relativeSplatPath));return V.useMemo(()=>TR(n,JSON.parse(o),r,t==="path"),[n,o,r,t])}function $F(n,e){return XF(n,e)}function XF(n,e,t,i){Oh()||on(!1);let{navigator:s}=V.useContext(wa),{matches:r}=V.useContext(Sa),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Fs(),u;if(e){var h;let A=typeof e=="string"?Ec(e):e;l==="/"||(h=A.pathname)!=null&&h.startsWith(l)||on(!1),u=A}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let A=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(A.length).join("/")}let m=_F(n,{pathname:f}),g=ek(m&&m.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:ao([l,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:ao([l,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),r,t,i);return e&&g?V.createElement(vm.Provider,{value:{location:gh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qr.Pop}},g):g}function KF(){let n=sk(),e=zF(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,null)}const YF=V.createElement(KF,null);class JF extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(Sa.Provider,{value:this.props.routeContext},V.createElement(BR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZF(n){let{routeContext:e,match:t,children:i}=n,s=V.useContext(Ux);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(Sa.Provider,{value:e},i)}function ek(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||on(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=t,m=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,m=!1,g=null,A=null;t&&(f=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||YF,l&&(c<0&&d===0?(m=!0,A=null):c===d&&(m=!0,A=h.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,d+1)),y=()=>{let v;return f?v=g:m?v=A:h.route.Component?v=V.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,V.createElement(ZF,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:t!=null},children:v})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?V.createElement(JF,{location:t.location,revalidation:t.revalidation,component:g,error:f,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var PR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(PR||{}),_p=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(_p||{});function tk(n){let e=V.useContext(Ux);return e||on(!1),e}function nk(n){let e=V.useContext(jF);return e||on(!1),e}function ik(n){let e=V.useContext(Sa);return e||on(!1),e}function NR(n){let e=ik(),t=e.matches[e.matches.length-1];return t.route.id||on(!1),t.route.id}function sk(){var n;let e=V.useContext(BR),t=nk(_p.UseRouteError),i=NR(_p.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function rk(){let{router:n}=tk(PR.UseNavigateStable),e=NR(_p.UseNavigateStable),t=V.useRef(!1);return DR(()=>{t.current=!0}),V.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,gh({fromRouteId:e},r)))},[n,e])}function ok(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function al(n){on(!1)}function ak(n){let{basename:e="/",children:t=null,location:i,navigationType:s=qr.Pop,navigator:r,static:o=!1,future:a}=n;Oh()&&on(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:r,static:o,future:gh({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=Ec(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:m="default"}=i,g=V.useMemo(()=>{let A=kx(u,l);return A==null?null:{location:{pathname:A,search:h,hash:d,state:f,key:m},navigationType:s}},[l,u,h,d,f,m,s]);return g==null?null:V.createElement(wa.Provider,{value:c},V.createElement(vm.Provider,{children:t,value:g}))}function lk(n){let{children:e,location:t}=n;return $F(_y(e),t)}new Promise(()=>{});function _y(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(i,s)=>{if(!V.isValidElement(i))return;let r=[...e,s];if(i.type===V.Fragment){t.push.apply(t,_y(i.props.children,r));return}i.type!==al&&on(!1),!i.props.index||!i.props.children||on(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=_y(i.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wy(){return wy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wy.apply(this,arguments)}function ck(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function uk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hk(n,e){return n.button===0&&(!e||e==="_self")&&!uk(n)}const dk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fk="6";try{window.__reactRouterVersion=fk}catch{}const pk="startTransition",x_=oP[pk];function mk(n){let{basename:e,children:t,future:i,window:s}=n,r=V.useRef();r.current==null&&(r.current=xF({window:s,v5Compat:!0}));let o=r.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=V.useCallback(h=>{c&&x_?x_(()=>l(h)):l(h)},[l,c]);return V.useLayoutEffect(()=>o.listen(u),[o,u]),V.useEffect(()=>ok(i),[i]),V.createElement(ak,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const Ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ai=V.forwardRef(function(e,t){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,d=ck(e,dk),{basename:f}=V.useContext(wa),m,g=!1;if(typeof c=="string"&&gk.test(c)&&(m=c,Ak))try{let v=new URL(window.location.href),x=c.startsWith("//")?new URL(v.protocol+c):new URL(c),E=kx(x.pathname,f);x.origin===v.origin&&E!=null?c=E+x.search+x.hash:g=!0}catch{}let A=WF(c,{relative:s}),p=yk(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function y(v){i&&i(v),v.defaultPrevented||p(v)}return V.createElement("a",wy({},d,{href:m||A,onClick:g||r?i:y,ref:t,target:l}))});var E_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(E_||(E_={}));var b_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(b_||(b_={}));function yk(n,e){let{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=xm(),c=Fs(),u=LR(n,{relative:o});return V.useCallback(h=>{if(hk(h,t)){h.preventDefault();let d=i!==void 0?i:bp(c)===bp(u);l(n,{replace:d,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,u,i,s,t,n,r,o,a])}const Ox=V.createContext({});function Em(n){const e=V.useRef(null);return e.current===null&&(e.current=n()),e.current}const bm=V.createContext(null),Qx=V.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class vk extends V.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function xk({children:n,isPresent:e}){const t=V.useId(),i=V.useRef(null),s=V.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=V.useContext(Qx);return V.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const u=document.createElement("style");return r&&(u.nonce=r),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),b.jsx(vk,{isPresent:e,childRef:i,sizeRef:s,children:V.cloneElement(n,{ref:i})})}const Ek=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o})=>{const a=Em(bk),l=V.useId(),c=V.useCallback(h=>{a.set(h,!0);for(const d of a.values())if(!d)return;i&&i()},[a,i]),u=V.useMemo(()=>({id:l,initial:e,isPresent:t,custom:s,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),r?[Math.random(),c]:[t,c]);return V.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[t]),V.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=b.jsx(xk,{isPresent:t,children:n})),b.jsx(bm.Provider,{value:u,children:n})};function bk(){return new Map}function FR(n=!0){const e=V.useContext(bm);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,r=V.useId();V.useEffect(()=>{n&&s(r)},[n]);const o=V.useCallback(()=>n&&i&&i(r),[r,i,n]);return!t&&i?[!1,o]:[!0]}const Ad=n=>n.key||"";function __(n){const e=[];return V.Children.forEach(n,t=>{V.isValidElement(t)&&e.push(t)}),e}const Gx=typeof window<"u",Vx=Gx?V.useLayoutEffect:V.useEffect,kR=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:o=!1})=>{const[a,l]=FR(o),c=V.useMemo(()=>__(n),[n]),u=o&&!a?[]:c.map(Ad),h=V.useRef(!0),d=V.useRef(c),f=Em(()=>new Map),[m,g]=V.useState(c),[A,p]=V.useState(c);Vx(()=>{h.current=!1,d.current=c;for(let x=0;x<A.length;x++){const E=Ad(A[x]);u.includes(E)?f.delete(E):f.get(E)!==!0&&f.set(E,!1)}},[A,u.length,u.join("-")]);const y=[];if(c!==m){let x=[...c];for(let E=0;E<A.length;E++){const w=A[E],M=Ad(w);u.includes(M)||(x.splice(E,0,w),y.push(w))}r==="wait"&&y.length&&(x=y),p(__(x)),g(c);return}const{forceRender:v}=V.useContext(Ox);return b.jsx(b.Fragment,{children:A.map(x=>{const E=Ad(x),w=o&&!a?!1:c===A||u.includes(E),M=()=>{if(f.has(E))f.set(E,!0);else return;let C=!0;f.forEach(S=>{S||(C=!1)}),C&&(v==null||v(),p(d.current),o&&(l==null||l()),i&&i())};return b.jsx(Ek,{isPresent:w,initial:!h.current||t?void 0:!1,custom:w?void 0:e,presenceAffectsLayout:s,mode:r,onExitComplete:w?void 0:M,children:x},E)})})},Zn=n=>n;let _k=Zn,Sy=Zn;function zx(n){let e;return()=>(e===void 0&&(e=n()),e)}const pa=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},dr=n=>n*1e3,fr=n=>n/1e3,wk={skipAnimations:!1,useManualTiming:!1};function Sk(n){let e=new Set,t=new Set,i=!1,s=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){r.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const f=h&&i?e:t;return u&&r.add(c),f.has(c)||f.add(c),c},cancel:c=>{t.delete(c),r.delete(c)},process:c=>{if(o=c,i){s=!0;return}i=!0,[e,t]=[t,e],e.forEach(a),e.clear(),i=!1,s&&(s=!1,l.process(c))}};return l}const gd=["read","resolveKeyframes","update","preRender","render","postRender"],Ck=40;function UR(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,o=gd.reduce((p,y)=>(p[y]=Sk(r),p),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:d}=o,f=()=>{const p=performance.now();t=!1,s.delta=i?1e3/60:Math.max(Math.min(p-s.timestamp,Ck),1),s.timestamp=p,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),d.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(f))},m=()=>{t=!0,i=!0,s.isProcessing||n(f)};return{schedule:gd.reduce((p,y)=>{const v=o[y];return p[y]=(x,E=!1,w=!1)=>(t||m(),v.schedule(x,E,w)),p},{}),cancel:p=>{for(let y=0;y<gd.length;y++)o[gd[y]].cancel(p)},state:s,steps:o}}const{schedule:ft,cancel:Ds,state:fn,steps:fA}=UR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zn,!0),OR=V.createContext({strict:!1}),w_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tc={};for(const n in w_)tc[n]={isEnabled:e=>w_[n].some(t=>!!e[t])};function Mk(n){for(const e in n)tc[e]={...tc[e],...n[e]}}const Ik=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Ik.has(n)}let QR=n=>!wp(n);function Tk(n){n&&(QR=e=>e.startsWith("on")?!wp(e):n(e))}try{Tk(require("@emotion/is-prop-valid").default)}catch{}function Rk(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(QR(s)||t===!0&&wp(s)||!e&&!wp(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function Bk(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const _m=V.createContext({});function yh(n){return typeof n=="string"||Array.isArray(n)}function wm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Hx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jx=["initial",...Hx];function Sm(n){return wm(n.animate)||jx.some(e=>yh(n[e]))}function GR(n){return!!(Sm(n)||n.variants)}function Dk(n,e){if(Sm(n)){const{initial:t,animate:i}=n;return{initial:t===!1||yh(t)?t:void 0,animate:yh(i)?i:void 0}}return n.inherit!==!1?e:{}}function Lk(n){const{initial:e,animate:t}=Dk(n,V.useContext(_m));return V.useMemo(()=>({initial:e,animate:t}),[S_(e),S_(t)])}function S_(n){return Array.isArray(n)?n.join(" "):n}const Pk=Symbol.for("motionComponentSymbol");function bl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Nk(n,e,t){return V.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):bl(t)&&(t.current=i))},[e])}const Wx=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Fk="framerAppearId",VR="data-"+Wx(Fk),{schedule:qx,cancel:X$}=UR(queueMicrotask,!1),zR=V.createContext({});function kk(n,e,t,i,s){var r,o;const{visualElement:a}=V.useContext(_m),l=V.useContext(OR),c=V.useContext(bm),u=V.useContext(Qx).reducedMotion,h=V.useRef(null);i=i||l.renderer,!h.current&&i&&(h.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const d=h.current,f=V.useContext(zR);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&Uk(h.current,t,s,f);const m=V.useRef(!1);V.useInsertionEffect(()=>{d&&m.current&&d.update(t,c)});const g=t[VR],A=V.useRef(!!g&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return Vx(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),qx.render(d.render),A.current&&d.animationState&&d.animationState.animateChanges())}),V.useEffect(()=>{d&&(!A.current&&d.animationState&&d.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)===null||p===void 0||p.call(window,g)}),A.current=!1))}),d}function Uk(n,e,t,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:HR(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||a&&bl(a),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function HR(n){if(n)return n.options.allowProjection!==!1?n.projection:HR(n.parent)}function Ok({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:s}){var r,o;n&&Mk(n);function a(c,u){let h;const d={...V.useContext(Qx),...c,layoutId:Qk(c)},{isStatic:f}=d,m=Lk(c),g=i(c,f);if(!f&&Gx){Gk();const A=Vk(d);h=A.MeasureLayout,m.visualElement=kk(s,g,d,e,A.ProjectionNode)}return b.jsxs(_m.Provider,{value:m,children:[h&&m.visualElement?b.jsx(h,{visualElement:m.visualElement,...d}):null,t(s,c,Nk(g,m.visualElement,u),g,f,m.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(r=s.displayName)!==null&&r!==void 0?r:s.name)!==null&&o!==void 0?o:""})`}`;const l=V.forwardRef(a);return l[Pk]=s,l}function Qk({layoutId:n}){const e=V.useContext(Ox).id;return e&&n!==void 0?e+"-"+n:n}function Gk(n,e){V.useContext(OR).strict}function Vk(n){const{drag:e,layout:t}=tc;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const zk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $x(n){return typeof n!="string"||n.includes("-")?!1:!!(zk.indexOf(n)>-1||/[A-Z]/u.test(n))}function C_(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Xx(n,e,t,i){if(typeof e=="function"){const[s,r]=C_(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=C_(i);e=e(t!==void 0?t:n.custom,s,r)}return e}const Cy=n=>Array.isArray(n),Hk=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),jk=n=>Cy(n)?n[n.length-1]||0:n,Un=n=>!!(n&&n.getVelocity);function Pf(n){const e=Un(n)?n.get():n;return Hk(e)?e.toValue():e}function Wk({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,s,r){const o={latestValues:qk(i,s,r,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const jR=n=>(e,t)=>{const i=V.useContext(_m),s=V.useContext(bm),r=()=>Wk(n,e,i,s);return t?r():Em(r)};function qk(n,e,t,i){const s={},r=i(n,{});for(const d in r)s[d]=Pf(r[d]);let{initial:o,animate:a}=n;const l=Sm(n),c=GR(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!wm(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const m=Xx(n,d[f]);if(m){const{transitionEnd:g,transition:A,...p}=m;for(const y in p){let v=p[y];if(Array.isArray(v)){const x=u?v.length-1:0;v=v[x]}v!==null&&(s[y]=v)}for(const y in g)s[y]=g[y]}}}return s}const bc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ca=new Set(bc),WR=n=>e=>typeof e=="string"&&e.startsWith(n),qR=WR("--"),$k=WR("var(--"),Kx=n=>$k(n)?Xk.test(n.split("/*")[0].trim()):!1,Xk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$R=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ls=(n,e,t)=>t>e?e:t<n?n:t,_c={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},vh={..._c,transform:n=>Ls(0,1,n)},yd={..._c,default:1},Qh=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Lr=Qh("deg"),Ms=Qh("%"),De=Qh("px"),Kk=Qh("vh"),Yk=Qh("vw"),M_={...Ms,parse:n=>Ms.parse(n)/100,transform:n=>Ms.transform(n*100)},Jk={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,top:De,right:De,bottom:De,left:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,backgroundPositionX:De,backgroundPositionY:De},Zk={rotate:Lr,rotateX:Lr,rotateY:Lr,rotateZ:Lr,scale:yd,scaleX:yd,scaleY:yd,scaleZ:yd,skew:Lr,skewX:Lr,skewY:Lr,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:vh,originX:M_,originY:M_,originZ:De},I_={..._c,transform:Math.round},Yx={...Jk,...Zk,zIndex:I_,size:De,fillOpacity:vh,strokeOpacity:vh,numOctaves:I_},eU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tU=bc.length;function nU(n,e,t){let i="",s=!0;for(let r=0;r<tU;r++){const o=bc[r],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=$R(a,Yx[o]);if(!l){s=!1;const u=eU[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Jx(n,e,t){const{style:i,vars:s,transformOrigin:r}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ca.has(l)){o=!0;continue}else if(qR(l)){s[l]=c;continue}else{const u=$R(c,Yx[l]);l.startsWith("origin")?(a=!0,r[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=nU(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=r;i.transformOrigin=`${l} ${c} ${u}`}}const iU={offset:"stroke-dashoffset",array:"stroke-dasharray"},sU={offset:"strokeDashoffset",array:"strokeDasharray"};function rU(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?iU:sU;n[r.offset]=De.transform(-i);const o=De.transform(e),a=De.transform(t);n[r.array]=`${o} ${a}`}function T_(n,e,t){return typeof n=="string"?n:De.transform(e+t*n)}function oU(n,e,t){const i=T_(e,n.x,n.width),s=T_(t,n.y,n.height);return`${i} ${s}`}function Zx(n,{attrX:e,attrY:t,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(Jx(n,c,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:f,dimensions:m}=n;d.transform&&(m&&(f.transform=d.transform),delete d.transform),m&&(s!==void 0||r!==void 0||f.transform)&&(f.transformOrigin=oU(m,s!==void 0?s:.5,r!==void 0?r:.5)),e!==void 0&&(d.x=e),t!==void 0&&(d.y=t),i!==void 0&&(d.scale=i),o!==void 0&&rU(d,o,a,l,!1)}const eE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),XR=()=>({...eE(),attrs:{}}),tE=n=>typeof n=="string"&&n.toLowerCase()==="svg";function KR(n,{style:e,vars:t},i,s){Object.assign(n.style,e,s&&s.getProjectionStyles(i));for(const r in t)n.style.setProperty(r,t[r])}const YR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JR(n,e,t,i){KR(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(YR.has(s)?s:Wx(s),e.attrs[s])}const Sp={};function aU(n){Object.assign(Sp,n)}function ZR(n,{layout:e,layoutId:t}){return Ca.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Sp[n]||n==="opacity")}function nE(n,e,t){var i;const{style:s}=n,r={};for(const o in s)(Un(s[o])||e.style&&Un(e.style[o])||ZR(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[o]=s[o]);return r}function eB(n,e,t){const i=nE(n,e,t);for(const s in n)if(Un(n[s])||Un(e[s])){const r=bc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}function lU(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const R_=["x","y","width","height","cx","cy","r"],cU={useVisualState:jR({scrapeMotionValuesFromProps:eB,createRenderState:XR,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:s})=>{if(!t)return;let r=!!n.drag;if(!r){for(const a in s)if(Ca.has(a)){r=!0;break}}if(!r)return;let o=!e;if(e)for(let a=0;a<R_.length;a++){const l=R_[a];n[l]!==e[l]&&(o=!0)}o&&ft.read(()=>{lU(t,i),ft.render(()=>{Zx(i,s,tE(t.tagName),n.transformTemplate),JR(t,i)})})}})},uU={useVisualState:jR({scrapeMotionValuesFromProps:nE,createRenderState:eE})};function tB(n,e,t){for(const i in e)!Un(e[i])&&!ZR(i,t)&&(n[i]=e[i])}function hU({transformTemplate:n},e){return V.useMemo(()=>{const t=eE();return Jx(t,e,n),Object.assign({},t.vars,t.style)},[e])}function dU(n,e){const t=n.style||{},i={};return tB(i,t,n),Object.assign(i,hU(n,e)),i}function fU(n,e){const t={},i=dU(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function pU(n,e,t,i){const s=V.useMemo(()=>{const r=XR();return Zx(r,e,tE(i),n.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};tB(r,n.style,n),s.style={...r,...s.style}}return s}function mU(n=!1){return(t,i,s,{latestValues:r},o)=>{const l=($x(t)?pU:fU)(i,r,o,t),c=Rk(i,typeof t=="string",n),u=t!==V.Fragment?{...c,...l,ref:s}:{},{children:h}=i,d=V.useMemo(()=>Un(h)?h.get():h,[h]);return V.createElement(t,{...u,children:d})}}function AU(n,e){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...$x(i)?cU:uU,preloadedFeatures:n,useRender:mU(s),createVisualElement:e,Component:i};return Ok(o)}}function nB(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Cm(n,e,t){const i=n.getProps();return Xx(i,e,t!==void 0?t:i.custom,n)}const iB=zx(()=>window.ScrollTimeline!==void 0);class gU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(s=>{if(iB()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{i.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class yU extends gU{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function iE(n,e){return n?n[e]||n.default||n:void 0}const My=2e4;function sB(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<My;)e+=t,i=n.next(e);return e>=My?1/0:e}function sE(n){return typeof n=="function"}function B_(n,e){n.timeline=e,n.onfinish=null}const rE=n=>Array.isArray(n)&&typeof n[0]=="number",vU={linearEasing:void 0};function xU(n,e){const t=zx(n);return()=>{var i;return(i=vU[e])!==null&&i!==void 0?i:t()}}const Cp=xU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rB=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)i+=n(pa(0,s-1,r))+", ";return`linear(${i.substring(0,i.length-2)})`};function oB(n){return!!(typeof n=="function"&&Cp()||!n||typeof n=="string"&&(n in Iy||Cp())||rE(n)||Array.isArray(n)&&n.every(oB))}const yu=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Iy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yu([0,.65,.55,1]),circOut:yu([.55,0,1,.45]),backIn:yu([.31,.01,.66,-.59]),backOut:yu([.33,1.53,.69,.99])};function aB(n,e){if(n)return typeof n=="function"&&Cp()?rB(n,e):rE(n)?yu(n):Array.isArray(n)?n.map(t=>aB(t,e)||Iy.easeOut):Iy[n]}const ts={x:!1,y:!1};function lB(){return ts.x||ts.y}function cB(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let s=document;const r=(i=void 0)!==null&&i!==void 0?i:s.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}function uB(n,e){const t=cB(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function D_(n){return e=>{e.pointerType==="touch"||lB()||n(e)}}function EU(n,e,t={}){const[i,s,r]=uB(n,t),o=D_(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=D_(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return i.forEach(a=>{a.addEventListener("pointerenter",o,s)}),r}const hB=(n,e)=>e?n===e?!0:hB(n,e.parentElement):!1,oE=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,bU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _U(n){return bU.has(n.tagName)||n.tabIndex!==-1}const vu=new WeakSet;function L_(n){return e=>{e.key==="Enter"&&n(e)}}function pA(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const wU=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=L_(()=>{if(vu.has(t))return;pA(t,"down");const s=L_(()=>{pA(t,"up")}),r=()=>pA(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function P_(n){return oE(n)&&!lB()}function SU(n,e,t={}){const[i,s,r]=uB(n,t),o=a=>{const l=a.currentTarget;if(!P_(a)||vu.has(l))return;vu.add(l);const c=e(a),u=(f,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),!(!P_(f)||!vu.has(l))&&(vu.delete(l),typeof c=="function"&&c(f,{success:m}))},h=f=>{u(f,t.useGlobalTarget||hB(l,f.target))},d=f=>{u(f,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",d,s)};return i.forEach(a=>{!_U(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>wU(c,s),s)}),r}function CU(n){return n==="x"||n==="y"?ts[n]?null:(ts[n]=!0,()=>{ts[n]=!1}):ts.x||ts.y?null:(ts.x=ts.y=!0,()=>{ts.x=ts.y=!1})}const dB=new Set(["width","height","top","left","right","bottom",...bc]);let Nf;function MU(){Nf=void 0}const Is={now:()=>(Nf===void 0&&Is.set(fn.isProcessing||wk.useManualTiming?fn.timestamp:performance.now()),Nf),set:n=>{Nf=n,queueMicrotask(MU)}};function aE(n,e){n.indexOf(e)===-1&&n.push(e)}function lE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class cE{constructor(){this.subscriptions=[]}add(e){return aE(this.subscriptions,e),()=>lE(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function uE(n,e){return e?n*(1e3/e):0}const N_=30,IU=n=>!isNaN(parseFloat(n));class TU{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=Is.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Is.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new cE);const i=this.events[e].add(t);return e==="change"?()=>{i(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Is.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>N_)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,N_);return uE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lr(n,e){return new TU(n,e)}function RU(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,lr(t))}function BU(n,e){const t=Cm(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const o in r){const a=jk(r[o]);RU(n,o,a)}}function DU(n){return!!(Un(n)&&n.add)}function Ty(n,e){const t=n.getValue("willChange");if(DU(t))return t.add(e)}function fB(n){return n.props[VR]}const pB=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,LU=1e-7,PU=12;function NU(n,e,t,i,s){let r,o,a=0;do o=e+(t-e)/2,r=pB(o,i,s)-n,r>0?t=o:e=o;while(Math.abs(r)>LU&&++a<PU);return o}function Gh(n,e,t,i){if(n===e&&t===i)return Zn;const s=r=>NU(r,0,1,n,t);return r=>r===0||r===1?r:pB(s(r),e,i)}const mB=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,AB=n=>e=>1-n(1-e),gB=Gh(.33,1.53,.69,.99),hE=AB(gB),yB=mB(hE),vB=n=>(n*=2)<1?.5*hE(n):.5*(2-Math.pow(2,-10*(n-1))),dE=n=>1-Math.sin(Math.acos(n)),xB=AB(dE),EB=mB(dE),bB=n=>/^0[^.\s]+$/u.test(n);function FU(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||bB(n):!0}const Ou=n=>Math.round(n*1e5)/1e5,fE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kU(n){return n==null}const UU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pE=(n,e)=>t=>!!(typeof t=="string"&&UU.test(t)&&t.startsWith(n)||e&&!kU(t)&&Object.prototype.hasOwnProperty.call(t,e)),_B=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,r,o,a]=i.match(fE);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},OU=n=>Ls(0,255,n),mA={..._c,transform:n=>Math.round(OU(n))},Zo={test:pE("rgb","red"),parse:_B("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+mA.transform(n)+", "+mA.transform(e)+", "+mA.transform(t)+", "+Ou(vh.transform(i))+")"};function QU(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Ry={test:pE("#"),parse:QU,transform:Zo.transform},_l={test:pE("hsl","hue"),parse:_B("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ms.transform(Ou(e))+", "+Ms.transform(Ou(t))+", "+Ou(vh.transform(i))+")"},Nn={test:n=>Zo.test(n)||Ry.test(n)||_l.test(n),parse:n=>Zo.test(n)?Zo.parse(n):_l.test(n)?_l.parse(n):Ry.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Zo.transform(n):_l.transform(n)},GU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function VU(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(fE))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(GU))===null||t===void 0?void 0:t.length)||0)>0}const wB="number",SB="color",zU="var",HU="var(",F_="${}",jU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=e.replace(jU,l=>(Nn.test(l)?(i.color.push(r),s.push(SB),t.push(Nn.parse(l))):l.startsWith(HU)?(i.var.push(r),s.push(zU),t.push(l)):(i.number.push(r),s.push(wB),t.push(parseFloat(l))),++r,F_)).split(F_);return{values:t,split:a,indexes:i,types:s}}function CB(n){return xh(n).values}function MB(n){const{split:e,types:t}=xh(n),i=e.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=e[o],s[o]!==void 0){const a=t[o];a===wB?r+=Ou(s[o]):a===SB?r+=Nn.transform(s[o]):r+=s[o]}return r}}const WU=n=>typeof n=="number"?0:n;function qU(n){const e=CB(n);return MB(n)(e.map(WU))}const fo={test:VU,parse:CB,createTransformer:MB,getAnimatableNone:qU},$U=new Set(["brightness","contrast","saturate","opacity"]);function XU(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(fE)||[];if(!i)return n;const s=t.replace(i,"");let r=$U.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const KU=/\b([a-z-]*)\(.*?\)/gu,By={...fo,getAnimatableNone:n=>{const e=n.match(KU);return e?e.map(XU).join(" "):n}},YU={...Yx,color:Nn,backgroundColor:Nn,outlineColor:Nn,fill:Nn,stroke:Nn,borderColor:Nn,borderTopColor:Nn,borderRightColor:Nn,borderBottomColor:Nn,borderLeftColor:Nn,filter:By,WebkitFilter:By},mE=n=>YU[n];function IB(n,e){let t=mE(n);return t!==By&&(t=fo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const JU=new Set(["auto","none","0"]);function ZU(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!JU.has(r)&&xh(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=IB(t,s)}const k_=n=>n===_c||n===De,U_=(n,e)=>parseFloat(n.split(", ")[e]),O_=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/u);if(s)return U_(s[1],e);{const r=i.match(/^matrix\((.+)\)$/u);return r?U_(r[1],n):0}},e3=new Set(["x","y","z"]),t3=bc.filter(n=>!e3.has(n));function n3(n){const e=[];return t3.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const nc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:O_(4,13),y:O_(5,14)};nc.translateX=nc.x;nc.translateY=nc.y;const sa=new Set;let Dy=!1,Ly=!1;function TB(){if(Ly){const n=Array.from(sa).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=n3(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Ly=!1,Dy=!1,sa.forEach(n=>n.complete()),sa.clear()}function RB(){sa.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Ly=!0)})}function i3(){RB(),TB()}class AE{constructor(e,t,i,s,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(sa.add(this),Dy||(Dy=!0,ft.read(RB),ft.resolveKeyframes(TB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),sa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,sa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const BB=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),s3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r3(n){const e=s3.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function DB(n,e,t=1){const[i,s]=r3(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const o=r.trim();return BB(o)?parseFloat(o):o}return Kx(s)?DB(s,e,t+1):s}const LB=n=>e=>e.test(n),o3={test:n=>n==="auto",parse:n=>n},PB=[_c,De,Ms,Lr,Yk,Kk,o3],Q_=n=>PB.find(LB(n));class NB extends AE{constructor(e,t,i,s,r){super(e,t,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Kx(c))){const u=DB(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!dB.has(i)||e.length!==2)return;const[s,r]=e,o=Q_(s),a=Q_(r);if(o!==a)if(k_(o)&&k_(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)FU(e[s])&&i.push(s);i.length&&ZU(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const r=t.getValue(i);r&&r.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=nc[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const G_=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(fo.test(n)||n==="0")&&!n.startsWith("url("));function a3(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function l3(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],o=G_(s,e),a=G_(r,e);return!o||!a?!1:a3(n)||(t==="spring"||sE(t))&&i}const c3=n=>n!==null;function Mm(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(c3),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const u3=40;class FB{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Is.now(),this.options={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>u3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&i3(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Is.now(),this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!l3(e,i,s,r))if(o)this.options.duration=0;else{l&&l(Mm(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Vt=(n,e,t)=>n+(e-n)*t;function AA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function h3({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,o=0;if(!e)s=r=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;s=AA(l,a,n+1/3),r=AA(l,a,n),o=AA(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function Mp(n,e){return t=>t>0?e:n}const gA=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},d3=[Ry,Zo,_l],f3=n=>d3.find(e=>e.test(n));function V_(n){const e=f3(n);if(!e)return!1;let t=e.parse(n);return e===_l&&(t=h3(t)),t}const z_=(n,e)=>{const t=V_(n),i=V_(e);if(!t||!i)return Mp(n,e);const s={...t};return r=>(s.red=gA(t.red,i.red,r),s.green=gA(t.green,i.green,r),s.blue=gA(t.blue,i.blue,r),s.alpha=Vt(t.alpha,i.alpha,r),Zo.transform(s))},p3=(n,e)=>t=>e(n(t)),Vh=(...n)=>n.reduce(p3),Py=new Set(["none","hidden"]);function m3(n,e){return Py.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function A3(n,e){return t=>Vt(n,e,t)}function gE(n){return typeof n=="number"?A3:typeof n=="string"?Kx(n)?Mp:Nn.test(n)?z_:v3:Array.isArray(n)?kB:typeof n=="object"?Nn.test(n)?z_:g3:Mp}function kB(n,e){const t=[...n],i=t.length,s=n.map((r,o)=>gE(r)(r,e[o]));return r=>{for(let o=0;o<i;o++)t[o]=s[o](r);return t}}function g3(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=gE(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function y3(n,e){var t;const i=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],a=n.indexes[o][s[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[r]=l,s[o]++}return i}const v3=(n,e)=>{const t=fo.createTransformer(e),i=xh(n),s=xh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Py.has(n)&&!s.values.length||Py.has(e)&&!i.values.length?m3(n,e):Vh(kB(y3(i,s),s.values),t):Mp(n,e)};function UB(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Vt(n,e,t):gE(n)(n,e)}const x3=5;function OB(n,e,t){const i=Math.max(e-x3,0);return uE(t-n(i),e-i)}const qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yA=.001;function E3({duration:n=qt.duration,bounce:e=qt.bounce,velocity:t=qt.velocity,mass:i=qt.mass}){let s,r,o=1-e;o=Ls(qt.minDamping,qt.maxDamping,o),n=Ls(qt.minDuration,qt.maxDuration,fr(n)),o<1?(s=c=>{const u=c*o,h=u*n,d=u-t,f=Ny(c,o),m=Math.exp(-h);return yA-d/f*m},r=c=>{const h=c*o*n,d=h*t+t,f=Math.pow(o,2)*Math.pow(c,2)*n,m=Math.exp(-h),g=Ny(Math.pow(c,2),o);return(-s(c)+yA>0?-1:1)*((d-f)*m)/g}):(s=c=>{const u=Math.exp(-c*n),h=(c-t)*n+1;return-yA+u*h},r=c=>{const u=Math.exp(-c*n),h=(t-c)*(n*n);return u*h});const a=5/n,l=_3(s,r,a);if(n=dr(n),isNaN(l))return{stiffness:qt.stiffness,damping:qt.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const b3=12;function _3(n,e,t){let i=t;for(let s=1;s<b3;s++)i=i-n(i)/e(i);return i}function Ny(n,e){return n*Math.sqrt(1-e*e)}const w3=["duration","bounce"],S3=["stiffness","damping","mass"];function H_(n,e){return e.some(t=>n[t]!==void 0)}function C3(n){let e={velocity:qt.velocity,stiffness:qt.stiffness,damping:qt.damping,mass:qt.mass,isResolvedFromDuration:!1,...n};if(!H_(n,S3)&&H_(n,w3))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,r=2*Ls(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:qt.mass,stiffness:s,damping:r}}else{const t=E3(n);e={...e,...t,mass:qt.mass},e.isResolvedFromDuration=!0}return e}function QB(n=qt.visualDuration,e=qt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const r=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=C3({...t,velocity:-fr(t.velocity||0)}),m=d||0,g=c/(2*Math.sqrt(l*u)),A=o-r,p=fr(Math.sqrt(l/u)),y=Math.abs(A)<5;i||(i=y?qt.restSpeed.granular:qt.restSpeed.default),s||(s=y?qt.restDelta.granular:qt.restDelta.default);let v;if(g<1){const E=Ny(p,g);v=w=>{const M=Math.exp(-g*p*w);return o-M*((m+g*p*A)/E*Math.sin(E*w)+A*Math.cos(E*w))}}else if(g===1)v=E=>o-Math.exp(-p*E)*(A+(m+p*A)*E);else{const E=p*Math.sqrt(g*g-1);v=w=>{const M=Math.exp(-g*p*w),C=Math.min(E*w,300);return o-M*((m+g*p*A)*Math.sinh(C)+E*A*Math.cosh(C))/E}}const x={calculatedDuration:f&&h||null,next:E=>{const w=v(E);if(f)a.done=E>=h;else{let M=0;g<1&&(M=E===0?dr(m):OB(v,E,w));const C=Math.abs(M)<=i,S=Math.abs(o-w)<=s;a.done=C&&S}return a.value=a.done?o:w,a},toString:()=>{const E=Math.min(sB(x),My),w=rB(M=>x.next(E*M).value,E,30);return E+"ms "+w}};return x}function j_({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=n[0],d={done:!1,value:h},f=C=>a!==void 0&&C<a||l!==void 0&&C>l,m=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let g=t*e;const A=h+g,p=o===void 0?A:o(A);p!==A&&(g=p-h);const y=C=>-g*Math.exp(-C/i),v=C=>p+y(C),x=C=>{const S=y(C),_=v(C);d.done=Math.abs(S)<=c,d.value=d.done?p:_};let E,w;const M=C=>{f(d.value)&&(E=C,w=QB({keyframes:[d.value,m(d.value)],velocity:OB(v,C,d.value),damping:s,stiffness:r,restDelta:c,restSpeed:u}))};return M(0),{calculatedDuration:null,next:C=>{let S=!1;return!w&&E===void 0&&(S=!0,x(C),M(C)),E!==void 0&&C>=E?w.next(C-E):(!S&&x(C),d)}}}const M3=Gh(.42,0,1,1),I3=Gh(0,0,.58,1),GB=Gh(.42,0,.58,1),T3=n=>Array.isArray(n)&&typeof n[0]!="number",W_={linear:Zn,easeIn:M3,easeInOut:GB,easeOut:I3,circIn:dE,circInOut:EB,circOut:xB,backIn:hE,backInOut:yB,backOut:gB,anticipate:vB},q_=n=>{if(rE(n)){Sy(n.length===4);const[e,t,i,s]=n;return Gh(e,t,i,s)}else if(typeof n=="string")return Sy(W_[n]!==void 0),W_[n];return n};function R3(n,e,t){const i=[],s=t||UB,r=n.length-1;for(let o=0;o<r;o++){let a=s(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Zn:e;a=Vh(l,a)}i.push(a)}return i}function VB(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(Sy(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=R3(e,i,s),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let h=0;if(l>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const d=pa(n[h],n[h+1],u);return a[h](d)};return t?u=>c(Ls(n[0],n[r-1],u)):c}function B3(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=pa(0,e,i);n.push(Vt(t,1,s))}}function zB(n){const e=[0];return B3(e,n.length-1),e}function D3(n,e){return n.map(t=>t*e)}function L3(n,e){return n.map(()=>e||GB).splice(0,n.length-1)}function Ip({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=T3(i)?i.map(q_):q_(i),r={done:!1,value:e[0]},o=D3(t&&t.length===e.length?t:zB(e),n),a=VB(o,e,{ease:Array.isArray(s)?s:L3(e,s)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}const P3=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ft.update(e,!0),stop:()=>Ds(e),now:()=>fn.isProcessing?fn.timestamp:Is.now()}},N3={decay:j_,inertia:j_,tween:Ip,keyframes:Ip,spring:QB},F3=n=>n/100;class yE extends FB{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:s,keyframes:r}=this.options,o=(s==null?void 0:s.KeyframeResolver)||AE,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(r,a,t,i,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=this.options,a=sE(t)?t:N3[t]||Ip;let l,c;a!==Ip&&typeof e[0]!="number"&&(l=Vh(F3,UB(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});r==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=sB(u));const{calculatedDuration:h}=u,d=h+s,f=d*(i+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:d,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=i;if(this.startTime===null)return r.next(0);const{delay:d,repeat:f,repeatType:m,repeatDelay:g,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let v=this.currentTime,x=r;if(f){const C=Math.min(this.currentTime,u)/h;let S=Math.floor(C),_=C%1;!_&&C>=1&&(_=1),_===1&&S--,S=Math.min(S,f+1),!!(S%2)&&(m==="reverse"?(_=1-_,g&&(_-=g/h)):m==="mirror"&&(x=o)),v=Ls(0,1,_)*h}const E=y?{done:!1,value:l[0]}:x.next(v);a&&(E.value=a(E.value));let{done:w}=E;!y&&c!==null&&(w=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return M&&s!==void 0&&(E.value=Mm(l,this.options,s)),A&&A(E.value),M&&this.finish(),E}get duration(){const{resolved:e}=this;return e?fr(e.calculatedDuration):0}get time(){return fr(this.currentTime)}set time(e){e=dr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=P3,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const k3=new Set(["opacity","clipPath","filter","transform"]);function U3(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=aB(a,s);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}const O3=zx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Tp=10,Q3=2e4;function G3(n){return sE(n.type)||n.type==="spring"||!oB(n.ease)}function V3(n,e){const t=new yE({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const s=[];let r=0;for(;!i.done&&r<Q3;)i=t.sample(r),s.push(i.value),r+=Tp;return{times:void 0,keyframes:s,duration:r-Tp,ease:"linear"}}const HB={anticipate:vB,backInOut:yB,circInOut:EB};function z3(n){return n in HB}class $_ extends FB{constructor(e){super(e);const{name:t,motionValue:i,element:s,keyframes:r}=this.options;this.resolver=new NB(r,(o,a)=>this.onKeyframesResolved(o,a),t,i,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:s,ease:r,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof r=="string"&&Cp()&&z3(r)&&(r=HB[r]),G3(this.options)){const{onComplete:h,onUpdate:d,motionValue:f,element:m,...g}=this.options,A=V3(e,g);e=A.keyframes,e.length===1&&(e[1]=e[0]),i=A.duration,s=A.times,r=A.ease,o="keyframes"}const u=U3(a.owner.current,l,e,{...this.options,duration:i,times:s,ease:r});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(B_(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(Mm(e,this.options,t)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:s,type:o,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return fr(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return fr(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=dr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Zn;const{animation:i}=t;B_(i,e)}return Zn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:s,type:r,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:d,...f}=this.options,m=new yE({...f,keyframes:i,duration:s,type:r,ease:o,times:a,isGenerator:!0}),g=dr(this.time);c.setWithVelocity(m.sample(g-Tp).value,m.sample(g).value,Tp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:s,repeatType:r,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return O3()&&i&&k3.has(i)&&!l&&!c&&!s&&r!=="mirror"&&o!==0&&a!=="inertia"}}const H3={type:"spring",stiffness:500,damping:25,restSpeed:10},j3=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),W3={type:"keyframes",duration:.8},q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$3=(n,{keyframes:e})=>e.length>2?W3:Ca.has(n)?n.startsWith("scale")?j3(e[1]):H3:q3;function X3({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const vE=(n,e,t,i={},s,r)=>o=>{const a=iE(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-dr(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:r?void 0:s};X3(a)||(u={...u,...$3(n,u)}),u.duration&&(u.duration=dr(u.duration)),u.repeatDelay&&(u.repeatDelay=dr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!r&&e.get()!==void 0){const d=Mm(u.keyframes,a);if(d!==void 0)return ft.update(()=>{u.onUpdate(d),u.onComplete()}),new yU([])}return!r&&$_.supports(u)?new $_(u):new yE(u)};function K3({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function jB(n,e,{delay:t=0,transitionOverride:i,type:s}={}){var r;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=s&&n.animationState&&n.animationState.getState()[s];for(const h in l){const d=n.getValue(h,(r=n.latestValues[h])!==null&&r!==void 0?r:null),f=l[h];if(f===void 0||u&&K3(u,h))continue;const m={delay:t,...iE(o||{},h)};let g=!1;if(window.MotionHandoffAnimation){const p=fB(n);if(p){const y=window.MotionHandoffAnimation(p,h,ft);y!==null&&(m.startTime=y,g=!0)}}Ty(n,h),d.start(vE(h,d,f,n.shouldReduceMotion&&dB.has(h)?{type:!1}:m,n,g));const A=d.animation;A&&c.push(A)}return a&&Promise.all(c).then(()=>{ft.update(()=>{a&&BU(n,a)})}),c}function Fy(n,e,t={}){var i;const s=Cm(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(r=t.transitionOverride);const o=s?()=>Promise.all(jB(n,s,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=r;return Y3(n,e,u+c,h,d,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function Y3(n,e,t=0,i=0,s=1,r){const o=[],a=(n.variantChildren.size-1)*i,l=s===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(J3).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Fy(c,e,{...r,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function J3(n,e){return n.sortNodePosition(e)}function Z3(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>Fy(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=Fy(n,e,t);else{const s=typeof e=="function"?Cm(n,e,t.custom):e;i=Promise.all(jB(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const eO=jx.length;function WB(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?WB(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<eO;t++){const i=jx[t],s=n.props[i];(yh(s)||s===!1)&&(e[i]=s)}return e}const tO=[...Hx].reverse(),nO=Hx.length;function iO(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Z3(n,t,i)))}function sO(n){let e=iO(n),t=X_(),i=!0;const s=l=>(c,u)=>{var h;const d=Cm(n,u,l==="exit"?(h=n.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:m,...g}=d;c={...c,...g,...m}}return c};function r(l){e=l(n)}function o(l){const{props:c}=n,u=WB(n.parent)||{},h=[],d=new Set;let f={},m=1/0;for(let A=0;A<nO;A++){const p=tO[A],y=t[p],v=c[p]!==void 0?c[p]:u[p],x=yh(v),E=p===l?y.isActive:null;E===!1&&(m=A);let w=v===u[p]&&v!==c[p]&&x;if(w&&i&&n.manuallyAnimateOnMount&&(w=!1),y.protectedKeys={...f},!y.isActive&&E===null||!v&&!y.prevProp||wm(v)||typeof v=="boolean")continue;const M=rO(y.prevProp,v);let C=M||p===l&&y.isActive&&!w&&x||A>m&&x,S=!1;const _=Array.isArray(v)?v:[v];let R=_.reduce(s(p),{});E===!1&&(R={});const{prevResolvedValues:O={}}=y,N={...O,...R},F=z=>{C=!0,d.has(z)&&(S=!0,d.delete(z)),y.needsAnimating[z]=!0;const D=n.getValue(z);D&&(D.liveStyle=!1)};for(const z in N){const D=R[z],j=O[z];if(f.hasOwnProperty(z))continue;let K=!1;Cy(D)&&Cy(j)?K=!nB(D,j):K=D!==j,K?D!=null?F(z):d.add(z):D!==void 0&&d.has(z)?F(z):y.protectedKeys[z]=!0}y.prevProp=v,y.prevResolvedValues=R,y.isActive&&(f={...f,...R}),i&&n.blockInitialAnimation&&(C=!1),C&&(!(w&&M)||S)&&h.push(..._.map(z=>({animation:z,options:{type:p}})))}if(d.size){const A={};d.forEach(p=>{const y=n.getBaseTarget(p),v=n.getValue(p);v&&(v.liveStyle=!0),A[p]=y??null}),h.push({animation:A})}let g=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(h):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(d=>{var f;return(f=d.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),t[l].isActive=c;const h=o(l);for(const d in t)t[d].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>t,reset:()=>{t=X_(),i=!0}}}function rO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!nB(e,n):!1}function bo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function X_(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class vo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oO extends vo{constructor(e){super(e),e.animationState||(e.animationState=sO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let aO=0;class lO extends vo{constructor(){super(...arguments),this.id=aO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const cO={animation:{Feature:oO},exit:{Feature:lO}};function Eh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function zh(n){return{point:{x:n.pageX,y:n.pageY}}}const uO=n=>e=>oE(e)&&n(e,zh(e));function Qu(n,e,t,i){return Eh(n,e,uO(t),i)}const K_=(n,e)=>Math.abs(n-e);function hO(n,e){const t=K_(n.x,e.x),i=K_(n.y,e.y);return Math.sqrt(t**2+i**2)}class qB{constructor(e,t,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=xA(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=hO(h.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:m}=h,{timestamp:g}=fn;this.history.push({...m,timestamp:g});const{onStart:A,onMove:p}=this.handlers;d||(A&&A(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=vA(d,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:f,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=xA(h.type==="pointercancel"?this.lastMoveEventInfo:vA(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,A),m&&m(h,A)},!oE(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.contextWindow=s||window;const o=zh(e),a=vA(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=fn;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,xA(a,this.history)),this.removeListeners=Vh(Qu(this.contextWindow,"pointermove",this.handlePointerMove),Qu(this.contextWindow,"pointerup",this.handlePointerUp),Qu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ds(this.updatePoint)}}function vA(n,e){return e?{point:e(n.point)}:n}function Y_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function xA({point:n},e){return{point:n,delta:Y_(n,$B(e)),offset:Y_(n,dO(e)),velocity:fO(e,.1)}}function dO(n){return n[0]}function $B(n){return n[n.length-1]}function fO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=$B(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>dr(e)));)t--;if(!i)return{x:0,y:0};const r=fr(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const XB=1e-4,pO=1-XB,mO=1+XB,KB=.01,AO=0-KB,gO=0+KB;function wi(n){return n.max-n.min}function yO(n,e,t){return Math.abs(n-e)<=t}function J_(n,e,t,i=.5){n.origin=i,n.originPoint=Vt(e.min,e.max,n.origin),n.scale=wi(t)/wi(e),n.translate=Vt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=pO&&n.scale<=mO||isNaN(n.scale))&&(n.scale=1),(n.translate>=AO&&n.translate<=gO||isNaN(n.translate))&&(n.translate=0)}function Gu(n,e,t,i){J_(n.x,e.x,t.x,i?i.originX:void 0),J_(n.y,e.y,t.y,i?i.originY:void 0)}function Z_(n,e,t){n.min=t.min+e.min,n.max=n.min+wi(e)}function vO(n,e,t){Z_(n.x,e.x,t.x),Z_(n.y,e.y,t.y)}function ew(n,e,t){n.min=e.min-t.min,n.max=n.min+wi(e)}function Vu(n,e,t){ew(n.x,e.x,t.x),ew(n.y,e.y,t.y)}function xO(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Vt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Vt(t,n,i.max):Math.min(n,t)),n}function tw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function EO(n,{top:e,left:t,bottom:i,right:s}){return{x:tw(n.x,t,s),y:tw(n.y,e,i)}}function nw(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function bO(n,e){return{x:nw(n.x,e.x),y:nw(n.y,e.y)}}function _O(n,e){let t=.5;const i=wi(n),s=wi(e);return s>i?t=pa(e.min,e.max-i,n.min):i>s&&(t=pa(n.min,n.max-s,e.min)),Ls(0,1,t)}function wO(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ky=.35;function SO(n=ky){return n===!1?n=0:n===!0&&(n=ky),{x:iw(n,"left","right"),y:iw(n,"top","bottom")}}function iw(n,e,t){return{min:sw(n,e),max:sw(n,t)}}function sw(n,e){return typeof n=="number"?n:n[e]||0}const rw=()=>({translate:0,scale:1,origin:0,originPoint:0}),wl=()=>({x:rw(),y:rw()}),ow=()=>({min:0,max:0}),Yt=()=>({x:ow(),y:ow()});function Pi(n){return[n("x"),n("y")]}function YB({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function CO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function MO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function EA(n){return n===void 0||n===1}function Uy({scale:n,scaleX:e,scaleY:t}){return!EA(n)||!EA(e)||!EA(t)}function Uo(n){return Uy(n)||JB(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function JB(n){return aw(n.x)||aw(n.y)}function aw(n){return n&&n!=="0%"}function Rp(n,e,t){const i=n-t,s=e*i;return t+s}function lw(n,e,t,i,s){return s!==void 0&&(n=Rp(n,s,i)),Rp(n,t,i)+e}function Oy(n,e=0,t=1,i,s){n.min=lw(n.min,e,t,i,s),n.max=lw(n.max,e,t,i,s)}function ZB(n,{x:e,y:t}){Oy(n.x,e.translate,e.scale,e.originPoint),Oy(n.y,t.translate,t.scale,t.originPoint)}const cw=.999999999999,uw=1.0000000000001;function IO(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,o;for(let a=0;a<s;a++){r=t[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Cl(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ZB(n,o)),i&&Uo(r.latestValues)&&Cl(n,r.latestValues))}e.x<uw&&e.x>cw&&(e.x=1),e.y<uw&&e.y>cw&&(e.y=1)}function Sl(n,e){n.min=n.min+e,n.max=n.max+e}function hw(n,e,t,i,s=.5){const r=Vt(n.min,n.max,s);Oy(n,e,t,r,i)}function Cl(n,e){hw(n.x,e.x,e.scaleX,e.scale,e.originX),hw(n.y,e.y,e.scaleY,e.scale,e.originY)}function e2(n,e){return YB(MO(n.getBoundingClientRect(),e))}function TO(n,e,t){const i=e2(n,t),{scroll:s}=e;return s&&(Sl(i.x,s.offset.x),Sl(i.y,s.offset.y)),i}const t2=({current:n})=>n?n.ownerDocument.defaultView:null,RO=new WeakMap;class BO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(zh(u).point)},r=(u,h)=>{const{drag:d,dragPropagation:f,onDragStart:m}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=CU(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pi(A=>{let p=this.getAxisMotionValue(A).get()||0;if(Ms.test(p)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[A];v&&(p=wi(v)*(parseFloat(p)/100))}}this.originPoint[A]=p}),m&&ft.postRender(()=>m(u,h)),Ty(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:m,onDrag:g}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:A}=h;if(f&&this.currentDirection===null){this.currentDirection=DO(A),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,A),this.updateAxis("y",h.point,A),this.visualElement.render(),g&&g(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Pi(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new qB(e,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:t2(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&ft.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!vd(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=xO(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;t&&bl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=EO(s.layoutBox,t):this.constraints=!1,this.elastic=SO(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Pi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=wO(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!bl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=TO(i,s.root,this.visualElement.getTransformPagePoint());let o=bO(s.layout.layoutBox,r);if(t){const a=t(CO(o));this.hasMutatedConstraints=!!a,a&&(o=YB(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Pi(u=>{if(!vd(u,t,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const d=s?200:1e6,f=s?40:1e7,m={type:"inertia",velocity:i?e[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Ty(this.visualElement,e),i.start(vE(e,i,0,t,this.visualElement,!1))}stopAnimation(){Pi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pi(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Pi(t=>{const{drag:i}=this.getProps();if(!vd(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[t];r.set(e[t]-Vt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!bl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Pi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=_O({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Pi(o=>{if(!vd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Vt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;RO.set(this.visualElement,this);const e=this.visualElement.current,t=Qu(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();bl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ft.read(i);const o=Eh(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Pi(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=ky,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function vd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function DO(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class LO extends vo{constructor(e){super(e),this.removeGroupControls=Zn,this.removeListeners=Zn,this.controls=new BO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zn}unmount(){this.removeGroupControls(),this.removeListeners()}}const dw=n=>(e,t)=>{n&&ft.postRender(()=>n(e,t))};class PO extends vo{constructor(){super(...arguments),this.removePointerDownListener=Zn}onPointerDown(e){this.session=new qB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:t2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:dw(e),onStart:dw(t),onMove:i,onEnd:(r,o)=>{delete this.session,s&&ft.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=Qu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ff={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Uc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(De.test(n))n=parseFloat(n);else return n;const t=fw(n,e.target.x),i=fw(n,e.target.y);return`${t}% ${i}%`}},NO={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=fo.parse(n);if(s.length>5)return i;const r=fo.createTransformer(n),o=typeof s[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Vt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),r(s)}};class FO extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;aU(kO),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Ff.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||ft.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function n2(n){const[e,t]=FR(),i=V.useContext(Ox);return b.jsx(FO,{...n,layoutGroup:i,switchLayoutGroup:V.useContext(zR),isPresent:e,safeToRemove:t})}const kO={borderRadius:{...Uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uc,borderTopRightRadius:Uc,borderBottomLeftRadius:Uc,borderBottomRightRadius:Uc,boxShadow:NO};function UO(n,e,t){const i=Un(n)?n:lr(n);return i.start(vE("",i,e,t)),i.animation}function OO(n){return n instanceof SVGElement&&n.tagName!=="svg"}const QO=(n,e)=>n.depth-e.depth;class GO{constructor(){this.children=[],this.isDirty=!1}add(e){aE(this.children,e),this.isDirty=!0}remove(e){lE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(QO),this.isDirty=!1,this.children.forEach(e)}}function VO(n,e){const t=Is.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(Ds(i),n(r-e))};return ft.read(i,!0),()=>Ds(i)}const i2=["TopLeft","TopRight","BottomLeft","BottomRight"],zO=i2.length,pw=n=>typeof n=="string"?parseFloat(n):n,mw=n=>typeof n=="number"||De.test(n);function HO(n,e,t,i,s,r){s?(n.opacity=Vt(0,t.opacity!==void 0?t.opacity:1,jO(i)),n.opacityExit=Vt(e.opacity!==void 0?e.opacity:1,0,WO(i))):r&&(n.opacity=Vt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<zO;o++){const a=`border${i2[o]}Radius`;let l=Aw(e,a),c=Aw(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||mw(l)===mw(c)?(n[a]=Math.max(Vt(pw(l),pw(c),i),0),(Ms.test(c)||Ms.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Vt(e.rotate||0,t.rotate||0,i))}function Aw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const jO=s2(0,.5,xB),WO=s2(.5,.95,Zn);function s2(n,e,t){return i=>i<n?0:i>e?1:t(pa(n,e,i))}function gw(n,e){n.min=e.min,n.max=e.max}function Bi(n,e){gw(n.x,e.x),gw(n.y,e.y)}function yw(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function vw(n,e,t,i,s){return n-=e,n=Rp(n,1/t,i),s!==void 0&&(n=Rp(n,1/s,i)),n}function qO(n,e=0,t=1,i=.5,s,r=n,o=n){if(Ms.test(e)&&(e=parseFloat(e),e=Vt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Vt(r.min,r.max,i);n===r&&(a-=e),n.min=vw(n.min,e,t,a,s),n.max=vw(n.max,e,t,a,s)}function xw(n,e,[t,i,s],r,o){qO(n,e[t],e[i],e[s],e.scale,r,o)}const $O=["x","scaleX","originX"],XO=["y","scaleY","originY"];function Ew(n,e,t,i){xw(n.x,e,$O,t?t.x:void 0,i?i.x:void 0),xw(n.y,e,XO,t?t.y:void 0,i?i.y:void 0)}function bw(n){return n.translate===0&&n.scale===1}function r2(n){return bw(n.x)&&bw(n.y)}function _w(n,e){return n.min===e.min&&n.max===e.max}function KO(n,e){return _w(n.x,e.x)&&_w(n.y,e.y)}function ww(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function o2(n,e){return ww(n.x,e.x)&&ww(n.y,e.y)}function Sw(n){return wi(n.x)/wi(n.y)}function Cw(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class YO{constructor(){this.members=[]}add(e){aE(this.members,e),e.scheduleRender()}remove(e){if(lE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JO(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:d,skewX:f,skewY:m}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),d&&(i+=`rotateY(${d}deg) `),f&&(i+=`skewX(${f}deg) `),m&&(i+=`skewY(${m}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Oo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},xu=typeof window<"u"&&window.MotionDebug!==void 0,bA=["","X","Y","Z"],ZO={visibility:"hidden"},Mw=1e3;let eQ=0;function _A(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function a2(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=fB(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ft,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&a2(i)}function l2({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=eQ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xu&&(Oo.totalNodes=Oo.resolvedTargetDeltas=Oo.recalculatedProjection=0),this.nodes.forEach(iQ),this.nodes.forEach(lQ),this.nodes.forEach(cQ),this.nodes.forEach(sQ),xu&&window.MotionDebug.record(Oo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new GO)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new cE),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=OO(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let h;const d=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=VO(d,250),Ff.hasAnimatedSinceResize&&(Ff.hasAnimatedSinceResize=!1,this.nodes.forEach(Tw))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||pQ,{onLayoutAnimationStart:A,onLayoutAnimationComplete:p}=u.getProps(),y=!this.targetLayout||!o2(this.targetLayout,m)||f,v=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const x={...iE(g,"layout"),onPlay:A,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||Tw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uQ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&a2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Iw);return}this.isUpdating||this.nodes.forEach(oQ),this.isUpdating=!1,this.nodes.forEach(aQ),this.nodes.forEach(tQ),this.nodes.forEach(nQ),this.clearAllSnapshots();const a=Is.now();fn.delta=Ls(0,1e3/60,a-fn.timestamp),fn.timestamp=a,fn.isProcessing=!0,fA.update.process(fn),fA.preRender.process(fn),fA.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rQ),this.sharedNodes.forEach(hQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!r2(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Uo(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),mQ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Yt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(AQ))){const{scroll:u}=this.root;u&&(Sl(l.x,u.offset.x),Sl(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Yt();if(Bi(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;u!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Bi(l,o),Sl(l.x,h.offset.x),Sl(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Yt();Bi(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Cl(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Uo(u.latestValues)&&Cl(l,u.latestValues)}return Uo(this.latestValues)&&Cl(l,this.latestValues),l}removeTransform(o){const a=Yt();Bi(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Uo(c.latestValues))continue;Uy(c.latestValues)&&c.updateSnapshot();const u=Yt(),h=c.measurePageBox();Bi(u,h),Ew(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Uo(this.latestValues)&&Ew(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),Vu(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Yt(),this.targetWithTransforms=Yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bi(this.target,this.layout.layoutBox),ZB(this.target,this.targetDelta)):Bi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),Vu(this.relativeTargetOrigin,this.target,f.target),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}xu&&Oo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Uy(this.parent.latestValues)||JB(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Bi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;IO(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Yt());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yw(this.prevProjectionDelta.x,this.projectionDelta.x),yw(this.prevProjectionDelta.y,this.projectionDelta.y)),Gu(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Cw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Cw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),xu&&Oo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wl(),this.projectionDelta=wl(),this.projectionDeltaWithTransform=wl()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Yt(),f=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=f!==m,A=this.getStack(),p=!A||A.members.length<=1,y=!!(g&&!p&&this.options.crossfade===!0&&!this.path.some(fQ));this.animationProgress=0;let v;this.mixTargetDelta=x=>{const E=x/1e3;Rw(h.x,o.x,E),Rw(h.y,o.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vu(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dQ(this.relativeTarget,this.relativeTargetOrigin,d,E),v&&KO(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Yt()),Bi(v,this.relativeTarget)),g&&(this.animationValues=u,HO(u,c,this.latestValues,E,y,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{Ff.hasAnimatedSinceResize=!0,this.currentAnimation=UO(0,Mw,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&c2(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Yt();const h=wi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=wi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Bi(a,l),Cl(a,u),Gu(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new YO),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&_A("z",o,c,this.animationValues);for(let u=0;u<bA.length;u++)_A(`rotate${bA[u]}`,o,c,this.animationValues),_A(`skew${bA[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZO;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Pf(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Pf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Uo(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=JO(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:f,y:m}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Sp){if(d[g]===void 0)continue;const{correct:A,applyTo:p}=Sp[g],y=c.transform==="none"?d[g]:A(d[g],h);if(p){const v=p.length;for(let x=0;x<v;x++)c[p[x]]=y}else c[g]=y}return this.options.layoutId&&(c.pointerEvents=h===this?Pf(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Iw),this.root.sharedNodes.clear()}}}function tQ(n){n.updateLayout()}function nQ(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?Pi(h=>{const d=o?t.measuredBox[h]:t.layoutBox[h],f=wi(d);d.min=i[h].min,d.max=d.min+f}):c2(r,t.layoutBox,i)&&Pi(h=>{const d=o?t.measuredBox[h]:t.layoutBox[h],f=wi(i[h]);d.max=d.min+f,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+f)});const a=wl();Gu(a,i,t.layoutBox);const l=wl();o?Gu(l,n.applyTransform(s,!0),t.measuredBox):Gu(l,i,t.layoutBox);const c=!r2(a);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const m=Yt();Vu(m,t.layoutBox,d.layoutBox);const g=Yt();Vu(g,i,f.layoutBox),o2(m,g)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=g,n.relativeTargetOrigin=m,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function iQ(n){xu&&Oo.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function sQ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function rQ(n){n.clearSnapshot()}function Iw(n){n.clearMeasurements()}function oQ(n){n.isLayoutDirty=!1}function aQ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Tw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function lQ(n){n.resolveTargetDelta()}function cQ(n){n.calcProjection()}function uQ(n){n.resetSkewAndRotation()}function hQ(n){n.removeLeadSnapshot()}function Rw(n,e,t){n.translate=Vt(e.translate,0,t),n.scale=Vt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Bw(n,e,t,i){n.min=Vt(e.min,t.min,i),n.max=Vt(e.max,t.max,i)}function dQ(n,e,t,i){Bw(n.x,e.x,t.x,i),Bw(n.y,e.y,t.y,i)}function fQ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const pQ={duration:.45,ease:[.4,0,.1,1]},Dw=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Lw=Dw("applewebkit/")&&!Dw("chrome/")?Math.round:Zn;function Pw(n){n.min=Lw(n.min),n.max=Lw(n.max)}function mQ(n){Pw(n.x),Pw(n.y)}function c2(n,e,t){return n==="position"||n==="preserve-aspect"&&!yO(Sw(e),Sw(t),.2)}function AQ(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const gQ=l2({attachResizeListener:(n,e)=>Eh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wA={current:void 0},u2=l2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!wA.current){const n=new gQ({});n.mount(window),n.setOptions({layoutScroll:!0}),wA.current=n}return wA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),yQ={pan:{Feature:PO},drag:{Feature:LO,ProjectionNode:u2,MeasureLayout:n2}};function Nw(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=i[s];r&&ft.postRender(()=>r(e,zh(e)))}class vQ extends vo{mount(){const{current:e}=this.node;e&&(this.unmount=EU(e,t=>(Nw(this.node,t,"Start"),i=>Nw(this.node,i,"End"))))}unmount(){}}class xQ extends vo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vh(Eh(this.node.current,"focus",()=>this.onFocus()),Eh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Fw(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=i[s];r&&ft.postRender(()=>r(e,zh(e)))}class EQ extends vo{mount(){const{current:e}=this.node;e&&(this.unmount=SU(e,t=>(Fw(this.node,t,"Start"),(i,{success:s})=>Fw(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qy=new WeakMap,SA=new WeakMap,bQ=n=>{const e=Qy.get(n.target);e&&e(n)},_Q=n=>{n.forEach(bQ)};function wQ({root:n,...e}){const t=n||document;SA.has(t)||SA.set(t,{});const i=SA.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(_Q,{root:n,...e})),i[s]}function SQ(n,e,t){const i=wQ(e);return Qy.set(n,t),i.observe(n),()=>{Qy.delete(n),i.unobserve(n)}}const CQ={some:0,all:1};class MQ extends vo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:CQ[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=c?u:h;d&&d(l)};return SQ(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(IQ(e,t))&&this.startObserver()}unmount(){}}function IQ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const TQ={inView:{Feature:MQ},tap:{Feature:EQ},focus:{Feature:xQ},hover:{Feature:vQ}},RQ={layout:{ProjectionNode:u2,MeasureLayout:n2}},Gy={current:null},h2={current:!1};function BQ(){if(h2.current=!0,!!Gx)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gy.current=n.matches;n.addListener(e),e()}else Gy.current=!1}const DQ=[...PB,Nn,fo],LQ=n=>DQ.find(LB(n)),kw=new WeakMap;function PQ(n,e,t){for(const i in e){const s=e[i],r=t[i];if(Un(s))n.addValue(i,s);else if(Un(r))n.addValue(i,lr(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(i);n.addValue(i,lr(o!==void 0?o:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const Uw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class NQ{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=AE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Is.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ft.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Sm(t),this.isVariantNode=GR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&Un(m)&&m.set(l[f],!1)}}mount(e){this.current=e,kw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),h2.current||BQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){kw.delete(this.current),this.projection&&this.projection.unmount(),Ds(this.notifyUpdate),Ds(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ca.has(e),s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ft.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tc){const t=tc[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Uw.length;i++){const s=Uw[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=e[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=PQ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=lr(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(BB(s)||bB(s))?s=parseFloat(s):!LQ(s)&&fo.test(t)&&(s=IB(e,t)),this.setBaseTarget(e,Un(s)?s.get():s)),Un(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const o=Xx(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(s=o[e])}if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Un(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new cE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class d2 extends NQ{constructor(){super(...arguments),this.KeyframeResolver=NB}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Un(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function FQ(n){return window.getComputedStyle(n)}class kQ extends d2{constructor(){super(...arguments),this.type="html",this.renderInstance=KR}readValueFromInstance(e,t){if(Ca.has(t)){const i=mE(t);return i&&i.default||0}else{const i=FQ(e),s=(qR(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return e2(e,t)}build(e,t,i){Jx(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return nE(e,t,i)}}class UQ extends d2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ca.has(t)){const i=mE(t);return i&&i.default||0}return t=YR.has(t)?t:Wx(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return eB(e,t,i)}build(e,t,i){Zx(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,s){JR(e,t,i,s)}mount(e){this.isSVGTag=tE(e.tagName),super.mount(e)}}const OQ=(n,e)=>$x(n)?new UQ(e):new kQ(e,{allowProjection:n!==V.Fragment}),QQ=AU({...cO,...TQ,...yQ,...RQ},OQ),Ts=Bk(QQ);function f2(n,e){let t;const i=()=>{const{currentTime:s}=e,o=(s===null?0:s.value)/100;t!==o&&n(o),t=o};return ft.update(i,!0),()=>Ds(i)}const kf=new WeakMap;let Pr;function GQ(n,e){if(e){const{inlineSize:t,blockSize:i}=e[0];return{width:t,height:i}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function VQ({target:n,contentRect:e,borderBoxSize:t}){var i;(i=kf.get(n))===null||i===void 0||i.forEach(s=>{s({target:n,contentSize:e,get size(){return GQ(n,t)}})})}function zQ(n){n.forEach(VQ)}function HQ(){typeof ResizeObserver>"u"||(Pr=new ResizeObserver(zQ))}function jQ(n,e){Pr||HQ();const t=cB(n);return t.forEach(i=>{let s=kf.get(i);s||(s=new Set,kf.set(i,s)),s.add(e),Pr==null||Pr.observe(i)}),()=>{t.forEach(i=>{const s=kf.get(i);s==null||s.delete(e),s!=null&&s.size||Pr==null||Pr.unobserve(i)})}}const Uf=new Set;let zu;function WQ(){zu=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};Uf.forEach(t=>t(e))},window.addEventListener("resize",zu)}function qQ(n){return Uf.add(n),zu||WQ(),()=>{Uf.delete(n),!Uf.size&&zu&&(zu=void 0)}}function $Q(n,e){return typeof n=="function"?qQ(n):jQ(n,e)}const XQ=50,Ow=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),KQ=()=>({time:0,x:Ow(),y:Ow()}),YQ={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Qw(n,e,t,i){const s=t[e],{length:r,position:o}=YQ[e],a=s.current,l=t.time;s.current=n[`scroll${o}`],s.scrollLength=n[`scroll${r}`]-n[`client${r}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=pa(0,s.scrollLength,s.current);const c=i-l;s.velocity=c>XQ?0:uE(s.current-a,c)}function JQ(n,e,t){Qw(n,"x",e,t),Qw(n,"y",e,t),e.time=t}function ZQ(n,e){const t={x:0,y:0};let i=n;for(;i&&i!==e;)if(i instanceof HTMLElement)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const s=i.getBoundingClientRect();i=i.parentElement;const r=i.getBoundingClientRect();t.x+=s.left-r.left,t.y+=s.top-r.top}else if(i instanceof SVGGraphicsElement){const{x:s,y:r}=i.getBBox();t.x+=s,t.y+=r;let o=null,a=i.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=i.parentNode;i=o}else break;return t}const Vy={start:0,center:.5,end:1};function Gw(n,e,t=0){let i=0;if(n in Vy&&(n=Vy[n]),typeof n=="string"){const s=parseFloat(n);n.endsWith("px")?i=s:n.endsWith("%")?n=s/100:n.endsWith("vw")?i=s/100*document.documentElement.clientWidth:n.endsWith("vh")?i=s/100*document.documentElement.clientHeight:n=s}return typeof n=="number"&&(i=e*n),t+i}const e4=[0,0];function t4(n,e,t,i){let s=Array.isArray(n)?n:e4,r=0,o=0;return typeof n=="number"?s=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?s=n.split(" "):s=[n,Vy[n]?n:"0"]),r=Gw(s[0],t,i),o=Gw(s[1],e),r-o}const n4={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},i4={x:0,y:0};function s4(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function r4(n,e,t){const{offset:i=n4.All}=t,{target:s=n,axis:r="y"}=t,o=r==="y"?"height":"width",a=s!==n?ZQ(s,n):i4,l=s===n?{width:n.scrollWidth,height:n.scrollHeight}:s4(s),c={width:n.clientWidth,height:n.clientHeight};e[r].offset.length=0;let u=!e[r].interpolate;const h=i.length;for(let d=0;d<h;d++){const f=t4(i[d],c[o],l[o],a[r]);!u&&f!==e[r].interpolatorOffsets[d]&&(u=!0),e[r].offset[d]=f}u&&(e[r].interpolate=VB(e[r].offset,zB(i),{clamp:!1}),e[r].interpolatorOffsets=[...e[r].offset]),e[r].progress=Ls(0,1,e[r].interpolate(e[r].current))}function o4(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function a4(n,e,t,i={}){return{measure:()=>o4(n,i.target,t),update:s=>{JQ(n,t,s),(i.offset||i.target)&&r4(n,t,i)},notify:()=>e(t)}}const Oc=new WeakMap,Vw=new WeakMap,CA=new WeakMap,zw=n=>n===document.documentElement?window:n;function xE(n,{container:e=document.documentElement,...t}={}){let i=CA.get(e);i||(i=new Set,CA.set(e,i));const s=KQ(),r=a4(e,n,s,t);if(i.add(r),!Oc.has(e)){const a=()=>{for(const d of i)d.measure()},l=()=>{for(const d of i)d.update(fn.timestamp)},c=()=>{for(const d of i)d.notify()},u=()=>{ft.read(a,!1,!0),ft.read(l,!1,!0),ft.update(c,!1,!0)};Oc.set(e,u);const h=zw(e);window.addEventListener("resize",u,{passive:!0}),e!==document.documentElement&&Vw.set(e,$Q(e,u)),h.addEventListener("scroll",u,{passive:!0})}const o=Oc.get(e);return ft.read(o,!1,!0),()=>{var a;Ds(o);const l=CA.get(e);if(!l||(l.delete(r),l.size))return;const c=Oc.get(e);Oc.delete(e),c&&(zw(e).removeEventListener("scroll",c),(a=Vw.get(e))===null||a===void 0||a(),window.removeEventListener("resize",c))}}function l4({source:n,container:e,axis:t="y"}){n&&(e=n);const i={value:0},s=xE(r=>{i.value=r[t].progress*100},{container:e,axis:t});return{currentTime:i,cancel:s}}const MA=new Map;function p2({source:n,container:e=document.documentElement,axis:t="y"}={}){n&&(e=n),MA.has(e)||MA.set(e,{});const i=MA.get(e);return i[t]||(i[t]=iB()?new ScrollTimeline({source:e,axis:t}):l4({source:e,axis:t})),i[t]}function c4(n){return n.length===2}function m2(n){return n&&(n.target||n.offset)}function u4(n,e){return c4(n)||m2(e)?xE(t=>{n(t[e.axis].progress,t)},e):f2(n,p2(e))}function h4(n,e){if(n.flatten(),m2(e))return n.pause(),xE(t=>{n.time=n.duration*t[e.axis].progress},e);{const t=p2(e);return n.attachTimeline?n.attachTimeline(t,i=>(i.pause(),f2(s=>{i.time=i.duration*s},t))):Zn}}function d4(n,{axis:e="y",...t}={}){const i={axis:e,...t};return typeof n=="function"?u4(n,i):h4(n,i)}function Hw(n,e){_k(!!(!e||e.current))}const f4=()=>({scrollX:lr(0),scrollY:lr(0),scrollXProgress:lr(0),scrollYProgress:lr(0)});function p4({container:n,target:e,layoutEffect:t=!0,...i}={}){const s=Em(f4);return(t?Vx:V.useEffect)(()=>(Hw("target",e),Hw("container",n),d4((o,{x:a,y:l})=>{s.scrollX.set(a.current),s.scrollXProgress.set(a.progress),s.scrollY.set(l.current),s.scrollYProgress.set(l.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(i.offset)]),s}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Et=(n,e)=>{const t=V.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>V.createElement("svg",{ref:u,...m4,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${A4(n)}`,a].join(" "),...c},[...e.map(([h,d])=>V.createElement(h,d)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=Et("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=Et("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=Et("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=Et("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=Et("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Et("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Et("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Et("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Et("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Et("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Et("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=Et("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=Et("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=Et("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=Et("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=Et("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=Et("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Et("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=Et("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=Et("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=Et("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=Et("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=Et("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=Et("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Et("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=Et("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=Et("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),v2="/assets/img/logo-uNv_1gp3.png",Hy=(n,e=80)=>{const t=document.getElementById(n);if(t){const s=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:s,behavior:"smooth"})}},Ml=(n,e,t,i)=>{if(n.startsWith("/#")){e.preventDefault();const s=n.split("#")[1];t&&t.pathname!=="/"?(i&&i("/"),setTimeout(()=>Hy(s),100)):Hy(s)}},ra=n=>{if(Hy("contact"),n){const e=document.getElementById("inquiryType");e&&(e.value=n,e.dispatchEvent(new Event("change",{bubbles:!0})))}},Ww=[{name:"Technology",href:"/#technology",isSection:!0},{name:"Benefits",href:"/#benefits",isSection:!0},{name:"Integration",href:"/#integration",isSection:!0},{name:"Timeline",href:"/timeline",isSection:!1},{name:"Team",href:"/team",isSection:!1},{name:"Careers",href:"/careers",isSection:!1},{name:"FAQ",href:"/faq",isSection:!1}],k4=()=>{const[n,e]=V.useState(!1),[t,i]=V.useState(!1),s=Fs(),r=xm(),o=V.useCallback(()=>{e(!n)},[n]),a=V.useCallback(()=>{e(!1)},[]);V.useEffect(()=>{const c=()=>{i(window.scrollY>50)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]),V.useEffect(()=>{a()},[s,a]);const l=t?"bg-dark-900/95 backdrop-blur-md border-b border-white/10":"bg-transparent";return b.jsxs(Ts.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 will-change-transform ${l}`,children:[b.jsx("div",{className:"container mx-auto px-4 md:px-6",children:b.jsxs("div",{className:"flex items-center justify-between h-20",children:[b.jsx(Ai,{to:"/",className:"flex items-center pointer-events-auto",onClick:a,children:b.jsx("div",{className:"relative h-[80px] w-auto transition-all duration-300 md:h-[80px]",children:b.jsx("img",{src:v2,alt:"LCM Logo",className:"h-full w-auto object-contain transition-transform duration-300 hover:scale-105",style:{maxWidth:"200px"},draggable:"false"})})}),b.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[Ww.map(c=>c.isSection?b.jsx(Ai,{to:c.href,className:"text-base font-medium text-white/70 hover:text-white transition-colors px-2 py-1",onClick:u=>Ml(c.href,u,s,r),children:c.name},c.name):b.jsx(Ai,{to:c.href,className:"text-base font-medium text-white/70 hover:text-white transition-colors px-2 py-1",children:c.name},c.name)),b.jsx(Ai,{to:"/#contact",onClick:c=>Ml("/#contact",c,s,r),className:"px-5 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-full text-base font-medium transition-colors",children:"Contact Us"})]}),b.jsx("button",{className:"md:hidden p-2 text-white/70 hover:text-white transition-colors",onClick:o,"aria-label":"Toggle menu","aria-expanded":n,children:n?b.jsx(Nr,{size:26}):b.jsx(R4,{size:26})})]})}),b.jsx(kR,{children:n&&b.jsx(Ts.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"md:hidden bg-dark-900/95 backdrop-blur-md border-t border-white/10",children:b.jsx("nav",{className:"container mx-auto px-4 py-4",children:b.jsxs("div",{className:"flex flex-col space-y-4",children:[Ww.map(c=>c.isSection?b.jsx(Ai,{to:c.href,className:"text-base font-medium text-white/70 hover:text-white transition-colors",onClick:u=>{Ml(c.href,u,s,r),a()},children:c.name},c.name):b.jsx(Ai,{to:c.href,className:"text-base font-medium text-white/70 hover:text-white transition-colors",onClick:a,children:c.name},c.name)),b.jsx(Ai,{to:"/#contact",onClick:c=>{Ml("/#contact",c,s,r),a()},className:"text-base font-medium text-primary-500 hover:text-primary-400 transition-colors",children:"Contact Us"})]})})})})]})},U4=[{name:"Technology",href:"/#technology"},{name:"Benefits",href:"/#benefits"},{name:"Integration",href:"/#integration"}],O4=()=>{const n=Fs(),e=xm();return b.jsx("footer",{className:"bg-dark-800 border-t border-white/10",children:b.jsxs("div",{className:"container mx-auto px-4 py-14",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12",children:[b.jsxs("div",{className:"space-y-5 text-center md:text-left",children:[b.jsx(Ai,{to:"/",className:"inline-block",children:b.jsx("img",{src:v2,alt:"LCM Logo",className:"block h-[100px] sm:h-[140px] w-auto max-w-full transition-transform duration-300 hover:scale-105 mx-auto md:mx-0",draggable:"false"})}),b.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:"Revolutionizing EV charging with innovative in-motion charging technology. Drive further, charge less."})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-display text-xl font-semibold text-white mb-4",children:"Quick Links"}),b.jsxs("ul",{className:"space-y-3 text-base",children:[U4.map(t=>b.jsx("li",{children:b.jsx(Ai,{to:t.href,onClick:i=>Ml(t.href,i,n,e),className:"text-white/70 hover:text-white transition-colors",children:t.name})},t.name)),b.jsx("li",{children:b.jsx(Ai,{to:"/team",className:"text-white/70 hover:text-white transition-colors",children:"Team"})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-display text-xl font-semibold text-white mb-4",children:"Company"}),b.jsxs("ul",{className:"space-y-3 text-base",children:[b.jsx("li",{children:b.jsx(Ai,{to:"/careers",className:"text-white/70 hover:text-white transition-colors",children:"Careers"})}),b.jsx("li",{children:b.jsx(Ai,{to:"/faq",className:"text-white/70 hover:text-white transition-colors",children:"FAQ"})}),b.jsx("li",{children:b.jsx(Ai,{to:"/#contact",onClick:t=>Ml("/#contact",t,n,e),className:"text-white/70 hover:text-white transition-colors",children:"Contact"})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-display text-xl font-semibold text-white mb-4",children:"Connect With Us"}),b.jsxs("div",{className:"flex space-x-5 mb-4",children:[b.jsx("a",{href:"https://www.linkedin.com/company/loop-charging-module-lcm/posts/?feedView=all",target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-white transition-colors","aria-label":"LCM LinkedIn",children:b.jsx(EE,{size:26})}),b.jsx("a",{href:"mailto:loopchargingmodule@lcmev.com",className:"text-white/70 hover:text-white transition-colors","aria-label":"Email LCM",children:b.jsx(zy,{size:26})})]}),b.jsxs("div",{className:"text-white/70 text-base space-y-2",children:[b.jsx("p",{children:b.jsxs("a",{href:"mailto:loopchargingmodule@lcmev.com",className:"hover:text-white transition-colors inline-flex items-center",children:[b.jsx(zy,{size:16,className:"mr-2"}),"loopchargingmodule@lcmev.com"]})}),b.jsx("p",{children:b.jsx("a",{href:"tel:+919014154250",className:"hover:text-white transition-colors",children:"+91 90141 54250"})}),b.jsxs("p",{className:"mt-2 leading-relaxed",children:["NO.153, F-1, FIRST FLOOR, SMS PLAZA,",b.jsx("br",{}),"5TH MAIN, 7TH SECTOR, HSR LAYOUT",b.jsx("br",{}),"BENGALURU - 560102, KARNATAKA"]})]})]})]}),b.jsx("div",{className:"mt-14 pt-8 border-t border-white/10",children:b.jsx("div",{className:"text-center text-white/50 text-sm",children:b.jsxs("p",{children:["© ",new Date().getFullYear()," Loop Charging Module. All rights reserved."]})})})]})})},Il=({children:n})=>b.jsx(Ts.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},children:n}),Eu=({children:n})=>{const e=Fs();return V.useEffect(()=>{if(e.hash){const t=document.getElementById(e.hash.slice(1));t&&setTimeout(()=>{const r=t.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:r,behavior:"smooth"})},250)}else window.scrollTo({top:0,behavior:"smooth"})},[e]),b.jsxs("div",{className:"flex flex-col min-h-screen bg-dark-900 text-white overflow-hidden",children:[b.jsx(k4,{}),b.jsx("main",{className:"flex-grow mt-16",children:b.jsx(Il,{children:n})}),b.jsx(Ts.footer,{initial:{y:100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:"will-change-transform",children:b.jsx(O4,{})})]})},Q4=()=>{V.useEffect(()=>{if(!document.querySelector('script[src*="model-viewer.min.js"]')){const i=document.createElement("script");i.type="module",i.src="https://unpkg.com/@google/model-viewer@^3.4.0/dist/model-viewer.min.js",i.async=!0,document.head.appendChild(i)}},[]);const n=i=>{i.preventDefault(),ra("demo")},e=i=>{i.preventDefault(),ra("partnership")},t=i=>{i.preventDefault(),ra("learnmore")};return b.jsxs("section",{className:"relative pt-24 pb-20 md:pt-32 md:pb-24 bg-gradient-to-b from-dark-900 via-dark-800 to-dark-900 overflow-hidden",children:[b.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[b.jsx("div",{className:"absolute top-[10%] left-[5%] w-72 h-72 bg-primary-500/10 rounded-full blur-3xl"}),b.jsx("div",{className:"absolute bottom-[20%] right-[10%] w-96 h-96 bg-secondary-500/10 rounded-full blur-3xl"})]}),b.jsx("div",{className:"container mx-auto px-4 md:px-6 relative z-10",children:b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"font-display font-bold text-4xl md:text-5xl lg:text-6xl text-white leading-tight mb-6",children:"Charging While Driving — The Future of EVs Starts Now."}),b.jsx("p",{className:"text-white/80 text-lg md:text-xl mb-8 max-w-2xl",children:"LCM is a breakthrough in-vehicle charging technology that generates power while you drive, revolutionizing how electric vehicles maintain their charge."}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[b.jsxs("a",{href:"#contact",onClick:n,className:"bg-primary-500 hover:bg-primary-600 text-white px-6 py-3 rounded-full font-medium transition-colors inline-flex items-center justify-center",children:[b.jsx(B4,{className:"mr-2 h-5 w-5"})," Book a Demo"]}),b.jsxs("a",{href:"#contact",onClick:e,className:"bg-dark-700/50 hover:bg-dark-700 backdrop-blur-sm text-white border border-white/20 px-6 py-3 rounded-full font-medium transition-colors inline-flex items-center justify-center",children:[b.jsx(P4,{className:"mr-2 h-5 w-5"})," Contact for Partnership"]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500/20 to-secondary-500/20 rounded-2xl blur-xl pointer-events-none"}),b.jsxs("div",{className:"relative bg-dark-800/80 backdrop-blur-sm border border-white/10 rounded-2xl p-6 shadow-xl animate-float hover:scale-[1.02] transition-transform duration-300",children:[b.jsx("model-viewer",{src:"/assets/models/totalint.glb",alt:"LCM Technology 3D Model",style:{width:"100%",height:"340px",background:"transparent",borderRadius:"12px"},"camera-controls":!0,"auto-rotate":!0,"shadow-intensity":"1",exposure:"1","environment-image":"neutral",ar:!0,"ar-modes":"webxr scene-viewer quick-look",loading:"lazy","disable-zoom":!1}),b.jsxs("div",{className:"bg-dark-900/50 backdrop-blur-sm rounded-lg p-4 border border-white/10 cursor-pointer",onClick:t,tabIndex:0,role:"button","aria-label":"Learn more about the Loop Charging Module",style:{outline:"none"},children:[b.jsx("h3",{className:"font-display font-semibold text-lg text-white mb-2",children:"Loop Charging Module"}),b.jsx("p",{className:"text-white/70 text-sm",children:"Our 4-component system harnesses ambient airflow to generate electricity, charging your EV's battery in real-time while driving."}),b.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-primary-500/20 text-primary-300 rounded-full",children:"Zero Drag"}),b.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-secondary-500/20 text-secondary-300 rounded-full",children:"In-Drive Charging"})]}),b.jsxs("span",{className:"text-primary-400 text-sm font-medium inline-flex items-center",children:["Learn more ",b.jsx(y4,{size:14,className:"ml-1"})]})]})]})]})]})]})})]})};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Of=globalThis,bE=Of.ShadowRoot&&(Of.ShadyCSS===void 0||Of.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,x2=Symbol(),qw=new WeakMap;let G4=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==x2)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(bE&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=qw.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&qw.set(t,e))}return e}toString(){return this.cssText}};const V4=n=>new G4(typeof n=="string"?n:n+"",void 0,x2),z4=(n,e)=>{if(bE)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const i=document.createElement("style"),s=Of.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=t.cssText,n.appendChild(i)}},$w=bE?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return V4(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:H4,defineProperty:j4,getOwnPropertyDescriptor:W4,getOwnPropertyNames:q4,getOwnPropertySymbols:$4,getPrototypeOf:X4}=Object,lo=globalThis,Xw=lo.trustedTypes,K4=Xw?Xw.emptyScript:"",IA=lo.reactiveElementPolyfillSupport,Hu=(n,e)=>n,Bp={toAttribute(n,e){switch(e){case Boolean:n=n?K4:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},_E=(n,e)=>!H4(n,e),Kw={attribute:!0,type:String,converter:Bp,reflect:!1,useDefault:!1,hasChanged:_E};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),lo.litPropertyMetadata??(lo.litPropertyMetadata=new WeakMap);let qo=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=Kw){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(e,i,t);s!==void 0&&j4(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){const{get:s,set:r}=W4(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);r==null||r.call(this,o),this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Kw}static _$Ei(){if(this.hasOwnProperty(Hu("elementProperties")))return;const e=X4(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Hu("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Hu("properties"))){const t=this.properties,i=[...q4(t),...$4(t)];for(const s of i)this.createProperty(s,t[s])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[i,s]of t)this.elementProperties.set(i,s)}this._$Eh=new Map;for(const[t,i]of this.elementProperties){const s=this._$Eu(t,i);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const s of i)t.unshift($w(s))}else e!==void 0&&t.push($w(e));return t}static _$Eu(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return z4(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var i;return(i=t.hostConnected)==null?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var i;return(i=t.hostDisconnected)==null?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){var r;const i=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,i);if(s!==void 0&&i.reflect===!0){const o=(((r=i.converter)==null?void 0:r.toAttribute)!==void 0?i.converter:Bp).toAttribute(t,i.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){var r,o;const i=this.constructor,s=i._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=i.getPropertyOptions(s),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((r=a.converter)==null?void 0:r.fromAttribute)!==void 0?a.converter:Bp;this._$Em=s;const c=l.fromAttribute(t,a.type);this[s]=c??((o=this._$Ej)==null?void 0:o.get(s))??c,this._$Em=null}}requestUpdate(e,t,i){var s;if(e!==void 0){const r=this.constructor,o=this[e];if(i??(i=r.getPropertyOptions(e)),!((i.hasChanged??_E)(o,t)||i.useDefault&&i.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(r._$Eu(e,i))))return;this.C(e,t,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:s,wrapped:r},o){i&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??t??this[e]),r!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[r,o]of this._$Ep)this[r]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[r,o]of s){const{wrapped:a}=o,l=this[r];a!==!0||this._$AL.has(r)||l===void 0||this.C(r,void 0,o,l)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(i=this._$EO)==null||i.forEach(s=>{var r;return(r=s.hostUpdate)==null?void 0:r.call(s)}),this.update(t)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(i=>{var s;return(s=i.hostUpdated)==null?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};qo.elementStyles=[],qo.shadowRootOptions={mode:"open"},qo[Hu("elementProperties")]=new Map,qo[Hu("finalized")]=new Map,IA==null||IA({ReactiveElement:qo}),(lo.reactiveElementVersions??(lo.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Y4={attribute:!0,type:String,converter:Bp,reflect:!1,hasChanged:_E},J4=(n=Y4,e,t)=>{const{kind:i,metadata:s}=t;let r=globalThis.litPropertyMetadata.get(s);if(r===void 0&&globalThis.litPropertyMetadata.set(s,r=new Map),i==="setter"&&((n=Object.create(n)).wrapped=!0),r.set(t.name,n),i==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,n)},init(a){return a!==void 0&&this.C(o,void 0,n,a),a}}}if(i==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,n)}}throw Error("Unsupported decorator location: "+i)};function Le(n){return(e,t)=>typeof t=="object"?J4(n,e,t):((i,s,r)=>{const o=s.hasOwnProperty(r);return s.constructor.createProperty(r,i),o?Object.getOwnPropertyDescriptor(s,r):void 0})(n,e,t)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Im="172",Z4=0,Yw=1,eG=2,E2=1,tG=2,er=3,fs=0,Cn=1,gn=2,Rs=0,Gl=1,Jw=2,Zw=3,eS=4,nG=5,$o=100,iG=101,sG=102,rG=103,oG=104,aG=200,lG=201,cG=202,uG=203,jy=204,Wy=205,hG=206,dG=207,fG=208,pG=209,mG=210,AG=211,gG=212,yG=213,vG=214,qy=0,$y=1,Xy=2,ic=3,Ky=4,Yy=5,Jy=6,Zy=7,b2=0,xG=1,EG=2,Bs=0,_2=1,w2=2,S2=3,C2=4,bG=5,M2=6,bh=7,tS="attached",_G="detached",sc=300,ma=301,rc=302,Dp=303,ev=304,Tm=306,ps=1e3,Xt=1001,Aa=1002,an=1003,Hh=1004,$r=1005,et=1006,oa=1007,Yn=1008,nS=1008,Jt=1009,wE=1010,SE=1011,_h=1012,Rm=1013,po=1014,Kt=1015,rn=1016,CE=1017,ME=1018,oc=1020,I2=35902,T2=1021,R2=1022,Pt=1023,B2=1024,D2=1025,Vl=1026,ac=1027,Xr=1028,IE=1029,ea=1030,TE=1031,RE=1033,Qf=33776,ju=33777,Gf=33778,Wu=33779,Lp=35840,tv=35841,Pp=35842,nv=35843,Np=36196,Fp=37492,kp=37496,wh=37808,iv=37809,sv=37810,rv=37811,Sh=37812,ov=37813,av=37814,lv=37815,cv=37816,uv=37817,hv=37818,dv=37819,fv=37820,pv=37821,qu=36492,mv=36494,Up=36495,L2=36283,Av=36284,gv=36285,yv=36286,Ch=2200,zl=2201,Op=2202,lc=2300,cc=2301,TA=2302,Tl=2400,Rl=2401,Qp=2402,BE=2500,wG=2501,SG=0,P2=1,vv=2,CG=3200,MG=3201,N2=0,IG=1,Ui="",St="srgb",Mt="srgb-linear",Gp="linear",vt="srgb",Ta=7680,iS=519,TG=512,RG=513,BG=514,F2=515,DG=516,LG=517,PG=518,NG=519,xv=35044,sS="300 es",cr=2e3,Vp=2001;class ms{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}const Dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rS=1234567;const $u=Math.PI/180,uc=180/Math.PI;function us(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Dn[n&255]+Dn[n>>8&255]+Dn[n>>16&255]+Dn[n>>24&255]+"-"+Dn[e&255]+Dn[e>>8&255]+"-"+Dn[e>>16&15|64]+Dn[e>>24&255]+"-"+Dn[t&63|128]+Dn[t>>8&255]+"-"+Dn[t>>16&255]+Dn[t>>24&255]+Dn[i&255]+Dn[i>>8&255]+Dn[i>>16&255]+Dn[i>>24&255]).toLowerCase()}function $e(n,e,t){return Math.max(e,Math.min(t,n))}function DE(n,e){return(n%e+e)%e}function FG(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function kG(n,e,t){return n!==e?(t-n)/(e-n):0}function Xu(n,e,t){return(1-t)*n+t*e}function UG(n,e,t,i){return Xu(n,e,1-Math.exp(-t*i))}function OG(n,e=1){return e-Math.abs(DE(n,e*2)-e)}function QG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function GG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function VG(n,e){return n+Math.floor(Math.random()*(e-n+1))}function zG(n,e){return n+Math.random()*(e-n)}function HG(n){return n*(.5-Math.random())}function jG(n){n!==void 0&&(rS=n);let e=rS+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function WG(n){return n*$u}function qG(n){return n*uc}function $G(n){return(n&n-1)===0&&n!==0}function XG(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function KG(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function YG(n,e,t,i,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),c=r((e+i)/2),u=o((e+i)/2),h=r((e-i)/2),d=o((e-i)/2),f=r((i-e)/2),m=o((i-e)/2);switch(s){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*m,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*m,a*c);break;case"ZYZ":n.set(l*m,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function rs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function At(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const zp={DEG2RAD:$u,RAD2DEG:uc,generateUUID:us,clamp:$e,euclideanModulo:DE,mapLinear:FG,inverseLerp:kG,lerp:Xu,damp:UG,pingpong:OG,smoothstep:QG,smootherstep:GG,randInt:VG,randFloat:zG,randFloatSpread:HG,seededRandom:jG,degToRad:WG,radToDeg:qG,isPowerOfTwo:$G,ceilPowerOfTwo:XG,floorPowerOfTwo:KG,setQuaternionFromProperEuler:YG,normalize:At,denormalize:rs};class Ve{constructor(e=0,t=0){Ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=$e(this.x,e.x,t.x),this.y=$e(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=$e(this.x,e,t),this.y=$e(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar($e(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($e(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ge{constructor(e,t,i,s,r,o,a,l,c){Ge.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c)}set(e,t,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=t,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],d=i[2],f=i[5],m=i[8],g=s[0],A=s[3],p=s[6],y=s[1],v=s[4],x=s[7],E=s[2],w=s[5],M=s[8];return r[0]=o*g+a*y+l*E,r[3]=o*A+a*v+l*w,r[6]=o*p+a*x+l*M,r[1]=c*g+u*y+h*E,r[4]=c*A+u*v+h*w,r[7]=c*p+u*x+h*M,r[2]=d*g+f*y+m*E,r[5]=d*A+f*v+m*w,r[8]=d*p+f*x+m*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*r*u+i*a*l+s*r*c-s*o*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*r,f=c*r-o*l,m=t*h+i*d+s*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=h*g,e[1]=(s*c-u*i)*g,e[2]=(a*i-s*o)*g,e[3]=d*g,e[4]=(u*t-s*l)*g,e[5]=(s*r-a*t)*g,e[6]=f*g,e[7]=(i*l-c*t)*g,e[8]=(o*t-i*r)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(RA.makeScale(e,t)),this}rotate(e){return this.premultiply(RA.makeRotation(-e)),this}translate(e,t){return this.premultiply(RA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const RA=new Ge;function k2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Mh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function JG(){const n=Mh("canvas");return n.style.display="block",n}const oS={};function ll(n){n in oS||(oS[n]=!0,console.warn(n))}function ZG(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}function eV(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function tV(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const aS=new Ge().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),lS=new Ge().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function nV(){const n={enabled:!0,workingColorSpace:Mt,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===vt&&(s.r=pr(s.r),s.g=pr(s.g),s.b=pr(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===vt&&(s.r=Hl(s.r),s.g=Hl(s.g),s.b=Hl(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ui?Gp:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Mt]:{primaries:e,whitePoint:i,transfer:Gp,toXYZ:aS,fromXYZ:lS,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:St},outputColorSpaceConfig:{drawingBufferColorSpace:St}},[St]:{primaries:e,whitePoint:i,transfer:vt,toXYZ:aS,fromXYZ:lS,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:St}}}),n}const Ze=nV();function pr(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Hl(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ra;class iV{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ra===void 0&&(Ra=Mh("canvas")),Ra.width=e.width,Ra.height=e.height;const i=Ra.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ra}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Mh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=pr(r[o]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(pr(t[i]/255)*255):t[i]=pr(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let sV=0;class LE{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sV++}),this.uuid=us(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(BA(s[o].image)):r.push(BA(s[o]))}else r=BA(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function BA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?iV.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rV=0,Nt=class Vf extends ms{constructor(e=Vf.DEFAULT_IMAGE,t=Vf.DEFAULT_MAPPING,i=Xt,s=Xt,r=et,o=Yn,a=Pt,l=Jt,c=Vf.DEFAULT_ANISOTROPY,u=Ui){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rV++}),this.uuid=us(),this.name="",this.source=new LE(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ge,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sc)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ps:e.x=e.x-Math.floor(e.x);break;case Xt:e.x=e.x<0?0:1;break;case Aa:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ps:e.y=e.y-Math.floor(e.y);break;case Xt:e.y=e.y<0?0:1;break;case Aa:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Nt.DEFAULT_IMAGE=null;Nt.DEFAULT_MAPPING=sc;Nt.DEFAULT_ANISOTROPY=1;class ct{constructor(e=0,t=0,i=0,s=1){ct.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],m=l[9],g=l[2],A=l[6],p=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-g)<.01&&Math.abs(m-A)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+g)<.1&&Math.abs(m+A)<.1&&Math.abs(c+f+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,x=(f+1)/2,E=(p+1)/2,w=(u+d)/4,M=(h+g)/4,C=(m+A)/4;return v>x&&v>E?v<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(v),s=w/i,r=M/i):x>E?x<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(x),i=w/s,r=C/s):E<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(E),i=M/r,s=C/r),this.set(i,s,r,t),this}let y=Math.sqrt((A-m)*(A-m)+(h-g)*(h-g)+(d-u)*(d-u));return Math.abs(y)<.001&&(y=1),this.x=(A-m)/y,this.y=(h-g)/y,this.z=(d-u)/y,this.w=Math.acos((c+f+p-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=$e(this.x,e.x,t.x),this.y=$e(this.y,e.y,t.y),this.z=$e(this.z,e.z,t.z),this.w=$e(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=$e(this.x,e,t),this.y=$e(this.y,e,t),this.z=$e(this.z,e,t),this.w=$e(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar($e(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class oV extends ms{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ct(0,0,e,t),this.scissorTest=!1,this.viewport=new ct(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:et,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Nt(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new LE(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ji extends oV{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class U2 extends Nt{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=an,this.minFilter=an,this.wrapR=Xt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class O2 extends Nt{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=an,this.minFilter=an,this.wrapR=Xt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ei{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],h=i[s+3];const d=r[o+0],f=r[o+1],m=r[o+2],g=r[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=m,e[t+3]=g;return}if(h!==g||l!==d||c!==f||u!==m){let A=1-a;const p=l*d+c*f+u*m+h*g,y=p>=0?1:-1,v=1-p*p;if(v>Number.EPSILON){const E=Math.sqrt(v),w=Math.atan2(E,p*y);A=Math.sin(A*w)/E,a=Math.sin(a*w)/E}const x=a*y;if(l=l*A+d*x,c=c*A+f*x,u=u*A+m*x,h=h*A+g*x,A===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=E,c*=E,u*=E,h*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],h=r[o],d=r[o+1],f=r[o+2],m=r[o+3];return e[t]=a*m+u*h+l*f-c*d,e[t+1]=l*m+u*d+c*h-a*f,e[t+2]=c*m+u*f+a*d-l*h,e[t+3]=u*m-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),h=a(r/2),d=l(i/2),f=l(s/2),m=l(r/2);switch(o){case"XYZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"YXZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"ZXY":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"ZYX":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"YZX":this._x=d*u*h+c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h-d*f*m;break;case"XZY":this._x=d*u*h-c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h+d*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=i+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(r-c)*f,this._z=(o-s)*f}else if(i>a&&i>h){const f=2*Math.sqrt(1+i-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-i-h);this._w=(r-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-i-a);this._w=(o-s)/f,this._x=(r+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($e(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=i*h+this._x*d,this._y=s*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class L{constructor(e=0,t=0,i=0){L.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(cS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(cS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*s-a*i),u=2*(a*t-r*s),h=2*(r*i-o*t);return this.x=t+l*c+o*h-a*u,this.y=i+l*u+a*c-r*h,this.z=s+l*h+r*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=$e(this.x,e.x,t.x),this.y=$e(this.y,e.y,t.y),this.z=$e(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=$e(this.x,e,t),this.y=$e(this.y,e,t),this.z=$e(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar($e(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return DA.copy(this).projectOnVector(e),this.sub(DA)}reflect(e){return this.sub(DA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($e(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const DA=new L,cS=new ei;class Kn{constructor(e=new L(1/0,1/0,1/0),t=new L(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Yi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Yi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Yi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Yi):Yi.fromBufferAttribute(r,o),Yi.applyMatrix4(e.matrixWorld),this.expandByPoint(Yi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),xd.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),xd.copy(i.boundingBox)),xd.applyMatrix4(e.matrixWorld),this.union(xd)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Yi),Yi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Qc),Ed.subVectors(this.max,Qc),Ba.subVectors(e.a,Qc),Da.subVectors(e.b,Qc),La.subVectors(e.c,Qc),wr.subVectors(Da,Ba),Sr.subVectors(La,Da),_o.subVectors(Ba,La);let t=[0,-wr.z,wr.y,0,-Sr.z,Sr.y,0,-_o.z,_o.y,wr.z,0,-wr.x,Sr.z,0,-Sr.x,_o.z,0,-_o.x,-wr.y,wr.x,0,-Sr.y,Sr.x,0,-_o.y,_o.x,0];return!LA(t,Ba,Da,La,Ed)||(t=[1,0,0,0,1,0,0,0,1],!LA(t,Ba,Da,La,Ed))?!1:(bd.crossVectors(wr,Sr),t=[bd.x,bd.y,bd.z],LA(t,Ba,Da,La,Ed))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Yi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Gs=[new L,new L,new L,new L,new L,new L,new L,new L],Yi=new L,xd=new Kn,Ba=new L,Da=new L,La=new L,wr=new L,Sr=new L,_o=new L,Qc=new L,Ed=new L,bd=new L,wo=new L;function LA(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){wo.fromArray(n,r);const a=s.x*Math.abs(wo.x)+s.y*Math.abs(wo.y)+s.z*Math.abs(wo.z),l=e.dot(wo),c=t.dot(wo),u=i.dot(wo);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const aV=new Kn,Gc=new L,PA=new L;class qi{constructor(e=new L,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):aV.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gc.subVectors(e,this.center);const t=Gc.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Gc,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(PA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gc.copy(e.center).add(PA)),this.expandByPoint(Gc.copy(e.center).sub(PA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vs=new L,NA=new L,_d=new L,Cr=new L,FA=new L,wd=new L,kA=new L;class jh{constructor(e=new L,t=new L(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Vs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Vs.copy(this.origin).addScaledVector(this.direction,t),Vs.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){NA.copy(e).add(t).multiplyScalar(.5),_d.copy(t).sub(e).normalize(),Cr.copy(this.origin).sub(NA);const r=e.distanceTo(t)*.5,o=-this.direction.dot(_d),a=Cr.dot(this.direction),l=-Cr.dot(_d),c=Cr.lengthSq(),u=Math.abs(1-o*o);let h,d,f,m;if(u>0)if(h=o*l-a,d=o*a-l,m=r*u,h>=0)if(d>=-m)if(d<=m){const g=1/u;h*=g,d*=g,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-m?(h=Math.max(0,-(-o*r+a)),d=h>0?-r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c):d<=m?(h=0,d=Math.min(Math.max(-r,-l),r),f=d*(d+2*l)+c):(h=Math.max(0,-(o*r+a)),d=h>0?r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c);else d=o>0?-r:r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),s&&s.copy(NA).addScaledVector(_d,d),f}intersectSphere(e,t){Vs.subVectors(e.center,this.origin);const i=Vs.dot(this.direction),s=Vs.dot(Vs)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,s=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,s=(e.min.x-d.x)*c),u>=0?(r=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,Vs)!==null}intersectTriangle(e,t,i,s,r){FA.subVectors(t,e),wd.subVectors(i,e),kA.crossVectors(FA,wd);let o=this.direction.dot(kA),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Cr.subVectors(this.origin,e);const l=a*this.direction.dot(wd.crossVectors(Cr,wd));if(l<0)return null;const c=a*this.direction.dot(FA.cross(Cr));if(c<0||l+c>o)return null;const u=-a*Cr.dot(kA);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fe{constructor(e,t,i,s,r,o,a,l,c,u,h,d,f,m,g,A){Fe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c,u,h,d,f,m,g,A)}set(e,t,i,s,r,o,a,l,c,u,h,d,f,m,g,A){const p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=s,p[1]=r,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=h,p[14]=d,p[3]=f,p[7]=m,p[11]=g,p[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fe().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Pa.setFromMatrixColumn(e,0).length(),r=1/Pa.setFromMatrixColumn(e,1).length(),o=1/Pa.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),h=Math.sin(r);if(e.order==="XYZ"){const d=o*u,f=o*h,m=a*u,g=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+m*c,t[5]=d-g*c,t[9]=-a*l,t[2]=g-d*c,t[6]=m+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,m=c*u,g=c*h;t[0]=d+g*a,t[4]=m*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-m,t[6]=g+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,m=c*u,g=c*h;t[0]=d-g*a,t[4]=-o*h,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*u,t[9]=g-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,m=a*u,g=a*h;t[0]=l*u,t[4]=m*c-f,t[8]=d*c+g,t[1]=l*h,t[5]=g*c+d,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=g-d*h,t[8]=m*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+m,t[10]=d-g*h}else if(e.order==="XZY"){const d=o*l,f=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+g,t[5]=o*u,t[9]=f*h-m,t[2]=m*h-f,t[6]=a*u,t[10]=g*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(lV,e,cV)}lookAt(e,t,i){const s=this.elements;return di.subVectors(e,t),di.lengthSq()===0&&(di.z=1),di.normalize(),Mr.crossVectors(i,di),Mr.lengthSq()===0&&(Math.abs(i.z)===1?di.x+=1e-4:di.z+=1e-4,di.normalize(),Mr.crossVectors(i,di)),Mr.normalize(),Sd.crossVectors(di,Mr),s[0]=Mr.x,s[4]=Sd.x,s[8]=di.x,s[1]=Mr.y,s[5]=Sd.y,s[9]=di.y,s[2]=Mr.z,s[6]=Sd.z,s[10]=di.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],d=i[9],f=i[13],m=i[2],g=i[6],A=i[10],p=i[14],y=i[3],v=i[7],x=i[11],E=i[15],w=s[0],M=s[4],C=s[8],S=s[12],_=s[1],R=s[5],O=s[9],N=s[13],F=s[2],H=s[6],Q=s[10],z=s[14],D=s[3],j=s[7],K=s[11],te=s[15];return r[0]=o*w+a*_+l*F+c*D,r[4]=o*M+a*R+l*H+c*j,r[8]=o*C+a*O+l*Q+c*K,r[12]=o*S+a*N+l*z+c*te,r[1]=u*w+h*_+d*F+f*D,r[5]=u*M+h*R+d*H+f*j,r[9]=u*C+h*O+d*Q+f*K,r[13]=u*S+h*N+d*z+f*te,r[2]=m*w+g*_+A*F+p*D,r[6]=m*M+g*R+A*H+p*j,r[10]=m*C+g*O+A*Q+p*K,r[14]=m*S+g*N+A*z+p*te,r[3]=y*w+v*_+x*F+E*D,r[7]=y*M+v*R+x*H+E*j,r[11]=y*C+v*O+x*Q+E*K,r[15]=y*S+v*N+x*z+E*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],m=e[3],g=e[7],A=e[11],p=e[15];return m*(+r*l*h-s*c*h-r*a*d+i*c*d+s*a*f-i*l*f)+g*(+t*l*f-t*c*d+r*o*d-s*o*f+s*c*u-r*l*u)+A*(+t*c*h-t*a*f-r*o*h+i*o*f+r*a*u-i*c*u)+p*(-s*a*u-t*l*h+t*a*d+s*o*h-i*o*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],g=e[13],A=e[14],p=e[15],y=h*A*c-g*d*c+g*l*f-a*A*f-h*l*p+a*d*p,v=m*d*c-u*A*c-m*l*f+o*A*f+u*l*p-o*d*p,x=u*g*c-m*h*c+m*a*f-o*g*f-u*a*p+o*h*p,E=m*h*l-u*g*l-m*a*d+o*g*d+u*a*A-o*h*A,w=t*y+i*v+s*x+r*E;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return e[0]=y*M,e[1]=(g*d*r-h*A*r-g*s*f+i*A*f+h*s*p-i*d*p)*M,e[2]=(a*A*r-g*l*r+g*s*c-i*A*c-a*s*p+i*l*p)*M,e[3]=(h*l*r-a*d*r-h*s*c+i*d*c+a*s*f-i*l*f)*M,e[4]=v*M,e[5]=(u*A*r-m*d*r+m*s*f-t*A*f-u*s*p+t*d*p)*M,e[6]=(m*l*r-o*A*r-m*s*c+t*A*c+o*s*p-t*l*p)*M,e[7]=(o*d*r-u*l*r+u*s*c-t*d*c-o*s*f+t*l*f)*M,e[8]=x*M,e[9]=(m*h*r-u*g*r-m*i*f+t*g*f+u*i*p-t*h*p)*M,e[10]=(o*g*r-m*a*r+m*i*c-t*g*c-o*i*p+t*a*p)*M,e[11]=(u*a*r-o*h*r-u*i*c+t*h*c+o*i*f-t*a*f)*M,e[12]=E*M,e[13]=(u*g*s-m*h*s+m*i*d-t*g*d-u*i*A+t*h*A)*M,e[14]=(m*a*s-o*g*s-m*i*l+t*g*l+o*i*A-t*a*A)*M,e[15]=(o*h*s-u*a*s+u*i*l-t*h*l-o*i*d+t*a*d)*M,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,c=r+r,u=o+o,h=a+a,d=r*c,f=r*u,m=r*h,g=o*u,A=o*h,p=a*h,y=l*c,v=l*u,x=l*h,E=i.x,w=i.y,M=i.z;return s[0]=(1-(g+p))*E,s[1]=(f+x)*E,s[2]=(m-v)*E,s[3]=0,s[4]=(f-x)*w,s[5]=(1-(d+p))*w,s[6]=(A+y)*w,s[7]=0,s[8]=(m+v)*M,s[9]=(A-y)*M,s[10]=(1-(d+g))*M,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=Pa.set(s[0],s[1],s[2]).length();const o=Pa.set(s[4],s[5],s[6]).length(),a=Pa.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Ji.copy(this);const c=1/r,u=1/o,h=1/a;return Ji.elements[0]*=c,Ji.elements[1]*=c,Ji.elements[2]*=c,Ji.elements[4]*=u,Ji.elements[5]*=u,Ji.elements[6]*=u,Ji.elements[8]*=h,Ji.elements[9]*=h,Ji.elements[10]*=h,t.setFromRotationMatrix(Ji),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o,a=cr){const l=this.elements,c=2*r/(t-e),u=2*r/(i-s),h=(t+e)/(t-e),d=(i+s)/(i-s);let f,m;if(a===cr)f=-(o+r)/(o-r),m=-2*o*r/(o-r);else if(a===Vp)f=-o/(o-r),m=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,s,r,o,a=cr){const l=this.elements,c=1/(t-e),u=1/(i-s),h=1/(o-r),d=(t+e)*c,f=(i+s)*u;let m,g;if(a===cr)m=(o+r)*h,g=-2*h;else if(a===Vp)m=r*h,g=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Pa=new L,Ji=new Fe,lV=new L(0,0,0),cV=new L(1,1,1),Mr=new L,Sd=new L,di=new L,uS=new Fe,hS=new ei;class Wi{constructor(e=0,t=0,i=0,s=Wi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],h=s[2],d=s[6],f=s[10];switch(t){case"XYZ":this._y=Math.asin($e(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-$e(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin($e(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-$e(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin($e(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-$e(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return uS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return hS.setFromEuler(this),this.setFromQuaternion(hS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Wi.DEFAULT_ORDER="XYZ";class PE{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let uV=0;const dS=new L,Na=new ei,zs=new Fe,Cd=new L,Vc=new L,hV=new L,dV=new ei,fS=new L(1,0,0),pS=new L(0,1,0),mS=new L(0,0,1),AS={type:"added"},fV={type:"removed"},Fa={type:"childadded",child:null},UA={type:"childremoved",child:null};class bt extends ms{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uV++}),this.uuid=us(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bt.DEFAULT_UP.clone();const e=new L,t=new Wi,i=new ei,s=new L(1,1,1);function r(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Fe},normalMatrix:{value:new Ge}}),this.matrix=new Fe,this.matrixWorld=new Fe,this.matrixAutoUpdate=bt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new PE,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Na.setFromAxisAngle(e,t),this.quaternion.multiply(Na),this}rotateOnWorldAxis(e,t){return Na.setFromAxisAngle(e,t),this.quaternion.premultiply(Na),this}rotateX(e){return this.rotateOnAxis(fS,e)}rotateY(e){return this.rotateOnAxis(pS,e)}rotateZ(e){return this.rotateOnAxis(mS,e)}translateOnAxis(e,t){return dS.copy(e).applyQuaternion(this.quaternion),this.position.add(dS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fS,e)}translateY(e){return this.translateOnAxis(pS,e)}translateZ(e){return this.translateOnAxis(mS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Cd.copy(e):Cd.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Vc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zs.lookAt(Vc,Cd,this.up):zs.lookAt(Cd,Vc,this.up),this.quaternion.setFromRotationMatrix(zs),s&&(zs.extractRotation(s.matrixWorld),Na.setFromRotationMatrix(zs),this.quaternion.premultiply(Na.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(AS),Fa.child=e,this.dispatchEvent(Fa),Fa.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(fV),UA.child=e,this.dispatchEvent(UA),UA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zs.multiply(e.parent.matrixWorld)),e.applyMatrix4(zs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(AS),Fa.child=e,this.dispatchEvent(Fa),Fa.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vc,e,hV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vc,dV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];r(e.shapes,h)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),m=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),m.length>0&&(i.nodes=m)}return i.object=s,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}bt.DEFAULT_UP=new L(0,1,0);bt.DEFAULT_MATRIX_AUTO_UPDATE=!0;bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Zi=new L,Hs=new L,OA=new L,js=new L,ka=new L,Ua=new L,gS=new L,QA=new L,GA=new L,VA=new L,zA=new ct,HA=new ct,jA=new ct;class gi{constructor(e=new L,t=new L,i=new L){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Zi.subVectors(e,t),s.cross(Zi);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){Zi.subVectors(s,t),Hs.subVectors(i,t),OA.subVectors(e,t);const o=Zi.dot(Zi),a=Zi.dot(Hs),l=Zi.dot(OA),c=Hs.dot(Hs),u=Hs.dot(OA),h=o*c-a*a;if(h===0)return r.set(0,0,0),null;const d=1/h,f=(c*l-a*u)*d,m=(o*u-a*l)*d;return r.set(1-f-m,m,f)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,js)===null?!1:js.x>=0&&js.y>=0&&js.x+js.y<=1}static getInterpolation(e,t,i,s,r,o,a,l){return this.getBarycoord(e,t,i,s,js)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,js.x),l.addScaledVector(o,js.y),l.addScaledVector(a,js.z),l)}static getInterpolatedAttribute(e,t,i,s,r,o){return zA.setScalar(0),HA.setScalar(0),jA.setScalar(0),zA.fromBufferAttribute(e,t),HA.fromBufferAttribute(e,i),jA.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(zA,r.x),o.addScaledVector(HA,r.y),o.addScaledVector(jA,r.z),o}static isFrontFacing(e,t,i,s){return Zi.subVectors(i,t),Hs.subVectors(e,t),Zi.cross(Hs).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zi.subVectors(this.c,this.b),Hs.subVectors(this.a,this.b),Zi.cross(Hs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return gi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return gi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return gi.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return gi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return gi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;ka.subVectors(s,i),Ua.subVectors(r,i),QA.subVectors(e,i);const l=ka.dot(QA),c=Ua.dot(QA);if(l<=0&&c<=0)return t.copy(i);GA.subVectors(e,s);const u=ka.dot(GA),h=Ua.dot(GA);if(u>=0&&h<=u)return t.copy(s);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(ka,o);VA.subVectors(e,r);const f=ka.dot(VA),m=Ua.dot(VA);if(m>=0&&f<=m)return t.copy(r);const g=f*c-l*m;if(g<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(Ua,a);const A=u*m-f*h;if(A<=0&&h-u>=0&&f-m>=0)return gS.subVectors(r,s),a=(h-u)/(h-u+(f-m)),t.copy(s).addScaledVector(gS,a);const p=1/(A+g+d);return o=g*p,a=d*p,t.copy(i).addScaledVector(ka,o).addScaledVector(Ua,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Q2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ir={h:0,s:0,l:0},Md={h:0,s:0,l:0};function WA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ie{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=St){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ze.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Ze.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ze.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Ze.workingColorSpace){if(e=DE(e,1),t=$e(t,0,1),i=$e(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=WA(o,r,e+1/3),this.g=WA(o,r,e),this.b=WA(o,r,e-1/3)}return Ze.toWorkingColorSpace(this,s),this}setStyle(e,t=St){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=St){const i=Q2[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=pr(e.r),this.g=pr(e.g),this.b=pr(e.b),this}copyLinearToSRGB(e){return this.r=Hl(e.r),this.g=Hl(e.g),this.b=Hl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=St){return Ze.fromWorkingColorSpace(Ln.copy(this),e),Math.round($e(Ln.r*255,0,255))*65536+Math.round($e(Ln.g*255,0,255))*256+Math.round($e(Ln.b*255,0,255))}getHexString(e=St){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ze.workingColorSpace){Ze.fromWorkingColorSpace(Ln.copy(this),t);const i=Ln.r,s=Ln.g,r=Ln.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(s-r)/h+(s<r?6:0);break;case s:l=(r-i)/h+2;break;case r:l=(i-s)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ze.workingColorSpace){return Ze.fromWorkingColorSpace(Ln.copy(this),t),e.r=Ln.r,e.g=Ln.g,e.b=Ln.b,e}getStyle(e=St){Ze.fromWorkingColorSpace(Ln.copy(this),e);const t=Ln.r,i=Ln.g,s=Ln.b;return e!==St?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Ir),this.setHSL(Ir.h+e,Ir.s+t,Ir.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ir),e.getHSL(Md);const i=Xu(Ir.h,Md.h,t),s=Xu(Ir.s,Md.s,t),r=Xu(Ir.l,Md.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ln=new Ie;Ie.NAMES=Q2;let pV=0,hs=class extends ms{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pV++}),this.uuid=us(),this.name="",this.type="Material",this.blending=Gl,this.side=fs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=jy,this.blendDst=Wy,this.blendEquation=$o,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ie(0,0,0),this.blendAlpha=0,this.depthFunc=ic,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ta,this.stencilZFail=Ta,this.stencilZPass=Ta,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Gl&&(i.blending=this.blending),this.side!==fs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==jy&&(i.blendSrc=this.blendSrc),this.blendDst!==Wy&&(i.blendDst=this.blendDst),this.blendEquation!==$o&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ic&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ta&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ta&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ta&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class Gi extends hs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wi,this.combine=b2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rr=mV();function mV(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,s[l]=24,s[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,s[l]=-c-1,s[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,s[l]=13,s[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,s[l]=24,s[l|256]=24):(i[l]=31744,i[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,r[l]=c|u}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:a}}function AV(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=$e(n,-65504,65504),rr.floatView[0]=n;const e=rr.uint32View[0],t=e>>23&511;return rr.baseTable[t]+((e&8388607)>>rr.shiftTable[t])}function gV(n){const e=n>>10;return rr.uint32View[0]=rr.mantissaTable[rr.offsetTable[e]+(n&1023)]+rr.exponentTable[e],rr.floatView[0]}const Id={toHalfFloat:AV,fromHalfFloat:gV},tn=new L,Td=new Ve;class Ft{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=xv,this.updateRanges=[],this.gpuType=Kt,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Td.fromBufferAttribute(this,t),Td.applyMatrix3(e),this.setXY(t,Td.x,Td.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)tn.fromBufferAttribute(this,t),tn.applyMatrix3(e),this.setXYZ(t,tn.x,tn.y,tn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)tn.fromBufferAttribute(this,t),tn.applyMatrix4(e),this.setXYZ(t,tn.x,tn.y,tn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)tn.fromBufferAttribute(this,t),tn.applyNormalMatrix(e),this.setXYZ(t,tn.x,tn.y,tn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)tn.fromBufferAttribute(this,t),tn.transformDirection(e),this.setXYZ(t,tn.x,tn.y,tn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=rs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=At(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=rs(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=rs(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=rs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=rs(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array),r=At(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==xv&&(e.usage=this.usage),e}}class G2 extends Ft{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class V2 extends Ft{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class bi extends Ft{constructor(e,t,i){super(new Float32Array(e),t,i)}}let yV=0;const Di=new Fe,qA=new bt,Oa=new L,fi=new Kn,zc=new Kn,dn=new L;class ui extends ms{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yV++}),this.uuid=us(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(k2(e)?V2:G2)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new Ge().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Di.makeRotationFromQuaternion(e),this.applyMatrix4(Di),this}rotateX(e){return Di.makeRotationX(e),this.applyMatrix4(Di),this}rotateY(e){return Di.makeRotationY(e),this.applyMatrix4(Di),this}rotateZ(e){return Di.makeRotationZ(e),this.applyMatrix4(Di),this}translate(e,t,i){return Di.makeTranslation(e,t,i),this.applyMatrix4(Di),this}scale(e,t,i){return Di.makeScale(e,t,i),this.applyMatrix4(Di),this}lookAt(e){return qA.lookAt(e),qA.updateMatrix(),this.applyMatrix4(qA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oa).negate(),this.translate(Oa.x,Oa.y,Oa.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new bi(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Kn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new L(-1/0,-1/0,-1/0),new L(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];fi.setFromBufferAttribute(r),this.morphTargetsRelative?(dn.addVectors(this.boundingBox.min,fi.min),this.boundingBox.expandByPoint(dn),dn.addVectors(this.boundingBox.max,fi.max),this.boundingBox.expandByPoint(dn)):(this.boundingBox.expandByPoint(fi.min),this.boundingBox.expandByPoint(fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new qi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new L,1/0);return}if(e){const i=this.boundingSphere.center;if(fi.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];zc.setFromBufferAttribute(a),this.morphTargetsRelative?(dn.addVectors(fi.min,zc.min),fi.expandByPoint(dn),dn.addVectors(fi.max,zc.max),fi.expandByPoint(dn)):(fi.expandByPoint(zc.min),fi.expandByPoint(zc.max))}fi.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)dn.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(dn));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)dn.fromBufferAttribute(a,c),l&&(Oa.fromBufferAttribute(e,c),dn.add(Oa)),s=Math.max(s,i.distanceToSquared(dn))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ft(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let C=0;C<i.count;C++)a[C]=new L,l[C]=new L;const c=new L,u=new L,h=new L,d=new Ve,f=new Ve,m=new Ve,g=new L,A=new L;function p(C,S,_){c.fromBufferAttribute(i,C),u.fromBufferAttribute(i,S),h.fromBufferAttribute(i,_),d.fromBufferAttribute(r,C),f.fromBufferAttribute(r,S),m.fromBufferAttribute(r,_),u.sub(c),h.sub(c),f.sub(d),m.sub(d);const R=1/(f.x*m.y-m.x*f.y);isFinite(R)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(R),A.copy(h).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(R),a[C].add(g),a[S].add(g),a[_].add(g),l[C].add(A),l[S].add(A),l[_].add(A))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let C=0,S=y.length;C<S;++C){const _=y[C],R=_.start,O=_.count;for(let N=R,F=R+O;N<F;N+=3)p(e.getX(N+0),e.getX(N+1),e.getX(N+2))}const v=new L,x=new L,E=new L,w=new L;function M(C){E.fromBufferAttribute(s,C),w.copy(E);const S=a[C];v.copy(S),v.sub(E.multiplyScalar(E.dot(S))).normalize(),x.crossVectors(w,S);const R=x.dot(l[C])<0?-1:1;o.setXYZW(C,v.x,v.y,v.z,R)}for(let C=0,S=y.length;C<S;++C){const _=y[C],R=_.start,O=_.count;for(let N=R,F=R+O;N<F;N+=3)M(e.getX(N+0)),M(e.getX(N+1)),M(e.getX(N+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ft(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const s=new L,r=new L,o=new L,a=new L,l=new L,c=new L,u=new L,h=new L;if(e)for(let d=0,f=e.count;d<f;d+=3){const m=e.getX(d+0),g=e.getX(d+1),A=e.getX(d+2);s.fromBufferAttribute(t,m),r.fromBufferAttribute(t,g),o.fromBufferAttribute(t,A),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,A),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(A,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)s.fromBufferAttribute(t,d+0),r.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)dn.fromBufferAttribute(e,t),dn.normalize(),e.setXYZ(t,dn.x,dn.y,dn.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,m=0;for(let g=0,A=l.length;g<A;g++){a.isInterleavedBufferAttribute?f=l[g]*a.data.stride+a.offset:f=l[g]*u;for(let p=0;p<u;p++)d[m++]=c[f++]}return new Ft(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ui,i=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,i);t.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(t))}const r=e.morphAttributes;for(const c in r){const u=[],h=r[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const yS=new Fe,So=new jh,Rd=new qi,vS=new L,Bd=new L,Dd=new L,Ld=new L,$A=new L,Pd=new L,xS=new L,Nd=new L;class xt extends bt{constructor(e=new ui,t=new Gi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){Pd.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=a[l],h=r[l];u!==0&&($A.fromBufferAttribute(h,e),o?Pd.addScaledVector($A,u):Pd.addScaledVector($A.sub(t),u))}t.add(Pd)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Rd.copy(i.boundingSphere),Rd.applyMatrix4(r),So.copy(e.ray).recast(e.near),!(Rd.containsPoint(So.origin)===!1&&(So.intersectSphere(Rd,vS)===null||So.origin.distanceToSquared(vS)>(e.far-e.near)**2))&&(yS.copy(r).invert(),So.copy(e.ray).applyMatrix4(yS),!(i.boundingBox!==null&&So.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,So)))}_computeIntersections(e,t,i){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,h=r.attributes.normal,d=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,g=d.length;m<g;m++){const A=d[m],p=o[A.materialIndex],y=Math.max(A.start,f.start),v=Math.min(a.count,Math.min(A.start+A.count,f.start+f.count));for(let x=y,E=v;x<E;x+=3){const w=a.getX(x),M=a.getX(x+1),C=a.getX(x+2);s=Fd(this,p,e,i,c,u,h,w,M,C),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const m=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);for(let A=m,p=g;A<p;A+=3){const y=a.getX(A),v=a.getX(A+1),x=a.getX(A+2);s=Fd(this,o,e,i,c,u,h,y,v,x),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,g=d.length;m<g;m++){const A=d[m],p=o[A.materialIndex],y=Math.max(A.start,f.start),v=Math.min(l.count,Math.min(A.start+A.count,f.start+f.count));for(let x=y,E=v;x<E;x+=3){const w=x,M=x+1,C=x+2;s=Fd(this,p,e,i,c,u,h,w,M,C),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const m=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);for(let A=m,p=g;A<p;A+=3){const y=A,v=A+1,x=A+2;s=Fd(this,o,e,i,c,u,h,y,v,x),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}}}function vV(n,e,t,i,s,r,o,a){let l;if(e.side===Cn?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side===fs,a),l===null)return null;Nd.copy(a),Nd.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Nd);return c<t.near||c>t.far?null:{distance:c,point:Nd.clone(),object:n}}function Fd(n,e,t,i,s,r,o,a,l,c){n.getVertexPosition(a,Bd),n.getVertexPosition(l,Dd),n.getVertexPosition(c,Ld);const u=vV(n,e,t,i,Bd,Dd,Ld,xS);if(u){const h=new L;gi.getBarycoord(xS,Bd,Dd,Ld,h),s&&(u.uv=gi.getInterpolatedAttribute(s,a,l,c,h,new Ve)),r&&(u.uv1=gi.getInterpolatedAttribute(r,a,l,c,h,new Ve)),o&&(u.normal=gi.getInterpolatedAttribute(o,a,l,c,h,new L),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new L,materialIndex:0};gi.getNormal(Bd,Dd,Ld,d.normal),u.face=d,u.barycoord=h}return u}class Er extends ui{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;m("z","y","x",-1,-1,i,t,e,o,r,0),m("z","y","x",1,-1,i,t,-e,o,r,1),m("x","z","y",1,1,e,i,t,s,o,2),m("x","z","y",1,-1,e,i,-t,s,o,3),m("x","y","z",1,-1,e,t,i,s,r,4),m("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new bi(c,3)),this.setAttribute("normal",new bi(u,3)),this.setAttribute("uv",new bi(h,2));function m(g,A,p,y,v,x,E,w,M,C,S){const _=x/M,R=E/C,O=x/2,N=E/2,F=w/2,H=M+1,Q=C+1;let z=0,D=0;const j=new L;for(let K=0;K<Q;K++){const te=K*R-N;for(let ae=0;ae<H;ae++){const we=ae*_-O;j[g]=we*y,j[A]=te*v,j[p]=F,c.push(j.x,j.y,j.z),j[g]=0,j[A]=0,j[p]=w>0?1:-1,u.push(j.x,j.y,j.z),h.push(ae/M),h.push(1-K/C),z+=1}}for(let K=0;K<C;K++)for(let te=0;te<M;te++){const ae=d+te+H*K,we=d+te+H*(K+1),X=d+(te+1)+H*(K+1),ne=d+(te+1)+H*K;l.push(ae,we,ne),l.push(we,X,ne),D+=6}a.addGroup(f,D,S),f+=D,d+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Er(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function jn(n){const e={};for(let t=0;t<n.length;t++){const i=hc(n[t]);for(const s in i)e[s]=i[s]}return e}function xV(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function z2(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ze.workingColorSpace}const EV={clone:hc,merge:jn};var bV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,_V=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Si extends hs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=bV,this.fragmentShader=_V,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hc(e.uniforms),this.uniformsGroups=xV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class H2 extends bt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fe,this.projectionMatrix=new Fe,this.projectionMatrixInverse=new Fe,this.coordinateSystem=cr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Tr=new L,ES=new Ve,bS=new Ve;class _n extends H2{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($u*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uc*2*Math.atan(Math.tan($u*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Tr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Tr.x,Tr.y).multiplyScalar(-e/Tr.z),Tr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Tr.x,Tr.y).multiplyScalar(-e/Tr.z)}getViewSize(e,t){return this.getViewBounds(e,ES,bS),t.subVectors(bS,ES)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan($u*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Qa=-90,Ga=1;class Ev extends bt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new _n(Qa,Ga,e,t);s.layers=this.layers,this.add(s);const r=new _n(Qa,Ga,e,t);r.layers=this.layers,this.add(r);const o=new _n(Qa,Ga,e,t);o.layers=this.layers,this.add(o);const a=new _n(Qa,Ga,e,t);a.layers=this.layers,this.add(a);const l=new _n(Qa,Ga,e,t);l.layers=this.layers,this.add(l);const c=new _n(Qa,Ga,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,o,a,l]=t;for(const c of t)this.remove(c);if(e===cr)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Vp)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,o),e.setRenderTarget(i,2,s),e.render(t,a),e.setRenderTarget(i,3,s),e.render(t,l),e.setRenderTarget(i,4,s),e.render(t,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5,s),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class j2 extends Nt{constructor(e,t,i,s,r,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:ma,super(e,t,i,s,r,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class NE extends ji{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new j2(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:et}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Er(5,5,5),r=new Si({name:"CubemapFromEquirect",uniforms:hc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Cn,blending:Rs});r.uniforms.tEquirect.value=t;const o=new xt(s,r),a=t.minFilter;return t.minFilter===Yn&&(t.minFilter=et),new Ev(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}class ga extends bt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Wi,this.environmentIntensity=1,this.environmentRotation=new Wi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class wV{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=xv,this.updateRanges=[],this.version=0,this.uuid=us()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zn=new L;class FE{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)zn.fromBufferAttribute(this,t),zn.applyMatrix4(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)zn.fromBufferAttribute(this,t),zn.applyNormalMatrix(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)zn.fromBufferAttribute(this,t),zn.transformDirection(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=rs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=At(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=rs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=rs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=rs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=rs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array),r=At(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new Ft(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new FE(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const _S=new L,wS=new ct,SS=new ct,SV=new L,CS=new Fe,kd=new L,XA=new qi,MS=new Fe,KA=new jh;class CV extends xt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=tS,this.bindMatrix=new Fe,this.bindMatrixInverse=new Fe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Kn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,kd),this.boundingBox.expandByPoint(kd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new qi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,kd),this.boundingSphere.expandByPoint(kd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),XA.copy(this.boundingSphere),XA.applyMatrix4(s),e.ray.intersectsSphere(XA)!==!1&&(MS.copy(s).invert(),KA.copy(e.ray).applyMatrix4(MS),!(this.boundingBox!==null&&KA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,KA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ct,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===tS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===_G?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;wS.fromBufferAttribute(s.attributes.skinIndex,e),SS.fromBufferAttribute(s.attributes.skinWeight,e),_S.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=SS.getComponent(r);if(o!==0){const a=wS.getComponent(r);CS.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(SV.copy(_S).applyMatrix4(CS),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class W2 extends bt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Wh extends Nt{constructor(e=null,t=1,i=1,s,r,o,a,l,c=an,u=an,h,d){super(null,o,a,l,c,u,s,r,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const IS=new Fe,MV=new Fe;class kE{constructor(e=[],t=[]){this.uuid=us(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Fe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Fe;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const a=e[r]?e[r].matrixWorld:MV;IS.multiplyMatrices(a,t[r]),IS.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new kE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Wh(t,e,e,Pt,Kt);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new W2),this.bones.push(o),this.boneInverses.push(new Fe().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const a=i[s];e.boneInverses.push(a.toArray())}return e}}class bv extends Ft{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Va=new Fe,TS=new Fe,Ud=[],RS=new Kn,IV=new Fe,Hc=new xt,jc=new qi;class TV extends xt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new bv(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,IV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Kn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Va),RS.copy(e.boundingBox).applyMatrix4(Va),this.boundingBox.union(RS)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new qi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Va),jc.copy(e.boundingSphere).applyMatrix4(Va),this.boundingSphere.union(jc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,o=e*r+1;for(let a=0;a<i.length;a++)i[a]=s[o+a]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(Hc.geometry=this.geometry,Hc.material=this.material,Hc.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),jc.copy(this.boundingSphere),jc.applyMatrix4(i),e.ray.intersectsSphere(jc)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Va),TS.multiplyMatrices(i,Va),Hc.matrixWorld=TS,Hc.raycast(e,Ud);for(let o=0,a=Ud.length;o<a;o++){const l=Ud[o];l.instanceId=r,l.object=this,t.push(l)}Ud.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new bv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new Wh(new Float32Array(s*this.count),s,this.count,Xr,Kt));const r=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=s*e;r[l]=a,r.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const YA=new L,RV=new L,BV=new Ge;class Qo{constructor(e=new L(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=YA.subVectors(i,t).cross(RV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(YA),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||BV.getNormalMatrix(e),s=this.coplanarPoint(YA).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Co=new qi,Od=new L;class UE{constructor(e=new Qo,t=new Qo,i=new Qo,s=new Qo,r=new Qo,o=new Qo){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=cr){const i=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],h=s[6],d=s[7],f=s[8],m=s[9],g=s[10],A=s[11],p=s[12],y=s[13],v=s[14],x=s[15];if(i[0].setComponents(l-r,d-c,A-f,x-p).normalize(),i[1].setComponents(l+r,d+c,A+f,x+p).normalize(),i[2].setComponents(l+o,d+u,A+m,x+y).normalize(),i[3].setComponents(l-o,d-u,A-m,x-y).normalize(),i[4].setComponents(l-a,d-h,A-g,x-v).normalize(),t===cr)i[5].setComponents(l+a,d+h,A+g,x+v).normalize();else if(t===Vp)i[5].setComponents(a,h,g,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Co.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Co.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Co)}intersectsSprite(e){return Co.center.set(0,0,0),Co.radius=.7071067811865476,Co.applyMatrix4(e.matrixWorld),this.intersectsSphere(Co)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Od.x=s.normal.x>0?e.max.x:e.min.x,Od.y=s.normal.y>0?e.max.y:e.min.y,Od.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Od)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class q2 extends hs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ie(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Hp=new L,jp=new L,BS=new Fe,Wc=new jh,Qd=new qi,JA=new L,DS=new L;class Ih extends bt{constructor(e=new ui,t=new q2){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)Hp.fromBufferAttribute(t,s-1),jp.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=Hp.distanceTo(jp);e.setAttribute("lineDistance",new bi(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Qd.copy(i.boundingSphere),Qd.applyMatrix4(s),Qd.radius+=r,e.ray.intersectsSphere(Qd)===!1)return;BS.copy(s).invert(),Wc.copy(e.ray).applyMatrix4(BS);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,d=i.attributes.position;if(u!==null){const f=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=f,A=m-1;g<A;g+=c){const p=u.getX(g),y=u.getX(g+1),v=Gd(this,e,Wc,l,p,y);v&&t.push(v)}if(this.isLineLoop){const g=u.getX(m-1),A=u.getX(f),p=Gd(this,e,Wc,l,g,A);p&&t.push(p)}}else{const f=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let g=f,A=m-1;g<A;g+=c){const p=Gd(this,e,Wc,l,g,g+1);p&&t.push(p)}if(this.isLineLoop){const g=Gd(this,e,Wc,l,m-1,f);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function Gd(n,e,t,i,s,r){const o=n.geometry.attributes.position;if(Hp.fromBufferAttribute(o,s),jp.fromBufferAttribute(o,r),t.distanceSqToSegment(Hp,jp,JA,DS)>i)return;JA.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(JA);if(!(l<e.near||l>e.far))return{distance:l,point:DS.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const LS=new L,PS=new L;class DV extends Ih{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)LS.fromBufferAttribute(t,s),PS.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+LS.distanceTo(PS);e.setAttribute("lineDistance",new bi(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LV extends Ih{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class $2 extends hs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ie(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const NS=new Fe,_v=new jh,Vd=new qi,zd=new L;class PV extends bt{constructor(e=new ui,t=new $2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Vd.copy(i.boundingSphere),Vd.applyMatrix4(s),Vd.radius+=r,e.ray.intersectsSphere(Vd)===!1)return;NS.copy(s).invert(),_v.copy(e.ray).applyMatrix4(NS);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let m=d,g=f;m<g;m++){const A=c.getX(m);zd.fromBufferAttribute(h,A),FS(zd,A,l,s,e,t,this)}}else{const d=Math.max(0,o.start),f=Math.min(h.count,o.start+o.count);for(let m=d,g=f;m<g;m++)zd.fromBufferAttribute(h,m),FS(zd,m,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function FS(n,e,t,i,s,r,o){const a=_v.distanceSqToPoint(n);if(a<t){const l=new L;_v.closestPointToPoint(n,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Kr extends bt{constructor(){super(),this.isGroup=!0,this.type="Group"}}class NV extends Nt{constructor(e,t,i,s,r,o,a,l,c){super(e,t,i,s,r,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:et,this.magFilter=r!==void 0?r:et,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class aa extends Nt{constructor(e,t,i,s,r,o,a,l,c,u,h,d){super(null,o,a,l,c,u,s,r,h,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class FV extends aa{constructor(e,t,i,s,r,o){super(e,t,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Xt,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kV extends aa{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ma),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class UV extends Nt{constructor(e,t,i,s,r,o,a,l,c){super(e,t,i,s,r,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class X2 extends Nt{constructor(e,t,i,s,r,o,a,l,c,u=Vl){if(u!==Vl&&u!==ac)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Vl&&(i=po),i===void 0&&u===ac&&(i=oc),super(null,s,r,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:an,this.minFilter=l!==void 0?l:an,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class br extends ui{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),l=Math.floor(s),c=a+1,u=l+1,h=e/a,d=t/l,f=[],m=[],g=[],A=[];for(let p=0;p<u;p++){const y=p*d-o;for(let v=0;v<c;v++){const x=v*h-r;m.push(x,-y,0),g.push(0,0,1),A.push(v/a),A.push(1-p/l)}}for(let p=0;p<l;p++)for(let y=0;y<a;y++){const v=y+c*p,x=y+c*(p+1),E=y+1+c*(p+1),w=y+1+c*p;f.push(v,x,w),f.push(x,E,w)}this.setIndex(f),this.setAttribute("position",new bi(m,3)),this.setAttribute("normal",new bi(g,3)),this.setAttribute("uv",new bi(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new br(e.width,e.height,e.widthSegments,e.heightSegments)}}class OE extends ui{constructor(e=1,t=32,i=16,s=0,r=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new L,d=new L,f=[],m=[],g=[],A=[];for(let p=0;p<=i;p++){const y=[],v=p/i;let x=0;p===0&&o===0?x=.5/t:p===i&&l===Math.PI&&(x=-.5/t);for(let E=0;E<=t;E++){const w=E/t;h.x=-e*Math.cos(s+w*r)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(s+w*r)*Math.sin(o+v*a),m.push(h.x,h.y,h.z),d.copy(h).normalize(),g.push(d.x,d.y,d.z),A.push(w+x,1-v),y.push(c++)}u.push(y)}for(let p=0;p<i;p++)for(let y=0;y<t;y++){const v=u[p][y+1],x=u[p][y],E=u[p+1][y],w=u[p+1][y+1];(p!==0||o>0)&&f.push(v,x,w),(p!==i-1||l<Math.PI)&&f.push(x,E,w)}this.setIndex(f),this.setAttribute("position",new bi(m,3)),this.setAttribute("normal",new bi(g,3)),this.setAttribute("uv",new bi(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OE(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Th extends hs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ie(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=N2,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ks extends Th{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $e(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ie(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ie(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ie(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class K2 extends hs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=CG,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class OV extends hs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Hd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function QV(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function GV(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function kS(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=t[r]*e;for(let l=0;l!==e;++l)s[o++]=n[a+l]}return s}function Y2(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),t.push.apply(t,o)),r=n[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),t.push(o)),r=n[s++];while(r!==void 0)}class qh{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let o;n:{i:if(!(e<s)){for(let a=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=s,s=t[++i],e<s)break t}o=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(i=2,r=a);for(let l=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(s=r,r=t[--i-1],e>=r)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class VV extends qh{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Tl,endingEnd:Tl}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],l=s[o];if(a===void 0)switch(this.getSettings_().endingStart){case Rl:r=e,a=2*t-i;break;case Qp:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Rl:o=e,l=2*i-t;break;case Qp:o=1,l=i+s[1]-s[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,m=(i-t)/(s-t),g=m*m,A=g*m,p=-d*A+2*d*g-d*m,y=(1+d)*A+(-1.5-2*d)*g+(-.5+d)*m+1,v=(-1-f)*A+(1.5+f)*g+.5*m,x=f*A-f*g;for(let E=0;E!==a;++E)r[E]=p*o[u+E]+y*o[c+E]+v*o[l+E]+x*o[h+E];return r}}class J2 extends qh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(s-t),h=1-u;for(let d=0;d!==a;++d)r[d]=o[c+d]*h+o[l+d]*u;return r}}class zV extends qh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Us{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hd(t,this.TimeBufferType),this.values=Hd(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Hd(e.times,Array),values:Hd(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new zV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new J2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new VV(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case lc:t=this.InterpolantFactoryMethodDiscrete;break;case cc:t=this.InterpolantFactoryMethodLinear;break;case TA:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lc;case this.InterpolantFactoryMethodLinear:return cc;case this.InterpolantFactoryMethodSmooth:return TA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<e;)++r;for(;o!==-1&&i[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(s!==void 0&&QV(s))for(let a=0,l=s.length;a!==l;++a){const c=s[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===TA,r=e.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(s)l=!0;else{const h=a*i,d=h-i,f=h+i;for(let m=0;m!==i;++m){const g=t[h+m];if(g!==t[d+m]||g!==t[f+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,d=o*i;for(let f=0;f!==i;++f)t[d+f]=t[h+f]}++o}}if(r>0){e[o]=e[r];for(let a=r*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Us.prototype.TimeBufferType=Float32Array;Us.prototype.ValueBufferType=Float32Array;Us.prototype.DefaultInterpolation=cc;class wc extends Us{constructor(e,t,i){super(e,t,i)}}wc.prototype.ValueTypeName="bool";wc.prototype.ValueBufferType=Array;wc.prototype.DefaultInterpolation=lc;wc.prototype.InterpolantFactoryMethodLinear=void 0;wc.prototype.InterpolantFactoryMethodSmooth=void 0;class Z2 extends Us{}Z2.prototype.ValueTypeName="color";class dc extends Us{}dc.prototype.ValueTypeName="number";class HV extends qh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(s-t);let c=e*a;for(let u=c+a;c!==u;c+=4)ei.slerpFlat(r,0,o,c-a,o,c,l);return r}}class fc extends Us{InterpolantFactoryMethodLinear(e){return new HV(this.times,this.values,this.getValueSize(),e)}}fc.prototype.ValueTypeName="quaternion";fc.prototype.InterpolantFactoryMethodSmooth=void 0;class Sc extends Us{constructor(e,t,i){super(e,t,i)}}Sc.prototype.ValueTypeName="string";Sc.prototype.ValueBufferType=Array;Sc.prototype.DefaultInterpolation=lc;Sc.prototype.InterpolantFactoryMethodLinear=void 0;Sc.prototype.InterpolantFactoryMethodSmooth=void 0;class pc extends Us{}pc.prototype.ValueTypeName="vector";class wv{constructor(e="",t=-1,i=[],s=BE){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=us(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(WV(i[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(Us.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,o=[];for(let a=0;a<r;a++){let l=[],c=[];l.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);const u=GV(l);l=kS(l,1,u),c=kS(c,1,u),!s&&l[0]===0&&(l.push(r),c.push(c[0])),o.push(new dc(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(r);if(u&&u.length>1){const h=u[1];let d=s[h];d||(s[h]=d=[]),d.push(c)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,d,f,m,g){if(f.length!==0){const A=[],p=[];Y2(f,A,p,m),A.length!==0&&g.push(new h(d,A,p))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let g=0;g<d[m].morphTargets.length;g++)f[d[m].morphTargets[g]]=-1;for(const g in f){const A=[],p=[];for(let y=0;y!==d[m].morphTargets.length;++y){const v=d[m];A.push(v.time),p.push(v.morphTarget===g?1:0)}s.push(new dc(".morphTargetInfluence["+g+"]",A,p))}l=f.length*o}else{const f=".bones["+t[h].name+"]";i(pc,f+".position",d,"pos",s),i(fc,f+".quaternion",d,"rot",s),i(pc,f+".scale",d,"scl",s)}}return s.length===0?null:new this(r,l,s,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function jV(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dc;case"vector":case"vector2":case"vector3":case"vector4":return pc;case"color":return Z2;case"quaternion":return fc;case"bool":case"boolean":return wc;case"string":return Sc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function WV(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=jV(n.type);if(n.times===void 0){const t=[],i=[];Y2(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Yr={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class eD{constructor(e,t,i){const s=this;let r=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,r===!1&&s.onStart!==void 0&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,s.onProgress!==void 0&&s.onProgress(u,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],m=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}}const qV=new eD;class Os{constructor(e){this.manager=e!==void 0?e:qV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Os.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ws={};class $V extends Error{constructor(e,t){super(e),this.response=t}}class mr extends Os{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Yr.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Ws[e]!==void 0){Ws[e].push({onLoad:t,onProgress:i,onError:s});return}Ws[e]=[],Ws[e].push({onLoad:t,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ws[e],h=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=d?parseInt(d):0,m=f!==0;let g=0;const A=new ReadableStream({start(p){y();function y(){h.read().then(({done:v,value:x})=>{if(v)p.close();else{g+=x.byteLength;const E=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:f});for(let w=0,M=u.length;w<M;w++){const C=u[w];C.onProgress&&C.onProgress(E)}p.enqueue(x),y()}},v=>{p.error(v)})}}});return new Response(A)}else throw new $V(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Yr.add(e,c);const u=Ws[e];delete Ws[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Ws[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ws[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class XV extends Os{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Yr.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=Mh("img");function l(){u(),Yr.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(h){u(),s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class KV extends Os{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new Wh,a=new mr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(l){let c;try{c=r.parse(l)}catch(u){if(s!==void 0)s(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Xt,o.wrapT=c.wrapT!==void 0?c.wrapT:Xt,o.magFilter=c.magFilter!==void 0?c.magFilter:et,o.minFilter=c.minFilter!==void 0?c.minFilter:et,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Yn),c.mipmapCount===1&&(o.minFilter=et),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,s),o}}class tD extends Os{constructor(e){super(e)}load(e,t,i,s){const r=new Nt,o=new XV(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class Bm extends bt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ie(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}const ZA=new Fe,US=new L,OS=new L;class QE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new UE,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new ct(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;US.setFromMatrixPosition(e.matrixWorld),t.position.copy(US),OS.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(OS),t.updateMatrixWorld(),ZA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ZA),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(ZA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class YV extends QE{constructor(){super(new _n(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=uc*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class JV extends Bm{constructor(e,t,i=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(bt.DEFAULT_UP),this.updateMatrix(),this.target=new bt,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new YV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const QS=new Fe,qc=new L,eg=new L;class ZV extends QE{constructor(){super(new _n(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new ct(2,1,1,1),new ct(0,1,1,1),new ct(3,1,1,1),new ct(1,1,1,1),new ct(3,0,1,1),new ct(1,0,1,1)],this._cubeDirections=[new L(1,0,0),new L(-1,0,0),new L(0,0,1),new L(0,0,-1),new L(0,1,0),new L(0,-1,0)],this._cubeUps=[new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,0,1),new L(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),qc.setFromMatrixPosition(e.matrixWorld),i.position.copy(qc),eg.copy(i.position),eg.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(eg),i.updateMatrixWorld(),s.makeTranslation(-qc.x,-qc.y,-qc.z),QS.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QS)}}class nD extends Bm{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new ZV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Cc extends H2{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class ez extends QE{constructor(){super(new Cc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iD extends Bm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(bt.DEFAULT_UP),this.updateMatrix(),this.target=new bt,this.shadow=new ez}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class tz{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new L)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*s),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*s)),t.addScaledVector(o[5],1.092548*(s*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(i*r)),t.addScaledVector(o[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*s),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*s),t.addScaledVector(o[5],2*.429043*s*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*i*r),t.addScaledVector(o[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-s*s)}}class nz extends Bm{constructor(e=new tz,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ku{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class iz extends Os{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Yr.get(e);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),r.manager.itemEnd(e)}).catch(c=>{s&&s(c)});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){return Yr.add(e,c),t&&t(c),r.manager.itemEnd(e),c}).catch(function(c){s&&s(c),Yr.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Yr.add(e,l),r.manager.itemStart(e)}}class sz extends _n{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rz{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,r,o;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,r=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==s;++a)i[r+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,r,0,a,s)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(i,s,l,1-r,t)}o>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let r=i,o=s;r!==o;++r)t[r]=t[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,r){if(s>=.5)for(let o=0;o!==r;++o)e[t+o]=e[i+o]}_slerp(e,t,i,s){ei.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,r){const o=this._workIndex*r;ei.multiplyQuaternionsFlat(e,o,e,t,e,i),ei.slerpFlat(e,t,e,t,e,o,s)}_lerp(e,t,i,s,r){const o=1-s;for(let a=0;a!==r;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*s}}_lerpAdditive(e,t,i,s,r){for(let o=0;o!==r;++o){const a=t+o;e[a]=e[a]+e[i+o]*s}}}const GE="\\[\\]\\.:\\/",oz=new RegExp("["+GE+"]","g"),VE="[^"+GE+"]",az="[^"+GE.replace("\\.","")+"]",lz=/((?:WC+[\/:])*)/.source.replace("WC",VE),cz=/(WCOD+)?/.source.replace("WCOD",az),uz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VE),hz=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VE),dz=new RegExp("^"+lz+cz+uz+hz+"$"),fz=["material","materials","bones","map"];class pz{constructor(e,t,i){const s=i||st.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class st{constructor(e,t,i){this.path=t,this.parsedPath=i||st.parseTrackName(t),this.node=st.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new st.Composite(e,t,i):new st(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(oz,"")}static parseTrackName(e){const t=dz.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);fz.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let o=0;o<r.length;o++){const a=r[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=st.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[s];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}st.Composite=pz;st.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};st.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};st.prototype.GetterByBindingType=[st.prototype._getValue_direct,st.prototype._getValue_array,st.prototype._getValue_arrayElement,st.prototype._getValue_toArray];st.prototype.SetterByBindingTypeAndVersioning=[[st.prototype._setValue_direct,st.prototype._setValue_direct_setNeedsUpdate,st.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[st.prototype._setValue_array,st.prototype._setValue_array_setNeedsUpdate,st.prototype._setValue_array_setMatrixWorldNeedsUpdate],[st.prototype._setValue_arrayElement,st.prototype._setValue_arrayElement_setNeedsUpdate,st.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[st.prototype._setValue_fromArray,st.prototype._setValue_fromArray_setNeedsUpdate,st.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mz{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const r=t.tracks,o=r.length,a=new Array(o),l={endingStart:Tl,endingEnd:Tl};for(let c=0;c!==o;++c){const u=r[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zl,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,r=e._clip.duration,o=r/s,a=s/r;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,l[1]=r+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case wG:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case BE:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(s,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const o=i===Op;if(e===0)return r===-1?s:o&&(r&1)===1?t-s:s;if(i===Ch){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=t||s<0){const a=Math.floor(s/t);s-=t*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&(r&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=Rl,s.endingEnd=Rl):(e?s.endingStart=this.zeroSlopeAtStart?Rl:Tl:s.endingStart=Qp,t?s.endingEnd=this.zeroSlopeAtEnd?Rl:Tl:s.endingEnd=Qp)}_scheduleFading(e,t,i){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=t,a[1]=r+e,l[1]=i,this}}const Az=new Float32Array(1);class gz extends ms{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,r=s.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==r;++h){const d=s[h],f=d.name;let m=u[f];if(m!==void 0)++m.referenceCount,o[h]=m;else{if(m=o[h],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}const g=t&&t._propertyBindings[h].binding.parsedPath;m=new rz(st.create(i,f,g),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),o[h]=m}a[h].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[t];o===void 0&&(o={},s[t]=o),o[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[s],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[r],Object.keys(a).length===0&&delete o[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new J2(new Float32Array(2),new Float32Array(2),1,Az),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const s=t||this._root,r=s.uuid;let o=typeof e=="string"?wv.findByName(s,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=BE),l!==void 0){const h=l.actionByRoot[r];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new mz(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,r),u}existingAction(e,t){const i=t||this._root,s=i.uuid,r=typeof e=="string"?wv.findByName(i,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(s,e,r,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,r=s[i];if(r!==void 0){const o=r.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const o in r){const a=r[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}const GS=new Fe;class yz{constructor(e,t,i=0,s=1/0){this.ray=new jh(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new PE,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return GS.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(GS),this}intersectObject(e,t=!0,i=[]){return Sv(e,this,i,t),i.sort(VS),i}intersectObjects(e,t=!0,i=[]){for(let s=0,r=e.length;s<r;s++)Sv(e[s],this,i,t);return i.sort(VS),i}}function VS(n,e){return n.distance-e.distance}function Sv(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let o=0,a=r.length;o<a;o++)Sv(r[o],e,t,!0)}}class zf{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=$e(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos($e(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}function zS(n,e,t,i){const s=vz(i);switch(t){case T2:return n*e;case B2:return n*e;case D2:return n*e*2;case Xr:return n*e/s.components*s.byteLength;case IE:return n*e/s.components*s.byteLength;case ea:return n*e*2/s.components*s.byteLength;case TE:return n*e*2/s.components*s.byteLength;case R2:return n*e*3/s.components*s.byteLength;case Pt:return n*e*4/s.components*s.byteLength;case RE:return n*e*4/s.components*s.byteLength;case Qf:case ju:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Gf:case Wu:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case tv:case nv:return Math.max(n,16)*Math.max(e,8)/4;case Lp:case Pp:return Math.max(n,8)*Math.max(e,8)/2;case Np:case Fp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case kp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iv:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case sv:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case rv:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Sh:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case ov:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case av:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case lv:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case cv:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case uv:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case hv:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case dv:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case fv:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case pv:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case qu:case mv:case Up:return Math.ceil(n/4)*Math.ceil(e/4)*16;case L2:case Av:return Math.ceil(n/4)*Math.ceil(e/4)*8;case gv:case yv:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function vz(n){switch(n){case Jt:case wE:return{byteLength:1,components:1};case _h:case SE:case rn:return{byteLength:2,components:1};case CE:case ME:return{byteLength:2,components:4};case po:case Rm:case Kt:return{byteLength:4,components:1};case I2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Im}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Im);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function sD(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function xz(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,h=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,c){const u=l.array,h=l.updateRanges;if(n.bindBuffer(c,a),h.length===0)n.bufferSubData(c,0,u);else{h.sort((f,m)=>f.start-m.start);let d=0;for(let f=1;f<h.length;f++){const m=h[d],g=h[f];g.start<=m.start+m.count+1?m.count=Math.max(m.count,g.start+g.count-m.start):(++d,h[d]=g)}h.length=d+1;for(let f=0,m=h.length;f<m;f++){const g=h[f];n.bufferSubData(c,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function r(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:s,remove:r,update:o}}var Ez=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bz=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,_z=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,wz=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Sz=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Cz=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Mz=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Iz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Tz=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Rz=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Bz=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Dz=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Lz=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Pz=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Nz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Fz=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,kz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Uz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Oz=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Qz=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Gz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Vz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,zz=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Hz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jz=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wz=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$z=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Xz=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Kz=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Yz="gl_FragColor = linearToOutputTexel( gl_FragColor );",Jz=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Zz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,eH=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tH=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nH=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,oH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,aH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,cH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,uH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,pH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,AH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,vH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,EH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,bH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,_H=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wH=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SH=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CH=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,MH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,IH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,TH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,RH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,BH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,DH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,LH=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,PH=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,FH=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,UH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,OH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,QH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,HH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,jH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,WH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,qH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$H=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,XH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,YH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ZH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,e5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,t5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,n5=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,i5=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,s5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,r5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,o5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,a5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,l5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,c5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,u5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,h5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,d5=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,f5=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,p5=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,m5=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,A5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,g5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,y5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,v5=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const x5=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,E5=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,b5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_5=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,S5=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,C5=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,M5=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,I5=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,T5=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,R5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,B5=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,D5=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,L5=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,P5=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,N5=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F5=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k5=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U5=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,O5=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q5=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,G5=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,V5=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z5=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,j5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W5=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,q5=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$5=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,X5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,K5=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Y5=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,J5=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Z5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,We={alphahash_fragment:Ez,alphahash_pars_fragment:bz,alphamap_fragment:_z,alphamap_pars_fragment:wz,alphatest_fragment:Sz,alphatest_pars_fragment:Cz,aomap_fragment:Mz,aomap_pars_fragment:Iz,batching_pars_vertex:Tz,batching_vertex:Rz,begin_vertex:Bz,beginnormal_vertex:Dz,bsdfs:Lz,iridescence_fragment:Pz,bumpmap_pars_fragment:Nz,clipping_planes_fragment:Fz,clipping_planes_pars_fragment:kz,clipping_planes_pars_vertex:Uz,clipping_planes_vertex:Oz,color_fragment:Qz,color_pars_fragment:Gz,color_pars_vertex:Vz,color_vertex:zz,common:Hz,cube_uv_reflection_fragment:jz,defaultnormal_vertex:Wz,displacementmap_pars_vertex:qz,displacementmap_vertex:$z,emissivemap_fragment:Xz,emissivemap_pars_fragment:Kz,colorspace_fragment:Yz,colorspace_pars_fragment:Jz,envmap_fragment:Zz,envmap_common_pars_fragment:eH,envmap_pars_fragment:tH,envmap_pars_vertex:nH,envmap_physical_pars_fragment:fH,envmap_vertex:iH,fog_vertex:sH,fog_pars_vertex:rH,fog_fragment:oH,fog_pars_fragment:aH,gradientmap_pars_fragment:lH,lightmap_pars_fragment:cH,lights_lambert_fragment:uH,lights_lambert_pars_fragment:hH,lights_pars_begin:dH,lights_toon_fragment:pH,lights_toon_pars_fragment:mH,lights_phong_fragment:AH,lights_phong_pars_fragment:gH,lights_physical_fragment:yH,lights_physical_pars_fragment:vH,lights_fragment_begin:xH,lights_fragment_maps:EH,lights_fragment_end:bH,logdepthbuf_fragment:_H,logdepthbuf_pars_fragment:wH,logdepthbuf_pars_vertex:SH,logdepthbuf_vertex:CH,map_fragment:MH,map_pars_fragment:IH,map_particle_fragment:TH,map_particle_pars_fragment:RH,metalnessmap_fragment:BH,metalnessmap_pars_fragment:DH,morphinstance_vertex:LH,morphcolor_vertex:PH,morphnormal_vertex:NH,morphtarget_pars_vertex:FH,morphtarget_vertex:kH,normal_fragment_begin:UH,normal_fragment_maps:OH,normal_pars_fragment:QH,normal_pars_vertex:GH,normal_vertex:VH,normalmap_pars_fragment:zH,clearcoat_normal_fragment_begin:HH,clearcoat_normal_fragment_maps:jH,clearcoat_pars_fragment:WH,iridescence_pars_fragment:qH,opaque_fragment:$H,packing:XH,premultiplied_alpha_fragment:KH,project_vertex:YH,dithering_fragment:JH,dithering_pars_fragment:ZH,roughnessmap_fragment:e5,roughnessmap_pars_fragment:t5,shadowmap_pars_fragment:n5,shadowmap_pars_vertex:i5,shadowmap_vertex:s5,shadowmask_pars_fragment:r5,skinbase_vertex:o5,skinning_pars_vertex:a5,skinning_vertex:l5,skinnormal_vertex:c5,specularmap_fragment:u5,specularmap_pars_fragment:h5,tonemapping_fragment:d5,tonemapping_pars_fragment:f5,transmission_fragment:p5,transmission_pars_fragment:m5,uv_pars_fragment:A5,uv_pars_vertex:g5,uv_vertex:y5,worldpos_vertex:v5,background_vert:x5,background_frag:E5,backgroundCube_vert:b5,backgroundCube_frag:_5,cube_vert:w5,cube_frag:S5,depth_vert:C5,depth_frag:M5,distanceRGBA_vert:I5,distanceRGBA_frag:T5,equirect_vert:R5,equirect_frag:B5,linedashed_vert:D5,linedashed_frag:L5,meshbasic_vert:P5,meshbasic_frag:N5,meshlambert_vert:F5,meshlambert_frag:k5,meshmatcap_vert:U5,meshmatcap_frag:O5,meshnormal_vert:Q5,meshnormal_frag:G5,meshphong_vert:V5,meshphong_frag:z5,meshphysical_vert:H5,meshphysical_frag:j5,meshtoon_vert:W5,meshtoon_frag:q5,points_vert:$5,points_frag:X5,shadow_vert:K5,shadow_frag:Y5,sprite_vert:J5,sprite_frag:Z5},ue={common:{diffuse:{value:new Ie(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ge},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ge}},envmap:{envMap:{value:null},envMapRotation:{value:new Ge},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ge}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ge}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ge},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ge},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ge},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ge}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ge}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ge}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ie(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ie(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0},uvTransform:{value:new Ge}},sprite:{diffuse:{value:new Ie(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ge},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0}}},xs={basic:{uniforms:jn([ue.common,ue.specularmap,ue.envmap,ue.aomap,ue.lightmap,ue.fog]),vertexShader:We.meshbasic_vert,fragmentShader:We.meshbasic_frag},lambert:{uniforms:jn([ue.common,ue.specularmap,ue.envmap,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.fog,ue.lights,{emissive:{value:new Ie(0)}}]),vertexShader:We.meshlambert_vert,fragmentShader:We.meshlambert_frag},phong:{uniforms:jn([ue.common,ue.specularmap,ue.envmap,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.fog,ue.lights,{emissive:{value:new Ie(0)},specular:{value:new Ie(1118481)},shininess:{value:30}}]),vertexShader:We.meshphong_vert,fragmentShader:We.meshphong_frag},standard:{uniforms:jn([ue.common,ue.envmap,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.roughnessmap,ue.metalnessmap,ue.fog,ue.lights,{emissive:{value:new Ie(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:We.meshphysical_vert,fragmentShader:We.meshphysical_frag},toon:{uniforms:jn([ue.common,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.gradientmap,ue.fog,ue.lights,{emissive:{value:new Ie(0)}}]),vertexShader:We.meshtoon_vert,fragmentShader:We.meshtoon_frag},matcap:{uniforms:jn([ue.common,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.fog,{matcap:{value:null}}]),vertexShader:We.meshmatcap_vert,fragmentShader:We.meshmatcap_frag},points:{uniforms:jn([ue.points,ue.fog]),vertexShader:We.points_vert,fragmentShader:We.points_frag},dashed:{uniforms:jn([ue.common,ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:We.linedashed_vert,fragmentShader:We.linedashed_frag},depth:{uniforms:jn([ue.common,ue.displacementmap]),vertexShader:We.depth_vert,fragmentShader:We.depth_frag},normal:{uniforms:jn([ue.common,ue.bumpmap,ue.normalmap,ue.displacementmap,{opacity:{value:1}}]),vertexShader:We.meshnormal_vert,fragmentShader:We.meshnormal_frag},sprite:{uniforms:jn([ue.sprite,ue.fog]),vertexShader:We.sprite_vert,fragmentShader:We.sprite_frag},background:{uniforms:{uvTransform:{value:new Ge},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:We.background_vert,fragmentShader:We.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ge}},vertexShader:We.backgroundCube_vert,fragmentShader:We.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:We.cube_vert,fragmentShader:We.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:We.equirect_vert,fragmentShader:We.equirect_frag},distanceRGBA:{uniforms:jn([ue.common,ue.displacementmap,{referencePosition:{value:new L},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:We.distanceRGBA_vert,fragmentShader:We.distanceRGBA_frag},shadow:{uniforms:jn([ue.lights,ue.fog,{color:{value:new Ie(0)},opacity:{value:1}}]),vertexShader:We.shadow_vert,fragmentShader:We.shadow_frag}};xs.physical={uniforms:jn([xs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ge},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ge},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ge},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ge},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ge},sheen:{value:0},sheenColor:{value:new Ie(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ge},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ge},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ge},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ge},attenuationDistance:{value:0},attenuationColor:{value:new Ie(0)},specularColor:{value:new Ie(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ge},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ge},anisotropyVector:{value:new Ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ge}}]),vertexShader:We.meshphysical_vert,fragmentShader:We.meshphysical_frag};const jd={r:0,b:0,g:0},Mo=new Wi,e8=new Fe;function t8(n,e,t,i,s,r,o){const a=new Ie(0);let l=r===!0?0:1,c,u,h=null,d=0,f=null;function m(v){let x=v.isScene===!0?v.background:null;return x&&x.isTexture&&(x=(v.backgroundBlurriness>0?t:e).get(x)),x}function g(v){let x=!1;const E=m(v);E===null?p(a,l):E&&E.isColor&&(p(E,1),x=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?i.buffers.color.setClear(0,0,0,1,o):w==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||x)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function A(v,x){const E=m(x);E&&(E.isCubeTexture||E.mapping===Tm)?(u===void 0&&(u=new xt(new Er(1,1,1),new Si({name:"BackgroundCubeMaterial",uniforms:hc(xs.backgroundCube.uniforms),vertexShader:xs.backgroundCube.vertexShader,fragmentShader:xs.backgroundCube.fragmentShader,side:Cn,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,M,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),Mo.copy(x.backgroundRotation),Mo.x*=-1,Mo.y*=-1,Mo.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Mo.y*=-1,Mo.z*=-1),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(e8.makeRotationFromEuler(Mo)),u.material.toneMapped=Ze.getTransfer(E.colorSpace)!==vt,(h!==E||d!==E.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=E,d=E.version,f=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new xt(new br(2,2),new Si({name:"BackgroundMaterial",uniforms:hc(xs.background.uniforms),vertexShader:xs.background.vertexShader,fragmentShader:xs.background.fragmentShader,side:fs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=Ze.getTransfer(E.colorSpace)!==vt,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(h!==E||d!==E.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=E,d=E.version,f=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function p(v,x){v.getRGB(jd,z2(n)),i.buffers.color.setClear(jd.r,jd.g,jd.b,x,o)}function y(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(v,x=1){a.set(v),l=x,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,p(a,l)},render:g,addToRenderList:A,dispose:y}}function n8(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=d(null);let r=s,o=!1;function a(_,R,O,N,F){let H=!1;const Q=h(N,O,R);r!==Q&&(r=Q,c(r.object)),H=f(_,N,O,F),H&&m(_,N,O,F),F!==null&&e.update(F,n.ELEMENT_ARRAY_BUFFER),(H||o)&&(o=!1,x(_,R,O,N),F!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(F).buffer))}function l(){return n.createVertexArray()}function c(_){return n.bindVertexArray(_)}function u(_){return n.deleteVertexArray(_)}function h(_,R,O){const N=O.wireframe===!0;let F=i[_.id];F===void 0&&(F={},i[_.id]=F);let H=F[R.id];H===void 0&&(H={},F[R.id]=H);let Q=H[N];return Q===void 0&&(Q=d(l()),H[N]=Q),Q}function d(_){const R=[],O=[],N=[];for(let F=0;F<t;F++)R[F]=0,O[F]=0,N[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:O,attributeDivisors:N,object:_,attributes:{},index:null}}function f(_,R,O,N){const F=r.attributes,H=R.attributes;let Q=0;const z=O.getAttributes();for(const D in z)if(z[D].location>=0){const K=F[D];let te=H[D];if(te===void 0&&(D==="instanceMatrix"&&_.instanceMatrix&&(te=_.instanceMatrix),D==="instanceColor"&&_.instanceColor&&(te=_.instanceColor)),K===void 0||K.attribute!==te||te&&K.data!==te.data)return!0;Q++}return r.attributesNum!==Q||r.index!==N}function m(_,R,O,N){const F={},H=R.attributes;let Q=0;const z=O.getAttributes();for(const D in z)if(z[D].location>=0){let K=H[D];K===void 0&&(D==="instanceMatrix"&&_.instanceMatrix&&(K=_.instanceMatrix),D==="instanceColor"&&_.instanceColor&&(K=_.instanceColor));const te={};te.attribute=K,K&&K.data&&(te.data=K.data),F[D]=te,Q++}r.attributes=F,r.attributesNum=Q,r.index=N}function g(){const _=r.newAttributes;for(let R=0,O=_.length;R<O;R++)_[R]=0}function A(_){p(_,0)}function p(_,R){const O=r.newAttributes,N=r.enabledAttributes,F=r.attributeDivisors;O[_]=1,N[_]===0&&(n.enableVertexAttribArray(_),N[_]=1),F[_]!==R&&(n.vertexAttribDivisor(_,R),F[_]=R)}function y(){const _=r.newAttributes,R=r.enabledAttributes;for(let O=0,N=R.length;O<N;O++)R[O]!==_[O]&&(n.disableVertexAttribArray(O),R[O]=0)}function v(_,R,O,N,F,H,Q){Q===!0?n.vertexAttribIPointer(_,R,O,F,H):n.vertexAttribPointer(_,R,O,N,F,H)}function x(_,R,O,N){g();const F=N.attributes,H=O.getAttributes(),Q=R.defaultAttributeValues;for(const z in H){const D=H[z];if(D.location>=0){let j=F[z];if(j===void 0&&(z==="instanceMatrix"&&_.instanceMatrix&&(j=_.instanceMatrix),z==="instanceColor"&&_.instanceColor&&(j=_.instanceColor)),j!==void 0){const K=j.normalized,te=j.itemSize,ae=e.get(j);if(ae===void 0)continue;const we=ae.buffer,X=ae.type,ne=ae.bytesPerElement,he=X===n.INT||X===n.UNSIGNED_INT||j.gpuType===Rm;if(j.isInterleavedBufferAttribute){const ce=j.data,Te=ce.stride,ke=j.offset;if(ce.isInstancedInterleavedBuffer){for(let He=0;He<D.locationSize;He++)p(D.location+He,ce.meshPerAttribute);_.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let He=0;He<D.locationSize;He++)A(D.location+He);n.bindBuffer(n.ARRAY_BUFFER,we);for(let He=0;He<D.locationSize;He++)v(D.location+He,te/D.locationSize,X,K,Te*ne,(ke+te/D.locationSize*He)*ne,he)}else{if(j.isInstancedBufferAttribute){for(let ce=0;ce<D.locationSize;ce++)p(D.location+ce,j.meshPerAttribute);_.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let ce=0;ce<D.locationSize;ce++)A(D.location+ce);n.bindBuffer(n.ARRAY_BUFFER,we);for(let ce=0;ce<D.locationSize;ce++)v(D.location+ce,te/D.locationSize,X,K,te*ne,te/D.locationSize*ce*ne,he)}}else if(Q!==void 0){const K=Q[z];if(K!==void 0)switch(K.length){case 2:n.vertexAttrib2fv(D.location,K);break;case 3:n.vertexAttrib3fv(D.location,K);break;case 4:n.vertexAttrib4fv(D.location,K);break;default:n.vertexAttrib1fv(D.location,K)}}}}y()}function E(){C();for(const _ in i){const R=i[_];for(const O in R){const N=R[O];for(const F in N)u(N[F].object),delete N[F];delete R[O]}delete i[_]}}function w(_){if(i[_.id]===void 0)return;const R=i[_.id];for(const O in R){const N=R[O];for(const F in N)u(N[F].object),delete N[F];delete R[O]}delete i[_.id]}function M(_){for(const R in i){const O=i[R];if(O[_.id]===void 0)continue;const N=O[_.id];for(const F in N)u(N[F].object),delete N[F];delete O[_.id]}}function C(){S(),o=!0,r!==s&&(r=s,c(r.object))}function S(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:a,reset:C,resetDefaultState:S,dispose:E,releaseStatesOfGeometry:w,releaseStatesOfProgram:M,initAttributes:g,enableAttribute:A,disableUnusedAttributes:y}}function i8(n,e,t){let i;function s(c){i=c}function r(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,h){h!==0&&(n.drawArraysInstanced(i,c,u,h),t.update(u,i,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,h);let f=0;for(let m=0;m<h;m++)f+=u[m];t.update(f,i,1)}function l(c,u,h,d){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<c.length;m++)o(c[m],u[m],d[m]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,u,0,d,0,h);let m=0;for(let g=0;g<h;g++)m+=u[g]*d[g];t.update(m,i,1)}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function s8(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(M){return!(M!==Pt&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(M){const C=M===rn&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==Jt&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==Kt&&!C)}function l(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),A=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),p=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=m>0,w=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:d,maxTextures:f,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:A,maxAttributes:p,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:E,maxSamples:w}}function r8(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new Qo,a=new Ge,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||i!==0||s;return s=d,i=h.length,f},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const m=h.clippingPlanes,g=h.clipIntersection,A=h.clipShadows,p=n.get(h);if(!s||m===null||m.length===0||r&&!A)r?u(null):c();else{const y=r?0:i,v=y*4;let x=p.clippingState||null;l.value=x,x=u(m,d,v,f);for(let E=0;E!==v;++E)x[E]=t[E];p.clippingState=x,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,d,f,m){const g=h!==null?h.length:0;let A=null;if(g!==0){if(A=l.value,m!==!0||A===null){const p=f+g*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(A===null||A.length<p)&&(A=new Float32Array(p));for(let v=0,x=f;v!==g;++v,x+=4)o.copy(h[v]).applyMatrix4(y,a),o.normal.toArray(A,x),A[x+3]=o.constant}l.value=A,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,A}}function o8(n){let e=new WeakMap;function t(o,a){return a===Dp?o.mapping=ma:a===ev&&(o.mapping=rc),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Dp||a===ev)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new NE(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",s),t(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const Bl=4,HS=[.125,.215,.35,.446,.526,.582],Xo=20,tg=new Cc,jS=new Ie;let ng=null,ig=0,sg=0,rg=!1;const Go=(1+Math.sqrt(5))/2,za=1/Go,WS=[new L(-Go,za,0),new L(Go,za,0),new L(-za,0,Go),new L(za,0,Go),new L(0,Go,-za),new L(0,Go,za),new L(-1,1,-1),new L(1,1,-1),new L(-1,1,1),new L(1,1,1)];class qS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){ng=this._renderer.getRenderTarget(),ig=this._renderer.getActiveCubeFace(),sg=this._renderer.getActiveMipmapLevel(),rg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=KS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=XS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ng,ig,sg),this._renderer.xr.enabled=rg,e.scissorTest=!1,Wd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ma||e.mapping===rc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ng=this._renderer.getRenderTarget(),ig=this._renderer.getActiveCubeFace(),sg=this._renderer.getActiveMipmapLevel(),rg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:et,minFilter:et,generateMipmaps:!1,type:rn,format:Pt,colorSpace:Mt,depthBuffer:!1},s=$S(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$S(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=a8(r)),this._blurMaterial=l8(r,e,t)}return s}_compileMaterial(e){const t=new xt(this._lodPlanes[0],e);this._renderer.compile(t,tg)}_sceneToCubeUV(e,t,i,s){const a=new _n(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(jS),u.toneMapping=Bs,u.autoClear=!1;const f=new Gi({name:"PMREM.Background",side:Cn,depthWrite:!1,depthTest:!1}),m=new xt(new Er,f);let g=!1;const A=e.background;A?A.isColor&&(f.color.copy(A),e.background=null,g=!0):(f.color.copy(jS),g=!0);for(let p=0;p<6;p++){const y=p%3;y===0?(a.up.set(0,l[p],0),a.lookAt(c[p],0,0)):y===1?(a.up.set(0,0,l[p]),a.lookAt(0,c[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,c[p]));const v=this._cubeSize;Wd(s,y*v,p>2?v:0,v,v),u.setRenderTarget(s),g&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=A}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===ma||e.mapping===rc;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=KS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=XS());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new xt(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;Wd(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,tg)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=WS[(s-r-1)%WS.length];this._blur(e,r-1,r,o,a)}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new xt(this._lodPlanes[s],c),d=c.uniforms,f=this._sizeLods[i]-1,m=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*Xo-1),g=r/m,A=isFinite(r)?1+Math.floor(u*g):Xo;A>Xo&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${Xo}`);const p=[];let y=0;for(let M=0;M<Xo;++M){const C=M/g,S=Math.exp(-C*C/2);p.push(S),M===0?y+=S:M<A&&(y+=2*S)}for(let M=0;M<p.length;M++)p[M]=p[M]/y;d.envMap.value=e.texture,d.samples.value=A,d.weights.value=p,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:v}=this;d.dTheta.value=m,d.mipInt.value=v-i;const x=this._sizeLods[s],E=3*x*(s>v-Bl?s-v+Bl:0),w=4*(this._cubeSize-x);Wd(t,E,w,3*x,2*x),l.setRenderTarget(t),l.render(h,tg)}}function a8(n){const e=[],t=[],i=[];let s=n;const r=n-Bl+1+HS.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>n-Bl?l=HS[o-n+Bl-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,m=6,g=3,A=2,p=1,y=new Float32Array(g*m*f),v=new Float32Array(A*m*f),x=new Float32Array(p*m*f);for(let w=0;w<f;w++){const M=w%3*2/3-1,C=w>2?0:-1,S=[M,C,0,M+2/3,C,0,M+2/3,C+1,0,M,C,0,M+2/3,C+1,0,M,C+1,0];y.set(S,g*m*w),v.set(d,A*m*w);const _=[w,w,w,w,w,w];x.set(_,p*m*w)}const E=new ui;E.setAttribute("position",new Ft(y,g)),E.setAttribute("uv",new Ft(v,A)),E.setAttribute("faceIndex",new Ft(x,p)),e.push(E),s>Bl&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function $S(n,e,t){const i=new ji(n,e,t);return i.texture.mapping=Tm,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Wd(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function l8(n,e,t){const i=new Float32Array(Xo),s=new L(0,1,0);return new Si({name:"SphericalGaussianBlur",defines:{n:Xo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:zE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Rs,depthTest:!1,depthWrite:!1})}function XS(){return new Si({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Rs,depthTest:!1,depthWrite:!1})}function KS(){return new Si({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Rs,depthTest:!1,depthWrite:!1})}function zE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function c8(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Dp||l===ev,u=l===ma||l===rc;if(c||u){let h=e.get(a);const d=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new qS(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const f=a.image;return c&&f&&f.height>0||u&&f&&s(f)?(t===null&&(t=new qS(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",r),h.texture):null}}}return a}function s(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function u8(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&ll("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function h8(n,e,t,i){const s={},r=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);d.removeEventListener("dispose",o),delete s[d.id];const f=r.get(d);f&&(e.remove(f),r.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return s[d.id]===!0||(d.addEventListener("dispose",o),s[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const f in d)e.update(d[f],n.ARRAY_BUFFER)}function c(h){const d=[],f=h.index,m=h.attributes.position;let g=0;if(f!==null){const y=f.array;g=f.version;for(let v=0,x=y.length;v<x;v+=3){const E=y[v+0],w=y[v+1],M=y[v+2];d.push(E,w,w,M,M,E)}}else if(m!==void 0){const y=m.array;g=m.version;for(let v=0,x=y.length/3-1;v<x;v+=3){const E=v+0,w=v+1,M=v+2;d.push(E,w,w,M,M,E)}}else return;const A=new(k2(d)?V2:G2)(d,1);A.version=g;const p=r.get(h);p&&e.remove(p),r.set(h,A)}function u(h){const d=r.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return r.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function d8(n,e,t){let i;function s(d){i=d}let r,o;function a(d){r=d.type,o=d.bytesPerElement}function l(d,f){n.drawElements(i,f,r,d*o),t.update(f,i,1)}function c(d,f,m){m!==0&&(n.drawElementsInstanced(i,f,r,d*o,m),t.update(f,i,m))}function u(d,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,r,d,0,m);let A=0;for(let p=0;p<m;p++)A+=f[p];t.update(A,i,1)}function h(d,f,m,g){if(m===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let p=0;p<d.length;p++)c(d[p]/o,f[p],g[p]);else{A.multiDrawElementsInstancedWEBGL(i,f,0,r,d,0,g,0,m);let p=0;for(let y=0;y<m;y++)p+=f[y]*g[y];t.update(p,i,1)}}this.setMode=s,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function f8(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(r/3);break;case n.LINES:t.lines+=a*(r/2);break;case n.LINE_STRIP:t.lines+=a*(r-1);break;case n.LINE_LOOP:t.lines+=a*r;break;case n.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function p8(n,e,t){const i=new WeakMap,s=new ct;function r(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let d=i.get(a);if(d===void 0||d.count!==h){let S=function(){M.dispose(),i.delete(a),a.removeEventListener("dispose",S)};d!==void 0&&d.texture.dispose();const f=a.morphAttributes.position!==void 0,m=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,A=a.morphAttributes.position||[],p=a.morphAttributes.normal||[],y=a.morphAttributes.color||[];let v=0;f===!0&&(v=1),m===!0&&(v=2),g===!0&&(v=3);let x=a.attributes.position.count*v,E=1;x>e.maxTextureSize&&(E=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const w=new Float32Array(x*E*4*h),M=new U2(w,x,E,h);M.type=Kt,M.needsUpdate=!0;const C=v*4;for(let _=0;_<h;_++){const R=A[_],O=p[_],N=y[_],F=x*E*4*_;for(let H=0;H<R.count;H++){const Q=H*C;f===!0&&(s.fromBufferAttribute(R,H),w[F+Q+0]=s.x,w[F+Q+1]=s.y,w[F+Q+2]=s.z,w[F+Q+3]=0),m===!0&&(s.fromBufferAttribute(O,H),w[F+Q+4]=s.x,w[F+Q+5]=s.y,w[F+Q+6]=s.z,w[F+Q+7]=0),g===!0&&(s.fromBufferAttribute(N,H),w[F+Q+8]=s.x,w[F+Q+9]=s.y,w[F+Q+10]=s.z,w[F+Q+11]=N.itemSize===4?s.w:1)}}d={count:h,texture:M,size:new Ve(x,E)},i.set(a,d),a.addEventListener("dispose",S)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let f=0;for(let g=0;g<c.length;g++)f+=c[g];const m=a.morphTargetsRelative?1:1-f;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:r}}function m8(n,e,t,i){let s=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(s.get(h)!==c&&(e.update(h),s.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;s.get(d)!==c&&(d.update(),s.set(d,c))}return h}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:o}}const rD=new Nt,YS=new X2(1,1),oD=new U2,aD=new O2,lD=new j2,JS=[],ZS=[],eC=new Float32Array(16),tC=new Float32Array(9),nC=new Float32Array(4);function Mc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=JS[s];if(r===void 0&&(r=new Float32Array(s),JS[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function un(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function hn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Dm(n,e){let t=ZS[e];t===void 0&&(t=new Int32Array(e),ZS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function A8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function g8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(un(t,e))return;n.uniform2fv(this.addr,e),hn(t,e)}}function y8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(un(t,e))return;n.uniform3fv(this.addr,e),hn(t,e)}}function v8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(un(t,e))return;n.uniform4fv(this.addr,e),hn(t,e)}}function x8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(un(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),hn(t,e)}else{if(un(t,i))return;nC.set(i),n.uniformMatrix2fv(this.addr,!1,nC),hn(t,i)}}function E8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(un(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),hn(t,e)}else{if(un(t,i))return;tC.set(i),n.uniformMatrix3fv(this.addr,!1,tC),hn(t,i)}}function b8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(un(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),hn(t,e)}else{if(un(t,i))return;eC.set(i),n.uniformMatrix4fv(this.addr,!1,eC),hn(t,i)}}function _8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function w8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(un(t,e))return;n.uniform2iv(this.addr,e),hn(t,e)}}function S8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(un(t,e))return;n.uniform3iv(this.addr,e),hn(t,e)}}function C8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(un(t,e))return;n.uniform4iv(this.addr,e),hn(t,e)}}function M8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function I8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(un(t,e))return;n.uniform2uiv(this.addr,e),hn(t,e)}}function T8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(un(t,e))return;n.uniform3uiv(this.addr,e),hn(t,e)}}function R8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(un(t,e))return;n.uniform4uiv(this.addr,e),hn(t,e)}}function B8(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(YS.compareFunction=F2,r=YS):r=rD,t.setTexture2D(e||r,s)}function D8(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||aD,s)}function L8(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||lD,s)}function P8(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||oD,s)}function N8(n){switch(n){case 5126:return A8;case 35664:return g8;case 35665:return y8;case 35666:return v8;case 35674:return x8;case 35675:return E8;case 35676:return b8;case 5124:case 35670:return _8;case 35667:case 35671:return w8;case 35668:case 35672:return S8;case 35669:case 35673:return C8;case 5125:return M8;case 36294:return I8;case 36295:return T8;case 36296:return R8;case 35678:case 36198:case 36298:case 36306:case 35682:return B8;case 35679:case 36299:case 36307:return D8;case 35680:case 36300:case 36308:case 36293:return L8;case 36289:case 36303:case 36311:case 36292:return P8}}function F8(n,e){n.uniform1fv(this.addr,e)}function k8(n,e){const t=Mc(e,this.size,2);n.uniform2fv(this.addr,t)}function U8(n,e){const t=Mc(e,this.size,3);n.uniform3fv(this.addr,t)}function O8(n,e){const t=Mc(e,this.size,4);n.uniform4fv(this.addr,t)}function Q8(n,e){const t=Mc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function G8(n,e){const t=Mc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function V8(n,e){const t=Mc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function z8(n,e){n.uniform1iv(this.addr,e)}function H8(n,e){n.uniform2iv(this.addr,e)}function j8(n,e){n.uniform3iv(this.addr,e)}function W8(n,e){n.uniform4iv(this.addr,e)}function q8(n,e){n.uniform1uiv(this.addr,e)}function $8(n,e){n.uniform2uiv(this.addr,e)}function X8(n,e){n.uniform3uiv(this.addr,e)}function K8(n,e){n.uniform4uiv(this.addr,e)}function Y8(n,e,t){const i=this.cache,s=e.length,r=Dm(t,s);un(i,r)||(n.uniform1iv(this.addr,r),hn(i,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||rD,r[o])}function J8(n,e,t){const i=this.cache,s=e.length,r=Dm(t,s);un(i,r)||(n.uniform1iv(this.addr,r),hn(i,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||aD,r[o])}function Z8(n,e,t){const i=this.cache,s=e.length,r=Dm(t,s);un(i,r)||(n.uniform1iv(this.addr,r),hn(i,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||lD,r[o])}function e9(n,e,t){const i=this.cache,s=e.length,r=Dm(t,s);un(i,r)||(n.uniform1iv(this.addr,r),hn(i,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||oD,r[o])}function t9(n){switch(n){case 5126:return F8;case 35664:return k8;case 35665:return U8;case 35666:return O8;case 35674:return Q8;case 35675:return G8;case 35676:return V8;case 5124:case 35670:return z8;case 35667:case 35671:return H8;case 35668:case 35672:return j8;case 35669:case 35673:return W8;case 5125:return q8;case 36294:return $8;case 36295:return X8;case 36296:return K8;case 35678:case 36198:case 36298:case 36306:case 35682:return Y8;case 35679:case 36299:case 36307:return J8;case 35680:case 36300:case 36308:case 36293:return Z8;case 36289:case 36303:case 36311:case 36292:return e9}}class n9{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=N8(t.type)}}class i9{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=t9(t.type)}}class s9{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const og=/(\w+)(\])?(\[|\.)?/g;function iC(n,e){n.seq.push(e),n.map[e.id]=e}function r9(n,e,t){const i=n.name,s=i.length;for(og.lastIndex=0;;){const r=og.exec(i),o=og.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){iC(t,c===void 0?new n9(a,n,e):new i9(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new s9(a),iC(t,h)),t=h}}}class Hf{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);r9(r,o,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function sC(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const o9=37297;let a9=0;function l9(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const rC=new Ge;function c9(n){Ze._getMatrix(rC,Ze.workingColorSpace,n);const e=`mat3( ${rC.elements.map(t=>t.toFixed(4))} )`;switch(Ze.getTransfer(n)){case Gp:return[e,"LinearTransferOETF"];case vt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function oC(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+l9(n.getShaderSource(e),o)}else return s}function u9(n,e){const t=c9(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function h9(n,e){let t;switch(e){case _2:t="Linear";break;case w2:t="Reinhard";break;case S2:t="Cineon";break;case C2:t="ACESFilmic";break;case M2:t="AgX";break;case bh:t="Neutral";break;case bG:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const qd=new L;function d9(){Ze.getLuminanceCoefficients(qd);const n=qd.x.toFixed(4),e=qd.y.toFixed(4),t=qd.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function f9(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(bu).join(`
`)}function p9(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function m9(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;r.type===n.FLOAT_MAT2&&(a=2),r.type===n.FLOAT_MAT3&&(a=3),r.type===n.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function bu(n){return n!==""}function aC(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function lC(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const A9=/^[ \t]*#include +<([\w\d./]+)>/gm;function Cv(n){return n.replace(A9,y9)}const g9=new Map;function y9(n,e){let t=We[e];if(t===void 0){const i=g9.get(e);if(i!==void 0)t=We[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Cv(t)}const v9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cC(n){return n.replace(v9,x9)}function x9(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function uC(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function E9(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===E2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===tG?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===er&&(e="SHADOWMAP_TYPE_VSM"),e}function b9(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ma:case rc:e="ENVMAP_TYPE_CUBE";break;case Tm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function _9(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case rc:e="ENVMAP_MODE_REFRACTION";break}return e}function w9(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case b2:e="ENVMAP_BLENDING_MULTIPLY";break;case xG:e="ENVMAP_BLENDING_MIX";break;case EG:e="ENVMAP_BLENDING_ADD";break}return e}function S9(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function C9(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=E9(t),c=b9(t),u=_9(t),h=w9(t),d=S9(t),f=f9(t),m=p9(r),g=s.createProgram();let A,p,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(bu).join(`
`),A.length>0&&(A+=`
`),p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(bu).join(`
`),p.length>0&&(p+=`
`)):(A=[uC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(bu).join(`
`),p=[uC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Bs?"#define TONE_MAPPING":"",t.toneMapping!==Bs?We.tonemapping_pars_fragment:"",t.toneMapping!==Bs?h9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",We.colorspace_pars_fragment,u9("linearToOutputTexel",t.outputColorSpace),d9(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(bu).join(`
`)),o=Cv(o),o=aC(o,t),o=lC(o,t),a=Cv(a),a=aC(a,t),a=lC(a,t),o=cC(o),a=cC(a),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,A=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,p=["#define varying in",t.glslVersion===sS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===sS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const v=y+A+o,x=y+p+a,E=sC(s,s.VERTEX_SHADER,v),w=sC(s,s.FRAGMENT_SHADER,x);s.attachShader(g,E),s.attachShader(g,w),t.index0AttributeName!==void 0?s.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(g,0,"position"),s.linkProgram(g);function M(R){if(n.debug.checkShaderErrors){const O=s.getProgramInfoLog(g).trim(),N=s.getShaderInfoLog(E).trim(),F=s.getShaderInfoLog(w).trim();let H=!0,Q=!0;if(s.getProgramParameter(g,s.LINK_STATUS)===!1)if(H=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,g,E,w);else{const z=oC(s,E,"vertex"),D=oC(s,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(g,s.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+O+`
`+z+`
`+D)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(N===""||F==="")&&(Q=!1);Q&&(R.diagnostics={runnable:H,programLog:O,vertexShader:{log:N,prefix:A},fragmentShader:{log:F,prefix:p}})}s.deleteShader(E),s.deleteShader(w),C=new Hf(s,g),S=m9(s,g)}let C;this.getUniforms=function(){return C===void 0&&M(this),C};let S;this.getAttributes=function(){return S===void 0&&M(this),S};let _=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return _===!1&&(_=s.getProgramParameter(g,o9)),_},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=a9++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=E,this.fragmentShader=w,this}let M9=0;class I9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new T9(e),t.set(e,i)),i}}class T9{constructor(e){this.id=M9++,this.code=e,this.usedTimes=0}}function R9(n,e,t,i,s,r,o){const a=new PE,l=new I9,c=new Set,u=[],h=s.logarithmicDepthBuffer,d=s.vertexTextures;let f=s.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(S){return c.add(S),S===0?"uv":`uv${S}`}function A(S,_,R,O,N){const F=O.fog,H=N.geometry,Q=S.isMeshStandardMaterial?O.environment:null,z=(S.isMeshStandardMaterial?t:e).get(S.envMap||Q),D=z&&z.mapping===Tm?z.image.height:null,j=m[S.type];S.precision!==null&&(f=s.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));const K=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,te=K!==void 0?K.length:0;let ae=0;H.morphAttributes.position!==void 0&&(ae=1),H.morphAttributes.normal!==void 0&&(ae=2),H.morphAttributes.color!==void 0&&(ae=3);let we,X,ne,he;if(j){const pt=xs[j];we=pt.vertexShader,X=pt.fragmentShader}else we=S.vertexShader,X=S.fragmentShader,l.update(S),ne=l.getVertexShaderID(S),he=l.getFragmentShaderID(S);const ce=n.getRenderTarget(),Te=n.state.buffers.depth.getReversed(),ke=N.isInstancedMesh===!0,He=N.isBatchedMesh===!0,_t=!!S.map,Je=!!S.matcap,It=!!z,P=!!S.aoMap,Ii=!!S.lightMap,tt=!!S.bumpMap,nt=!!S.normalMap,Me=!!S.displacementMap,Tt=!!S.emissiveMap,Ce=!!S.metalnessMap,B=!!S.roughnessMap,I=S.anisotropy>0,W=S.clearcoat>0,Z=S.dispersion>0,ie=S.iridescence>0,J=S.sheen>0,Se=S.transmission>0,pe=I&&!!S.anisotropyMap,ve=W&&!!S.clearcoatMap,rt=W&&!!S.clearcoatNormalMap,le=W&&!!S.clearcoatRoughnessMap,Ee=ie&&!!S.iridescenceMap,Pe=ie&&!!S.iridescenceThicknessMap,Ue=J&&!!S.sheenColorMap,be=J&&!!S.sheenRoughnessMap,it=!!S.specularMap,je=!!S.specularColorMap,wt=!!S.specularIntensityMap,k=Se&&!!S.transmissionMap,de=Se&&!!S.thicknessMap,Y=!!S.gradientMap,ee=!!S.alphaMap,Ae=S.alphaTest>0,me=!!S.alphaHash,ze=!!S.extensions;let jt=Bs;S.toneMapped&&(ce===null||ce.isXRRenderTarget===!0)&&(jt=n.toneMapping);const In={shaderID:j,shaderType:S.type,shaderName:S.name,vertexShader:we,fragmentShader:X,defines:S.defines,customVertexShaderID:ne,customFragmentShaderID:he,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,batching:He,batchingColor:He&&N._colorsTexture!==null,instancing:ke,instancingColor:ke&&N.instanceColor!==null,instancingMorph:ke&&N.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:ce===null?n.outputColorSpace:ce.isXRRenderTarget===!0?ce.texture.colorSpace:Mt,alphaToCoverage:!!S.alphaToCoverage,map:_t,matcap:Je,envMap:It,envMapMode:It&&z.mapping,envMapCubeUVHeight:D,aoMap:P,lightMap:Ii,bumpMap:tt,normalMap:nt,displacementMap:d&&Me,emissiveMap:Tt,normalMapObjectSpace:nt&&S.normalMapType===IG,normalMapTangentSpace:nt&&S.normalMapType===N2,metalnessMap:Ce,roughnessMap:B,anisotropy:I,anisotropyMap:pe,clearcoat:W,clearcoatMap:ve,clearcoatNormalMap:rt,clearcoatRoughnessMap:le,dispersion:Z,iridescence:ie,iridescenceMap:Ee,iridescenceThicknessMap:Pe,sheen:J,sheenColorMap:Ue,sheenRoughnessMap:be,specularMap:it,specularColorMap:je,specularIntensityMap:wt,transmission:Se,transmissionMap:k,thicknessMap:de,gradientMap:Y,opaque:S.transparent===!1&&S.blending===Gl&&S.alphaToCoverage===!1,alphaMap:ee,alphaTest:Ae,alphaHash:me,combine:S.combine,mapUv:_t&&g(S.map.channel),aoMapUv:P&&g(S.aoMap.channel),lightMapUv:Ii&&g(S.lightMap.channel),bumpMapUv:tt&&g(S.bumpMap.channel),normalMapUv:nt&&g(S.normalMap.channel),displacementMapUv:Me&&g(S.displacementMap.channel),emissiveMapUv:Tt&&g(S.emissiveMap.channel),metalnessMapUv:Ce&&g(S.metalnessMap.channel),roughnessMapUv:B&&g(S.roughnessMap.channel),anisotropyMapUv:pe&&g(S.anisotropyMap.channel),clearcoatMapUv:ve&&g(S.clearcoatMap.channel),clearcoatNormalMapUv:rt&&g(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:le&&g(S.clearcoatRoughnessMap.channel),iridescenceMapUv:Ee&&g(S.iridescenceMap.channel),iridescenceThicknessMapUv:Pe&&g(S.iridescenceThicknessMap.channel),sheenColorMapUv:Ue&&g(S.sheenColorMap.channel),sheenRoughnessMapUv:be&&g(S.sheenRoughnessMap.channel),specularMapUv:it&&g(S.specularMap.channel),specularColorMapUv:je&&g(S.specularColorMap.channel),specularIntensityMapUv:wt&&g(S.specularIntensityMap.channel),transmissionMapUv:k&&g(S.transmissionMap.channel),thicknessMapUv:de&&g(S.thicknessMap.channel),alphaMapUv:ee&&g(S.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(nt||I),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,pointsUvs:N.isPoints===!0&&!!H.attributes.uv&&(_t||ee),fog:!!F,useFog:S.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:Te,skinning:N.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:ae,numDirLights:_.directional.length,numPointLights:_.point.length,numSpotLights:_.spot.length,numSpotLightMaps:_.spotLightMap.length,numRectAreaLights:_.rectArea.length,numHemiLights:_.hemi.length,numDirLightShadows:_.directionalShadowMap.length,numPointLightShadows:_.pointShadowMap.length,numSpotLightShadows:_.spotShadowMap.length,numSpotLightShadowsWithMaps:_.numSpotLightShadowsWithMaps,numLightProbes:_.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:jt,decodeVideoTexture:_t&&S.map.isVideoTexture===!0&&Ze.getTransfer(S.map.colorSpace)===vt,decodeVideoTextureEmissive:Tt&&S.emissiveMap.isVideoTexture===!0&&Ze.getTransfer(S.emissiveMap.colorSpace)===vt,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===gn,flipSided:S.side===Cn,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:ze&&S.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ze&&S.extensions.multiDraw===!0||He)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return In.vertexUv1s=c.has(1),In.vertexUv2s=c.has(2),In.vertexUv3s=c.has(3),c.clear(),In}function p(S){const _=[];if(S.shaderID?_.push(S.shaderID):(_.push(S.customVertexShaderID),_.push(S.customFragmentShaderID)),S.defines!==void 0)for(const R in S.defines)_.push(R),_.push(S.defines[R]);return S.isRawShaderMaterial===!1&&(y(_,S),v(_,S),_.push(n.outputColorSpace)),_.push(S.customProgramCacheKey),_.join()}function y(S,_){S.push(_.precision),S.push(_.outputColorSpace),S.push(_.envMapMode),S.push(_.envMapCubeUVHeight),S.push(_.mapUv),S.push(_.alphaMapUv),S.push(_.lightMapUv),S.push(_.aoMapUv),S.push(_.bumpMapUv),S.push(_.normalMapUv),S.push(_.displacementMapUv),S.push(_.emissiveMapUv),S.push(_.metalnessMapUv),S.push(_.roughnessMapUv),S.push(_.anisotropyMapUv),S.push(_.clearcoatMapUv),S.push(_.clearcoatNormalMapUv),S.push(_.clearcoatRoughnessMapUv),S.push(_.iridescenceMapUv),S.push(_.iridescenceThicknessMapUv),S.push(_.sheenColorMapUv),S.push(_.sheenRoughnessMapUv),S.push(_.specularMapUv),S.push(_.specularColorMapUv),S.push(_.specularIntensityMapUv),S.push(_.transmissionMapUv),S.push(_.thicknessMapUv),S.push(_.combine),S.push(_.fogExp2),S.push(_.sizeAttenuation),S.push(_.morphTargetsCount),S.push(_.morphAttributeCount),S.push(_.numDirLights),S.push(_.numPointLights),S.push(_.numSpotLights),S.push(_.numSpotLightMaps),S.push(_.numHemiLights),S.push(_.numRectAreaLights),S.push(_.numDirLightShadows),S.push(_.numPointLightShadows),S.push(_.numSpotLightShadows),S.push(_.numSpotLightShadowsWithMaps),S.push(_.numLightProbes),S.push(_.shadowMapType),S.push(_.toneMapping),S.push(_.numClippingPlanes),S.push(_.numClipIntersection),S.push(_.depthPacking)}function v(S,_){a.disableAll(),_.supportsVertexTextures&&a.enable(0),_.instancing&&a.enable(1),_.instancingColor&&a.enable(2),_.instancingMorph&&a.enable(3),_.matcap&&a.enable(4),_.envMap&&a.enable(5),_.normalMapObjectSpace&&a.enable(6),_.normalMapTangentSpace&&a.enable(7),_.clearcoat&&a.enable(8),_.iridescence&&a.enable(9),_.alphaTest&&a.enable(10),_.vertexColors&&a.enable(11),_.vertexAlphas&&a.enable(12),_.vertexUv1s&&a.enable(13),_.vertexUv2s&&a.enable(14),_.vertexUv3s&&a.enable(15),_.vertexTangents&&a.enable(16),_.anisotropy&&a.enable(17),_.alphaHash&&a.enable(18),_.batching&&a.enable(19),_.dispersion&&a.enable(20),_.batchingColor&&a.enable(21),S.push(a.mask),a.disableAll(),_.fog&&a.enable(0),_.useFog&&a.enable(1),_.flatShading&&a.enable(2),_.logarithmicDepthBuffer&&a.enable(3),_.reverseDepthBuffer&&a.enable(4),_.skinning&&a.enable(5),_.morphTargets&&a.enable(6),_.morphNormals&&a.enable(7),_.morphColors&&a.enable(8),_.premultipliedAlpha&&a.enable(9),_.shadowMapEnabled&&a.enable(10),_.doubleSided&&a.enable(11),_.flipSided&&a.enable(12),_.useDepthPacking&&a.enable(13),_.dithering&&a.enable(14),_.transmission&&a.enable(15),_.sheen&&a.enable(16),_.opaque&&a.enable(17),_.pointsUvs&&a.enable(18),_.decodeVideoTexture&&a.enable(19),_.decodeVideoTextureEmissive&&a.enable(20),_.alphaToCoverage&&a.enable(21),S.push(a.mask)}function x(S){const _=m[S.type];let R;if(_){const O=xs[_];R=EV.clone(O.uniforms)}else R=S.uniforms;return R}function E(S,_){let R;for(let O=0,N=u.length;O<N;O++){const F=u[O];if(F.cacheKey===_){R=F,++R.usedTimes;break}}return R===void 0&&(R=new C9(n,_,S,r),u.push(R)),R}function w(S){if(--S.usedTimes===0){const _=u.indexOf(S);u[_]=u[u.length-1],u.pop(),S.destroy()}}function M(S){l.remove(S)}function C(){l.dispose()}return{getParameters:A,getProgramCacheKey:p,getUniforms:x,acquireProgram:E,releaseProgram:w,releaseShaderCache:M,programs:u,dispose:C}}function B9(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function s(o,a,l){n.get(o)[a]=l}function r(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:r}}function D9(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function hC(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function dC(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function o(h,d,f,m,g,A){let p=n[e];return p===void 0?(p={id:h.id,object:h,geometry:d,material:f,groupOrder:m,renderOrder:h.renderOrder,z:g,group:A},n[e]=p):(p.id=h.id,p.object=h,p.geometry=d,p.material=f,p.groupOrder=m,p.renderOrder=h.renderOrder,p.z=g,p.group=A),e++,p}function a(h,d,f,m,g,A){const p=o(h,d,f,m,g,A);f.transmission>0?i.push(p):f.transparent===!0?s.push(p):t.push(p)}function l(h,d,f,m,g,A){const p=o(h,d,f,m,g,A);f.transmission>0?i.unshift(p):f.transparent===!0?s.unshift(p):t.unshift(p)}function c(h,d){t.length>1&&t.sort(h||D9),i.length>1&&i.sort(d||hC),s.length>1&&s.sort(d||hC)}function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:a,unshift:l,finish:u,sort:c}}function L9(){let n=new WeakMap;function e(i,s){const r=n.get(i);let o;return r===void 0?(o=new dC,n.set(i,[o])):s>=r.length?(o=new dC,r.push(o)):o=r[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function P9(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new L,color:new Ie};break;case"SpotLight":t={position:new L,direction:new L,color:new Ie,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new L,color:new Ie,distance:0,decay:0};break;case"HemisphereLight":t={direction:new L,skyColor:new Ie,groundColor:new Ie};break;case"RectAreaLight":t={color:new Ie,position:new L,halfWidth:new L,halfHeight:new L};break}return n[e.id]=t,t}}}function N9(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let F9=0;function k9(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function U9(n){const e=new P9,t=N9(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new L);const s=new L,r=new Fe,o=new Fe;function a(c){let u=0,h=0,d=0;for(let S=0;S<9;S++)i.probe[S].set(0,0,0);let f=0,m=0,g=0,A=0,p=0,y=0,v=0,x=0,E=0,w=0,M=0;c.sort(k9);for(let S=0,_=c.length;S<_;S++){const R=c[S],O=R.color,N=R.intensity,F=R.distance,H=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)u+=O.r*N,h+=O.g*N,d+=O.b*N;else if(R.isLightProbe){for(let Q=0;Q<9;Q++)i.probe[Q].addScaledVector(R.sh.coefficients[Q],N);M++}else if(R.isDirectionalLight){const Q=e.get(R);if(Q.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const z=R.shadow,D=t.get(R);D.shadowIntensity=z.intensity,D.shadowBias=z.bias,D.shadowNormalBias=z.normalBias,D.shadowRadius=z.radius,D.shadowMapSize=z.mapSize,i.directionalShadow[f]=D,i.directionalShadowMap[f]=H,i.directionalShadowMatrix[f]=R.shadow.matrix,y++}i.directional[f]=Q,f++}else if(R.isSpotLight){const Q=e.get(R);Q.position.setFromMatrixPosition(R.matrixWorld),Q.color.copy(O).multiplyScalar(N),Q.distance=F,Q.coneCos=Math.cos(R.angle),Q.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),Q.decay=R.decay,i.spot[g]=Q;const z=R.shadow;if(R.map&&(i.spotLightMap[E]=R.map,E++,z.updateMatrices(R),R.castShadow&&w++),i.spotLightMatrix[g]=z.matrix,R.castShadow){const D=t.get(R);D.shadowIntensity=z.intensity,D.shadowBias=z.bias,D.shadowNormalBias=z.normalBias,D.shadowRadius=z.radius,D.shadowMapSize=z.mapSize,i.spotShadow[g]=D,i.spotShadowMap[g]=H,x++}g++}else if(R.isRectAreaLight){const Q=e.get(R);Q.color.copy(O).multiplyScalar(N),Q.halfWidth.set(R.width*.5,0,0),Q.halfHeight.set(0,R.height*.5,0),i.rectArea[A]=Q,A++}else if(R.isPointLight){const Q=e.get(R);if(Q.color.copy(R.color).multiplyScalar(R.intensity),Q.distance=R.distance,Q.decay=R.decay,R.castShadow){const z=R.shadow,D=t.get(R);D.shadowIntensity=z.intensity,D.shadowBias=z.bias,D.shadowNormalBias=z.normalBias,D.shadowRadius=z.radius,D.shadowMapSize=z.mapSize,D.shadowCameraNear=z.camera.near,D.shadowCameraFar=z.camera.far,i.pointShadow[m]=D,i.pointShadowMap[m]=H,i.pointShadowMatrix[m]=R.shadow.matrix,v++}i.point[m]=Q,m++}else if(R.isHemisphereLight){const Q=e.get(R);Q.skyColor.copy(R.color).multiplyScalar(N),Q.groundColor.copy(R.groundColor).multiplyScalar(N),i.hemi[p]=Q,p++}}A>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ue.LTC_FLOAT_1,i.rectAreaLTC2=ue.LTC_FLOAT_2):(i.rectAreaLTC1=ue.LTC_HALF_1,i.rectAreaLTC2=ue.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=h,i.ambient[2]=d;const C=i.hash;(C.directionalLength!==f||C.pointLength!==m||C.spotLength!==g||C.rectAreaLength!==A||C.hemiLength!==p||C.numDirectionalShadows!==y||C.numPointShadows!==v||C.numSpotShadows!==x||C.numSpotMaps!==E||C.numLightProbes!==M)&&(i.directional.length=f,i.spot.length=g,i.rectArea.length=A,i.point.length=m,i.hemi.length=p,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=v,i.spotLightMatrix.length=x+E-w,i.spotLightMap.length=E,i.numSpotLightShadowsWithMaps=w,i.numLightProbes=M,C.directionalLength=f,C.pointLength=m,C.spotLength=g,C.rectAreaLength=A,C.hemiLength=p,C.numDirectionalShadows=y,C.numPointShadows=v,C.numSpotShadows=x,C.numSpotMaps=E,C.numLightProbes=M,i.version=F9++)}function l(c,u){let h=0,d=0,f=0,m=0,g=0;const A=u.matrixWorldInverse;for(let p=0,y=c.length;p<y;p++){const v=c[p];if(v.isDirectionalLight){const x=i.directional[h];x.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(A),h++}else if(v.isSpotLight){const x=i.spot[f];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(A),x.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(A),f++}else if(v.isRectAreaLight){const x=i.rectArea[m];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(A),o.identity(),r.copy(v.matrixWorld),r.premultiply(A),o.extractRotation(r),x.halfWidth.set(v.width*.5,0,0),x.halfHeight.set(0,v.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),m++}else if(v.isPointLight){const x=i.point[d];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(A),d++}else if(v.isHemisphereLight){const x=i.hemi[g];x.direction.setFromMatrixPosition(v.matrixWorld),x.direction.transformDirection(A),g++}}}return{setup:a,setupView:l,state:i}}function fC(n){const e=new U9(n),t=[],i=[];function s(u){c.camera=u,t.length=0,i.length=0}function r(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:a,setupLightsView:l,pushLight:r,pushShadow:o}}function O9(n){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let a;return o===void 0?(a=new fC(n),e.set(s,[a])):r>=o.length?(a=new fC(n),o.push(a)):a=o[r],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const Q9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,G9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function V9(n,e,t){let i=new UE;const s=new Ve,r=new Ve,o=new ct,a=new K2({depthPacking:MG}),l=new OV,c={},u=t.maxTextureSize,h={[fs]:Cn,[Cn]:fs,[gn]:gn},d=new Si({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:Q9,fragmentShader:G9}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const m=new ui;m.setAttribute("position",new Ft(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new xt(m,d),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=E2;let p=this.type;this.render=function(w,M,C){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||w.length===0)return;const S=n.getRenderTarget(),_=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),O=n.state;O.setBlending(Rs),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const N=p!==er&&this.type===er,F=p===er&&this.type!==er;for(let H=0,Q=w.length;H<Q;H++){const z=w[H],D=z.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;s.copy(D.mapSize);const j=D.getFrameExtents();if(s.multiply(j),r.copy(D.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/j.x),s.x=r.x*j.x,D.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/j.y),s.y=r.y*j.y,D.mapSize.y=r.y)),D.map===null||N===!0||F===!0){const te=this.type!==er?{minFilter:an,magFilter:an}:{};D.map!==null&&D.map.dispose(),D.map=new ji(s.x,s.y,te),D.map.texture.name=z.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const K=D.getViewportCount();for(let te=0;te<K;te++){const ae=D.getViewport(te);o.set(r.x*ae.x,r.y*ae.y,r.x*ae.z,r.y*ae.w),O.viewport(o),D.updateMatrices(z,te),i=D.getFrustum(),x(M,C,D.camera,z,this.type)}D.isPointLightShadow!==!0&&this.type===er&&y(D,C),D.needsUpdate=!1}p=this.type,A.needsUpdate=!1,n.setRenderTarget(S,_,R)};function y(w,M){const C=e.update(g);d.defines.VSM_SAMPLES!==w.blurSamples&&(d.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new ji(s.x,s.y)),d.uniforms.shadow_pass.value=w.map.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(M,null,C,d,g,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(M,null,C,f,g,null)}function v(w,M,C,S){let _=null;const R=C.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(R!==void 0)_=R;else if(_=C.isPointLight===!0?l:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const O=_.uuid,N=M.uuid;let F=c[O];F===void 0&&(F={},c[O]=F);let H=F[N];H===void 0&&(H=_.clone(),F[N]=H,M.addEventListener("dispose",E)),_=H}if(_.visible=M.visible,_.wireframe=M.wireframe,S===er?_.side=M.shadowSide!==null?M.shadowSide:M.side:_.side=M.shadowSide!==null?M.shadowSide:h[M.side],_.alphaMap=M.alphaMap,_.alphaTest=M.alphaTest,_.map=M.map,_.clipShadows=M.clipShadows,_.clippingPlanes=M.clippingPlanes,_.clipIntersection=M.clipIntersection,_.displacementMap=M.displacementMap,_.displacementScale=M.displacementScale,_.displacementBias=M.displacementBias,_.wireframeLinewidth=M.wireframeLinewidth,_.linewidth=M.linewidth,C.isPointLight===!0&&_.isMeshDistanceMaterial===!0){const O=n.properties.get(_);O.light=C}return _}function x(w,M,C,S,_){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&_===er)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,w.matrixWorld);const N=e.update(w),F=w.material;if(Array.isArray(F)){const H=N.groups;for(let Q=0,z=H.length;Q<z;Q++){const D=H[Q],j=F[D.materialIndex];if(j&&j.visible){const K=v(w,j,S,_);w.onBeforeShadow(n,w,M,C,N,K,D),n.renderBufferDirect(C,null,N,K,w,D),w.onAfterShadow(n,w,M,C,N,K,D)}}}else if(F.visible){const H=v(w,F,S,_);w.onBeforeShadow(n,w,M,C,N,H,null),n.renderBufferDirect(C,null,N,H,w,null),w.onAfterShadow(n,w,M,C,N,H,null)}}const O=w.children;for(let N=0,F=O.length;N<F;N++)x(O[N],M,C,S,_)}function E(w){w.target.removeEventListener("dispose",E);for(const C in c){const S=c[C],_=w.target.uuid;_ in S&&(S[_].dispose(),delete S[_])}}}const z9={[qy]:$y,[Xy]:Jy,[Ky]:Zy,[ic]:Yy,[$y]:qy,[Jy]:Xy,[Zy]:Ky,[Yy]:ic};function H9(n,e){function t(){let k=!1;const de=new ct;let Y=null;const ee=new ct(0,0,0,0);return{setMask:function(Ae){Y!==Ae&&!k&&(n.colorMask(Ae,Ae,Ae,Ae),Y=Ae)},setLocked:function(Ae){k=Ae},setClear:function(Ae,me,ze,jt,In){In===!0&&(Ae*=jt,me*=jt,ze*=jt),de.set(Ae,me,ze,jt),ee.equals(de)===!1&&(n.clearColor(Ae,me,ze,jt),ee.copy(de))},reset:function(){k=!1,Y=null,ee.set(-1,0,0,0)}}}function i(){let k=!1,de=!1,Y=null,ee=null,Ae=null;return{setReversed:function(me){if(de!==me){const ze=e.get("EXT_clip_control");de?ze.clipControlEXT(ze.LOWER_LEFT_EXT,ze.ZERO_TO_ONE_EXT):ze.clipControlEXT(ze.LOWER_LEFT_EXT,ze.NEGATIVE_ONE_TO_ONE_EXT);const jt=Ae;Ae=null,this.setClear(jt)}de=me},getReversed:function(){return de},setTest:function(me){me?ce(n.DEPTH_TEST):Te(n.DEPTH_TEST)},setMask:function(me){Y!==me&&!k&&(n.depthMask(me),Y=me)},setFunc:function(me){if(de&&(me=z9[me]),ee!==me){switch(me){case qy:n.depthFunc(n.NEVER);break;case $y:n.depthFunc(n.ALWAYS);break;case Xy:n.depthFunc(n.LESS);break;case ic:n.depthFunc(n.LEQUAL);break;case Ky:n.depthFunc(n.EQUAL);break;case Yy:n.depthFunc(n.GEQUAL);break;case Jy:n.depthFunc(n.GREATER);break;case Zy:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ee=me}},setLocked:function(me){k=me},setClear:function(me){Ae!==me&&(de&&(me=1-me),n.clearDepth(me),Ae=me)},reset:function(){k=!1,Y=null,ee=null,Ae=null,de=!1}}}function s(){let k=!1,de=null,Y=null,ee=null,Ae=null,me=null,ze=null,jt=null,In=null;return{setTest:function(pt){k||(pt?ce(n.STENCIL_TEST):Te(n.STENCIL_TEST))},setMask:function(pt){de!==pt&&!k&&(n.stencilMask(pt),de=pt)},setFunc:function(pt,$i,Qs){(Y!==pt||ee!==$i||Ae!==Qs)&&(n.stencilFunc(pt,$i,Qs),Y=pt,ee=$i,Ae=Qs)},setOp:function(pt,$i,Qs){(me!==pt||ze!==$i||jt!==Qs)&&(n.stencilOp(pt,$i,Qs),me=pt,ze=$i,jt=Qs)},setLocked:function(pt){k=pt},setClear:function(pt){In!==pt&&(n.clearStencil(pt),In=pt)},reset:function(){k=!1,de=null,Y=null,ee=null,Ae=null,me=null,ze=null,jt=null,In=null}}}const r=new t,o=new i,a=new s,l=new WeakMap,c=new WeakMap;let u={},h={},d=new WeakMap,f=[],m=null,g=!1,A=null,p=null,y=null,v=null,x=null,E=null,w=null,M=new Ie(0,0,0),C=0,S=!1,_=null,R=null,O=null,N=null,F=null;const H=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,z=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(D)[1]),Q=z>=1):D.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),Q=z>=2);let j=null,K={};const te=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),we=new ct().fromArray(te),X=new ct().fromArray(ae);function ne(k,de,Y,ee){const Ae=new Uint8Array(4),me=n.createTexture();n.bindTexture(k,me),n.texParameteri(k,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(k,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ze=0;ze<Y;ze++)k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY?n.texImage3D(de,0,n.RGBA,1,1,ee,0,n.RGBA,n.UNSIGNED_BYTE,Ae):n.texImage2D(de+ze,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ae);return me}const he={};he[n.TEXTURE_2D]=ne(n.TEXTURE_2D,n.TEXTURE_2D,1),he[n.TEXTURE_CUBE_MAP]=ne(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[n.TEXTURE_2D_ARRAY]=ne(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),he[n.TEXTURE_3D]=ne(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ce(n.DEPTH_TEST),o.setFunc(ic),tt(!1),nt(Yw),ce(n.CULL_FACE),P(Rs);function ce(k){u[k]!==!0&&(n.enable(k),u[k]=!0)}function Te(k){u[k]!==!1&&(n.disable(k),u[k]=!1)}function ke(k,de){return h[k]!==de?(n.bindFramebuffer(k,de),h[k]=de,k===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=de),k===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=de),!0):!1}function He(k,de){let Y=f,ee=!1;if(k){Y=d.get(de),Y===void 0&&(Y=[],d.set(de,Y));const Ae=k.textures;if(Y.length!==Ae.length||Y[0]!==n.COLOR_ATTACHMENT0){for(let me=0,ze=Ae.length;me<ze;me++)Y[me]=n.COLOR_ATTACHMENT0+me;Y.length=Ae.length,ee=!0}}else Y[0]!==n.BACK&&(Y[0]=n.BACK,ee=!0);ee&&n.drawBuffers(Y)}function _t(k){return m!==k?(n.useProgram(k),m=k,!0):!1}const Je={[$o]:n.FUNC_ADD,[iG]:n.FUNC_SUBTRACT,[sG]:n.FUNC_REVERSE_SUBTRACT};Je[rG]=n.MIN,Je[oG]=n.MAX;const It={[aG]:n.ZERO,[lG]:n.ONE,[cG]:n.SRC_COLOR,[jy]:n.SRC_ALPHA,[mG]:n.SRC_ALPHA_SATURATE,[fG]:n.DST_COLOR,[hG]:n.DST_ALPHA,[uG]:n.ONE_MINUS_SRC_COLOR,[Wy]:n.ONE_MINUS_SRC_ALPHA,[pG]:n.ONE_MINUS_DST_COLOR,[dG]:n.ONE_MINUS_DST_ALPHA,[AG]:n.CONSTANT_COLOR,[gG]:n.ONE_MINUS_CONSTANT_COLOR,[yG]:n.CONSTANT_ALPHA,[vG]:n.ONE_MINUS_CONSTANT_ALPHA};function P(k,de,Y,ee,Ae,me,ze,jt,In,pt){if(k===Rs){g===!0&&(Te(n.BLEND),g=!1);return}if(g===!1&&(ce(n.BLEND),g=!0),k!==nG){if(k!==A||pt!==S){if((p!==$o||x!==$o)&&(n.blendEquation(n.FUNC_ADD),p=$o,x=$o),pt)switch(k){case Gl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Jw:n.blendFunc(n.ONE,n.ONE);break;case Zw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case eS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}else switch(k){case Gl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Jw:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Zw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case eS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}y=null,v=null,E=null,w=null,M.set(0,0,0),C=0,A=k,S=pt}return}Ae=Ae||de,me=me||Y,ze=ze||ee,(de!==p||Ae!==x)&&(n.blendEquationSeparate(Je[de],Je[Ae]),p=de,x=Ae),(Y!==y||ee!==v||me!==E||ze!==w)&&(n.blendFuncSeparate(It[Y],It[ee],It[me],It[ze]),y=Y,v=ee,E=me,w=ze),(jt.equals(M)===!1||In!==C)&&(n.blendColor(jt.r,jt.g,jt.b,In),M.copy(jt),C=In),A=k,S=!1}function Ii(k,de){k.side===gn?Te(n.CULL_FACE):ce(n.CULL_FACE);let Y=k.side===Cn;de&&(Y=!Y),tt(Y),k.blending===Gl&&k.transparent===!1?P(Rs):P(k.blending,k.blendEquation,k.blendSrc,k.blendDst,k.blendEquationAlpha,k.blendSrcAlpha,k.blendDstAlpha,k.blendColor,k.blendAlpha,k.premultipliedAlpha),o.setFunc(k.depthFunc),o.setTest(k.depthTest),o.setMask(k.depthWrite),r.setMask(k.colorWrite);const ee=k.stencilWrite;a.setTest(ee),ee&&(a.setMask(k.stencilWriteMask),a.setFunc(k.stencilFunc,k.stencilRef,k.stencilFuncMask),a.setOp(k.stencilFail,k.stencilZFail,k.stencilZPass)),Tt(k.polygonOffset,k.polygonOffsetFactor,k.polygonOffsetUnits),k.alphaToCoverage===!0?ce(n.SAMPLE_ALPHA_TO_COVERAGE):Te(n.SAMPLE_ALPHA_TO_COVERAGE)}function tt(k){_!==k&&(k?n.frontFace(n.CW):n.frontFace(n.CCW),_=k)}function nt(k){k!==Z4?(ce(n.CULL_FACE),k!==R&&(k===Yw?n.cullFace(n.BACK):k===eG?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Te(n.CULL_FACE),R=k}function Me(k){k!==O&&(Q&&n.lineWidth(k),O=k)}function Tt(k,de,Y){k?(ce(n.POLYGON_OFFSET_FILL),(N!==de||F!==Y)&&(n.polygonOffset(de,Y),N=de,F=Y)):Te(n.POLYGON_OFFSET_FILL)}function Ce(k){k?ce(n.SCISSOR_TEST):Te(n.SCISSOR_TEST)}function B(k){k===void 0&&(k=n.TEXTURE0+H-1),j!==k&&(n.activeTexture(k),j=k)}function I(k,de,Y){Y===void 0&&(j===null?Y=n.TEXTURE0+H-1:Y=j);let ee=K[Y];ee===void 0&&(ee={type:void 0,texture:void 0},K[Y]=ee),(ee.type!==k||ee.texture!==de)&&(j!==Y&&(n.activeTexture(Y),j=Y),n.bindTexture(k,de||he[k]),ee.type=k,ee.texture=de)}function W(){const k=K[j];k!==void 0&&k.type!==void 0&&(n.bindTexture(k.type,null),k.type=void 0,k.texture=void 0)}function Z(){try{n.compressedTexImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ie(){try{n.compressedTexImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function J(){try{n.texSubImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Se(){try{n.texSubImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function pe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ve(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function rt(){try{n.texStorage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function le(){try{n.texStorage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Ee(){try{n.texImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Pe(){try{n.texImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Ue(k){we.equals(k)===!1&&(n.scissor(k.x,k.y,k.z,k.w),we.copy(k))}function be(k){X.equals(k)===!1&&(n.viewport(k.x,k.y,k.z,k.w),X.copy(k))}function it(k,de){let Y=c.get(de);Y===void 0&&(Y=new WeakMap,c.set(de,Y));let ee=Y.get(k);ee===void 0&&(ee=n.getUniformBlockIndex(de,k.name),Y.set(k,ee))}function je(k,de){const ee=c.get(de).get(k);l.get(de)!==ee&&(n.uniformBlockBinding(de,ee,k.__bindingPointIndex),l.set(de,ee))}function wt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},j=null,K={},h={},d=new WeakMap,f=[],m=null,g=!1,A=null,p=null,y=null,v=null,x=null,E=null,w=null,M=new Ie(0,0,0),C=0,S=!1,_=null,R=null,O=null,N=null,F=null,we.set(0,0,n.canvas.width,n.canvas.height),X.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),a.reset()}return{buffers:{color:r,depth:o,stencil:a},enable:ce,disable:Te,bindFramebuffer:ke,drawBuffers:He,useProgram:_t,setBlending:P,setMaterial:Ii,setFlipSided:tt,setCullFace:nt,setLineWidth:Me,setPolygonOffset:Tt,setScissorTest:Ce,activeTexture:B,bindTexture:I,unbindTexture:W,compressedTexImage2D:Z,compressedTexImage3D:ie,texImage2D:Ee,texImage3D:Pe,updateUBOMapping:it,uniformBlockBinding:je,texStorage2D:rt,texStorage3D:le,texSubImage2D:J,texSubImage3D:Se,compressedTexSubImage2D:pe,compressedTexSubImage3D:ve,scissor:Ue,viewport:be,reset:wt}}function j9(n,e,t,i,s,r,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ve,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(B,I){return f?new OffscreenCanvas(B,I):Mh("canvas")}function g(B,I,W){let Z=1;const ie=Ce(B);if((ie.width>W||ie.height>W)&&(Z=W/Math.max(ie.width,ie.height)),Z<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const J=Math.floor(Z*ie.width),Se=Math.floor(Z*ie.height);h===void 0&&(h=m(J,Se));const pe=I?m(J,Se):h;return pe.width=J,pe.height=Se,pe.getContext("2d").drawImage(B,0,0,J,Se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+J+"x"+Se+")."),pe}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),B;return B}function A(B){return B.generateMipmaps}function p(B){n.generateMipmap(B)}function y(B){return B.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:B.isWebGL3DRenderTarget?n.TEXTURE_3D:B.isWebGLArrayRenderTarget||B.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function v(B,I,W,Z,ie=!1){if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let J=I;if(I===n.RED&&(W===n.FLOAT&&(J=n.R32F),W===n.HALF_FLOAT&&(J=n.R16F),W===n.UNSIGNED_BYTE&&(J=n.R8)),I===n.RED_INTEGER&&(W===n.UNSIGNED_BYTE&&(J=n.R8UI),W===n.UNSIGNED_SHORT&&(J=n.R16UI),W===n.UNSIGNED_INT&&(J=n.R32UI),W===n.BYTE&&(J=n.R8I),W===n.SHORT&&(J=n.R16I),W===n.INT&&(J=n.R32I)),I===n.RG&&(W===n.FLOAT&&(J=n.RG32F),W===n.HALF_FLOAT&&(J=n.RG16F),W===n.UNSIGNED_BYTE&&(J=n.RG8)),I===n.RG_INTEGER&&(W===n.UNSIGNED_BYTE&&(J=n.RG8UI),W===n.UNSIGNED_SHORT&&(J=n.RG16UI),W===n.UNSIGNED_INT&&(J=n.RG32UI),W===n.BYTE&&(J=n.RG8I),W===n.SHORT&&(J=n.RG16I),W===n.INT&&(J=n.RG32I)),I===n.RGB_INTEGER&&(W===n.UNSIGNED_BYTE&&(J=n.RGB8UI),W===n.UNSIGNED_SHORT&&(J=n.RGB16UI),W===n.UNSIGNED_INT&&(J=n.RGB32UI),W===n.BYTE&&(J=n.RGB8I),W===n.SHORT&&(J=n.RGB16I),W===n.INT&&(J=n.RGB32I)),I===n.RGBA_INTEGER&&(W===n.UNSIGNED_BYTE&&(J=n.RGBA8UI),W===n.UNSIGNED_SHORT&&(J=n.RGBA16UI),W===n.UNSIGNED_INT&&(J=n.RGBA32UI),W===n.BYTE&&(J=n.RGBA8I),W===n.SHORT&&(J=n.RGBA16I),W===n.INT&&(J=n.RGBA32I)),I===n.RGB&&W===n.UNSIGNED_INT_5_9_9_9_REV&&(J=n.RGB9_E5),I===n.RGBA){const Se=ie?Gp:Ze.getTransfer(Z);W===n.FLOAT&&(J=n.RGBA32F),W===n.HALF_FLOAT&&(J=n.RGBA16F),W===n.UNSIGNED_BYTE&&(J=Se===vt?n.SRGB8_ALPHA8:n.RGBA8),W===n.UNSIGNED_SHORT_4_4_4_4&&(J=n.RGBA4),W===n.UNSIGNED_SHORT_5_5_5_1&&(J=n.RGB5_A1)}return(J===n.R16F||J===n.R32F||J===n.RG16F||J===n.RG32F||J===n.RGBA16F||J===n.RGBA32F)&&e.get("EXT_color_buffer_float"),J}function x(B,I){let W;return B?I===null||I===po||I===oc?W=n.DEPTH24_STENCIL8:I===Kt?W=n.DEPTH32F_STENCIL8:I===_h&&(W=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):I===null||I===po||I===oc?W=n.DEPTH_COMPONENT24:I===Kt?W=n.DEPTH_COMPONENT32F:I===_h&&(W=n.DEPTH_COMPONENT16),W}function E(B,I){return A(B)===!0||B.isFramebufferTexture&&B.minFilter!==an&&B.minFilter!==et?Math.log2(Math.max(I.width,I.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?I.mipmaps.length:1}function w(B){const I=B.target;I.removeEventListener("dispose",w),C(I),I.isVideoTexture&&u.delete(I)}function M(B){const I=B.target;I.removeEventListener("dispose",M),_(I)}function C(B){const I=i.get(B);if(I.__webglInit===void 0)return;const W=B.source,Z=d.get(W);if(Z){const ie=Z[I.__cacheKey];ie.usedTimes--,ie.usedTimes===0&&S(B),Object.keys(Z).length===0&&d.delete(W)}i.remove(B)}function S(B){const I=i.get(B);n.deleteTexture(I.__webglTexture);const W=B.source,Z=d.get(W);delete Z[I.__cacheKey],o.memory.textures--}function _(B){const I=i.get(B);if(B.depthTexture&&(B.depthTexture.dispose(),i.remove(B.depthTexture)),B.isWebGLCubeRenderTarget)for(let Z=0;Z<6;Z++){if(Array.isArray(I.__webglFramebuffer[Z]))for(let ie=0;ie<I.__webglFramebuffer[Z].length;ie++)n.deleteFramebuffer(I.__webglFramebuffer[Z][ie]);else n.deleteFramebuffer(I.__webglFramebuffer[Z]);I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer[Z])}else{if(Array.isArray(I.__webglFramebuffer))for(let Z=0;Z<I.__webglFramebuffer.length;Z++)n.deleteFramebuffer(I.__webglFramebuffer[Z]);else n.deleteFramebuffer(I.__webglFramebuffer);if(I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&n.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer)for(let Z=0;Z<I.__webglColorRenderbuffer.length;Z++)I.__webglColorRenderbuffer[Z]&&n.deleteRenderbuffer(I.__webglColorRenderbuffer[Z]);I.__webglDepthRenderbuffer&&n.deleteRenderbuffer(I.__webglDepthRenderbuffer)}const W=B.textures;for(let Z=0,ie=W.length;Z<ie;Z++){const J=i.get(W[Z]);J.__webglTexture&&(n.deleteTexture(J.__webglTexture),o.memory.textures--),i.remove(W[Z])}i.remove(B)}let R=0;function O(){R=0}function N(){const B=R;return B>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+s.maxTextures),R+=1,B}function F(B){const I=[];return I.push(B.wrapS),I.push(B.wrapT),I.push(B.wrapR||0),I.push(B.magFilter),I.push(B.minFilter),I.push(B.anisotropy),I.push(B.internalFormat),I.push(B.format),I.push(B.type),I.push(B.generateMipmaps),I.push(B.premultiplyAlpha),I.push(B.flipY),I.push(B.unpackAlignment),I.push(B.colorSpace),I.join()}function H(B,I){const W=i.get(B);if(B.isVideoTexture&&Me(B),B.isRenderTargetTexture===!1&&B.version>0&&W.__version!==B.version){const Z=B.image;if(Z===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Z.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{X(W,B,I);return}}t.bindTexture(n.TEXTURE_2D,W.__webglTexture,n.TEXTURE0+I)}function Q(B,I){const W=i.get(B);if(B.version>0&&W.__version!==B.version){X(W,B,I);return}t.bindTexture(n.TEXTURE_2D_ARRAY,W.__webglTexture,n.TEXTURE0+I)}function z(B,I){const W=i.get(B);if(B.version>0&&W.__version!==B.version){X(W,B,I);return}t.bindTexture(n.TEXTURE_3D,W.__webglTexture,n.TEXTURE0+I)}function D(B,I){const W=i.get(B);if(B.version>0&&W.__version!==B.version){ne(W,B,I);return}t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+I)}const j={[ps]:n.REPEAT,[Xt]:n.CLAMP_TO_EDGE,[Aa]:n.MIRRORED_REPEAT},K={[an]:n.NEAREST,[Hh]:n.NEAREST_MIPMAP_NEAREST,[$r]:n.NEAREST_MIPMAP_LINEAR,[et]:n.LINEAR,[oa]:n.LINEAR_MIPMAP_NEAREST,[Yn]:n.LINEAR_MIPMAP_LINEAR},te={[TG]:n.NEVER,[NG]:n.ALWAYS,[RG]:n.LESS,[F2]:n.LEQUAL,[BG]:n.EQUAL,[PG]:n.GEQUAL,[DG]:n.GREATER,[LG]:n.NOTEQUAL};function ae(B,I){if(I.type===Kt&&e.has("OES_texture_float_linear")===!1&&(I.magFilter===et||I.magFilter===oa||I.magFilter===$r||I.magFilter===Yn||I.minFilter===et||I.minFilter===oa||I.minFilter===$r||I.minFilter===Yn)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(B,n.TEXTURE_WRAP_S,j[I.wrapS]),n.texParameteri(B,n.TEXTURE_WRAP_T,j[I.wrapT]),(B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY)&&n.texParameteri(B,n.TEXTURE_WRAP_R,j[I.wrapR]),n.texParameteri(B,n.TEXTURE_MAG_FILTER,K[I.magFilter]),n.texParameteri(B,n.TEXTURE_MIN_FILTER,K[I.minFilter]),I.compareFunction&&(n.texParameteri(B,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(B,n.TEXTURE_COMPARE_FUNC,te[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(I.magFilter===an||I.minFilter!==$r&&I.minFilter!==Yn||I.type===Kt&&e.has("OES_texture_float_linear")===!1)return;if(I.anisotropy>1||i.get(I).__currentAnisotropy){const W=e.get("EXT_texture_filter_anisotropic");n.texParameterf(B,W.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,s.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy}}}function we(B,I){let W=!1;B.__webglInit===void 0&&(B.__webglInit=!0,I.addEventListener("dispose",w));const Z=I.source;let ie=d.get(Z);ie===void 0&&(ie={},d.set(Z,ie));const J=F(I);if(J!==B.__cacheKey){ie[J]===void 0&&(ie[J]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,W=!0),ie[J].usedTimes++;const Se=ie[B.__cacheKey];Se!==void 0&&(ie[B.__cacheKey].usedTimes--,Se.usedTimes===0&&S(I)),B.__cacheKey=J,B.__webglTexture=ie[J].texture}return W}function X(B,I,W){let Z=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(Z=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(Z=n.TEXTURE_3D);const ie=we(B,I),J=I.source;t.bindTexture(Z,B.__webglTexture,n.TEXTURE0+W);const Se=i.get(J);if(J.version!==Se.__version||ie===!0){t.activeTexture(n.TEXTURE0+W);const pe=Ze.getPrimaries(Ze.workingColorSpace),ve=I.colorSpace===Ui?null:Ze.getPrimaries(I.colorSpace),rt=I.colorSpace===Ui||pe===ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,rt);let le=g(I.image,!1,s.maxTextureSize);le=Tt(I,le);const Ee=r.convert(I.format,I.colorSpace),Pe=r.convert(I.type);let Ue=v(I.internalFormat,Ee,Pe,I.colorSpace,I.isVideoTexture);ae(Z,I);let be;const it=I.mipmaps,je=I.isVideoTexture!==!0,wt=Se.__version===void 0||ie===!0,k=J.dataReady,de=E(I,le);if(I.isDepthTexture)Ue=x(I.format===ac,I.type),wt&&(je?t.texStorage2D(n.TEXTURE_2D,1,Ue,le.width,le.height):t.texImage2D(n.TEXTURE_2D,0,Ue,le.width,le.height,0,Ee,Pe,null));else if(I.isDataTexture)if(it.length>0){je&&wt&&t.texStorage2D(n.TEXTURE_2D,de,Ue,it[0].width,it[0].height);for(let Y=0,ee=it.length;Y<ee;Y++)be=it[Y],je?k&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,be.width,be.height,Ee,Pe,be.data):t.texImage2D(n.TEXTURE_2D,Y,Ue,be.width,be.height,0,Ee,Pe,be.data);I.generateMipmaps=!1}else je?(wt&&t.texStorage2D(n.TEXTURE_2D,de,Ue,le.width,le.height),k&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,le.width,le.height,Ee,Pe,le.data)):t.texImage2D(n.TEXTURE_2D,0,Ue,le.width,le.height,0,Ee,Pe,le.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){je&&wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,de,Ue,it[0].width,it[0].height,le.depth);for(let Y=0,ee=it.length;Y<ee;Y++)if(be=it[Y],I.format!==Pt)if(Ee!==null)if(je){if(k)if(I.layerUpdates.size>0){const Ae=zS(be.width,be.height,I.format,I.type);for(const me of I.layerUpdates){const ze=be.data.subarray(me*Ae/be.data.BYTES_PER_ELEMENT,(me+1)*Ae/be.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,me,be.width,be.height,1,Ee,ze)}I.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,be.width,be.height,le.depth,Ee,be.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Y,Ue,be.width,be.height,le.depth,0,be.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else je?k&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,be.width,be.height,le.depth,Ee,Pe,be.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Y,Ue,be.width,be.height,le.depth,0,Ee,Pe,be.data)}else{je&&wt&&t.texStorage2D(n.TEXTURE_2D,de,Ue,it[0].width,it[0].height);for(let Y=0,ee=it.length;Y<ee;Y++)be=it[Y],I.format!==Pt?Ee!==null?je?k&&t.compressedTexSubImage2D(n.TEXTURE_2D,Y,0,0,be.width,be.height,Ee,be.data):t.compressedTexImage2D(n.TEXTURE_2D,Y,Ue,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):je?k&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,be.width,be.height,Ee,Pe,be.data):t.texImage2D(n.TEXTURE_2D,Y,Ue,be.width,be.height,0,Ee,Pe,be.data)}else if(I.isDataArrayTexture)if(je){if(wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,de,Ue,le.width,le.height,le.depth),k)if(I.layerUpdates.size>0){const Y=zS(le.width,le.height,I.format,I.type);for(const ee of I.layerUpdates){const Ae=le.data.subarray(ee*Y/le.data.BYTES_PER_ELEMENT,(ee+1)*Y/le.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ee,le.width,le.height,1,Ee,Pe,Ae)}I.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,le.width,le.height,le.depth,Ee,Pe,le.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ue,le.width,le.height,le.depth,0,Ee,Pe,le.data);else if(I.isData3DTexture)je?(wt&&t.texStorage3D(n.TEXTURE_3D,de,Ue,le.width,le.height,le.depth),k&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,le.width,le.height,le.depth,Ee,Pe,le.data)):t.texImage3D(n.TEXTURE_3D,0,Ue,le.width,le.height,le.depth,0,Ee,Pe,le.data);else if(I.isFramebufferTexture){if(wt)if(je)t.texStorage2D(n.TEXTURE_2D,de,Ue,le.width,le.height);else{let Y=le.width,ee=le.height;for(let Ae=0;Ae<de;Ae++)t.texImage2D(n.TEXTURE_2D,Ae,Ue,Y,ee,0,Ee,Pe,null),Y>>=1,ee>>=1}}else if(it.length>0){if(je&&wt){const Y=Ce(it[0]);t.texStorage2D(n.TEXTURE_2D,de,Ue,Y.width,Y.height)}for(let Y=0,ee=it.length;Y<ee;Y++)be=it[Y],je?k&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,Ee,Pe,be):t.texImage2D(n.TEXTURE_2D,Y,Ue,Ee,Pe,be);I.generateMipmaps=!1}else if(je){if(wt){const Y=Ce(le);t.texStorage2D(n.TEXTURE_2D,de,Ue,Y.width,Y.height)}k&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee,Pe,le)}else t.texImage2D(n.TEXTURE_2D,0,Ue,Ee,Pe,le);A(I)&&p(Z),Se.__version=J.version,I.onUpdate&&I.onUpdate(I)}B.__version=I.version}function ne(B,I,W){if(I.image.length!==6)return;const Z=we(B,I),ie=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+W);const J=i.get(ie);if(ie.version!==J.__version||Z===!0){t.activeTexture(n.TEXTURE0+W);const Se=Ze.getPrimaries(Ze.workingColorSpace),pe=I.colorSpace===Ui?null:Ze.getPrimaries(I.colorSpace),ve=I.colorSpace===Ui||Se===pe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ve);const rt=I.isCompressedTexture||I.image[0].isCompressedTexture,le=I.image[0]&&I.image[0].isDataTexture,Ee=[];for(let ee=0;ee<6;ee++)!rt&&!le?Ee[ee]=g(I.image[ee],!0,s.maxCubemapSize):Ee[ee]=le?I.image[ee].image:I.image[ee],Ee[ee]=Tt(I,Ee[ee]);const Pe=Ee[0],Ue=r.convert(I.format,I.colorSpace),be=r.convert(I.type),it=v(I.internalFormat,Ue,be,I.colorSpace),je=I.isVideoTexture!==!0,wt=J.__version===void 0||Z===!0,k=ie.dataReady;let de=E(I,Pe);ae(n.TEXTURE_CUBE_MAP,I);let Y;if(rt){je&&wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,de,it,Pe.width,Pe.height);for(let ee=0;ee<6;ee++){Y=Ee[ee].mipmaps;for(let Ae=0;Ae<Y.length;Ae++){const me=Y[Ae];I.format!==Pt?Ue!==null?je?k&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae,0,0,me.width,me.height,Ue,me.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae,it,me.width,me.height,0,me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):je?k&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae,0,0,me.width,me.height,Ue,be,me.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae,it,me.width,me.height,0,Ue,be,me.data)}}}else{if(Y=I.mipmaps,je&&wt){Y.length>0&&de++;const ee=Ce(Ee[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,de,it,ee.width,ee.height)}for(let ee=0;ee<6;ee++)if(le){je?k&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,0,0,Ee[ee].width,Ee[ee].height,Ue,be,Ee[ee].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,it,Ee[ee].width,Ee[ee].height,0,Ue,be,Ee[ee].data);for(let Ae=0;Ae<Y.length;Ae++){const ze=Y[Ae].image[ee].image;je?k&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae+1,0,0,ze.width,ze.height,Ue,be,ze.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae+1,it,ze.width,ze.height,0,Ue,be,ze.data)}}else{je?k&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,0,0,Ue,be,Ee[ee]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,it,Ue,be,Ee[ee]);for(let Ae=0;Ae<Y.length;Ae++){const me=Y[Ae];je?k&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae+1,0,0,Ue,be,me.image[ee]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ae+1,it,Ue,be,me.image[ee])}}}A(I)&&p(n.TEXTURE_CUBE_MAP),J.__version=ie.version,I.onUpdate&&I.onUpdate(I)}B.__version=I.version}function he(B,I,W,Z,ie,J){const Se=r.convert(W.format,W.colorSpace),pe=r.convert(W.type),ve=v(W.internalFormat,Se,pe,W.colorSpace),rt=i.get(I),le=i.get(W);if(le.__renderTarget=I,!rt.__hasExternalTextures){const Ee=Math.max(1,I.width>>J),Pe=Math.max(1,I.height>>J);ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY?t.texImage3D(ie,J,ve,Ee,Pe,I.depth,0,Se,pe,null):t.texImage2D(ie,J,ve,Ee,Pe,0,Se,pe,null)}t.bindFramebuffer(n.FRAMEBUFFER,B),nt(I)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Z,ie,le.__webglTexture,0,tt(I)):(ie===n.TEXTURE_2D||ie>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ie<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Z,ie,le.__webglTexture,J),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ce(B,I,W){if(n.bindRenderbuffer(n.RENDERBUFFER,B),I.depthBuffer){const Z=I.depthTexture,ie=Z&&Z.isDepthTexture?Z.type:null,J=x(I.stencilBuffer,ie),Se=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=tt(I);nt(I)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pe,J,I.width,I.height):W?n.renderbufferStorageMultisample(n.RENDERBUFFER,pe,J,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,J,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,B)}else{const Z=I.textures;for(let ie=0;ie<Z.length;ie++){const J=Z[ie],Se=r.convert(J.format,J.colorSpace),pe=r.convert(J.type),ve=v(J.internalFormat,Se,pe,J.colorSpace),rt=tt(I);W&&nt(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,rt,ve,I.width,I.height):nt(I)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,rt,ve,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,ve,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Te(B,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,B),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Z=i.get(I.depthTexture);Z.__renderTarget=I,(!Z.__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),H(I.depthTexture,0);const ie=Z.__webglTexture,J=tt(I);if(I.depthTexture.format===Vl)nt(I)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ie,0,J):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ie,0);else if(I.depthTexture.format===ac)nt(I)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ie,0,J):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ie,0);else throw new Error("Unknown depthTexture format")}function ke(B){const I=i.get(B),W=B.isWebGLCubeRenderTarget===!0;if(I.__boundDepthTexture!==B.depthTexture){const Z=B.depthTexture;if(I.__depthDisposeCallback&&I.__depthDisposeCallback(),Z){const ie=()=>{delete I.__boundDepthTexture,delete I.__depthDisposeCallback,Z.removeEventListener("dispose",ie)};Z.addEventListener("dispose",ie),I.__depthDisposeCallback=ie}I.__boundDepthTexture=Z}if(B.depthTexture&&!I.__autoAllocateDepthBuffer){if(W)throw new Error("target.depthTexture not supported in Cube render targets");Te(I.__webglFramebuffer,B)}else if(W){I.__webglDepthbuffer=[];for(let Z=0;Z<6;Z++)if(t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[Z]),I.__webglDepthbuffer[Z]===void 0)I.__webglDepthbuffer[Z]=n.createRenderbuffer(),ce(I.__webglDepthbuffer[Z],B,!1);else{const ie=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,J=I.__webglDepthbuffer[Z];n.bindRenderbuffer(n.RENDERBUFFER,J),n.framebufferRenderbuffer(n.FRAMEBUFFER,ie,n.RENDERBUFFER,J)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer===void 0)I.__webglDepthbuffer=n.createRenderbuffer(),ce(I.__webglDepthbuffer,B,!1);else{const Z=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ie=I.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,Z,n.RENDERBUFFER,ie)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(B,I,W){const Z=i.get(B);I!==void 0&&he(Z.__webglFramebuffer,B,B.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),W!==void 0&&ke(B)}function _t(B){const I=B.texture,W=i.get(B),Z=i.get(I);B.addEventListener("dispose",M);const ie=B.textures,J=B.isWebGLCubeRenderTarget===!0,Se=ie.length>1;if(Se||(Z.__webglTexture===void 0&&(Z.__webglTexture=n.createTexture()),Z.__version=I.version,o.memory.textures++),J){W.__webglFramebuffer=[];for(let pe=0;pe<6;pe++)if(I.mipmaps&&I.mipmaps.length>0){W.__webglFramebuffer[pe]=[];for(let ve=0;ve<I.mipmaps.length;ve++)W.__webglFramebuffer[pe][ve]=n.createFramebuffer()}else W.__webglFramebuffer[pe]=n.createFramebuffer()}else{if(I.mipmaps&&I.mipmaps.length>0){W.__webglFramebuffer=[];for(let pe=0;pe<I.mipmaps.length;pe++)W.__webglFramebuffer[pe]=n.createFramebuffer()}else W.__webglFramebuffer=n.createFramebuffer();if(Se)for(let pe=0,ve=ie.length;pe<ve;pe++){const rt=i.get(ie[pe]);rt.__webglTexture===void 0&&(rt.__webglTexture=n.createTexture(),o.memory.textures++)}if(B.samples>0&&nt(B)===!1){W.__webglMultisampledFramebuffer=n.createFramebuffer(),W.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,W.__webglMultisampledFramebuffer);for(let pe=0;pe<ie.length;pe++){const ve=ie[pe];W.__webglColorRenderbuffer[pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,W.__webglColorRenderbuffer[pe]);const rt=r.convert(ve.format,ve.colorSpace),le=r.convert(ve.type),Ee=v(ve.internalFormat,rt,le,ve.colorSpace,B.isXRRenderTarget===!0),Pe=tt(B);n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,Ee,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pe,n.RENDERBUFFER,W.__webglColorRenderbuffer[pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),B.depthBuffer&&(W.__webglDepthRenderbuffer=n.createRenderbuffer(),ce(W.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(J){t.bindTexture(n.TEXTURE_CUBE_MAP,Z.__webglTexture),ae(n.TEXTURE_CUBE_MAP,I);for(let pe=0;pe<6;pe++)if(I.mipmaps&&I.mipmaps.length>0)for(let ve=0;ve<I.mipmaps.length;ve++)he(W.__webglFramebuffer[pe][ve],B,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,ve);else he(W.__webglFramebuffer[pe],B,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0);A(I)&&p(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Se){for(let pe=0,ve=ie.length;pe<ve;pe++){const rt=ie[pe],le=i.get(rt);t.bindTexture(n.TEXTURE_2D,le.__webglTexture),ae(n.TEXTURE_2D,rt),he(W.__webglFramebuffer,B,rt,n.COLOR_ATTACHMENT0+pe,n.TEXTURE_2D,0),A(rt)&&p(n.TEXTURE_2D)}t.unbindTexture()}else{let pe=n.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(pe=B.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(pe,Z.__webglTexture),ae(pe,I),I.mipmaps&&I.mipmaps.length>0)for(let ve=0;ve<I.mipmaps.length;ve++)he(W.__webglFramebuffer[ve],B,I,n.COLOR_ATTACHMENT0,pe,ve);else he(W.__webglFramebuffer,B,I,n.COLOR_ATTACHMENT0,pe,0);A(I)&&p(pe),t.unbindTexture()}B.depthBuffer&&ke(B)}function Je(B){const I=B.textures;for(let W=0,Z=I.length;W<Z;W++){const ie=I[W];if(A(ie)){const J=y(B),Se=i.get(ie).__webglTexture;t.bindTexture(J,Se),p(J),t.unbindTexture()}}}const It=[],P=[];function Ii(B){if(B.samples>0){if(nt(B)===!1){const I=B.textures,W=B.width,Z=B.height;let ie=n.COLOR_BUFFER_BIT;const J=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=i.get(B),pe=I.length>1;if(pe)for(let ve=0;ve<I.length;ve++)t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Se.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglFramebuffer);for(let ve=0;ve<I.length;ve++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(ie|=n.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(ie|=n.STENCIL_BUFFER_BIT)),pe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Se.__webglColorRenderbuffer[ve]);const rt=i.get(I[ve]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,rt,0)}n.blitFramebuffer(0,0,W,Z,0,0,W,Z,ie,n.NEAREST),l===!0&&(It.length=0,P.length=0,It.push(n.COLOR_ATTACHMENT0+ve),B.depthBuffer&&B.resolveDepthBuffer===!1&&(It.push(J),P.push(J),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,P)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,It))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),pe)for(let ve=0;ve<I.length;ve++){t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.RENDERBUFFER,Se.__webglColorRenderbuffer[ve]);const rt=i.get(I[ve]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.TEXTURE_2D,rt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const I=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[I])}}}function tt(B){return Math.min(s.maxSamples,B.samples)}function nt(B){const I=i.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Me(B){const I=o.render.frame;u.get(B)!==I&&(u.set(B,I),B.update())}function Tt(B,I){const W=B.colorSpace,Z=B.format,ie=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||W!==Mt&&W!==Ui&&(Ze.getTransfer(W)===vt?(Z!==Pt||ie!==Jt)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",W)),I}function Ce(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(c.width=B.naturalWidth||B.width,c.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(c.width=B.displayWidth,c.height=B.displayHeight):(c.width=B.width,c.height=B.height),c}this.allocateTextureUnit=N,this.resetTextureUnits=O,this.setTexture2D=H,this.setTexture2DArray=Q,this.setTexture3D=z,this.setTextureCube=D,this.rebindTextures=He,this.setupRenderTarget=_t,this.updateRenderTargetMipmap=Je,this.updateMultisampleRenderTarget=Ii,this.setupDepthRenderbuffer=ke,this.setupFrameBufferTexture=he,this.useMultisampledRTT=nt}function W9(n,e){function t(i,s=Ui){let r;const o=Ze.getTransfer(s);if(i===Jt)return n.UNSIGNED_BYTE;if(i===CE)return n.UNSIGNED_SHORT_4_4_4_4;if(i===ME)return n.UNSIGNED_SHORT_5_5_5_1;if(i===I2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===wE)return n.BYTE;if(i===SE)return n.SHORT;if(i===_h)return n.UNSIGNED_SHORT;if(i===Rm)return n.INT;if(i===po)return n.UNSIGNED_INT;if(i===Kt)return n.FLOAT;if(i===rn)return n.HALF_FLOAT;if(i===T2)return n.ALPHA;if(i===R2)return n.RGB;if(i===Pt)return n.RGBA;if(i===B2)return n.LUMINANCE;if(i===D2)return n.LUMINANCE_ALPHA;if(i===Vl)return n.DEPTH_COMPONENT;if(i===ac)return n.DEPTH_STENCIL;if(i===Xr)return n.RED;if(i===IE)return n.RED_INTEGER;if(i===ea)return n.RG;if(i===TE)return n.RG_INTEGER;if(i===RE)return n.RGBA_INTEGER;if(i===Qf||i===ju||i===Gf||i===Wu)if(o===vt)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===Qf)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ju)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Gf)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Wu)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===Qf)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ju)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Gf)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Wu)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Lp||i===tv||i===Pp||i===nv)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===Lp)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===tv)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Pp)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===nv)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Np||i===Fp||i===kp)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===Np||i===Fp)return o===vt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===kp)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===wh||i===iv||i===sv||i===rv||i===Sh||i===ov||i===av||i===lv||i===cv||i===uv||i===hv||i===dv||i===fv||i===pv)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===wh)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===iv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===sv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===rv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Sh)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ov)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===av)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===lv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===cv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===uv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===hv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===dv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===fv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===pv)return o===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===qu||i===mv||i===Up)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===qu)return o===vt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===mv)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Up)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===L2||i===Av||i===gv||i===yv)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===qu)return r.COMPRESSED_RED_RGTC1_EXT;if(i===Av)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===gv)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===yv)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===oc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const q9={type:"move"};class ag{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new L,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new L),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new L,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new L),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const A=t.getJointPose(g,i),p=this._getHandJoint(c,g);A!==null&&(p.matrix.fromArray(A.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=A.radius),p.visible=A!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,m=.005;c.inputState.pinching&&d>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(q9)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Kr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const $9=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,X9=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class K9{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new Nt,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Si({vertexShader:$9,fragmentShader:X9,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new xt(new br(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Y9 extends ms{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,m=null;const g=new K9,A=t.getContextAttributes();let p=null,y=null;const v=[],x=[],E=new Ve;let w=null;const M=new _n;M.viewport=new ct;const C=new _n;C.viewport=new ct;const S=[M,C],_=new sz;let R=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(X){let ne=v[X];return ne===void 0&&(ne=new ag,v[X]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(X){let ne=v[X];return ne===void 0&&(ne=new ag,v[X]=ne),ne.getGripSpace()},this.getHand=function(X){let ne=v[X];return ne===void 0&&(ne=new ag,v[X]=ne),ne.getHandSpace()};function N(X){const ne=x.indexOf(X.inputSource);if(ne===-1)return;const he=v[ne];he!==void 0&&(he.update(X.inputSource,X.frame,c||o),he.dispatchEvent({type:X.type,data:X.inputSource}))}function F(){s.removeEventListener("select",N),s.removeEventListener("selectstart",N),s.removeEventListener("selectend",N),s.removeEventListener("squeeze",N),s.removeEventListener("squeezestart",N),s.removeEventListener("squeezeend",N),s.removeEventListener("end",F),s.removeEventListener("inputsourceschange",H);for(let X=0;X<v.length;X++){const ne=x[X];ne!==null&&(x[X]=null,v[X].disconnect(ne))}R=null,O=null,g.reset(),e.setRenderTarget(p),f=null,d=null,h=null,s=null,y=null,we.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(E.width,E.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(X){r=X,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(X){a=X,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(X){c=X},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(X){if(s=X,s!==null){if(p=e.getRenderTarget(),s.addEventListener("select",N),s.addEventListener("selectstart",N),s.addEventListener("selectend",N),s.addEventListener("squeeze",N),s.addEventListener("squeezestart",N),s.addEventListener("squeezeend",N),s.addEventListener("end",F),s.addEventListener("inputsourceschange",H),A.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(E),s.enabledFeatures!==void 0&&s.enabledFeatures.includes("layers")){let he=null,ce=null,Te=null;A.depth&&(Te=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=A.stencil?ac:Vl,ce=A.stencil?oc:po);const ke={colorFormat:t.RGBA8,depthFormat:Te,scaleFactor:r};h=new XRWebGLBinding(s,t),d=h.createProjectionLayer(ke),s.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),y=new ji(d.textureWidth,d.textureHeight,{format:Pt,type:Jt,depthTexture:new X2(d.textureWidth,d.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}else{const he={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(s,t,he),s.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),y=new ji(f.framebufferWidth,f.framebufferHeight,{format:Pt,type:Jt,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await s.requestReferenceSpace(a),we.setContext(s),we.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function H(X){for(let ne=0;ne<X.removed.length;ne++){const he=X.removed[ne],ce=x.indexOf(he);ce>=0&&(x[ce]=null,v[ce].disconnect(he))}for(let ne=0;ne<X.added.length;ne++){const he=X.added[ne];let ce=x.indexOf(he);if(ce===-1){for(let ke=0;ke<v.length;ke++)if(ke>=x.length){x.push(he),ce=ke;break}else if(x[ke]===null){x[ke]=he,ce=ke;break}if(ce===-1)break}const Te=v[ce];Te&&Te.connect(he)}}const Q=new L,z=new L;function D(X,ne,he){Q.setFromMatrixPosition(ne.matrixWorld),z.setFromMatrixPosition(he.matrixWorld);const ce=Q.distanceTo(z),Te=ne.projectionMatrix.elements,ke=he.projectionMatrix.elements,He=Te[14]/(Te[10]-1),_t=Te[14]/(Te[10]+1),Je=(Te[9]+1)/Te[5],It=(Te[9]-1)/Te[5],P=(Te[8]-1)/Te[0],Ii=(ke[8]+1)/ke[0],tt=He*P,nt=He*Ii,Me=ce/(-P+Ii),Tt=Me*-P;if(ne.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(Tt),X.translateZ(Me),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert(),Te[10]===-1)X.projectionMatrix.copy(ne.projectionMatrix),X.projectionMatrixInverse.copy(ne.projectionMatrixInverse);else{const Ce=He+Me,B=_t+Me,I=tt-Tt,W=nt+(ce-Tt),Z=Je*_t/B*Ce,ie=It*_t/B*Ce;X.projectionMatrix.makePerspective(I,W,Z,ie,Ce,B),X.projectionMatrixInverse.copy(X.projectionMatrix).invert()}}function j(X,ne){ne===null?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices(ne.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}this.updateCamera=function(X){if(s===null)return;let ne=X.near,he=X.far;g.texture!==null&&(g.depthNear>0&&(ne=g.depthNear),g.depthFar>0&&(he=g.depthFar)),_.near=C.near=M.near=ne,_.far=C.far=M.far=he,(R!==_.near||O!==_.far)&&(s.updateRenderState({depthNear:_.near,depthFar:_.far}),R=_.near,O=_.far),M.layers.mask=X.layers.mask|2,C.layers.mask=X.layers.mask|4,_.layers.mask=M.layers.mask|C.layers.mask;const ce=X.parent,Te=_.cameras;j(_,ce);for(let ke=0;ke<Te.length;ke++)j(Te[ke],ce);Te.length===2?D(_,M,C):_.projectionMatrix.copy(M.projectionMatrix),K(X,_,ce)};function K(X,ne,he){he===null?X.matrix.copy(ne.matrixWorld):(X.matrix.copy(he.matrixWorld),X.matrix.invert(),X.matrix.multiply(ne.matrixWorld)),X.matrix.decompose(X.position,X.quaternion,X.scale),X.updateMatrixWorld(!0),X.projectionMatrix.copy(ne.projectionMatrix),X.projectionMatrixInverse.copy(ne.projectionMatrixInverse),X.isPerspectiveCamera&&(X.fov=uc*2*Math.atan(1/X.projectionMatrix.elements[5]),X.zoom=1)}this.getCamera=function(){return _},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(X){l=X,d!==null&&(d.fixedFoveation=X),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=X)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(_)};let te=null;function ae(X,ne){if(u=ne.getViewerPose(c||o),m=ne,u!==null){const he=u.views;f!==null&&(e.setRenderTargetFramebuffer(y,f.framebuffer),e.setRenderTarget(y));let ce=!1;he.length!==_.cameras.length&&(_.cameras.length=0,ce=!0);for(let ke=0;ke<he.length;ke++){const He=he[ke];let _t=null;if(f!==null)_t=f.getViewport(He);else{const It=h.getViewSubImage(d,He);_t=It.viewport,ke===0&&(e.setRenderTargetTextures(y,It.colorTexture,d.ignoreDepthValues?void 0:It.depthStencilTexture),e.setRenderTarget(y))}let Je=S[ke];Je===void 0&&(Je=new _n,Je.layers.enable(ke),Je.viewport=new ct,S[ke]=Je),Je.matrix.fromArray(He.transform.matrix),Je.matrix.decompose(Je.position,Je.quaternion,Je.scale),Je.projectionMatrix.fromArray(He.projectionMatrix),Je.projectionMatrixInverse.copy(Je.projectionMatrix).invert(),Je.viewport.set(_t.x,_t.y,_t.width,_t.height),ke===0&&(_.matrix.copy(Je.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale)),ce===!0&&_.cameras.push(Je)}const Te=s.enabledFeatures;if(Te&&Te.includes("depth-sensing")){const ke=h.getDepthInformation(he[0]);ke&&ke.isValid&&ke.texture&&g.init(e,ke,s.renderState)}}for(let he=0;he<v.length;he++){const ce=x[he],Te=v[he];ce!==null&&Te!==void 0&&Te.update(ce,ne,c||o)}te&&te(X,ne),ne.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ne}),m=null}const we=new sD;we.setAnimationLoop(ae),this.setAnimationLoop=function(X){te=X},this.dispose=function(){}}}const Io=new Wi,J9=new Fe;function Z9(n,e){function t(A,p){A.matrixAutoUpdate===!0&&A.updateMatrix(),p.value.copy(A.matrix)}function i(A,p){p.color.getRGB(A.fogColor.value,z2(n)),p.isFog?(A.fogNear.value=p.near,A.fogFar.value=p.far):p.isFogExp2&&(A.fogDensity.value=p.density)}function s(A,p,y,v,x){p.isMeshBasicMaterial||p.isMeshLambertMaterial?r(A,p):p.isMeshToonMaterial?(r(A,p),h(A,p)):p.isMeshPhongMaterial?(r(A,p),u(A,p)):p.isMeshStandardMaterial?(r(A,p),d(A,p),p.isMeshPhysicalMaterial&&f(A,p,x)):p.isMeshMatcapMaterial?(r(A,p),m(A,p)):p.isMeshDepthMaterial?r(A,p):p.isMeshDistanceMaterial?(r(A,p),g(A,p)):p.isMeshNormalMaterial?r(A,p):p.isLineBasicMaterial?(o(A,p),p.isLineDashedMaterial&&a(A,p)):p.isPointsMaterial?l(A,p,y,v):p.isSpriteMaterial?c(A,p):p.isShadowMaterial?(A.color.value.copy(p.color),A.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function r(A,p){A.opacity.value=p.opacity,p.color&&A.diffuse.value.copy(p.color),p.emissive&&A.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(A.map.value=p.map,t(p.map,A.mapTransform)),p.alphaMap&&(A.alphaMap.value=p.alphaMap,t(p.alphaMap,A.alphaMapTransform)),p.bumpMap&&(A.bumpMap.value=p.bumpMap,t(p.bumpMap,A.bumpMapTransform),A.bumpScale.value=p.bumpScale,p.side===Cn&&(A.bumpScale.value*=-1)),p.normalMap&&(A.normalMap.value=p.normalMap,t(p.normalMap,A.normalMapTransform),A.normalScale.value.copy(p.normalScale),p.side===Cn&&A.normalScale.value.negate()),p.displacementMap&&(A.displacementMap.value=p.displacementMap,t(p.displacementMap,A.displacementMapTransform),A.displacementScale.value=p.displacementScale,A.displacementBias.value=p.displacementBias),p.emissiveMap&&(A.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,A.emissiveMapTransform)),p.specularMap&&(A.specularMap.value=p.specularMap,t(p.specularMap,A.specularMapTransform)),p.alphaTest>0&&(A.alphaTest.value=p.alphaTest);const y=e.get(p),v=y.envMap,x=y.envMapRotation;v&&(A.envMap.value=v,Io.copy(x),Io.x*=-1,Io.y*=-1,Io.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(Io.y*=-1,Io.z*=-1),A.envMapRotation.value.setFromMatrix4(J9.makeRotationFromEuler(Io)),A.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=p.reflectivity,A.ior.value=p.ior,A.refractionRatio.value=p.refractionRatio),p.lightMap&&(A.lightMap.value=p.lightMap,A.lightMapIntensity.value=p.lightMapIntensity,t(p.lightMap,A.lightMapTransform)),p.aoMap&&(A.aoMap.value=p.aoMap,A.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,A.aoMapTransform))}function o(A,p){A.diffuse.value.copy(p.color),A.opacity.value=p.opacity,p.map&&(A.map.value=p.map,t(p.map,A.mapTransform))}function a(A,p){A.dashSize.value=p.dashSize,A.totalSize.value=p.dashSize+p.gapSize,A.scale.value=p.scale}function l(A,p,y,v){A.diffuse.value.copy(p.color),A.opacity.value=p.opacity,A.size.value=p.size*y,A.scale.value=v*.5,p.map&&(A.map.value=p.map,t(p.map,A.uvTransform)),p.alphaMap&&(A.alphaMap.value=p.alphaMap,t(p.alphaMap,A.alphaMapTransform)),p.alphaTest>0&&(A.alphaTest.value=p.alphaTest)}function c(A,p){A.diffuse.value.copy(p.color),A.opacity.value=p.opacity,A.rotation.value=p.rotation,p.map&&(A.map.value=p.map,t(p.map,A.mapTransform)),p.alphaMap&&(A.alphaMap.value=p.alphaMap,t(p.alphaMap,A.alphaMapTransform)),p.alphaTest>0&&(A.alphaTest.value=p.alphaTest)}function u(A,p){A.specular.value.copy(p.specular),A.shininess.value=Math.max(p.shininess,1e-4)}function h(A,p){p.gradientMap&&(A.gradientMap.value=p.gradientMap)}function d(A,p){A.metalness.value=p.metalness,p.metalnessMap&&(A.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,A.metalnessMapTransform)),A.roughness.value=p.roughness,p.roughnessMap&&(A.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,A.roughnessMapTransform)),p.envMap&&(A.envMapIntensity.value=p.envMapIntensity)}function f(A,p,y){A.ior.value=p.ior,p.sheen>0&&(A.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),A.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(A.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,A.sheenColorMapTransform)),p.sheenRoughnessMap&&(A.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,A.sheenRoughnessMapTransform))),p.clearcoat>0&&(A.clearcoat.value=p.clearcoat,A.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(A.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,A.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(A.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Cn&&A.clearcoatNormalScale.value.negate())),p.dispersion>0&&(A.dispersion.value=p.dispersion),p.iridescence>0&&(A.iridescence.value=p.iridescence,A.iridescenceIOR.value=p.iridescenceIOR,A.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(A.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,A.iridescenceMapTransform)),p.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),p.transmission>0&&(A.transmission.value=p.transmission,A.transmissionSamplerMap.value=y.texture,A.transmissionSamplerSize.value.set(y.width,y.height),p.transmissionMap&&(A.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,A.transmissionMapTransform)),A.thickness.value=p.thickness,p.thicknessMap&&(A.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=p.attenuationDistance,A.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(A.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(A.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=p.specularIntensity,A.specularColor.value.copy(p.specularColor),p.specularColorMap&&(A.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,A.specularColorMapTransform)),p.specularIntensityMap&&(A.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,A.specularIntensityMapTransform))}function m(A,p){p.matcap&&(A.matcap.value=p.matcap)}function g(A,p){const y=e.get(p).light;A.referencePosition.value.setFromMatrixPosition(y.matrixWorld),A.nearDistance.value=y.shadow.camera.near,A.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function e6(n,e,t,i){let s={},r={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,v){const x=v.program;i.uniformBlockBinding(y,x)}function c(y,v){let x=s[y.id];x===void 0&&(m(y),x=u(y),s[y.id]=x,y.addEventListener("dispose",A));const E=v.program;i.updateUBOMapping(y,E);const w=e.render.frame;r[y.id]!==w&&(d(y),r[y.id]=w)}function u(y){const v=h();y.__bindingPointIndex=v;const x=n.createBuffer(),E=y.__size,w=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,E,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,x),x}function h(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const v=s[y.id],x=y.uniforms,E=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let w=0,M=x.length;w<M;w++){const C=Array.isArray(x[w])?x[w]:[x[w]];for(let S=0,_=C.length;S<_;S++){const R=C[S];if(f(R,w,S,E)===!0){const O=R.__offset,N=Array.isArray(R.value)?R.value:[R.value];let F=0;for(let H=0;H<N.length;H++){const Q=N[H],z=g(Q);typeof Q=="number"||typeof Q=="boolean"?(R.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,O+F,R.__data)):Q.isMatrix3?(R.__data[0]=Q.elements[0],R.__data[1]=Q.elements[1],R.__data[2]=Q.elements[2],R.__data[3]=0,R.__data[4]=Q.elements[3],R.__data[5]=Q.elements[4],R.__data[6]=Q.elements[5],R.__data[7]=0,R.__data[8]=Q.elements[6],R.__data[9]=Q.elements[7],R.__data[10]=Q.elements[8],R.__data[11]=0):(Q.toArray(R.__data,F),F+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,O,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(y,v,x,E){const w=y.value,M=v+"_"+x;if(E[M]===void 0)return typeof w=="number"||typeof w=="boolean"?E[M]=w:E[M]=w.clone(),!0;{const C=E[M];if(typeof w=="number"||typeof w=="boolean"){if(C!==w)return E[M]=w,!0}else if(C.equals(w)===!1)return C.copy(w),!0}return!1}function m(y){const v=y.uniforms;let x=0;const E=16;for(let M=0,C=v.length;M<C;M++){const S=Array.isArray(v[M])?v[M]:[v[M]];for(let _=0,R=S.length;_<R;_++){const O=S[_],N=Array.isArray(O.value)?O.value:[O.value];for(let F=0,H=N.length;F<H;F++){const Q=N[F],z=g(Q),D=x%E,j=D%z.boundary,K=D+j;x+=j,K!==0&&E-K<z.storage&&(x+=E-K),O.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=x,x+=z.storage}}}const w=x%E;return w>0&&(x+=E-w),y.__size=x,y.__cache={},this}function g(y){const v={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(v.boundary=4,v.storage=4):y.isVector2?(v.boundary=8,v.storage=8):y.isVector3||y.isColor?(v.boundary=16,v.storage=12):y.isVector4?(v.boundary=16,v.storage=16):y.isMatrix3?(v.boundary=48,v.storage=48):y.isMatrix4?(v.boundary=64,v.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),v}function A(y){const v=y.target;v.removeEventListener("dispose",A);const x=o.indexOf(v.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(s[v.id]),delete s[v.id],delete r[v.id]}function p(){for(const y in s)n.deleteBuffer(s[y]);o=[],s={},r={}}return{bind:l,update:c,dispose:p}}class cD{constructor(e={}){const{canvas:t=JG(),context:i=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=o;const m=new Uint32Array(4),g=new Int32Array(4);let A=null,p=null;const y=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=St,this.toneMapping=Bs,this.toneMappingExposure=1;const x=this;let E=!1,w=0,M=0,C=null,S=-1,_=null;const R=new ct,O=new ct;let N=null;const F=new Ie(0);let H=0,Q=t.width,z=t.height,D=1,j=null,K=null;const te=new ct(0,0,Q,z),ae=new ct(0,0,Q,z);let we=!1;const X=new UE;let ne=!1,he=!1;this.transmissionResolutionScale=1;const ce=new Fe,Te=new Fe,ke=new L,He=new ct,_t={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Je=!1;function It(){return C===null?D:1}let P=i;function Ii(T,U){return t.getContext(T,U)}try{const T={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Im}`),t.addEventListener("webglcontextlost",ee,!1),t.addEventListener("webglcontextrestored",Ae,!1),t.addEventListener("webglcontextcreationerror",me,!1),P===null){const U="webgl2";if(P=Ii(U,T),P===null)throw Ii(U)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let tt,nt,Me,Tt,Ce,B,I,W,Z,ie,J,Se,pe,ve,rt,le,Ee,Pe,Ue,be,it,je,wt,k;function de(){tt=new u8(P),tt.init(),je=new W9(P,tt),nt=new s8(P,tt,e,je),Me=new H9(P,tt),nt.reverseDepthBuffer&&d&&Me.buffers.depth.setReversed(!0),Tt=new f8(P),Ce=new B9,B=new j9(P,tt,Me,Ce,nt,je,Tt),I=new o8(x),W=new c8(x),Z=new xz(P),wt=new n8(P,Z),ie=new h8(P,Z,Tt,wt),J=new m8(P,ie,Z,Tt),Ue=new p8(P,nt,B),le=new r8(Ce),Se=new R9(x,I,W,tt,nt,wt,le),pe=new Z9(x,Ce),ve=new L9,rt=new O9(tt),Pe=new t8(x,I,W,Me,J,f,l),Ee=new V9(x,J,nt),k=new e6(P,Tt,nt,Me),be=new i8(P,tt,Tt),it=new d8(P,tt,Tt),Tt.programs=Se.programs,x.capabilities=nt,x.extensions=tt,x.properties=Ce,x.renderLists=ve,x.shadowMap=Ee,x.state=Me,x.info=Tt}de();const Y=new Y9(x,P);this.xr=Y,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){const T=tt.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=tt.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(T){T!==void 0&&(D=T,this.setSize(Q,z,!1))},this.getSize=function(T){return T.set(Q,z)},this.setSize=function(T,U,q=!0){if(Y.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=T,z=U,t.width=Math.floor(T*D),t.height=Math.floor(U*D),q===!0&&(t.style.width=T+"px",t.style.height=U+"px"),this.setViewport(0,0,T,U)},this.getDrawingBufferSize=function(T){return T.set(Q*D,z*D).floor()},this.setDrawingBufferSize=function(T,U,q){Q=T,z=U,D=q,t.width=Math.floor(T*q),t.height=Math.floor(U*q),this.setViewport(0,0,T,U)},this.getCurrentViewport=function(T){return T.copy(R)},this.getViewport=function(T){return T.copy(te)},this.setViewport=function(T,U,q,$){T.isVector4?te.set(T.x,T.y,T.z,T.w):te.set(T,U,q,$),Me.viewport(R.copy(te).multiplyScalar(D).round())},this.getScissor=function(T){return T.copy(ae)},this.setScissor=function(T,U,q,$){T.isVector4?ae.set(T.x,T.y,T.z,T.w):ae.set(T,U,q,$),Me.scissor(O.copy(ae).multiplyScalar(D).round())},this.getScissorTest=function(){return we},this.setScissorTest=function(T){Me.setScissorTest(we=T)},this.setOpaqueSort=function(T){j=T},this.setTransparentSort=function(T){K=T},this.getClearColor=function(T){return T.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor.apply(Pe,arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha.apply(Pe,arguments)},this.clear=function(T=!0,U=!0,q=!0){let $=0;if(T){let G=!1;if(C!==null){const oe=C.texture.format;G=oe===RE||oe===TE||oe===IE}if(G){const oe=C.texture.type,fe=oe===Jt||oe===po||oe===_h||oe===oc||oe===CE||oe===ME,ye=Pe.getClearColor(),_e=Pe.getClearAlpha(),Oe=ye.r,Qe=ye.g,Re=ye.b;fe?(m[0]=Oe,m[1]=Qe,m[2]=Re,m[3]=_e,P.clearBufferuiv(P.COLOR,0,m)):(g[0]=Oe,g[1]=Qe,g[2]=Re,g[3]=_e,P.clearBufferiv(P.COLOR,0,g))}else $|=P.COLOR_BUFFER_BIT}U&&($|=P.DEPTH_BUFFER_BIT),q&&($|=P.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),P.clear($)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ee,!1),t.removeEventListener("webglcontextrestored",Ae,!1),t.removeEventListener("webglcontextcreationerror",me,!1),Pe.dispose(),ve.dispose(),rt.dispose(),Ce.dispose(),I.dispose(),W.dispose(),J.dispose(),wt.dispose(),k.dispose(),Se.dispose(),Y.dispose(),Y.removeEventListener("sessionstart",JE),Y.removeEventListener("sessionend",ZE),xo.stop()};function ee(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const T=Tt.autoReset,U=Ee.enabled,q=Ee.autoUpdate,$=Ee.needsUpdate,G=Ee.type;de(),Tt.autoReset=T,Ee.enabled=U,Ee.autoUpdate=q,Ee.needsUpdate=$,Ee.type=G}function me(T){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",T.statusMessage)}function ze(T){const U=T.target;U.removeEventListener("dispose",ze),jt(U)}function jt(T){In(T),Ce.remove(T)}function In(T){const U=Ce.get(T).programs;U!==void 0&&(U.forEach(function(q){Se.releaseProgram(q)}),T.isShaderMaterial&&Se.releaseShaderCache(T))}this.renderBufferDirect=function(T,U,q,$,G,oe){U===null&&(U=_t);const fe=G.isMesh&&G.matrixWorld.determinant()<0,ye=FL(T,U,q,$,G);Me.setMaterial($,fe);let _e=q.index,Oe=1;if($.wireframe===!0){if(_e=ie.getWireframeAttribute(q),_e===void 0)return;Oe=2}const Qe=q.drawRange,Re=q.attributes.position;let ot=Qe.start*Oe,ut=(Qe.start+Qe.count)*Oe;oe!==null&&(ot=Math.max(ot,oe.start*Oe),ut=Math.min(ut,(oe.start+oe.count)*Oe)),_e!==null?(ot=Math.max(ot,0),ut=Math.min(ut,_e.count)):Re!=null&&(ot=Math.max(ot,0),ut=Math.min(ut,Re.count));const en=ut-ot;if(en<0||en===1/0)return;wt.setup(G,$,ye,q,_e);let Wt,lt=be;if(_e!==null&&(Wt=Z.get(_e),lt=it,lt.setIndex(Wt)),G.isMesh)$.wireframe===!0?(Me.setLineWidth($.wireframeLinewidth*It()),lt.setMode(P.LINES)):lt.setMode(P.TRIANGLES);else if(G.isLine){let Be=$.linewidth;Be===void 0&&(Be=1),Me.setLineWidth(Be*It()),G.isLineSegments?lt.setMode(P.LINES):G.isLineLoop?lt.setMode(P.LINE_LOOP):lt.setMode(P.LINE_STRIP)}else G.isPoints?lt.setMode(P.POINTS):G.isSprite&&lt.setMode(P.TRIANGLES);if(G.isBatchedMesh)if(G._multiDrawInstances!==null)lt.renderMultiDrawInstances(G._multiDrawStarts,G._multiDrawCounts,G._multiDrawCount,G._multiDrawInstances);else if(tt.get("WEBGL_multi_draw"))lt.renderMultiDraw(G._multiDrawStarts,G._multiDrawCounts,G._multiDrawCount);else{const Be=G._multiDrawStarts,xn=G._multiDrawCounts,ht=G._multiDrawCount,Xi=_e?Z.get(_e).bytesPerElement:1,Ma=Ce.get($).currentProgram.getUniforms();for(let hi=0;hi<ht;hi++)Ma.setValue(P,"_gl_DrawID",hi),lt.render(Be[hi]/Xi,xn[hi])}else if(G.isInstancedMesh)lt.renderInstances(ot,en,G.count);else if(q.isInstancedBufferGeometry){const Be=q._maxInstanceCount!==void 0?q._maxInstanceCount:1/0,xn=Math.min(q.instanceCount,Be);lt.renderInstances(ot,en,xn)}else lt.render(ot,en)};function pt(T,U,q){T.transparent===!0&&T.side===gn&&T.forceSinglePass===!1?(T.side=Cn,T.needsUpdate=!0,Jh(T,U,q),T.side=fs,T.needsUpdate=!0,Jh(T,U,q),T.side=gn):Jh(T,U,q)}this.compile=function(T,U,q=null){q===null&&(q=T),p=rt.get(q),p.init(U),v.push(p),q.traverseVisible(function(G){G.isLight&&G.layers.test(U.layers)&&(p.pushLight(G),G.castShadow&&p.pushShadow(G))}),T!==q&&T.traverseVisible(function(G){G.isLight&&G.layers.test(U.layers)&&(p.pushLight(G),G.castShadow&&p.pushShadow(G))}),p.setupLights();const $=new Set;return T.traverse(function(G){if(!(G.isMesh||G.isPoints||G.isLine||G.isSprite))return;const oe=G.material;if(oe)if(Array.isArray(oe))for(let fe=0;fe<oe.length;fe++){const ye=oe[fe];pt(ye,q,G),$.add(ye)}else pt(oe,q,G),$.add(oe)}),v.pop(),p=null,$},this.compileAsync=function(T,U,q=null){const $=this.compile(T,U,q);return new Promise(G=>{function oe(){if($.forEach(function(fe){Ce.get(fe).currentProgram.isReady()&&$.delete(fe)}),$.size===0){G(T);return}setTimeout(oe,10)}tt.get("KHR_parallel_shader_compile")!==null?oe():setTimeout(oe,10)})};let $i=null;function Qs(T){$i&&$i(T)}function JE(){xo.stop()}function ZE(){xo.start()}const xo=new sD;xo.setAnimationLoop(Qs),typeof self<"u"&&xo.setContext(self),this.setAnimationLoop=function(T){$i=T,Y.setAnimationLoop(T),T===null?xo.stop():xo.start()},Y.addEventListener("sessionstart",JE),Y.addEventListener("sessionend",ZE),this.render=function(T,U){if(U!==void 0&&U.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;if(T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),U.parent===null&&U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),Y.enabled===!0&&Y.isPresenting===!0&&(Y.cameraAutoUpdate===!0&&Y.updateCamera(U),U=Y.getCamera()),T.isScene===!0&&T.onBeforeRender(x,T,U,C),p=rt.get(T,v.length),p.init(U),v.push(p),Te.multiplyMatrices(U.projectionMatrix,U.matrixWorldInverse),X.setFromProjectionMatrix(Te),he=this.localClippingEnabled,ne=le.init(this.clippingPlanes,he),A=ve.get(T,y.length),A.init(),y.push(A),Y.enabled===!0&&Y.isPresenting===!0){const oe=x.xr.getDepthSensingMesh();oe!==null&&Um(oe,U,-1/0,x.sortObjects)}Um(T,U,0,x.sortObjects),A.finish(),x.sortObjects===!0&&A.sort(j,K),Je=Y.enabled===!1||Y.isPresenting===!1||Y.hasDepthSensing()===!1,Je&&Pe.addToRenderList(A,T),this.info.render.frame++,ne===!0&&le.beginShadows();const q=p.state.shadowsArray;Ee.render(q,T,U),ne===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset();const $=A.opaque,G=A.transmissive;if(p.setupLights(),U.isArrayCamera){const oe=U.cameras;if(G.length>0)for(let fe=0,ye=oe.length;fe<ye;fe++){const _e=oe[fe];tb($,G,T,_e)}Je&&Pe.render(T);for(let fe=0,ye=oe.length;fe<ye;fe++){const _e=oe[fe];eb(A,T,_e,_e.viewport)}}else G.length>0&&tb($,G,T,U),Je&&Pe.render(T),eb(A,T,U);C!==null&&M===0&&(B.updateMultisampleRenderTarget(C),B.updateRenderTargetMipmap(C)),T.isScene===!0&&T.onAfterRender(x,T,U),wt.resetDefaultState(),S=-1,_=null,v.pop(),v.length>0?(p=v[v.length-1],ne===!0&&le.setGlobalState(x.clippingPlanes,p.state.camera)):p=null,y.pop(),y.length>0?A=y[y.length-1]:A=null};function Um(T,U,q,$){if(T.visible===!1)return;if(T.layers.test(U.layers)){if(T.isGroup)q=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(U);else if(T.isLight)p.pushLight(T),T.castShadow&&p.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||X.intersectsSprite(T)){$&&He.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Te);const fe=J.update(T),ye=T.material;ye.visible&&A.push(T,fe,ye,q,He.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(!T.frustumCulled||X.intersectsObject(T))){const fe=J.update(T),ye=T.material;if($&&(T.boundingSphere!==void 0?(T.boundingSphere===null&&T.computeBoundingSphere(),He.copy(T.boundingSphere.center)):(fe.boundingSphere===null&&fe.computeBoundingSphere(),He.copy(fe.boundingSphere.center)),He.applyMatrix4(T.matrixWorld).applyMatrix4(Te)),Array.isArray(ye)){const _e=fe.groups;for(let Oe=0,Qe=_e.length;Oe<Qe;Oe++){const Re=_e[Oe],ot=ye[Re.materialIndex];ot&&ot.visible&&A.push(T,fe,ot,q,He.z,Re)}}else ye.visible&&A.push(T,fe,ye,q,He.z,null)}}const oe=T.children;for(let fe=0,ye=oe.length;fe<ye;fe++)Um(oe[fe],U,q,$)}function eb(T,U,q,$){const G=T.opaque,oe=T.transmissive,fe=T.transparent;p.setupLightsView(q),ne===!0&&le.setGlobalState(x.clippingPlanes,q),$&&Me.viewport(R.copy($)),G.length>0&&Yh(G,U,q),oe.length>0&&Yh(oe,U,q),fe.length>0&&Yh(fe,U,q),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function tb(T,U,q,$){if((q.isScene===!0?q.overrideMaterial:null)!==null)return;p.state.transmissionRenderTarget[$.id]===void 0&&(p.state.transmissionRenderTarget[$.id]=new ji(1,1,{generateMipmaps:!0,type:tt.has("EXT_color_buffer_half_float")||tt.has("EXT_color_buffer_float")?rn:Jt,minFilter:Yn,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ze.workingColorSpace}));const oe=p.state.transmissionRenderTarget[$.id],fe=$.viewport||R;oe.setSize(fe.z*x.transmissionResolutionScale,fe.w*x.transmissionResolutionScale);const ye=x.getRenderTarget();x.setRenderTarget(oe),x.getClearColor(F),H=x.getClearAlpha(),H<1&&x.setClearColor(16777215,.5),x.clear(),Je&&Pe.render(q);const _e=x.toneMapping;x.toneMapping=Bs;const Oe=$.viewport;if($.viewport!==void 0&&($.viewport=void 0),p.setupLightsView($),ne===!0&&le.setGlobalState(x.clippingPlanes,$),Yh(T,q,$),B.updateMultisampleRenderTarget(oe),B.updateRenderTargetMipmap(oe),tt.has("WEBGL_multisampled_render_to_texture")===!1){let Qe=!1;for(let Re=0,ot=U.length;Re<ot;Re++){const ut=U[Re],en=ut.object,Wt=ut.geometry,lt=ut.material,Be=ut.group;if(lt.side===gn&&en.layers.test($.layers)){const xn=lt.side;lt.side=Cn,lt.needsUpdate=!0,nb(en,q,$,Wt,lt,Be),lt.side=xn,lt.needsUpdate=!0,Qe=!0}}Qe===!0&&(B.updateMultisampleRenderTarget(oe),B.updateRenderTargetMipmap(oe))}x.setRenderTarget(ye),x.setClearColor(F,H),Oe!==void 0&&($.viewport=Oe),x.toneMapping=_e}function Yh(T,U,q){const $=U.isScene===!0?U.overrideMaterial:null;for(let G=0,oe=T.length;G<oe;G++){const fe=T[G],ye=fe.object,_e=fe.geometry,Oe=$===null?fe.material:$,Qe=fe.group;ye.layers.test(q.layers)&&nb(ye,U,q,_e,Oe,Qe)}}function nb(T,U,q,$,G,oe){T.onBeforeRender(x,U,q,$,G,oe),T.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),G.onBeforeRender(x,U,q,$,T,oe),G.transparent===!0&&G.side===gn&&G.forceSinglePass===!1?(G.side=Cn,G.needsUpdate=!0,x.renderBufferDirect(q,U,$,G,T,oe),G.side=fs,G.needsUpdate=!0,x.renderBufferDirect(q,U,$,G,T,oe),G.side=gn):x.renderBufferDirect(q,U,$,G,T,oe),T.onAfterRender(x,U,q,$,G,oe)}function Jh(T,U,q){U.isScene!==!0&&(U=_t);const $=Ce.get(T),G=p.state.lights,oe=p.state.shadowsArray,fe=G.state.version,ye=Se.getParameters(T,G.state,oe,U,q),_e=Se.getProgramCacheKey(ye);let Oe=$.programs;$.environment=T.isMeshStandardMaterial?U.environment:null,$.fog=U.fog,$.envMap=(T.isMeshStandardMaterial?W:I).get(T.envMap||$.environment),$.envMapRotation=$.environment!==null&&T.envMap===null?U.environmentRotation:T.envMapRotation,Oe===void 0&&(T.addEventListener("dispose",ze),Oe=new Map,$.programs=Oe);let Qe=Oe.get(_e);if(Qe!==void 0){if($.currentProgram===Qe&&$.lightsStateVersion===fe)return sb(T,ye),Qe}else ye.uniforms=Se.getUniforms(T),T.onBeforeCompile(ye,x),Qe=Se.acquireProgram(ye,_e),Oe.set(_e,Qe),$.uniforms=ye.uniforms;const Re=$.uniforms;return(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(Re.clippingPlanes=le.uniform),sb(T,ye),$.needsLights=UL(T),$.lightsStateVersion=fe,$.needsLights&&(Re.ambientLightColor.value=G.state.ambient,Re.lightProbe.value=G.state.probe,Re.directionalLights.value=G.state.directional,Re.directionalLightShadows.value=G.state.directionalShadow,Re.spotLights.value=G.state.spot,Re.spotLightShadows.value=G.state.spotShadow,Re.rectAreaLights.value=G.state.rectArea,Re.ltc_1.value=G.state.rectAreaLTC1,Re.ltc_2.value=G.state.rectAreaLTC2,Re.pointLights.value=G.state.point,Re.pointLightShadows.value=G.state.pointShadow,Re.hemisphereLights.value=G.state.hemi,Re.directionalShadowMap.value=G.state.directionalShadowMap,Re.directionalShadowMatrix.value=G.state.directionalShadowMatrix,Re.spotShadowMap.value=G.state.spotShadowMap,Re.spotLightMatrix.value=G.state.spotLightMatrix,Re.spotLightMap.value=G.state.spotLightMap,Re.pointShadowMap.value=G.state.pointShadowMap,Re.pointShadowMatrix.value=G.state.pointShadowMatrix),$.currentProgram=Qe,$.uniformsList=null,Qe}function ib(T){if(T.uniformsList===null){const U=T.currentProgram.getUniforms();T.uniformsList=Hf.seqWithValue(U.seq,T.uniforms)}return T.uniformsList}function sb(T,U){const q=Ce.get(T);q.outputColorSpace=U.outputColorSpace,q.batching=U.batching,q.batchingColor=U.batchingColor,q.instancing=U.instancing,q.instancingColor=U.instancingColor,q.instancingMorph=U.instancingMorph,q.skinning=U.skinning,q.morphTargets=U.morphTargets,q.morphNormals=U.morphNormals,q.morphColors=U.morphColors,q.morphTargetsCount=U.morphTargetsCount,q.numClippingPlanes=U.numClippingPlanes,q.numIntersection=U.numClipIntersection,q.vertexAlphas=U.vertexAlphas,q.vertexTangents=U.vertexTangents,q.toneMapping=U.toneMapping}function FL(T,U,q,$,G){U.isScene!==!0&&(U=_t),B.resetTextureUnits();const oe=U.fog,fe=$.isMeshStandardMaterial?U.environment:null,ye=C===null?x.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Mt,_e=($.isMeshStandardMaterial?W:I).get($.envMap||fe),Oe=$.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,Qe=!!q.attributes.tangent&&(!!$.normalMap||$.anisotropy>0),Re=!!q.morphAttributes.position,ot=!!q.morphAttributes.normal,ut=!!q.morphAttributes.color;let en=Bs;$.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(en=x.toneMapping);const Wt=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,lt=Wt!==void 0?Wt.length:0,Be=Ce.get($),xn=p.state.lights;if(ne===!0&&(he===!0||T!==_)){const Vn=T===_&&$.id===S;le.setState($,T,Vn)}let ht=!1;$.version===Be.__version?(Be.needsLights&&Be.lightsStateVersion!==xn.state.version||Be.outputColorSpace!==ye||G.isBatchedMesh&&Be.batching===!1||!G.isBatchedMesh&&Be.batching===!0||G.isBatchedMesh&&Be.batchingColor===!0&&G.colorTexture===null||G.isBatchedMesh&&Be.batchingColor===!1&&G.colorTexture!==null||G.isInstancedMesh&&Be.instancing===!1||!G.isInstancedMesh&&Be.instancing===!0||G.isSkinnedMesh&&Be.skinning===!1||!G.isSkinnedMesh&&Be.skinning===!0||G.isInstancedMesh&&Be.instancingColor===!0&&G.instanceColor===null||G.isInstancedMesh&&Be.instancingColor===!1&&G.instanceColor!==null||G.isInstancedMesh&&Be.instancingMorph===!0&&G.morphTexture===null||G.isInstancedMesh&&Be.instancingMorph===!1&&G.morphTexture!==null||Be.envMap!==_e||$.fog===!0&&Be.fog!==oe||Be.numClippingPlanes!==void 0&&(Be.numClippingPlanes!==le.numPlanes||Be.numIntersection!==le.numIntersection)||Be.vertexAlphas!==Oe||Be.vertexTangents!==Qe||Be.morphTargets!==Re||Be.morphNormals!==ot||Be.morphColors!==ut||Be.toneMapping!==en||Be.morphTargetsCount!==lt)&&(ht=!0):(ht=!0,Be.__version=$.version);let Xi=Be.currentProgram;ht===!0&&(Xi=Jh($,U,G));let Ma=!1,hi=!1,Tc=!1;const kt=Xi.getUniforms(),Ti=Be.uniforms;if(Me.useProgram(Xi.program)&&(Ma=!0,hi=!0,Tc=!0),$.id!==S&&(S=$.id,hi=!0),Ma||_!==T){Me.buffers.depth.getReversed()?(ce.copy(T.projectionMatrix),eV(ce),tV(ce),kt.setValue(P,"projectionMatrix",ce)):kt.setValue(P,"projectionMatrix",T.projectionMatrix),kt.setValue(P,"viewMatrix",T.matrixWorldInverse);const ii=kt.map.cameraPosition;ii!==void 0&&ii.setValue(P,ke.setFromMatrixPosition(T.matrixWorld)),nt.logarithmicDepthBuffer&&kt.setValue(P,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial)&&kt.setValue(P,"isOrthographic",T.isOrthographicCamera===!0),_!==T&&(_=T,hi=!0,Tc=!0)}if(G.isSkinnedMesh){kt.setOptional(P,G,"bindMatrix"),kt.setOptional(P,G,"bindMatrixInverse");const Vn=G.skeleton;Vn&&(Vn.boneTexture===null&&Vn.computeBoneTexture(),kt.setValue(P,"boneTexture",Vn.boneTexture,B))}G.isBatchedMesh&&(kt.setOptional(P,G,"batchingTexture"),kt.setValue(P,"batchingTexture",G._matricesTexture,B),kt.setOptional(P,G,"batchingIdTexture"),kt.setValue(P,"batchingIdTexture",G._indirectTexture,B),kt.setOptional(P,G,"batchingColorTexture"),G._colorsTexture!==null&&kt.setValue(P,"batchingColorTexture",G._colorsTexture,B));const Ri=q.morphAttributes;if((Ri.position!==void 0||Ri.normal!==void 0||Ri.color!==void 0)&&Ue.update(G,q,Xi),(hi||Be.receiveShadow!==G.receiveShadow)&&(Be.receiveShadow=G.receiveShadow,kt.setValue(P,"receiveShadow",G.receiveShadow)),$.isMeshGouraudMaterial&&$.envMap!==null&&(Ti.envMap.value=_e,Ti.flipEnvMap.value=_e.isCubeTexture&&_e.isRenderTargetTexture===!1?-1:1),$.isMeshStandardMaterial&&$.envMap===null&&U.environment!==null&&(Ti.envMapIntensity.value=U.environmentIntensity),hi&&(kt.setValue(P,"toneMappingExposure",x.toneMappingExposure),Be.needsLights&&kL(Ti,Tc),oe&&$.fog===!0&&pe.refreshFogUniforms(Ti,oe),pe.refreshMaterialUniforms(Ti,$,D,z,p.state.transmissionRenderTarget[T.id]),Hf.upload(P,ib(Be),Ti,B)),$.isShaderMaterial&&$.uniformsNeedUpdate===!0&&(Hf.upload(P,ib(Be),Ti,B),$.uniformsNeedUpdate=!1),$.isSpriteMaterial&&kt.setValue(P,"center",G.center),kt.setValue(P,"modelViewMatrix",G.modelViewMatrix),kt.setValue(P,"normalMatrix",G.normalMatrix),kt.setValue(P,"modelMatrix",G.matrixWorld),$.isShaderMaterial||$.isRawShaderMaterial){const Vn=$.uniformsGroups;for(let ii=0,Om=Vn.length;ii<Om;ii++){const Eo=Vn[ii];k.update(Eo,Xi),k.bind(Eo,Xi)}}return Xi}function kL(T,U){T.ambientLightColor.needsUpdate=U,T.lightProbe.needsUpdate=U,T.directionalLights.needsUpdate=U,T.directionalLightShadows.needsUpdate=U,T.pointLights.needsUpdate=U,T.pointLightShadows.needsUpdate=U,T.spotLights.needsUpdate=U,T.spotLightShadows.needsUpdate=U,T.rectAreaLights.needsUpdate=U,T.hemisphereLights.needsUpdate=U}function UL(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(T,U,q){Ce.get(T.texture).__webglTexture=U,Ce.get(T.depthTexture).__webglTexture=q;const $=Ce.get(T);$.__hasExternalTextures=!0,$.__autoAllocateDepthBuffer=q===void 0,$.__autoAllocateDepthBuffer||tt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(T,U){const q=Ce.get(T);q.__webglFramebuffer=U,q.__useDefaultFramebuffer=U===void 0};const OL=P.createFramebuffer();this.setRenderTarget=function(T,U=0,q=0){C=T,w=U,M=q;let $=!0,G=null,oe=!1,fe=!1;if(T){const _e=Ce.get(T);if(_e.__useDefaultFramebuffer!==void 0)Me.bindFramebuffer(P.FRAMEBUFFER,null),$=!1;else if(_e.__webglFramebuffer===void 0)B.setupRenderTarget(T);else if(_e.__hasExternalTextures)B.rebindTextures(T,Ce.get(T.texture).__webglTexture,Ce.get(T.depthTexture).__webglTexture);else if(T.depthBuffer){const Re=T.depthTexture;if(_e.__boundDepthTexture!==Re){if(Re!==null&&Ce.has(Re)&&(T.width!==Re.image.width||T.height!==Re.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");B.setupDepthRenderbuffer(T)}}const Oe=T.texture;(Oe.isData3DTexture||Oe.isDataArrayTexture||Oe.isCompressedArrayTexture)&&(fe=!0);const Qe=Ce.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(Array.isArray(Qe[U])?G=Qe[U][q]:G=Qe[U],oe=!0):T.samples>0&&B.useMultisampledRTT(T)===!1?G=Ce.get(T).__webglMultisampledFramebuffer:Array.isArray(Qe)?G=Qe[q]:G=Qe,R.copy(T.viewport),O.copy(T.scissor),N=T.scissorTest}else R.copy(te).multiplyScalar(D).floor(),O.copy(ae).multiplyScalar(D).floor(),N=we;if(q!==0&&(G=OL),Me.bindFramebuffer(P.FRAMEBUFFER,G)&&$&&Me.drawBuffers(T,G),Me.viewport(R),Me.scissor(O),Me.setScissorTest(N),oe){const _e=Ce.get(T.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+U,_e.__webglTexture,q)}else if(fe){const _e=Ce.get(T.texture),Oe=U;P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,_e.__webglTexture,q,Oe)}else if(T!==null&&q!==0){const _e=Ce.get(T.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,_e.__webglTexture,q)}S=-1},this.readRenderTargetPixels=function(T,U,q,$,G,oe,fe){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ye=Ce.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&fe!==void 0&&(ye=ye[fe]),ye){Me.bindFramebuffer(P.FRAMEBUFFER,ye);try{const _e=T.texture,Oe=_e.format,Qe=_e.type;if(!nt.textureFormatReadable(Oe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!nt.textureTypeReadable(Qe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}U>=0&&U<=T.width-$&&q>=0&&q<=T.height-G&&P.readPixels(U,q,$,G,je.convert(Oe),je.convert(Qe),oe)}finally{const _e=C!==null?Ce.get(C).__webglFramebuffer:null;Me.bindFramebuffer(P.FRAMEBUFFER,_e)}}},this.readRenderTargetPixelsAsync=async function(T,U,q,$,G,oe,fe){if(!(T&&T.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ye=Ce.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&fe!==void 0&&(ye=ye[fe]),ye){const _e=T.texture,Oe=_e.format,Qe=_e.type;if(!nt.textureFormatReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!nt.textureTypeReadable(Qe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(U>=0&&U<=T.width-$&&q>=0&&q<=T.height-G){Me.bindFramebuffer(P.FRAMEBUFFER,ye);const Re=P.createBuffer();P.bindBuffer(P.PIXEL_PACK_BUFFER,Re),P.bufferData(P.PIXEL_PACK_BUFFER,oe.byteLength,P.STREAM_READ),P.readPixels(U,q,$,G,je.convert(Oe),je.convert(Qe),0);const ot=C!==null?Ce.get(C).__webglFramebuffer:null;Me.bindFramebuffer(P.FRAMEBUFFER,ot);const ut=P.fenceSync(P.SYNC_GPU_COMMANDS_COMPLETE,0);return P.flush(),await ZG(P,ut,4),P.bindBuffer(P.PIXEL_PACK_BUFFER,Re),P.getBufferSubData(P.PIXEL_PACK_BUFFER,0,oe),P.deleteBuffer(Re),P.deleteSync(ut),oe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(T,U=null,q=0){T.isTexture!==!0&&(ll("WebGLRenderer: copyFramebufferToTexture function signature has changed."),U=arguments[0]||null,T=arguments[1]);const $=Math.pow(2,-q),G=Math.floor(T.image.width*$),oe=Math.floor(T.image.height*$),fe=U!==null?U.x:0,ye=U!==null?U.y:0;B.setTexture2D(T,0),P.copyTexSubImage2D(P.TEXTURE_2D,q,0,0,fe,ye,G,oe),Me.unbindTexture()};const QL=P.createFramebuffer(),GL=P.createFramebuffer();this.copyTextureToTexture=function(T,U,q=null,$=null,G=0,oe=null){T.isTexture!==!0&&(ll("WebGLRenderer: copyTextureToTexture function signature has changed."),$=arguments[0]||null,T=arguments[1],U=arguments[2],oe=arguments[3]||0,q=null),oe===null&&(G!==0?(ll("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),oe=G,G=0):oe=0);let fe,ye,_e,Oe,Qe,Re,ot,ut,en;const Wt=T.isCompressedTexture?T.mipmaps[oe]:T.image;if(q!==null)fe=q.max.x-q.min.x,ye=q.max.y-q.min.y,_e=q.isBox3?q.max.z-q.min.z:1,Oe=q.min.x,Qe=q.min.y,Re=q.isBox3?q.min.z:0;else{const Ri=Math.pow(2,-G);fe=Math.floor(Wt.width*Ri),ye=Math.floor(Wt.height*Ri),T.isDataArrayTexture?_e=Wt.depth:T.isData3DTexture?_e=Math.floor(Wt.depth*Ri):_e=1,Oe=0,Qe=0,Re=0}$!==null?(ot=$.x,ut=$.y,en=$.z):(ot=0,ut=0,en=0);const lt=je.convert(U.format),Be=je.convert(U.type);let xn;U.isData3DTexture?(B.setTexture3D(U,0),xn=P.TEXTURE_3D):U.isDataArrayTexture||U.isCompressedArrayTexture?(B.setTexture2DArray(U,0),xn=P.TEXTURE_2D_ARRAY):(B.setTexture2D(U,0),xn=P.TEXTURE_2D),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,U.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,U.unpackAlignment);const ht=P.getParameter(P.UNPACK_ROW_LENGTH),Xi=P.getParameter(P.UNPACK_IMAGE_HEIGHT),Ma=P.getParameter(P.UNPACK_SKIP_PIXELS),hi=P.getParameter(P.UNPACK_SKIP_ROWS),Tc=P.getParameter(P.UNPACK_SKIP_IMAGES);P.pixelStorei(P.UNPACK_ROW_LENGTH,Wt.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Wt.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Oe),P.pixelStorei(P.UNPACK_SKIP_ROWS,Qe),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Re);const kt=T.isDataArrayTexture||T.isData3DTexture,Ti=U.isDataArrayTexture||U.isData3DTexture;if(T.isDepthTexture){const Ri=Ce.get(T),Vn=Ce.get(U),ii=Ce.get(Ri.__renderTarget),Om=Ce.get(Vn.__renderTarget);Me.bindFramebuffer(P.READ_FRAMEBUFFER,ii.__webglFramebuffer),Me.bindFramebuffer(P.DRAW_FRAMEBUFFER,Om.__webglFramebuffer);for(let Eo=0;Eo<_e;Eo++)kt&&(P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Ce.get(T).__webglTexture,G,Re+Eo),P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Ce.get(U).__webglTexture,oe,en+Eo)),P.blitFramebuffer(Oe,Qe,fe,ye,ot,ut,fe,ye,P.DEPTH_BUFFER_BIT,P.NEAREST);Me.bindFramebuffer(P.READ_FRAMEBUFFER,null),Me.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else if(G!==0||T.isRenderTargetTexture||Ce.has(T)){const Ri=Ce.get(T),Vn=Ce.get(U);Me.bindFramebuffer(P.READ_FRAMEBUFFER,QL),Me.bindFramebuffer(P.DRAW_FRAMEBUFFER,GL);for(let ii=0;ii<_e;ii++)kt?P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Ri.__webglTexture,G,Re+ii):P.framebufferTexture2D(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Ri.__webglTexture,G),Ti?P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Vn.__webglTexture,oe,en+ii):P.framebufferTexture2D(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Vn.__webglTexture,oe),G!==0?P.blitFramebuffer(Oe,Qe,fe,ye,ot,ut,fe,ye,P.COLOR_BUFFER_BIT,P.NEAREST):Ti?P.copyTexSubImage3D(xn,oe,ot,ut,en+ii,Oe,Qe,fe,ye):P.copyTexSubImage2D(xn,oe,ot,ut,Oe,Qe,fe,ye);Me.bindFramebuffer(P.READ_FRAMEBUFFER,null),Me.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else Ti?T.isDataTexture||T.isData3DTexture?P.texSubImage3D(xn,oe,ot,ut,en,fe,ye,_e,lt,Be,Wt.data):U.isCompressedArrayTexture?P.compressedTexSubImage3D(xn,oe,ot,ut,en,fe,ye,_e,lt,Wt.data):P.texSubImage3D(xn,oe,ot,ut,en,fe,ye,_e,lt,Be,Wt):T.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,oe,ot,ut,fe,ye,lt,Be,Wt.data):T.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,oe,ot,ut,Wt.width,Wt.height,lt,Wt.data):P.texSubImage2D(P.TEXTURE_2D,oe,ot,ut,fe,ye,lt,Be,Wt);P.pixelStorei(P.UNPACK_ROW_LENGTH,ht),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Xi),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Ma),P.pixelStorei(P.UNPACK_SKIP_ROWS,hi),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Tc),oe===0&&U.generateMipmaps&&P.generateMipmap(xn),Me.unbindTexture()},this.copyTextureToTexture3D=function(T,U,q=null,$=null,G=0){return T.isTexture!==!0&&(ll("WebGLRenderer: copyTextureToTexture3D function signature has changed."),q=arguments[0]||null,$=arguments[1]||null,T=arguments[2],U=arguments[3],G=arguments[4]||0),ll('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(T,U,q,$,G)},this.initRenderTarget=function(T){Ce.get(T).__webglFramebuffer===void 0&&B.setupRenderTarget(T)},this.initTexture=function(T){T.isCubeTexture?B.setTextureCube(T,0):T.isData3DTexture?B.setTexture3D(T,0):T.isDataArrayTexture||T.isCompressedArrayTexture?B.setTexture2DArray(T,0):B.setTexture2D(T,0),Me.unbindTexture()},this.resetState=function(){w=0,M=0,C=null,Me.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return cr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Ze._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ze._getUnpackColorSpace()}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yu=globalThis,Wp=Yu.trustedTypes,pC=Wp?Wp.createPolicy("lit-html",{createHTML:n=>n}):void 0,uD="$lit$",Vr=`lit$${Math.random().toFixed(9).slice(2)}$`,hD="?"+Vr,t6=`<${hD}>`,ya=document,Rh=()=>ya.createComment(""),Bh=n=>n===null||typeof n!="object"&&typeof n!="function",HE=Array.isArray,n6=n=>HE(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",lg=`[ 	
\f\r]`,$c=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,mC=/-->/g,AC=/>/g,To=RegExp(`>|${lg}(?:([^\\s"'>=/]+)(${lg}*=${lg}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),gC=/'/g,yC=/"/g,dD=/^(?:script|style|textarea|title)$/i,i6=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Lm=i6(1),mc=Symbol.for("lit-noChange"),mn=Symbol.for("lit-nothing"),vC=new WeakMap,ta=ya.createTreeWalker(ya,129);function fD(n,e){if(!HE(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return pC!==void 0?pC.createHTML(e):e}const s6=(n,e)=>{const t=n.length-1,i=[];let s,r=e===2?"<svg>":e===3?"<math>":"",o=$c;for(let a=0;a<t;a++){const l=n[a];let c,u,h=-1,d=0;for(;d<l.length&&(o.lastIndex=d,u=o.exec(l),u!==null);)d=o.lastIndex,o===$c?u[1]==="!--"?o=mC:u[1]!==void 0?o=AC:u[2]!==void 0?(dD.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=To):u[3]!==void 0&&(o=To):o===To?u[0]===">"?(o=s??$c,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?To:u[3]==='"'?yC:gC):o===yC||o===gC?o=To:o===mC||o===AC?o=$c:(o=To,s=void 0);const f=o===To&&n[a+1].startsWith("/>")?" ":"";r+=o===$c?l+t6:h>=0?(i.push(c),l.slice(0,h)+uD+l.slice(h)+Vr+f):l+Vr+(h===-2?a:f)}return[fD(n,r+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class Dh{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[c,u]=s6(e,t);if(this.el=Dh.createElement(c,i),ta.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=ta.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(uD)){const d=u[o++],f=s.getAttribute(h).split(Vr),m=/([.?@])?(.*)/.exec(d);l.push({type:1,index:r,name:m[2],strings:f,ctor:m[1]==="."?o6:m[1]==="?"?a6:m[1]==="@"?l6:Pm}),s.removeAttribute(h)}else h.startsWith(Vr)&&(l.push({type:6,index:r}),s.removeAttribute(h));if(dD.test(s.tagName)){const h=s.textContent.split(Vr),d=h.length-1;if(d>0){s.textContent=Wp?Wp.emptyScript:"";for(let f=0;f<d;f++)s.append(h[f],Rh()),ta.nextNode(),l.push({type:2,index:++r});s.append(h[d],Rh())}}}else if(s.nodeType===8)if(s.data===hD)l.push({type:2,index:r});else{let h=-1;for(;(h=s.data.indexOf(Vr,h+1))!==-1;)l.push({type:7,index:r}),h+=Vr.length-1}r++}}static createElement(e,t){const i=ya.createElement("template");return i.innerHTML=e,i}}function Ac(n,e,t=n,i){var o,a;if(e===mc)return e;let s=i!==void 0?(o=t._$Co)==null?void 0:o[i]:t._$Cl;const r=Bh(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==r&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),r===void 0?s=void 0:(s=new r(n),s._$AT(n,t,i)),i!==void 0?(t._$Co??(t._$Co=[]))[i]=s:t._$Cl=s),s!==void 0&&(e=Ac(n,s._$AS(n,e.values),s,i)),e}class r6{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,s=((e==null?void 0:e.creationScope)??ya).importNode(t,!0);ta.currentNode=s;let r=ta.nextNode(),o=0,a=0,l=i[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new jE(r,r.nextSibling,this,e):l.type===1?c=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(c=new c6(r,this,e)),this._$AV.push(c),l=i[++a]}o!==(l==null?void 0:l.index)&&(r=ta.nextNode(),o++)}return ta.currentNode=ya,s}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}let jE=class pD{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,i,s){this.type=2,this._$AH=mn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Ac(this,e,t),Bh(e)?e===mn||e==null||e===""?(this._$AH!==mn&&this._$AR(),this._$AH=mn):e!==this._$AH&&e!==mc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):n6(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==mn&&Bh(this._$AH)?this._$AA.nextSibling.data=e:this.T(ya.createTextNode(e)),this._$AH=e}$(e){var r;const{values:t,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Dh.createElement(fD(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)==null?void 0:r._$AD)===s)this._$AH.p(t);else{const o=new r6(s,this),a=o.u(this.options);o.p(t),this.T(a),this._$AH=o}}_$AC(e){let t=vC.get(e.strings);return t===void 0&&vC.set(e.strings,t=new Dh(e)),t}k(e){HE(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new pD(this.O(Rh()),this.O(Rh()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,t);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}};class Pm{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,s,r){this.type=1,this._$AH=mn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=mn}_$AI(e,t=this,i,s){const r=this.strings;let o=!1;if(r===void 0)e=Ac(this,e,t,0),o=!Bh(e)||e!==this._$AH&&e!==mc,o&&(this._$AH=e);else{const a=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=Ac(this,a[i+l],t,l),c===mc&&(c=this._$AH[l]),o||(o=!Bh(c)||c!==this._$AH[l]),c===mn?e=mn:e!==mn&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===mn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class o6 extends Pm{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===mn?void 0:e}}let a6=class extends Pm{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==mn)}};class l6 extends Pm{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){if((e=Ac(this,e,t,0)??mn)===mc)return;const i=this._$AH,s=e===mn&&i!==mn||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==mn&&(i===mn||s);s&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class c6{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Ac(this,e)}}const cg=Yu.litHtmlPolyfillSupport;cg==null||cg(Dh,jE),(Yu.litHtmlVersions??(Yu.litHtmlVersions=[])).push("3.3.1");const mD=(n,e,t)=>{const i=(t==null?void 0:t.renderBefore)??e;let s=i._$litPart$;if(s===void 0){const r=(t==null?void 0:t.renderBefore)??null;i._$litPart$=s=new jE(e.insertBefore(Rh(),r),r,void 0,t??{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const la=globalThis;let jf=class extends qo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=mD(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return mc}};var h1;jf._$litElement$=!0,jf.finalized=!0,(h1=la.litElementHydrateSupport)==null||h1.call(la,{LitElement:jf});const ug=la.litElementPolyfillSupport;ug==null||ug({LitElement:jf});(la.litElementVersions??(la.litElementVersions=[])).push("4.2.1");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,gD=AD&&self.XRSession.prototype.requestHitTestSource!=null,hg=self.ResizeObserver!=null,dg=self.IntersectionObserver!=null,yD=gD;(()=>{const n=navigator.userAgent||navigator.vendor||self.opera;let e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(e=!0),e})();const u6=/android/i.test(navigator.userAgent),h6=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,d6=/firefox/i.test(navigator.userAgent),f6=/OculusBrowser/.test(navigator.userAgent),p6=u6&&!d6&&!f6,m6=!!(window.webkit&&window.webkit.messageHandlers),xC=(()=>{if(h6){if(m6)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const n=document.createElement("a");return!!(n.relList&&n.relList.supports&&n.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=n=>n&&n!=="null"?A6(n):null,EC=()=>{if(yD)return;const n=[];throw AD||n.push("WebXR Device API"),gD||n.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${n.join(", ")}`)},A6=n=>new URL(n,window.location.toString()).toString(),g6=(n,e)=>{let t=null;const i=(...s)=>{t==null&&(n(...s),t=self.setTimeout(()=>t=null,e))};return i.flush=()=>{t!=null&&(self.clearTimeout(t),t=null)},i},bC=(n,e)=>{let t=null;return(...i)=>{t!=null&&self.clearTimeout(t),t=self.setTimeout(()=>{t=null,n(...i)},e)}},_s=(n,e,t)=>Math.max(e,Math.min(t,n)),_C=(()=>{const n="model-viewer-debug-mode",e=new RegExp(`[?&]${n}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),y6=(n=0)=>new Promise(e=>setTimeout(e,n)),v6=(n,e,t=null)=>new Promise(i=>{function s(r){(!t||t(r))&&(i(r),n.removeEventListener(e,s))}n.addEventListener(e,s)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ro=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const x6=.5,E6=0,b6=1,_6=1,_u=Symbol("currentEnvironmentMap"),wu=Symbol("currentBackground"),qp=Symbol("updateEnvironment"),$d=Symbol("cancelEnvironmentUpdate"),w6=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=E6,this.shadowSoftness=b6,this.exposure=_6,this.toneMapping="auto",this.skyboxHeight="0",this[e]=null,this[t]=null,this[i]=null}updated(o){super.updated(o),o.has("shadowIntensity")&&(this[se].setShadowIntensity(this.shadowIntensity*x6),this[yn]()),o.has("shadowSoftness")&&(this[se].setShadowSoftness(this.shadowSoftness),this[yn]()),o.has("exposure")&&(this[se].exposure=this.exposure,this[yn]()),o.has("toneMapping")&&(this[se].toneMapping=this.toneMapping==="aces"?C2:this.toneMapping==="agx"?M2:this.toneMapping==="reinhard"?w2:this.toneMapping==="cineon"?S2:this.toneMapping==="linear"?_2:this.toneMapping==="none"?Bs:bh,this[yn]()),(o.has("environmentImage")||o.has("skyboxImage"))&&this[gc]()&&this[qp](),o.has("skyboxHeight")&&(this[se].setGroundedSkybox(),this[yn]())}hasBakedShadow(){return this[se].bakedShadows.size>0}async[(e=_u,t=wu,i=$d,qp)](){const{skyboxImage:o,environmentImage:a}=this;this[$d]!=null&&(this[$d](),this[$d]=null);const{textureUtils:l}=this[gt];if(l==null)return;const c=this[va].beginActivity("environment-update");try{const{environmentMap:u,skybox:h}=await l.generateEnvironmentMapAndSkybox(vD(o),a,d=>c(_s(d,0,1)),this.withCredentials);this[_u]!==u&&(this[_u]=u,this.dispatchEvent(new CustomEvent("environment-change"))),h!=null?this[wu]=h.name===u.name?u:h:this[wu]=null,this[se].setEnvironmentAndSkybox(this[_u],this[wu])}catch(u){if(u instanceof Error)throw this[se].setEnvironmentAndSkybox(null,null),u}finally{c(1)}}}return Ro([Le({type:String,attribute:"environment-image"})],s.prototype,"environmentImage",void 0),Ro([Le({type:String,attribute:"skybox-image"})],s.prototype,"skyboxImage",void 0),Ro([Le({type:Number,attribute:"shadow-intensity"})],s.prototype,"shadowIntensity",void 0),Ro([Le({type:Number,attribute:"shadow-softness"})],s.prototype,"shadowSoftness",void 0),Ro([Le({type:Number})],s.prototype,"exposure",void 0),Ro([Le({type:String,attribute:"tone-mapping"})],s.prototype,"toneMapping",void 0),Ro([Le({type:String,attribute:"skybox-height"})],s.prototype,"skyboxHeight",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=Lm`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=Lm`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=Lm`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=Lm`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${M6}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${C6}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${S6}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,T6=n=>{mD(I6,n)};var wC=function(){var n="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var s=WebAssembly.validate(t)?e:n,r,o=WebAssembly.instantiate(a(s),{}).then(function(p){r=p.instance,r.exports.__wasm_call_ctors()});function a(p){for(var y=new Uint8Array(p.length),v=0;v<p.length;++v){var x=p.charCodeAt(v);y[v]=x>96?x-97:x>64?x-39:x+4}for(var E=0,v=0;v<p.length;++v)y[E++]=y[v]<60?i[y[v]]:(y[v]-60)*64+y[++v];return y.buffer.slice(0,E)}function l(p,y,v,x,E,w){var M=r.exports.sbrk,C=v+3&-4,S=M(C*x),_=M(E.length),R=new Uint8Array(r.exports.memory.buffer);R.set(E,_);var O=p(S,v,x,_,E.length);if(O==0&&w&&w(S,C,x),y.set(R.subarray(S,S+v*x)),M(S-M(0)),O!=0)throw new Error("Malformed buffer data: "+O)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],d=0;function f(p){var y={object:new Worker(p),pending:0,requests:{}};return y.object.onmessage=function(v){var x=v.data;y.pending-=x.count,y.requests[x.id][x.action](x.value),delete y.requests[x.id]},y}function m(p){for(var y="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(a(s))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+l.toString()+A.toString(),v=new Blob([y],{type:"text/javascript"}),x=URL.createObjectURL(v),E=0;E<p;++E)h[E]=f(x);URL.revokeObjectURL(x)}function g(p,y,v,x,E){for(var w=h[0],M=1;M<h.length;++M)h[M].pending<w.pending&&(w=h[M]);return new Promise(function(C,S){var _=new Uint8Array(v),R=d++;w.pending+=p,w.requests[R]={resolve:C,reject:S},w.object.postMessage({id:R,count:p,size:y,source:_,mode:x,filter:E},[_.buffer])})}function A(p){o.then(function(){var y=p.data;try{var v=new Uint8Array(y.count*y.size);l(r.exports[y.mode],v,y.count,y.size,y.source,r.exports[y.filter]),self.postMessage({id:y.id,count:y.count,action:"resolve",value:v},[v.buffer])}catch(x){self.postMessage({id:y.id,count:y.count,action:"reject",value:x})}})}return{ready:o,supported:!0,useWorkers:function(p){m(p)},decodeVertexBuffer:function(p,y,v,x,E){l(r.exports.meshopt_decodeVertexBuffer,p,y,v,x,r.exports[c[E]])},decodeIndexBuffer:function(p,y,v,x){l(r.exports.meshopt_decodeIndexBuffer,p,y,v,x)},decodeIndexSequence:function(p,y,v,x){l(r.exports.meshopt_decodeIndexSequence,p,y,v,x)},decodeGltfBuffer:function(p,y,v,x,E,w){l(r.exports[u[E]],p,y,v,x,r.exports[c[w]])},decodeGltfBufferAsync:function(p,y,v,x,E){return h.length>0?g(p,y,v,u[x],c[E]):o.then(function(){var w=new Uint8Array(p*y);return l(r.exports[u[x]],w,p,y,v,r.exports[c[E]]),w})}}}();const fg=new WeakMap;class R6 extends Os{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new mr(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{this.parse(o,t,s)},i,s)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,St,i).catch(i)}decodeDracoFile(e,t,i,s,r=Mt,o=()=>{}){const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){const i=JSON.stringify(t);if(fg.has(e)){const l=fg.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((c,u)=>{s._callbacks[r]={resolve:c,reject:u},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),fg.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new ui;e.index&&t.setIndex(new Ft(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,o=s.array,a=s.itemSize,l=new Ft(o,a);r==="color"&&(this._assignVertexColorSpace(l,s.vertexColorSpace),l.normalized=!(o instanceof Float32Array)),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==St)return;const i=new Ie;for(let s=0,r=e.count;s<r;s++)i.fromBufferAttribute(e,s),Ze.toWorkingColorSpace(i,St),e.setXYZ(s,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new mr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=B6.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function B6(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const h=u.draco,d=new h.Decoder;try{const f=t(h,d,new Int8Array(l),c),m=f.attributes.map(g=>g.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{h.destroy(d)}});break}};function t(o,a,l,c){const u=c.attributeIDs,h=c.attributeTypes;let d,f;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)d=new o.Mesh,f=a.DecodeArrayToMesh(l,l.byteLength,d);else if(m===o.POINT_CLOUD)d=new o.PointCloud,f=a.DecodeArrayToPointCloud(l,l.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const g={index:null,attributes:[]};for(const A in u){const p=self[h[A]];let y,v;if(c.useUniqueIDs)v=u[A],y=a.GetAttributeByUniqueId(d,v);else{if(v=a.GetAttributeId(d,o[u[A]]),v===-1)continue;y=a.GetAttribute(d,v)}const x=s(o,a,d,A,p,y);A==="color"&&(x.vertexColorSpace=c.vertexColorSpace),g.attributes.push(x)}return m===o.TRIANGULAR_MESH&&(g.index=i(o,a,d)),o.destroy(d),g}function i(o,a,l){const u=l.num_faces()*3,h=u*4,d=o._malloc(h);a.GetTrianglesUInt32Array(l,h,d);const f=new Uint32Array(o.HEAPF32.buffer,d,u).slice();return o._free(d),{array:f,itemSize:1}}function s(o,a,l,c,u,h){const d=h.num_components(),m=l.num_points()*d,g=m*u.BYTES_PER_ELEMENT,A=r(o,u),p=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,h,A,g,p);const y=new u(o.HEAPF32.buffer,p,m).slice();return o._free(p),{name:c,array:y,itemSize:d}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}function SC(n,e){if(e===SG)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===vv||e===P2){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===vv)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class D6 extends Os{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new k6(t)}),this.register(function(t){return new U6(t)}),this.register(function(t){return new q6(t)}),this.register(function(t){return new $6(t)}),this.register(function(t){return new X6(t)}),this.register(function(t){return new Q6(t)}),this.register(function(t){return new G6(t)}),this.register(function(t){return new V6(t)}),this.register(function(t){return new z6(t)}),this.register(function(t){return new F6(t)}),this.register(function(t){return new H6(t)}),this.register(function(t){return new O6(t)}),this.register(function(t){return new W6(t)}),this.register(function(t){return new j6(t)}),this.register(function(t){return new P6(t)}),this.register(function(t){return new K6(t)}),this.register(function(t){return new Y6(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Ku.extractUrlBase(e);o=Ku.resolveURL(c,this.path)}else o=Ku.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new mr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===xD){try{o[Ke.KHR_BINARY_GLTF]=new J6(e)}catch(h){s&&s(h);return}r=JSON.parse(o[Ke.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new hj(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const h=r.extensionsUsed[u],d=r.extensionsRequired||[];switch(h){case Ke.KHR_MATERIALS_UNLIT:o[h]=new N6;break;case Ke.KHR_DRACO_MESH_COMPRESSION:o[h]=new Z6(r,this.dracoLoader);break;case Ke.KHR_TEXTURE_TRANSFORM:o[h]=new ej;break;case Ke.KHR_MESH_QUANTIZATION:o[h]=new tj;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function L6(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ke={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class P6{constructor(e){this.parser=e,this.name=Ke.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ie(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Mt);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new iD(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new nD(u),c.distance=h;break;case"spot":c=new JV(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,ir(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}let N6=class{constructor(){this.name=Ke.KHR_MATERIALS_UNLIT}getMaterialType(){return Gi}extendParams(e,t,i){const s=[];e.color=new Ie(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Mt),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,St))}return Promise.all(s)}},F6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}},k6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ve(a,a)}return Promise.all(r)}},U6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}},O6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}},Q6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ie(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Mt)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,St)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}},G6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}},V6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ie().setRGB(a[0],a[1],a[2],Mt),Promise.all(r)}},z6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}},H6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ie().setRGB(a[0],a[1],a[2],Mt),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,St)),Promise.all(r)}},j6=class{constructor(e){this.parser=e,this.name=Ke.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}},W6=class{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}};class q6{constructor(e){this.parser=e,this.name=Ke.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class $6{constructor(e){this.parser=e,this.name=Ke.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class X6{constructor(e){this.parser=e,this.name=Ke.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class K6{constructor(e){this.name=Ke.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,u=s.count,h=s.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,s.mode,s.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(f),u,h,d,s.mode,s.filter),f})})}else return null}}let Y6=class{constructor(e){this.name=Ke.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==Ni.TRIANGLES&&c.mode!==Ni.TRIANGLE_STRIP&&c.mode!==Ni.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],d=c[0].count,f=[];for(const m of h){const g=new Fe,A=new L,p=new ei,y=new L(1,1,1),v=new TV(m.geometry,m.material,d);for(let x=0;x<d;x++)l.TRANSLATION&&A.fromBufferAttribute(l.TRANSLATION,x),l.ROTATION&&p.fromBufferAttribute(l.ROTATION,x),l.SCALE&&y.fromBufferAttribute(l.SCALE,x),v.setMatrixAt(x,g.compose(A,p,y));for(const x in l)if(x==="_COLOR_0"){const E=l[x];v.instanceColor=new bv(E.array,E.itemSize,E.normalized)}else x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&m.geometry.setAttribute(x,l[x]);bt.prototype.copy.call(v,m),this.parser.assignFinalMaterial(v),f.push(v)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}};const xD="glTF",Xc=12,CC={JSON:1313821514,BIN:5130562};class J6{constructor(e){this.name=Ke.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Xc),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==xD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Xc,r=new DataView(e,Xc);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===CC.JSON){const c=new Uint8Array(e,Xc+o,a);this.content=i.decode(c)}else if(l===CC.BIN){const c=Xc+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Z6{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ke.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=Mv[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=Mv[u]||u.toLowerCase();if(o[u]!==void 0){const d=i.accessors[e.attributes[u]],f=jl[d.componentType];c[h]=f.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(h,d){s.decodeDracoFile(u,function(f){for(const m in f.attributes){const g=f.attributes[m],A=l[m];A!==void 0&&(g.normalized=A)}h(f)},a,c,Mt,d)})})}}class ej{constructor(){this.name=Ke.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class tj{constructor(){this.name=Ke.KHR_MESH_QUANTIZATION}}class ED extends qh{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=s-t,h=(i-t)/u,d=h*h,f=d*h,m=e*c,g=m-c,A=-2*f+3*d,p=f-d,y=1-A,v=p-d+h;for(let x=0;x!==a;x++){const E=o[g+x+a],w=o[g+x+l]*u,M=o[m+x+a],C=o[m+x]*u;r[x]=y*E+v*w+A*M+p*C}return r}}const nj=new ei;class ij extends ED{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return nj.fromArray(r).normalize().toArray(r),r}}const Ni={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},jl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},MC={9728:an,9729:et,9984:Hh,9985:oa,9986:$r,9987:Yn},IC={33071:Xt,33648:Aa,10497:ps},pg={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Mv={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Rr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},sj={CUBICSPLINE:void 0,LINEAR:cc,STEP:lc},mg={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function rj(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Th({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:fs})),n.DefaultMaterial}function Bo(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function ir(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function oj(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(s=!0),h.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(d)}if(s){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(d)}if(r){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2];return i&&(n.morphAttributes.position=u),s&&(n.morphAttributes.normal=h),r&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function aj(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lj(n){let e;const t=n.extensions&&n.extensions[Ke.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Ag(t.attributes):e=n.indices+":"+Ag(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+Ag(n.targets[i]);return e}function Ag(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Iv(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function cj(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const uj=new Fe;class hj{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new L6,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);s=i&&l?parseInt(l[1],10):-1,r=a.indexOf("Firefox")>-1,o=r?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&o<98?this.textureLoader=new tD(this.options.manager):this.textureLoader=new iz(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new mr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return Bo(r,a,s),ir(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())r(u,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ke.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(Ku.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=pg[s.type],a=jl[s.componentType],l=s.normalized===!0,c=new a(s.count*o);return Promise.resolve(new Ft(c,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=pg[s.type],c=jl[s.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=s.byteOffset||0,f=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,m=s.normalized===!0;let g,A;if(f&&f!==h){const p=Math.floor(d/f),y="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+p+":"+s.count;let v=t.cache.get(y);v||(g=new c(a,p*f,s.count*f/u),v=new wV(g,f/u),t.cache.add(y,v)),A=new FE(v,l,d%f/u,m)}else a===null?g=new c(s.count*l):g=new c(a,d,s.count*l),A=new Ft(g,l,m);if(s.sparse!==void 0){const p=pg.SCALAR,y=jl[s.sparse.indices.componentType],v=s.sparse.indices.byteOffset||0,x=s.sparse.values.byteOffset||0,E=new y(o[1],v,s.sparse.count*p),w=new c(o[2],x,s.sparse.count*l);a!==null&&(A=new Ft(A.array.slice(),A.itemSize,A.normalized)),A.normalized=!1;for(let M=0,C=E.length;M<C;M++){const S=E[M];if(A.setX(S,w[M*l]),l>=2&&A.setY(S,w[M*l+1]),l>=3&&A.setZ(S,w[M*l+2]),l>=4&&A.setW(S,w[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}A.normalized=m}return A})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const d=(r.samplers||{})[o.sampler]||{};return u.magFilter=MC[d.magFilter]||et,u.minFilter=MC[d.minFilter]||Yn,u.wrapS=IC[d.wrapS]||ps,u.wrapT=IC[d.wrapT]||ps,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==an&&u.minFilter!==et,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let m=d;t.isImageBitmapLoader===!0&&(m=function(g){const A=new Nt(g);A.needsUpdate=!0,d(A)}),t.load(Ku.resolveURL(h,r.path),m,void 0,f)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),ir(h,o),h.userData.mimeType=o.mimeType||cj(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[Ke.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Ke.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[Ke.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new $2,hs.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new q2,hs.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Th}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[Ke.KHR_MATERIALS_UNLIT]){const h=s[Ke.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,r,t))}else{const h=r.pbrMetallicRoughness||{};if(a.color=new Ie(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],Mt),a.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,St)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=gn);const u=r.alphaMode||mg.OPAQUE;if(u===mg.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===mg.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Gi&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new Ve(1,1),r.normalTexture.scale!==void 0)){const h=r.normalTexture.scale;a.normalScale.set(h,h)}if(r.occlusionTexture!==void 0&&o!==Gi&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Gi){const h=r.emissiveFactor;a.emissive=new Ie().setRGB(h[0],h[1],h[2],Mt)}return r.emissiveTexture!==void 0&&o!==Gi&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,St)),Promise.all(c).then(function(){const h=new o(a);return r.name&&(h.name=r.name),ir(h,r),t.associations.set(h,{materials:e}),r.extensions&&Bo(s,h,r),h})}createUniqueName(e){const t=st.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[Ke.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return TC(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=lj(c),h=s[u];if(h)o.push(h.promise);else{let d;c.extensions&&c.extensions[Ke.KHR_DRACO_MESH_COMPRESSION]?d=r(c):d=TC(new ui,c,t),s[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?rj(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let f=0,m=u.length;f<m;f++){const g=u[f],A=o[f];let p;const y=c[f];if(A.mode===Ni.TRIANGLES||A.mode===Ni.TRIANGLE_STRIP||A.mode===Ni.TRIANGLE_FAN||A.mode===void 0)p=r.isSkinnedMesh===!0?new CV(g,y):new xt(g,y),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),A.mode===Ni.TRIANGLE_STRIP?p.geometry=SC(p.geometry,P2):A.mode===Ni.TRIANGLE_FAN&&(p.geometry=SC(p.geometry,vv));else if(A.mode===Ni.LINES)p=new DV(g,y);else if(A.mode===Ni.LINE_STRIP)p=new Ih(g,y);else if(A.mode===Ni.LINE_LOOP)p=new LV(g,y);else if(A.mode===Ni.POINTS)p=new PV(g,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(p.geometry.morphAttributes).length>0&&aj(p,r),p.name=t.createUniqueName(r.name||"mesh_"+e),ir(p,r),A.extensions&&Bo(s,p,A),t.assignFinalMaterial(p),h.push(p)}for(let f=0,m=h.length;f<m;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(h.length===1)return r.extensions&&Bo(s,h[0],r),h[0];const d=new Kr;r.extensions&&Bo(s,d,r),t.associations.set(d,{meshes:e});for(let f=0,m=h.length;f<m;f++)d.add(h[f]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new _n(zp.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new Cc(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),ir(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const d=new Fe;r!==null&&d.fromArray(r.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new kE(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let h=0,d=s.channels.length;h<d;h++){const f=s.channels[h],m=s.samplers[f.sampler],g=f.target,A=g.node,p=s.parameters!==void 0?s.parameters[m.input]:m.input,y=s.parameters!==void 0?s.parameters[m.output]:m.output;g.node!==void 0&&(o.push(this.getDependency("node",A)),a.push(this.getDependency("accessor",p)),l.push(this.getDependency("accessor",y)),c.push(m),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const d=h[0],f=h[1],m=h[2],g=h[3],A=h[4],p=[];for(let y=0,v=d.length;y<v;y++){const x=d[y],E=f[y],w=m[y],M=g[y],C=A[y];if(x===void 0)continue;x.updateMatrix&&x.updateMatrix();const S=i._createAnimationTracks(x,E,w,M,C);if(S)for(let _=0;_<S.length;_++)p.push(S[_])}return new wv(r,void 0,p)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],d=c[2];d!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(d,uj)});for(let f=0,m=h.length;f<m;f++)u.add(h[f]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(r.isBone===!0?u=new W2:c.length>1?u=new Kr:c.length===1?u=c[0]:u=new bt,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(r.name&&(u.userData.name=r.name,u.name=o),ir(u,r),r.extensions&&Bo(i,u,r),r.matrix!==void 0){const h=new Fe;h.fromArray(r.matrix),u.applyMatrix4(h)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new Kr;i.name&&(r.name=s.createUniqueName(i.name)),ir(r,i),i.extensions&&Bo(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)r.add(l[u]);const c=u=>{const h=new Map;for(const[d,f]of s.associations)(d instanceof hs||d instanceof Nt)&&h.set(d,f);return u.traverse(d=>{const f=s.associations.get(d);f!=null&&h.set(d,f)}),h};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];Rr[r.path]===Rr.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let c;switch(Rr[r.path]){case Rr.weights:c=dc;break;case Rr.rotation:c=fc;break;case Rr.position:case Rr.scale:c=pc;break;default:switch(i.itemSize){case 1:c=dc;break;case 2:case 3:default:c=pc;break}break}const u=s.interpolation!==void 0?sj[s.interpolation]:cc,h=this._getArrayFromAccessor(i);for(let d=0,f=l.length;d<f;d++){const m=new c(l[d]+"."+Rr[r.path],t.array,h,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Iv(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof fc?ij:ED;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function dj(n,e,t){const i=e.attributes,s=new Kn;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new L(l[0],l[1],l[2]),new L(c[0],c[1],c[2])),a.normalized){const u=Iv(jl[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new L,l=new L;for(let c=0,u=r.length;c<u;c++){const h=r[c];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],f=d.min,m=d.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),d.normalized){const g=Iv(jl[d.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new qi;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function TC(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=Mv[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return Ze.workingColorSpace!==Mt&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ze.workingColorSpace}" not supported.`),ir(n,e),dj(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?oj(n,e.targets,t):n})}class fj{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:s,msg:r,transfer:o}=this.queue.shift();this.workersResolve[e]=s,this.workers[e].postMessage(r,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{const s=this._getIdleWorker();s!==-1?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=i,this.workers[s].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const pj=0,RC=2,mj=1,BC=2,Aj=0,gj=1,yj=10,vj=0,bD=9,_D=15,wD=16,SD=22,CD=37,MD=43,ID=76,TD=83,RD=97,BD=100,DD=103,LD=109,PD=165,ND=166,WE=1000066e3;class xj{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Kc{constructor(e,t,i,s){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=s,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const i=this._offset;let s=0;for(;this._dataView.getUint8(this._offset)!==t&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,s)}}const Hn=[171,75,84,88,32,50,48,187,13,10,26,10];function DC(n){return new TextDecoder().decode(n)}function Ej(n){const e=new Uint8Array(n.buffer,n.byteOffset,Hn.length);if(e[0]!==Hn[0]||e[1]!==Hn[1]||e[2]!==Hn[2]||e[3]!==Hn[3]||e[4]!==Hn[4]||e[5]!==Hn[5]||e[6]!==Hn[6]||e[7]!==Hn[7]||e[8]!==Hn[8]||e[9]!==Hn[9]||e[10]!==Hn[10]||e[11]!==Hn[11])throw new Error("Missing KTX 2.0 identifier.");const t=new xj,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new Kc(n,Hn.length,i,!0);t.vkFormat=s._nextUint32(),t.typeSize=s._nextUint32(),t.pixelWidth=s._nextUint32(),t.pixelHeight=s._nextUint32(),t.pixelDepth=s._nextUint32(),t.layerCount=s._nextUint32(),t.faceCount=s._nextUint32();const r=s._nextUint32();t.supercompressionScheme=s._nextUint32();const o=s._nextUint32(),a=s._nextUint32(),l=s._nextUint32(),c=s._nextUint32(),u=s._nextUint64(),h=s._nextUint64(),d=new Kc(n,Hn.length+i,3*r*8,!0);for(let z=0;z<r;z++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const f=new Kc(n,o,a,!0),m={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},g=(m.descriptorBlockSize/4-6)/4;for(let z=0;z<g;z++){const D={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&D.channelType?(D.sampleLower=f._nextInt32(),D.sampleUpper=f._nextInt32()):(D.sampleLower=f._nextUint32(),D.sampleUpper=f._nextUint32()),m.samples[z]=D}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(m);const A=new Kc(n,l,c,!0);for(;A._offset<c;){const z=A._nextUint32(),D=A._scan(z),j=DC(D);if(t.keyValue[j]=A._nextUint8Array(z-D.byteLength-1),j.match(/^ktx/i)){const K=DC(t.keyValue[j]);t.keyValue[j]=K.substring(0,K.lastIndexOf("\0"))}A._skip(z%4?4-z%4:0)}if(h<=0)return t;const p=new Kc(n,u,h,!0),y=p._nextUint16(),v=p._nextUint16(),x=p._nextUint32(),E=p._nextUint32(),w=p._nextUint32(),M=p._nextUint32(),C=[];for(let z=0;z<r;z++)C.push({imageFlags:p._nextUint32(),rgbSliceByteOffset:p._nextUint32(),rgbSliceByteLength:p._nextUint32(),alphaSliceByteOffset:p._nextUint32(),alphaSliceByteLength:p._nextUint32()});const S=u+p._offset,_=S+x,R=_+E,O=R+w,N=new Uint8Array(n.buffer,n.byteOffset+S,x),F=new Uint8Array(n.buffer,n.byteOffset+_,E),H=new Uint8Array(n.buffer,n.byteOffset+R,w),Q=new Uint8Array(n.buffer,n.byteOffset+O,M);return t.globalData={endpointCount:y,selectorCount:v,imageDescs:C,endpointsData:N,selectorsData:F,tablesData:H,extendedData:Q},t}let gg,tr,Tv;const yg={env:{emscripten_notify_memory_growth:function(n){Tv=new Uint8Array(tr.exports.memory.buffer)}}};class bj{init(){return gg||(gg=typeof fetch<"u"?fetch("data:application/wasm;base64,"+LC).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,yg)).then(this._init):WebAssembly.instantiate(Buffer.from(LC,"base64"),yg).then(this._init),gg)}_init(e){tr=e.instance,yg.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!tr)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,s=tr.exports.malloc(i);Tv.set(e,s),t=t||Number(tr.exports.ZSTD_findDecompressedSize(s,i));const r=tr.exports.malloc(t),o=tr.exports.ZSTD_decompress(r,t,s,i),a=Tv.slice(r,r+o);return tr.exports.free(s),tr.exports.free(r),a}}const LC="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",_j="display-p3",wj="display-p3-linear",vg=new WeakMap;let xg=0,Eg;class Oi extends Os{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new fj,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new mr(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),i=new mr(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const s=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,s]).then(([r,o])=>{const a=Oi.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(Oi.EngineFormat),"let _EngineType = "+JSON.stringify(Oi.EngineType),"let _TranscoderFormat = "+JSON.stringify(Oi.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Oi.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=o,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),c})}),xg>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),xg++}return this.transcoderPending}load(e,t,i,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new mr(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,o=>{this.parse(o,t,s)},i,s)}parse(e,t,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(vg.has(e))return vg.get(e).promise.then(t).catch(i);this._createTexture(e).then(s=>t?t(s):null).catch(i)}_createTextureFrom(e,t){const{type:i,error:s,data:{faces:r,width:o,height:a,format:l,type:c,dfdFlags:u}}=e;if(i==="error")return Promise.reject(s);let h;if(t.faceCount===6)h=new kV(r,l,c);else{const d=r[0].mipmaps;h=t.layerCount>1?new FV(d,o,a,t.layerCount,l,c):new aa(d,o,a,l,c)}return h.minFilter=r[0].mipmaps.length===1?et:Yn,h.magFilter=et,h.generateMipmaps=!1,h.needsUpdate=!0,h.colorSpace=FD(t),h.premultiplyAlpha=!!(u&mj),h}async _createTexture(e,t={}){const i=Ej(new Uint8Array(e)),s=i.vkFormat===WE&&i.dataFormatDescriptor[0].colorModel===167;if(!(i.vkFormat===vj||s&&!this.workerConfig.astcHDRSupported))return Cj(i);const o=t,a=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:o},[e])).then(l=>this._createTextureFrom(l.data,i));return vg.set(e,{promise:a}),a}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),xg--,this}}Oi.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2};Oi.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25};Oi.EngineFormat={RGBAFormat:Pt,RGBA_ASTC_4x4_Format:wh,RGB_BPTC_UNSIGNED_Format:Up,RGBA_BPTC_Format:qu,RGBA_ETC2_EAC_Format:kp,RGBA_PVRTC_4BPPV1_Format:Pp,RGBA_S3TC_DXT5_Format:Wu,RGB_ETC1_Format:Np,RGB_ETC2_Format:Fp,RGB_PVRTC_4BPPV1_Format:Lp,RGBA_S3TC_DXT1_Format:ju};Oi.EngineType={UnsignedByteType:Jt,HalfFloatType:rn,FloatType:Kt};Oi.BasisWorker=function(){let n,e,t;const i=_EngineFormat,s=_EngineType,r=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",function(m){const g=m.data;switch(g.type){case"init":n=g.config,a(g.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:A,buffers:p,width:y,height:v,hasAlpha:x,format:E,type:w,dfdFlags:M}=l(g.buffer);self.postMessage({type:"transcode",id:g.id,data:{faces:A,width:y,height:v,hasAlpha:x,format:E,type:w,dfdFlags:M}},p)}catch(A){console.error(A),self.postMessage({type:"error",id:g.id,error:A.message})}});break}});function a(m){e=new Promise(g=>{t={wasmBinary:m,onRuntimeInitialized:g},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function l(m){const g=new t.KTX2File(new Uint8Array(m));function A(){g.close(),g.delete()}if(!g.isValid())throw A(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let p;if(g.isUASTC())p=o.UASTC;else if(g.isETC1S())p=o.ETC1S;else if(g.isHDR())p=o.UASTC_HDR;else throw new Error("THREE.KTX2Loader: Unknown Basis encoding");const y=g.getWidth(),v=g.getHeight(),x=g.getLayers()||1,E=g.getLevels(),w=g.getFaces(),M=g.getHasAlpha(),C=g.getDFDFlags(),{transcoderFormat:S,engineFormat:_,engineType:R}=h(p,y,v,M);if(!y||!v||!E)throw A(),new Error("THREE.KTX2Loader:	Invalid texture");if(!g.startTranscoding())throw A(),new Error("THREE.KTX2Loader: .startTranscoding failed");const O=[],N=[];for(let F=0;F<w;F++){const H=[];for(let Q=0;Q<E;Q++){const z=[];let D,j;for(let te=0;te<x;te++){const ae=g.getImageLevelInfo(Q,te,F);F===0&&Q===0&&te===0&&(ae.origWidth%4!==0||ae.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),E>1?(D=ae.origWidth,j=ae.origHeight):(D=ae.width,j=ae.height);let we=new Uint8Array(g.getImageTranscodedSizeInBytes(Q,te,0,S));const X=g.transcodeImage(we,Q,te,F,S,0,-1,-1);if(R===s.HalfFloatType&&(we=new Uint16Array(we.buffer,we.byteOffset,we.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!X)throw A(),new Error("THREE.KTX2Loader: .transcodeImage failed.");z.push(we)}const K=f(z);H.push({data:K,width:D,height:j}),N.push(K.buffer)}O.push({mipmaps:H,width:y,height:v,format:_,type:R})}return A(),{faces:O,buffers:N,width:y,height:v,hasAlpha:M,dfdFlags:C,format:_,type:R}}const c=[{if:"astcSupported",basisFormat:[o.UASTC],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[s.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[s.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[s.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[s.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[s.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[s.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[o.UASTC_HDR],transcoderFormat:[r.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[s.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.RGBA32,r.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[s.UnsignedByteType,s.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[o.UASTC_HDR],transcoderFormat:[r.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[s.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],u={[o.ETC1S]:c.filter(m=>m.basisFormat.includes(o.ETC1S)).sort((m,g)=>m.priorityUASTC-g.priorityUASTC),[o.UASTC]:c.filter(m=>m.basisFormat.includes(o.UASTC)).sort((m,g)=>m.priorityUASTC-g.priorityUASTC),[o.UASTC_HDR]:c.filter(m=>m.basisFormat.includes(o.UASTC_HDR)).sort((m,g)=>m.priorityHDR-g.priorityHDR)};function h(m,g,A,p){const y=u[m];for(let v=0;v<y.length;v++){const x=y[v];if(x.if&&!n[x.if]||!x.basisFormat.includes(m)||p&&x.transcoderFormat.length<2||x.needsPowerOfTwo&&!(d(g)&&d(A)))continue;const E=x.transcoderFormat[p?1:0],w=x.engineFormat[p?1:0],M=x.engineType[0];return{transcoderFormat:E,engineFormat:w,engineType:M}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}function d(m){return m<=2?!0:(m&m-1)===0&&m!==0}function f(m){if(m.length===1)return m[0];let g=0;for(let y=0;y<m.length;y++){const v=m[y];g+=v.byteLength}const A=new Uint8Array(g);let p=0;for(let y=0;y<m.length;y++){const v=m[y];A.set(v,p),p+=v.byteLength}return A}};const Sj=new Set([Pt,ea,Xr]),bg={[LD]:Pt,[RD]:Pt,[CD]:Pt,[MD]:Pt,[DD]:ea,[TD]:ea,[wD]:ea,[SD]:ea,[BD]:Xr,[ID]:Xr,[_D]:Xr,[bD]:Xr,[WE]:wh,[ND]:Sh,[PD]:Sh},_g={[LD]:Kt,[RD]:rn,[CD]:Jt,[MD]:Jt,[DD]:Kt,[TD]:rn,[wD]:Jt,[SD]:Jt,[BD]:Kt,[ID]:rn,[_D]:Jt,[bD]:Jt,[WE]:rn,[ND]:Jt,[PD]:Jt};async function Cj(n){const{vkFormat:e}=n;if(bg[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;n.supercompressionScheme===RC&&(Eg||(Eg=new Promise(async r=>{const o=new bj;await o.init(),r(o)})),t=await Eg);const i=[];for(let r=0;r<n.levels.length;r++){const o=Math.max(1,n.pixelWidth>>r),a=Math.max(1,n.pixelHeight>>r),l=n.pixelDepth?Math.max(1,n.pixelDepth>>r):0,c=n.levels[r];let u;if(n.supercompressionScheme===pj)u=c.levelData;else if(n.supercompressionScheme===RC)u=t.decode(c.levelData,c.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let h;_g[e]===Kt?h=new Float32Array(u.buffer,u.byteOffset,u.byteLength/Float32Array.BYTES_PER_ELEMENT):_g[e]===rn?h=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/Uint16Array.BYTES_PER_ELEMENT):h=u,i.push({data:h,width:o,height:a,depth:l})}let s;if(Sj.has(bg[e]))s=n.pixelDepth===0?new Wh(i[0].data,n.pixelWidth,n.pixelHeight):new O2(i[0].data,n.pixelWidth,n.pixelHeight,n.pixelDepth);else{if(n.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");s=new aa(i,n.pixelWidth,n.pixelHeight),s.minFilter=i.length===1?et:Yn,s.magFilter=et}return s.mipmaps=i,s.type=_g[e],s.format=bg[e],s.colorSpace=FD(n),s.needsUpdate=!0,Promise.resolve(s)}function FD(n){const e=n.dataFormatDescriptor[0];return e.colorPrimaries===gj?e.transferFunction===BC?St:Mt:e.colorPrimaries===yj?e.transferFunction===BC?_j:wj:(e.colorPrimaries===Aj||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),Ui)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PC,NC;const es=Symbol("retainerCount"),qs=Symbol("recentlyUsed"),Xd=Symbol("evict"),Yc=Symbol("evictionThreshold"),wg=Symbol("cache");class Mj{constructor(e,t=5){this[PC]=new Map,this[NC]=[],this[wg]=e,this[Yc]=t}set evictionThreshold(e){this[Yc]=e,this[Xd]()}get evictionThreshold(){return this[Yc]}get cache(){return this[wg]}retainerCount(e){return this[es].get(e)||0}reset(){this[es].clear(),this[qs]=[]}retain(e){this[es].has(e)||this[es].set(e,0),this[es].set(e,this[es].get(e)+1);const t=this[qs].indexOf(e);t!==-1&&this[qs].splice(t,1),this[qs].unshift(e),this[Xd]()}release(e){this[es].has(e)&&this[es].set(e,Math.max(this[es].get(e)-1,0)),this[Xd]()}[(PC=es,NC=qs,Xd)](){if(!(this[qs].length<this[Yc]))for(let e=this[qs].length-1;e>=this[Yc];--e){const t=this[qs][e];this[es].get(t)===0&&(this[wg].delete(t),this[qs].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=n=>{const e=[],t=new Set;for(const i of n){let s=i,r=0;for(;t.has(s);)s=i+"."+ ++r;t.add(s),e.push(s)}return e},Tj=n=>{const e=new Map;for(const t of n.mappings)for(const i of t.variants)e.set(i,{material:null,gltfMaterialIndex:t.material});return e};class Rj{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,i=t.json;if(i.extensions===void 0||i.extensions[this.name]===void 0)return null;const r=i.extensions[this.name].variants||[],o=Ij(r.map(a=>a.name));for(const a of e.scenes)a.traverse(l=>{const c=l;if(!c.material)return;const u=t.associations.get(c);if(u==null||u.meshes==null||u.primitives==null)return;const m=i.meshes[u.meshes].primitives[u.primitives].extensions;!m||!m[this.name]||(c.userData.variantMaterials=Tj(m[this.name]))});return e.userData.variants=o,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kD,FC;Nt.DEFAULT_ANISOTROPY=4;const Bj=(n,e,t=()=>{})=>{const i=s=>{const r=s.loaded/s.total;t(Math.max(0,Math.min(1,isFinite(r)?r:1)))};return new Promise((s,r)=>{e.load(n,s,i,r)})},Dj=n=>new Promise((e,t)=>{const i=document.createElement("script");document.body.appendChild(i),i.onload=e,i.onerror=t,i.async=!0,i.src=n}),$s=new Map,Sg=new Map;let kC;const UC=new R6;let OC;const Cg=new Oi;let Mg,Ig;const Vo=Symbol("loader"),Or=Symbol("evictionPolicy"),QC=Symbol("GLTFInstance");class $n extends ms{static setDRACODecoderLocation(e){kC=e,UC.setDecoderPath(e)}static getDRACODecoderLocation(){return kC}static setKTX2TranscoderLocation(e){OC=e,Cg.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return OC}static setMeshoptDecoderLocation(e){Mg!==e&&(Mg=e,Ig=Dj(e).then(()=>wC.ready).then(()=>wC))}static getMeshoptDecoderLocation(){return Mg}static initializeKTX2Loader(e){Cg.detectSupport(e)}static get cache(){return $s}static clearCache(){$s.forEach((e,t)=>{this.delete(t)}),this[Or].reset()}static has(e){return $s.has(e)}static async delete(e){if(!this.has(e))return;const t=$s.get(e);Sg.delete(e),$s.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!Sg.get(e)}constructor(e){super(),this[FC]=new D6().register(t=>new Rj(t)),this[QC]=e,this[Vo].setDRACOLoader(UC),this[Vo].setKTX2Loader(Cg)}get[(kD=Or,FC=Vo,Or)](){return this.constructor[Or]}async preload(e,t,i=()=>{}){if(this[Vo].setWithCredentials(t.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!$s.has(e)){Ig!=null&&this[Vo].setMeshoptDecoder(await Ig);const s=Bj(e,this[Vo],a=>{i(a*.8)}),r=this[QC],o=s.then(a=>r.prepare(a)).then(a=>(i(.9),new r(a))).catch(a=>(console.error(a),new r));$s.set(e,o)}await $s.get(e),Sg.set(e,!0),i&&i(1)}async load(e,t,i=()=>{}){await this.preload(e,t,i);const r=await(await $s.get(e)).clone();return this[Or].retain(e),r.dispose=()=>{this[Or].release(e)},r}}$n[kD]=new Mj($n);class Lj extends bt{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ve(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Ha=new L,GC=new Fe,VC=new Fe,zC=new L,HC=new L;class Pj{constructor(e={}){const t=this;let i,s,r,o;const a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:i,height:s}},this.render=function(m,g){m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld(),g.parent===null&&g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),GC.copy(g.matrixWorldInverse),VC.multiplyMatrices(g.projectionMatrix,GC),u(m,m,g),f(m)},this.setSize=function(m,g){i=m,s=g,r=i/2,o=s/2,l.style.width=m+"px",l.style.height=g+"px"};function c(m){m.isCSS2DObject&&(m.element.style.display="none");for(let g=0,A=m.children.length;g<A;g++)c(m.children[g])}function u(m,g,A){if(m.visible===!1){c(m);return}if(m.isCSS2DObject){Ha.setFromMatrixPosition(m.matrixWorld),Ha.applyMatrix4(VC);const p=Ha.z>=-1&&Ha.z<=1&&m.layers.test(A.layers)===!0,y=m.element;y.style.display=p===!0?"":"none",p===!0&&(m.onBeforeRender(t,g,A),y.style.transform="translate("+-100*m.center.x+"%,"+-100*m.center.y+"%)translate("+(Ha.x*r+r)+"px,"+(-Ha.y*o+o)+"px)",y.parentNode!==l&&l.appendChild(y),m.onAfterRender(t,g,A));const v={distanceToCameraSquared:h(A,m)};a.objects.set(m,v)}for(let p=0,y=m.children.length;p<y;p++)u(m.children[p],g,A)}function h(m,g){return zC.setFromMatrixPosition(m.matrixWorld),HC.setFromMatrixPosition(g.matrixWorld),zC.distanceToSquared(HC)}function d(m){const g=[];return m.traverseVisible(function(A){A.isCSS2DObject&&g.push(A)}),g}function f(m){const g=d(m).sort(function(p,y){if(p.renderOrder!==y.renderOrder)return y.renderOrder-p.renderOrder;const v=a.objects.get(p).distanceToCameraSquared,x=a.objects.get(y).distanceToCameraSquared;return v-x}),A=g.length;for(let p=0,y=g.length;p<y;p++)g[p].element.style.zIndex=A-p}}}function Kd(n,e,t){let i=t;const s=new L;return n.updateWorldMatrix(!0,!0),n.traverseVisible(r=>{const{geometry:o}=r;if(o!==void 0){const{position:a}=o.attributes;if(a!==void 0)for(let l=0,c=a.count;l<c;l++)r.isMesh?r.getVertexPosition(l,s):s.fromBufferAttribute(a,l),r.isSkinnedMesh||s.applyMatrix4(r.matrixWorld),i=e(i,s)}}),i}const jC={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class $p{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(e){return new Hj(e)}),this.register(function(e){return new jj(e)}),this.register(function(e){return new Xj(e)}),this.register(function(e){return new Kj(e)}),this.register(function(e){return new Yj(e)}),this.register(function(e){return new Jj(e)}),this.register(function(e){return new Wj(e)}),this.register(function(e){return new qj(e)}),this.register(function(e){return new $j(e)}),this.register(function(e){return new Zj(e)}),this.register(function(e){return new eW(e)}),this.register(function(e){return new tW(e)}),this.register(function(e){return new nW(e)}),this.register(function(e){return new iW(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,t,i,s){const r=new zj,o=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)o.push(this.pluginCallbacks[a](r));r.setPlugins(o),r.setTextureUtils(this.textureUtils),r.writeAsync(e,t,s).catch(i)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,s,r,t)})}}const Xe={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Tg="KHR_mesh_quantization",vi={};vi[an]=Xe.NEAREST;vi[Hh]=Xe.NEAREST_MIPMAP_NEAREST;vi[$r]=Xe.NEAREST_MIPMAP_LINEAR;vi[et]=Xe.LINEAR;vi[oa]=Xe.LINEAR_MIPMAP_NEAREST;vi[Yn]=Xe.LINEAR_MIPMAP_LINEAR;vi[Xt]=Xe.CLAMP_TO_EDGE;vi[ps]=Xe.REPEAT;vi[Aa]=Xe.MIRRORED_REPEAT;const WC={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Nj=new Ie,qC=12,Fj=1179937895,kj=2,$C=8,Uj=1313821514,Oj=5130562;function Su(n,e){return n.length===e.length&&n.every(function(t,i){return t===e[i]})}function Qj(n){return new TextEncoder().encode(n).buffer}function Gj(n){return Su(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Vj(n,e,t){const i={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+t;s++)for(let r=0;r<n.itemSize;r++){let o;n.itemSize>4?o=n.array[s*n.itemSize+r]:(r===0?o=n.getX(s):r===1?o=n.getY(s):r===2?o=n.getZ(s):r===3&&(o=n.getW(s)),n.normalized===!0&&(o=zp.normalize(o,n.array))),i.min[r]=Math.min(i.min[r],o),i.max[r]=Math.max(i.max[r],o)}return i}function UD(n){return Math.ceil(n/4)*4}function Rg(n,e=0){const t=UD(n.byteLength);if(t!==n.byteLength){const i=new Uint8Array(t);if(i.set(new Uint8Array(n)),e!==0)for(let s=n.byteLength;s<t;s++)i[s]=e;return i.buffer}return n}function XC(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function KC(n,e){if(n.toBlob!==void 0)return new Promise(i=>n.toBlob(i,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}class zj{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+Im}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}async writeAsync(e,t,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(e),await Promise.all(this.pending);const s=this,r=s.buffers,o=s.json;i=s.options;const a=s.extensionsUsed,l=s.extensionsRequired,c=new Blob(r,{type:"application/octet-stream"}),u=Object.keys(a),h=Object.keys(l);if(u.length>0&&(o.extensionsUsed=u),h.length>0&&(o.extensionsRequired=h),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=c.size),i.binary===!0){const d=new FileReader;d.readAsArrayBuffer(c),d.onloadend=function(){const f=Rg(d.result),m=new DataView(new ArrayBuffer($C));m.setUint32(0,f.byteLength,!0),m.setUint32(4,Oj,!0);const g=Rg(Qj(JSON.stringify(o)),32),A=new DataView(new ArrayBuffer($C));A.setUint32(0,g.byteLength,!0),A.setUint32(4,Uj,!0);const p=new ArrayBuffer(qC),y=new DataView(p);y.setUint32(0,Fj,!0),y.setUint32(4,kj,!0);const v=qC+A.byteLength+g.byteLength+m.byteLength+f.byteLength;y.setUint32(8,v,!0);const x=new Blob([p,A,g,m,f],{type:"application/octet-stream"}),E=new FileReader;E.readAsArrayBuffer(x),E.onloadend=function(){t(E.result)}}}else if(o.buffers&&o.buffers.length>0){const d=new FileReader;d.readAsDataURL(c),d.onloadend=function(){const f=d.result;o.buffers[0].uri=f,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const i=this.options,s=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&r.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in r.gltfExtensions)t.extensions[o]=r.gltfExtensions[o],s[o]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(r){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+r.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const s=new Map;s.set(!0,this.uid++),s.set(!1,this.uid++),this.uids.set(e,s)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const i=new L;for(let s=0,r=e.count;s<r;s++)if(Math.abs(i.fromBufferAttribute(e,s).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const i=e.clone(),s=new L;for(let r=0,o=i.count;r<o;r++)s.fromBufferAttribute(i,r),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),i.setXYZ(r,s.x,s.y,s.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1;const s={};(t.offset.x!==0||t.offset.y!==0)&&(s.offset=t.offset.toArray(),i=!0),t.rotation!==0&&(s.rotation=t.rotation,i=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(s.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(e,t){if(e===t)return e;function i(f){return f.colorSpace===St?function(g){return g<.04045?g*.0773993808:Math.pow(g*.9478672986+.0521327014,2.4)}:function(g){return g}}e instanceof aa&&(e=await this.decompressTextureAsync(e)),t instanceof aa&&(t=await this.decompressTextureAsync(t));const s=e?e.image:null,r=t?t.image:null,o=Math.max(s?s.width:0,r?r.width:0),a=Math.max(s?s.height:0,r?r.height:0),l=XC();l.width=o,l.height=a;const c=l.getContext("2d",{willReadFrequently:!0});c.fillStyle="#00ffff",c.fillRect(0,0,o,a);const u=c.getImageData(0,0,o,a);if(s){c.drawImage(s,0,0,o,a);const f=i(e),m=c.getImageData(0,0,o,a).data;for(let g=2;g<m.length;g+=4)u.data[g]=f(m[g]/256)*256}if(r){c.drawImage(r,0,0,o,a);const f=i(t),m=c.getImageData(0,0,o,a).data;for(let g=1;g<m.length;g+=4)u.data[g]=f(m[g]/256)*256}c.putImageData(u,0,0);const d=(e||t).clone();return d.source=new LE(l),d.colorSpace=Ui,d.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),d}async decompressTextureAsync(e,t=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(e,t)}processBuffer(e){const t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,s,r){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;switch(t){case Xe.BYTE:case Xe.UNSIGNED_BYTE:a=1;break;case Xe.SHORT:case Xe.UNSIGNED_SHORT:a=2;break;default:a=4}let l=e.itemSize*a;r===Xe.ARRAY_BUFFER&&(l=Math.ceil(l/4)*4);const c=UD(s*l),u=new DataView(new ArrayBuffer(c));let h=0;for(let m=i;m<i+s;m++){for(let g=0;g<e.itemSize;g++){let A;e.itemSize>4?A=e.array[m*e.itemSize+g]:(g===0?A=e.getX(m):g===1?A=e.getY(m):g===2?A=e.getZ(m):g===3&&(A=e.getW(m)),e.normalized===!0&&(A=zp.normalize(A,e.array))),t===Xe.FLOAT?u.setFloat32(h,A,!0):t===Xe.INT?u.setInt32(h,A,!0):t===Xe.UNSIGNED_INT?u.setUint32(h,A,!0):t===Xe.SHORT?u.setInt16(h,A,!0):t===Xe.UNSIGNED_SHORT?u.setUint16(h,A,!0):t===Xe.BYTE?u.setInt8(h,A):t===Xe.UNSIGNED_BYTE&&u.setUint8(h,A),h+=a}h%l!==0&&(h+=l-h%l)}const d={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:c};return r!==void 0&&(d.target=r),r===Xe.ARRAY_BUFFER&&(d.byteStride=l),this.byteOffset+=c,o.bufferViews.push(d),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(s){const r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){const o=Rg(r.result),a={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,s(i.bufferViews.push(a)-1)}})}processAccessor(e,t,i,s){const r=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=Xe.FLOAT;else if(e.array.constructor===Int32Array)a=Xe.INT;else if(e.array.constructor===Uint32Array)a=Xe.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=Xe.SHORT;else if(e.array.constructor===Uint16Array)a=Xe.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=Xe.BYTE;else if(e.array.constructor===Uint8Array)a=Xe.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(i===void 0&&(i=0),(s===void 0||s===1/0)&&(s=e.count),s===0)return null;const l=Vj(e,i,s);let c;t!==void 0&&(c=e===t.index?Xe.ELEMENT_ARRAY_BUFFER:Xe.ARRAY_BUFFER);const u=this.processBufferView(e,a,i,s,c),h={bufferView:u.id,byteOffset:u.byteOffset,componentType:a,count:s,max:l.max,min:l.min,type:o[e.itemSize]};return e.normalized===!0&&(h.normalized=!0),r.accessors||(r.accessors=[]),r.accessors.push(h)-1}processImage(e,t,i,s="image/png"){if(e!==null){const r=this,o=r.cache,a=r.json,l=r.options,c=r.pending;o.images.has(e)||o.images.set(e,{});const u=o.images.get(e),h=s+":flipY/"+i.toString();if(u[h]!==void 0)return u[h];a.images||(a.images=[]);const d={mimeType:s},f=XC();f.width=Math.min(e.width,l.maxTextureSize),f.height=Math.min(e.height,l.maxTextureSize);const m=f.getContext("2d",{willReadFrequently:!0});if(i===!0&&(m.translate(0,f.height),m.scale(1,-1)),e.data!==void 0){t!==Pt&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const A=new Uint8ClampedArray(e.height*e.width*4);for(let p=0;p<A.length;p+=4)A[p+0]=e.data[p+0],A[p+1]=e.data[p+1],A[p+2]=e.data[p+2],A[p+3]=e.data[p+3];m.putImageData(new ImageData(A,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)m.drawImage(e,0,0,f.width,f.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");l.binary===!0?c.push(KC(f,s).then(A=>r.processBufferViewImage(A)).then(A=>{d.bufferView=A})):f.toDataURL!==void 0?d.uri=f.toDataURL(s):c.push(KC(f,s).then(A=>new FileReader().readAsDataURL(A)).then(A=>{d.uri=A}));const g=a.images.push(d)-1;return u[h]=g,g}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const i={magFilter:vi[e.magFilter],minFilter:vi[e.minFilter],wrapS:vi[e.wrapS],wrapT:vi[e.wrapT]};return t.samplers.push(i)-1}async processTextureAsync(e){const i=this.options,s=this.cache,r=this.json;if(s.textures.has(e))return s.textures.get(e);r.textures||(r.textures=[]),e instanceof aa&&(e=await this.decompressTextureAsync(e,i.maxTextureSize));let o=e.userData.mimeType;o==="image/webp"&&(o="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,o)};e.name&&(a.name=e.name),await this._invokeAllAsync(async function(c){c.writeTexture&&await c.writeTexture(e,a)});const l=r.textures.push(a)-1;return s.textures.set(e,l),l}async processMaterialAsync(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const s={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=e.color.toArray().concat([e.opacity]);if(Su(r,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=0,s.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){const a=await this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),l={index:await this.processTextureAsync(a),texCoord:a.channel};this.applyTextureTransform(l,a),s.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:await this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),s.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:await this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),s.emissiveTexture=c}}if(e.normalMap){const a={index:await this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),s.normalTexture=a}if(e.aoMap){const a={index:await this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),s.occlusionTexture=a}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===gn&&(s.doubleSided=!0),e.name!==""&&(s.name=e.name),this.serializeUserData(e,s),await this._invokeAllAsync(async function(a){a.writeMaterialAsync&&await a.writeMaterialAsync(e,s)});const o=i.materials.push(s)-1;return t.materials.set(e,o),o}async processMeshAsync(e){const t=this.cache,i=this.json,s=[e.geometry.uuid];if(Array.isArray(e.material))for(let x=0,E=e.material.length;x<E;x++)s.push(e.material[x].uuid);else s.push(e.material.uuid);const r=s.join(":");if(t.meshes.has(r))return t.meshes.get(r);const o=e.geometry;let a;e.isLineSegments?a=Xe.LINES:e.isLineLoop?a=Xe.LINE_LOOP:e.isLine?a=Xe.LINE_STRIP:e.isPoints?a=Xe.POINTS:a=e.material.wireframe?Xe.LINES:Xe.TRIANGLES;const l={},c={},u=[],h=[],d={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},f=o.getAttribute("normal");f!==void 0&&!this.isNormalizedNormalAttribute(f)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(f)));let m=null;for(let x in o.attributes){if(x.slice(0,5)==="morph")continue;const E=o.attributes[x];if(x=d[x]||x.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(x)||(x="_"+x),t.attributes.has(this.getUID(E))){c[x]=t.attributes.get(this.getUID(E));continue}m=null;const M=E.array;x==="JOINTS_0"&&!(M instanceof Uint16Array)&&!(M instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new Ft(new Uint16Array(M),E.itemSize,E.normalized)):(M instanceof Uint32Array||M instanceof Int32Array)&&!x.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${x}" converted to type FLOAT.`),m=$p.Utils.toFloat32BufferAttribute(E));const C=this.processAccessor(m||E,o);C!==null&&(x.startsWith("_")||this.detectMeshQuantization(x,E),c[x]=C,t.attributes.set(this.getUID(E),C))}if(f!==void 0&&o.setAttribute("normal",f),Object.keys(c).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const x=[],E=[],w={};if(e.morphTargetDictionary!==void 0)for(const M in e.morphTargetDictionary)w[e.morphTargetDictionary[M]]=M;for(let M=0;M<e.morphTargetInfluences.length;++M){const C={};let S=!1;for(const _ in o.morphAttributes){if(_!=="position"&&_!=="normal"){S||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),S=!0);continue}const R=o.morphAttributes[_][M],O=_.toUpperCase(),N=o.attributes[_];if(t.attributes.has(this.getUID(R,!0))){C[O]=t.attributes.get(this.getUID(R,!0));continue}const F=R.clone();if(!o.morphTargetsRelative)for(let H=0,Q=R.count;H<Q;H++)for(let z=0;z<R.itemSize;z++)z===0&&F.setX(H,R.getX(H)-N.getX(H)),z===1&&F.setY(H,R.getY(H)-N.getY(H)),z===2&&F.setZ(H,R.getZ(H)-N.getZ(H)),z===3&&F.setW(H,R.getW(H)-N.getW(H));C[O]=this.processAccessor(F,o),t.attributes.set(this.getUID(N,!0),C[O])}h.push(C),x.push(e.morphTargetInfluences[M]),e.morphTargetDictionary!==void 0&&E.push(w[M])}l.weights=x,E.length>0&&(l.extras={},l.extras.targetNames=E)}const g=Array.isArray(e.material);if(g&&o.groups.length===0)return null;let A=!1;if(g&&o.index===null){const x=[];for(let E=0,w=o.attributes.position.count;E<w;E++)x[E]=E;o.setIndex(x),A=!0}const p=g?e.material:[e.material],y=g?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let x=0,E=y.length;x<E;x++){const w={mode:a,attributes:c};if(this.serializeUserData(o,w),h.length>0&&(w.targets=h),o.index!==null){let C=this.getUID(o.index);(y[x].start!==void 0||y[x].count!==void 0)&&(C+=":"+y[x].start+":"+y[x].count),t.attributes.has(C)?w.indices=t.attributes.get(C):(w.indices=this.processAccessor(o.index,o,y[x].start,y[x].count),t.attributes.set(C,w.indices)),w.indices===null&&delete w.indices}const M=await this.processMaterialAsync(p[y[x].materialIndex]);M!==null&&(w.material=M),u.push(w)}A===!0&&o.setIndex(null),l.primitives=u,i.meshes||(i.meshes=[]),await this._invokeAllAsync(function(x){x.writeMesh&&x.writeMesh(e,l)});const v=i.meshes.push(l)-1;return t.meshes.set(r,v),v}detectMeshQuantization(e,t){if(this.extensionsUsed[Tg])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");const s=e.split("_",1)[0];jC[s]&&jC[s].includes(i)&&(this.extensionsUsed[Tg]=!0,this.extensionsRequired[Tg]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const i=e.isOrthographicCamera,s={type:i?"orthographic":"perspective"};return i?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:zp.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),t.cameras.push(s)-1}processAnimation(e,t){const i=this.json,s=this.nodeMap;i.animations||(i.animations=[]),e=$p.Utils.mergeMorphTargetTracks(e.clone(),t);const r=e.tracks,o=[],a=[];for(let l=0;l<r.length;++l){const c=r[l],u=st.parseTrackName(c.name);let h=st.findNode(t,u.nodeName);const d=WC[u.propertyName];if(u.objectName==="bones"&&(h.isSkinnedMesh===!0?h=h.skeleton.getBoneByName(u.objectIndex):h=void 0),!h||!d){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name);continue}const f=1;let m=c.values.length/c.times.length;d===WC.morphTargetInfluences&&(m/=h.morphTargetInfluences.length);let g;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(g="CUBICSPLINE",m/=3):c.getInterpolation()===lc?g="STEP":g="LINEAR",a.push({input:this.processAccessor(new Ft(c.times,f)),output:this.processAccessor(new Ft(c.values,m)),interpolation:g}),o.push({sampler:a.length-1,target:{node:s.get(h),path:d}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:a,channels:o}),i.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,s=t.nodes[i.get(e)],r=e.skeleton;if(r===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],l=new Float32Array(r.bones.length*16),c=new Fe;for(let h=0;h<r.bones.length;++h)a.push(i.get(r.bones[h])),c.copy(r.boneInverses[h]),c.multiply(e.bindMatrix).toArray(l,h*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new Ft(l,16)),joints:a,skeleton:i.get(o)}),s.skin=t.skins.length-1}async processNodeAsync(e){const t=this.json,i=this.options,s=this.nodeMap;t.nodes||(t.nodes=[]);const r={};if(i.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),c=e.scale.toArray();Su(a,[0,0,0,1])||(r.rotation=a),Su(l,[0,0,0])||(r.translation=l),Su(c,[1,1,1])||(r.scale=c)}else e.matrixAutoUpdate&&e.updateMatrix(),Gj(e.matrix)===!1&&(r.matrix=e.matrix.elements);if(e.name!==""&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){const a=await this.processMeshAsync(e);a!==null&&(r.mesh=a)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,c=e.children.length;l<c;l++){const u=e.children[l];if(u.visible||i.onlyVisible===!1){const h=await this.processNodeAsync(u);h!==null&&a.push(h)}}a.length>0&&(r.children=a)}await this._invokeAllAsync(function(a){a.writeNode&&a.writeNode(e,r)});const o=t.nodes.push(r)-1;return s.set(e,o),o}async processSceneAsync(e){const t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);const s={};e.name!==""&&(s.name=e.name),t.scenes.push(s);const r=[];for(let o=0,a=e.children.length;o<a;o++){const l=e.children[o];if(l.visible||i.onlyVisible===!1){const c=await this.processNodeAsync(l);c!==null&&r.push(c)}}r.length>0&&(s.nodes=r),this.serializeUserData(e,s)}async processObjectsAsync(e){const t=new ga;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);await this.processSceneAsync(t)}async processInputAsync(e){const t=this.options;e=e instanceof Array?e:[e],await this._invokeAllAsync(function(s){s.beforeParse&&s.beforeParse(e)});const i=[];for(let s=0;s<e.length;s++)e[s]instanceof ga?await this.processSceneAsync(e[s]):i.push(e[s]);i.length>0&&await this.processObjectsAsync(i);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<t.animations.length;++s)this.processAnimation(t.animations[s],e[0]);await this._invokeAllAsync(function(s){s.afterParse&&s.afterParse(e)})}async _invokeAllAsync(e){for(let t=0,i=this.plugins.length;t<i;t++)await e(this.plugins[t])}}class Hj{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const i=this.writer,s=i.json,r=i.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(1-e.penumbra)*e.angle,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},r[this.name]=!0);const a=s.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class jj{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}async writeMaterialAsync(e,t){if(!e.isMeshBasicMaterial)return;const s=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},s[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Wj{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:await i.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(o,e.clearcoatMap),r.clearcoatTexture=o}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:await i.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(o,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:await i.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(o.scale=e.clearcoatNormalScale.x),i.applyTextureTransform(o,e.clearcoatNormalMap),r.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class qj{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const s=this.writer.extensionsUsed,r={};r.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class $j{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:await i.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(o,e.iridescenceMap),r.iridescenceTexture=o}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:await i.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(o,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Xj{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){const o={index:await i.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(o,e.transmissionMap),r.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Kj{constructor(e){this.writer=e,this.name="KHR_materials_volume"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){const o={index:await i.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(o,e.thicknessMap),r.thicknessTexture=o}e.attenuationDistance!==1/0&&(r.attenuationDistance=e.attenuationDistance),r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Yj{constructor(e){this.writer=e,this.name="KHR_materials_ior"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const s=this.writer.extensionsUsed,r={};r.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Jj{constructor(e){this.writer=e,this.name="KHR_materials_specular"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(Nj)&&!e.specularIntensityMap&&!e.specularColorMap)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.specularIntensityMap){const o={index:await i.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(o,e.specularIntensityMap),r.specularTexture=o}if(e.specularColorMap){const o={index:await i.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(o,e.specularColorMap),r.specularColorTexture=o}r.specularFactor=e.specularIntensity,r.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Zj{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.sheenRoughnessMap){const o={index:await i.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(o,e.sheenRoughnessMap),r.sheenRoughnessTexture=o}if(e.sheenColorMap){const o={index:await i.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(o,e.sheenColorMap),r.sheenColorTexture=o}r.sheenRoughnessFactor=e.sheenRoughness,r.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class eW{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.anisotropyMap){const o={index:await i.processTextureAsync(e.anisotropyMap)};i.applyTextureTransform(o,e.anisotropyMap),r.anisotropyTexture=o}r.anisotropyStrength=e.anisotropy,r.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class tW{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const s=this.writer.extensionsUsed,r={};r.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class nW{constructor(e){this.writer=e,this.name="EXT_materials_bump"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.bumpMap){const o={index:await i.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};i.applyTextureTransform(o,e.bumpMap),r.bumpTexture=o}r.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class iW{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const i=this.writer,s=e,r=new Float32Array(s.count*3),o=new Float32Array(s.count*4),a=new Float32Array(s.count*3),l=new Fe,c=new L,u=new ei,h=new L;for(let f=0;f<s.count;f++)s.getMatrixAt(f,l),l.decompose(c,u,h),c.toArray(r,f*3),u.toArray(o,f*4),h.toArray(a,f*3);const d={TRANSLATION:i.processAccessor(new Ft(r,3)),ROTATION:i.processAccessor(new Ft(o,4)),SCALE:i.processAccessor(new Ft(a,3))};s.instanceColor&&(d._COLOR_0=i.processAccessor(s.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:d},i.extensionsUsed[this.name]=!0,i.extensionsRequired[this.name]=!0}}$p.Utils={insertKeyframe:function(n,e){const i=n.getValueSize(),s=new n.TimeBufferType(n.times.length+1),r=new n.ValueBufferType(n.values.length+i),o=n.createInterpolant(new n.ValueBufferType(i));let a;if(n.times.length===0){s[0]=e;for(let l=0;l<i;l++)r[l]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;s[0]=e,s.set(n.times,1),r.set(o.evaluate(e),0),r.set(n.values,i),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;s[s.length-1]=e,s.set(n.times,0),r.set(n.values,0),r.set(o.evaluate(e),n.values.length),a=s.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){s.set(n.times.slice(0,l+1),0),s[l+1]=e,s.set(n.times.slice(l+1),l+2),r.set(n.values.slice(0,(l+1)*i),0),r.set(o.evaluate(e),(l+1)*i),r.set(n.values.slice((l+1)*i),(l+2)*i),a=l+1;break}}return n.times=s,n.values=r,a},mergeMorphTargetTracks:function(n,e){const t=[],i={},s=n.tracks;for(let r=0;r<s.length;++r){let o=s[r];const a=st.parseTrackName(o.name),l=st.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(cc)}const c=l.morphTargetInfluences.length,u=l.morphTargetDictionary[a.propertyIndex];if(u===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let h;if(i[l.uuid]===void 0){h=o.clone();const f=new h.ValueBufferType(c*h.times.length);for(let m=0;m<h.times.length;m++)f[m*c+u]=h.values[m];h.name=(a.nodeName||"")+".morphTargetInfluences",h.values=f,i[l.uuid]=h,t.push(h);continue}const d=o.createInterpolant(new o.ValueBufferType(1));h=i[l.uuid];for(let f=0;f<h.times.length;f++)h.values[f*c+u]=d.evaluate(h.times[f]);for(let f=0;f<o.times.length;f++){const m=this.insertKeyframe(h,o.times[f]);h.values[m*c+u]=o.values[f]}}return n.tracks=t,n},toFloat32BufferAttribute:function(n){const e=new Ft(new Float32Array(n.count*n.itemSize),n.itemSize,!1);if(!n.normalized&&!n.isInterleavedBufferAttribute)return e.array.set(n.array),e;for(let t=0,i=n.count;t<i;t++)for(let s=0;s<n.itemSize;s++)e.setComponent(t,s,n.getComponent(t,s));return e}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=n=>n.material!==void 0&&n.userData&&n.userData.variantMaterials&&!!Array.from(n.userData.variantMaterials.values()).filter(e=>Wf(e.material)),Wf=n=>n&&n.isMaterial&&!Array.isArray(n);class sW{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set,i=s=>{if(!YC(s))return;const r=s.userData.variantMaterials,o=s.userData.variantData;for(const[a,l]of o){const c=r.get(l.index);c&&Wf(c.material)&&t.add(a)}};if(Array.isArray(e))for(const s of e)s.traverse(i);else e.traverse(i);t.forEach(s=>this.variantNames.push(s))}async writeMesh(e,t){if(!YC(e))return;const i=e.userData,s=i.variantMaterials,r=i.variantData,o=new Map,a=new Map,l=Array.from(r.values()).sort((h,d)=>h.index-d.index);for(const[h,d]of l.entries())a.set(d.index,h);for(const h of r.values()){const d=s.get(h.index);if(!d||!Wf(d.material))continue;const f=await this.writer.processMaterialAsync(d.material);o.has(f)||o.set(f,{material:f,variants:[]}),o.get(f).variants.push(a.get(h.index))}const c=Array.from(o.values()).map(h=>h.variants.sort((d,f)=>d-f)&&h).sort((h,d)=>h.material-d.material);if(c.length===0)return;const u=Wf(i.originalMaterial)?await this.writer.processMaterialAsync(i.originalMaterial):-1;for(const h of t.primitives)u>=0&&(h.material=u),h.extensions=h.extensions||{},h.extensions[this.name]={mappings:c}}afterParse(){if(this.variantNames.length===0)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map(i=>({name:i}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class rW{constructor(e,t,i,s,r){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);const o=t.xr.getSession();if(s&&"XRWebGLBinding"in window){const a=new NE(16);e.environment=a.texture;const l=t.getContext();switch(o.preferredReflectionFormat){case"srgba8":l.getExtension("EXT_sRGB");break;case"rgba16f":l.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(o,l),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}o.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const s=t.getLightEstimate(this.lightProbe);if(s){this.xrLight.lightProbe.sh.fromArray(s.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const r=Math.max(1,Math.max(s.primaryLightIntensity.x,Math.max(s.primaryLightIntensity.y,s.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(s.primaryLightIntensity.x/r,s.primaryLightIntensity.y/r,s.primaryLightIntensity.z/r),this.xrLight.directionalLight.intensity=r,this.xrLight.directionalLight.position.copy(s.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class oW extends Kr{constructor(e,t=!0){super(),this.lightProbe=new nz,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new iD,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,s=!1;e.xr.addEventListener("sessionstart",()=>{const r=e.xr.getSession();"requestLightProbe"in r&&r.requestLightProbe({reflectionFormat:r.preferredReflectionFormat}).then(o=>{i=new rW(this,e,o,t,()=>{s=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{i&&(i.dispose(),i=null),s&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=1e4,aW=.001,QD=50;class Xn{constructor(e=QD){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(aW,e)}update(e,t,i,s){const r=2e-4*this.naturalFrequency;if(e==null||s===0||e===t&&this.velocity===0)return t;if(i<0)return e;const o=e-t,a=this.velocity+this.naturalFrequency*o,l=o+i*a,c=Math.exp(-this.naturalFrequency*i),u=(a-this.naturalFrequency*l)*c,h=-this.naturalFrequency*(u+a*c);return Math.abs(u)<r*Math.abs(s)&&h*o>=0?(this.velocity=0,t):(this.velocity=u,t+l*c)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=.2,JC=.03,lW=.75,GD=12,cW=Math.PI/(2*GD),ZC=new Ve,Yd=(n,e,t)=>{let i=e>0?t>0?0:-Math.PI/2:t>0?Math.PI/2:Math.PI;for(let s=0;s<=GD;++s)n.push(e+(Es-JC)*Math.cos(i),t+(Es-JC)*Math.sin(i),0,e+Es*Math.cos(i),t+Es*Math.sin(i),0),i+=cW};class eM extends xt{constructor(e,t){const i=new ui,s=[],r=[],{size:o,boundingBox:a}=e,l=o.x/2,c=(t==="back"?o.y:o.z)/2;Yd(r,l,c),Yd(r,-l,c),Yd(r,-l,-c),Yd(r,l,-c);const u=r.length/3;for(let f=0;f<u-2;f+=2)s.push(f,f+1,f+3,f,f+3,f+2);const h=u-2;s.push(h,h+1,1,h,1,0),i.setAttribute("position",new bi(r,3)),i.setIndex(s),super(i),this.side=t;const d=this.material;switch(d.side=gn,d.transparent=!0,d.opacity=0,this.goalOpacity=0,this.opacityDamper=new Xn,this.hitPlane=new xt(new br(2*(l+Es),2*(c+Es))),this.hitPlane.visible=!1,this.hitPlane.material.side=gn,this.add(this.hitPlane),this.hitBox=new xt(new Er(o.x+2*Es,o.y+Es,o.z+2*Es)),this.hitBox.visible=!1,this.hitBox.material.side=gn,this.add(this.hitBox),a.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=a.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=a.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.hitBox.position.y=(o.y+Es)/2+a.min.y,e.target.add(this.hitBox),this.offsetHeight=0}getHit(e,t,i){ZC.set(t,-i),this.hitPlane.visible=!0;const s=e.positionAndNormalFromPoint(ZC,this.hitPlane);return this.hitPlane.visible=!1,s==null?null:s.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const s=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),s}controllerIntersection(e,t){this.hitBox.visible=!0;const i=e.hitFromController(t,this.hitBox);return this.hitBox.visible=!1,i}set offsetHeight(e){e-=.001,this.side==="back"?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?lW:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){const{geometry:e,material:t}=this.hitPlane;e.dispose(),t.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=(n,e)=>({type:"number",number:n,unit:e}),ur=(()=>{const n={};return t=>{const i=t;if(i in n)return n[i];const s=[];let r=0;for(;t;){if(++r>1e3){t="";break}const o=VD(t),a=o.nodes[0];if(a==null||a.terms.length===0)break;s.push(a),t=o.remainingInput}return n[i]=s}})(),VD=(()=>{const n=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,t=/^[\),]/,i="(",s="#";return r=>{const o=[];for(;r.length&&(r=r.trim(),!t.test(r));)if(r[0]===i){const{nodes:a,remainingInput:l}=tM(r);r=l,o.push({type:"function",name:{type:"ident",value:"calc"},arguments:a})}else if(n.test(r)){const a=uW(r),l=a.nodes[0];if(r=a.remainingInput,r[0]===i){const{nodes:c,remainingInput:u}=tM(r);o.push({type:"function",name:l,arguments:c}),r=u}else o.push(l)}else if(e.test(r))o.push({type:"operator",value:r[0]}),r=r.slice(1);else{const{nodes:a,remainingInput:l}=r[0]===s?dW(r):hW(r);if(a.length===0)break;o.push(a[0]),r=l}return{nodes:[{type:"expression",terms:o}],remainingInput:r}}})(),uW=(()=>{const n=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const t=e.match(n),i=t==null?e:e.substr(0,t.index),s=t==null?"":e.substr(t.index);return{nodes:[{type:"ident",value:i}],remainingInput:s}}})(),hW=(()=>{const n=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,t=/^(m|mm|cm|rad|deg|[%])$/;return i=>{const s=i.match(n),r=s==null?"0":s[0];i=r==null?i:i.slice(r.length);const o=i.match(e);let a=o!=null&&o[0]!==""?o[0]:null;const l=o==null?i:i.slice(a.length);return a!=null&&!t.test(a)&&(a=null),{nodes:[{type:"number",number:parseFloat(r)||0,unit:a}],remainingInput:l}}})(),dW=(()=>{const n=/^[a-f0-9]*/i;return e=>{e=e.slice(1).trim();const t=e.match(n);return{nodes:t==null?[]:[{type:"hex",value:t[0]}],remainingInput:t==null?e:e.slice(t[0].length)}}})(),tM=n=>{const e=[];for(n=n.slice(1).trim();n.length;){const t=VD(n);if(e.push(t.nodes[0]),n=t.remainingInput.trim(),n[0]===",")n=n.slice(1).trim();else if(n[0]===")"){n=n.slice(1);break}}return{nodes:e,remainingInput:n}},nM=Symbol("visitedTypes");class fW{constructor(e){this[nM]=e}walk(e,t){const i=e.slice();for(;i.length;){const s=i.shift();switch(this[nM].indexOf(s.type)>-1&&t(s),s.type){case"expression":i.unshift(...s.terms);break;case"function":i.unshift(s.name,...s.arguments);break}}}}const mo=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=(n,e=0)=>{let{number:t,unit:i}=n;if(!isFinite(t))t=e,i="rad";else if(n.unit==="rad"||n.unit==null)return n;return{type:"number",number:(i==="deg"&&t!=null?t:0)*Math.PI/180,unit:"rad"}},iM=(n,e=0)=>{let{number:t,unit:i}=n;if(!isFinite(t))t=e,i="m";else if(n.unit==="m")return n;let s;switch(i){default:s=1;break;case"cm":s=1/100;break;case"mm":s=1/1e3;break}return{type:"number",number:s*t,unit:"m"}},ws=(()=>{const n=t=>t,e={rad:n,deg:Nm,m:n,mm:iM,cm:iM};return(t,i=mo)=>{isFinite(t.number)||(t.number=i.number,t.unit=i.unit);const{unit:s}=t;if(s==null)return t;const r=e[s];return r==null?i:r(t)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zD,sM,rM;const Ic=Symbol("evaluate"),qf=Symbol("lastValue");class Ut{constructor(){this[zD]=null}static evaluatableFor(e,t=mo){if(e instanceof Ut)return e;if(e.type==="number")return e.unit==="%"?new pW(e,t):e;switch(e.name.value){case"calc":return new gW(e,t);case"env":return new mW(e)}return mo}static evaluate(e){return e instanceof Ut?e.evaluate():e}static isConstant(e){return e instanceof Ut?e.isConstant:!0}static applyIntrinsics(e,t){const{basis:i,keywords:s}=t,{auto:r}=s;return i.map((o,a)=>{const l=r[a]==null?o:r[a];let c=e[a]?e[a]:l;if(c.type==="ident"){const u=c.value;u in s&&(c=s[u][a])}return(c==null||c.type==="ident")&&(c=l),c.unit==="%"?On(c.number/100*o.number,o.unit):(c=ws(c,o),c.unit!==o.unit?o:c)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[qf]==null)&&(this[qf]=this[Ic]()),this[qf]}}zD=qf;const oM=Symbol("percentage"),Bg=Symbol("basis");class pW extends Ut{constructor(e,t){super(),this[oM]=e,this[Bg]=t}get isConstant(){return!0}[Ic](){return On(this[oM].number/100*this[Bg].number,this[Bg].unit)}}const Jd=Symbol("identNode");class mW extends Ut{constructor(e){super(),this[sM]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;t!=null&&t.type==="ident"&&(this[Jd]=t)}get isConstant(){return!1}[(sM=Jd,Ic)](){if(this[Jd]!=null)switch(this[Jd].value){case"window-scroll-y":const e=window.pageYOffset,t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:e/(t-window.innerHeight)||0,unit:null}}return mo}}const AW=/[\*\/]/,ja=Symbol("evaluator");class gW extends Ut{constructor(e,t=mo){if(super(),this[rM]=null,e.arguments.length!==1)return;const i=e.arguments[0].terms.slice(),s=[];for(;i.length;){const r=i.shift();if(s.length>0){const o=s[s.length-1];if(o.type==="operator"&&AW.test(o.value)){const a=s.pop(),l=s.pop();if(l==null)return;s.push(new lM(a,Ut.evaluatableFor(l,t),Ut.evaluatableFor(r,t)));continue}}s.push(r.type==="operator"?r:Ut.evaluatableFor(r,t))}for(;s.length>2;){const[r,o,a]=s.splice(0,3);if(o.type!=="operator")return;s.unshift(new lM(o,Ut.evaluatableFor(r,t),Ut.evaluatableFor(a,t)))}s.length===1&&(this[ja]=s[0])}get isConstant(){return this[ja]==null||Ut.isConstant(this[ja])}[(rM=ja,Ic)](){return this[ja]!=null?Ut.evaluate(this[ja]):mo}}const aM=Symbol("operator"),Dg=Symbol("left"),Lg=Symbol("right");class lM extends Ut{constructor(e,t,i){super(),this[aM]=e,this[Dg]=t,this[Lg]=i}get isConstant(){return Ut.isConstant(this[Dg])&&Ut.isConstant(this[Lg])}[Ic](){const e=ws(Ut.evaluate(this[Dg])),t=ws(Ut.evaluate(this[Lg])),{number:i,unit:s}=e,{number:r,unit:o}=t;if(o!=null&&s!=null&&o!=s)return mo;const a=s||o;let l;switch(this[aM].value){case"+":l=i+r;break;case"-":l=i-r;break;case"/":l=i/r;break;case"*":l=i*r;break;default:return mo}return{type:"number",number:l,unit:a}}}const Pg=Symbol("evaluatables"),cM=Symbol("intrinsics");class HD extends Ut{constructor(e,t){super(),this[cM]=t;const i=e[0],s=i!=null?i.terms:[];this[Pg]=t.basis.map((r,o)=>{const a=s[o];return a==null?{type:"ident",value:"auto"}:a.type==="ident"?a:Ut.evaluatableFor(a,r)})}get isConstant(){for(const e of this[Pg])if(!Ut.isConstant(e))return!1;return!0}[Ic](){const e=this[Pg].map(t=>Ut.evaluate(t));return Ut.applyIntrinsics(e,this[cM]).map(t=>t.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jD,WD,qD,$D;const Wa=Symbol("instances"),uM=Symbol("activateListener"),hM=Symbol("deactivateListener"),Ng=Symbol("notifyInstances"),dM=Symbol("notify"),fM=Symbol("callback");class vs{static[Ng](){for(const e of vs[Wa])e[dM]()}static[(jD=Wa,uM)](){window.addEventListener("scroll",this[Ng],{passive:!0})}static[hM](){window.removeEventListener("scroll",this[Ng])}constructor(e){this[fM]=e}observe(){vs[Wa].size===0&&vs[uM](),vs[Wa].add(this)}disconnect(){vs[Wa].delete(this),vs[Wa].size===0&&vs[hM]()}[dM](){this[fM]()}}vs[jD]=new Set;const pM=Symbol("computeStyleCallback"),XD=Symbol("astWalker"),Cu=Symbol("dependencies"),KD=Symbol("onScroll");class yW{constructor(e){this[WD]={},this[qD]=new fW(["function"]),this[$D]=()=>{this[pM]({relatedState:"window-scroll"})},this[pM]=e}observeEffectsFor(e){const t={},i=this[Cu];this[XD].walk(e,s=>{const{name:r}=s,a=s.arguments[0].terms[0];if(!(r.value!=="env"||a==null||a.type!=="ident"))switch(a.value){case"window-scroll-y":if(t["window-scroll"]==null){const l="window-scroll"in i?i["window-scroll"]:new vs(this[KD]);l.observe(),delete i["window-scroll"],t["window-scroll"]=l}break}});for(const s in i)i[s].disconnect();this[Cu]=t}dispose(){for(const e in this[Cu])this[Cu][e].disconnect()}}WD=Cu,qD=XD,$D=KD;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=n=>{const e=n.observeEffects||!1,t=n.intrinsics instanceof Function?n.intrinsics:()=>n.intrinsics;return(i,s)=>{const r=i.updated,o=i.connectedCallback,a=i.disconnectedCallback,l=Symbol(`${s}StyleEffector`),c=Symbol(`${s}StyleEvaluator`),u=Symbol(`${s}UpdateEvaluator`),h=Symbol(`${s}EvaluateAndSync`);Object.defineProperties(i,{[l]:{value:null,writable:!0},[c]:{value:null,writable:!0},[u]:{value:function(){const d=ur(this[s]);this[c]=new HD(d,t(this)),this[l]==null&&e&&(this[l]=new yW(()=>this[h]())),this[l]!=null&&this[l].observeEffectsFor(d)}},[h]:{value:function(){if(this[c]==null)return;const d=this[c].evaluate();this[n.updateHandler](d)}},updated:{value:function(d){d.has(s)&&(this[u](),this[h]()),r.call(this,d)}},connectedCallback:{value:function(){o.call(this),this.requestUpdate(s,this[s])}},disconnectedCallback:{value:function(){a.call(this),this[l]!=null&&(this[l].dispose(),this[l]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=n=>n<.5?2*n*n:-1+(4-2*n)*n,vW=(n,e,t=YD)=>i=>n+(e-n)*t(i),xW=(n,e)=>{const t=s=>r=>s+=r,i=e.map(t(0));return s=>{s=_s(s,0,1),s*=i[i.length-1];const r=i.findIndex(l=>l>=s),o=r<1?0:i[r-1],a=i[r];return n[r]((s-o)/(a-o))}},Dl=n=>{const e=[],t=[];let i=n.initialValue;for(let s=0;s<n.keyframes.length;++s){const r=n.keyframes[s],{value:o,frames:a}=r,l=r.ease||YD,c=vW(i,o,l);e.push(c),t.push(a),i=o}return xW(e,t)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const EW=5e3,bW=Dl({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),_W=Dl({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),wW=30,SW=12,JD="0deg 75deg 105%",CW="auto auto auto",MW="auto",IW=2.2,TW=["front","right","back","left"],RW=["upper-","","lower-"],BW=3e3,DW=". Use mouse, touch or arrow keys to move.",Zd={AUTO:"auto",NONE:"none"},Fg={BASIC:"basic",WIGGLE:"wiggle"},LW={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},mM=()=>({basis:[Nm(On(wW,"deg"))],keywords:{auto:[null]}}),PW=()=>({basis:[Nm(On(SW,"deg"))],keywords:{auto:[null]}}),ZD=(()=>{const n=ur(JD)[0].terms,e=ws(n[0]),t=ws(n[1]);return i=>{const s=i[se].idealCameraDistance();return{basis:[e,t,On(s,"m")],keywords:{auto:[null,null,On(105,"%")]}}}})(),NW=n=>{const e=IW*n[se].boundingSphere.radius;return{basis:[On(-1/0,"rad"),On(0,"rad"),On(e,"m")],keywords:{auto:[null,null,null]}}},FW=n=>{const e=ZD(n),i=new HD([],e).evaluate()[2];return{basis:[On(1/0,"rad"),On(Math.PI,"rad"),On(i,"m")],keywords:{auto:[null,null,null]}}},kW=n=>{const e=n[se].boundingBox.getCenter(new L);return{basis:[On(e.x,"m"),On(e.y,"m"),On(e.z,"m")],keywords:{auto:[null,null,null]}}},eL=Math.PI/2,UW=Math.PI/3,OW=eL/2,QW=2*Math.PI,mt=Symbol("controls"),$f=Symbol("panElement"),kg=Symbol("promptElement"),ef=Symbol("promptAnimatedContainer"),Ug=Symbol("fingerAnimatedContainers"),tf=Symbol("deferInteractionPrompt"),AM=Symbol("updateAria"),Xs=Symbol("a11y"),gM=Symbol("updateA11y"),yM=Symbol("updateCameraForRadius"),qa=Symbol("cancelPrompts"),Og=Symbol("onChange"),Jc=Symbol("onPointerChange"),Do=Symbol("waitingToPromptUser"),nf=Symbol("userHasInteracted"),$a=Symbol("promptElementVisibleTime"),Zc=Symbol("lastPromptOffset"),sf=Symbol("cancellationSource"),Qg=Symbol("lastSpherical"),eu=Symbol("jumpCamera"),Gg=Symbol("initialized"),tu=Symbol("maintainThetaPhi"),vM=Symbol("syncCameraOrbit"),xM=Symbol("syncFieldOfView"),EM=Symbol("syncCameraTarget"),bM=Symbol("syncMinCameraOrbit"),_M=Symbol("syncMaxCameraOrbit"),wM=Symbol("syncMinFieldOfView"),SM=Symbol("syncMaxFieldOfView"),GW=n=>{var e,t,i,s,r,o,a,l,c,u,h,d,f,m,g,A,p,y;class v extends n{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=JD,this.cameraTarget=CW,this.fieldOfView=MW,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=BW,this.interactionPrompt=Zd.AUTO,this.interactionPromptStyle=Fg.WIGGLE,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=LW.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=QD,this.a11y=null,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[t]=this.shadowRoot.querySelector("#prompt"),this[i]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[s]=this.shadowRoot.querySelector(".pan-target"),this[r]=0,this[o]=1/0,this[a]=!1,this[l]=!1,this[c]=Qt.AUTOMATIC,this[u]=new jW(this[se].camera,this[os],this[se]),this[h]=new zf,this[d]=!1,this[f]=!1,this[m]=!1,this[g]={},this[A]=()=>{const E=this[mt].changeSource;this[sf]=E,E===Qt.USER_INTERACTION&&(this[nf]=!0,this[tf]())},this[p]=()=>{this[AM](),this[yn]();const E=this[mt].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:E}}))},this[y]=E=>{this[Yf].classList.toggle("pointer-tumbling",E.type==="pointer-change-start")}}get inputSensitivity(){return this[mt].inputSensitivity}set inputSensitivity(E){this[mt].inputSensitivity=E}getCameraOrbit(){const{theta:E,phi:w,radius:M}=this[Qg];return{theta:E,phi:w,radius:M,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return Hr(this[gt].isPresenting?this[gt].arRenderer.target:this[se].getDynamicTarget())}getFieldOfView(){return this[mt].getFieldOfView()}getMinimumFieldOfView(){return this[mt].options.minimumFieldOfView}getMaximumFieldOfView(){return this[mt].options.maximumFieldOfView}getIdealAspect(){return this[se].idealAspect}jumpCameraToGoal(){this[eu]=!0,this.requestUpdate(eu,!1)}resetInteractionPrompt(){this[Zc]=0,this[$a]=1/0,this[nf]=!1,this[Do]=this.interactionPrompt===Zd.AUTO&&this.cameraControls}zoom(E){const w=new WheelEvent("wheel",{deltaY:-30*E});this[os].dispatchEvent(w)}connectedCallback(){super.connectedCallback(),this[mt].addEventListener("user-interaction",this[qa]),this[mt].addEventListener("pointer-change-start",this[Jc]),this[mt].addEventListener("pointer-change-end",this[Jc])}disconnectedCallback(){super.disconnectedCallback(),this[mt].removeEventListener("user-interaction",this[qa]),this[mt].removeEventListener("pointer-change-start",this[Jc]),this[mt].removeEventListener("pointer-change-end",this[Jc])}updated(E){super.updated(E);const w=this[mt],M=this[se];if(E.has("cameraControls")&&(this.cameraControls?(w.enableInteraction(),this.interactionPrompt===Zd.AUTO&&(this[Do]=!0)):(w.disableInteraction(),this[tf]()),this[os].setAttribute("aria-label",this[Pl])),E.has("disableZoom")&&(w.disableZoom=this.disableZoom),E.has("disablePan")&&(w.enablePan=!this.disablePan),E.has("disableTap")&&(w.enableTap=!this.disableTap),(E.has("interactionPrompt")||E.has("cameraControls")||E.has("src"))&&(this.interactionPrompt===Zd.AUTO&&this.cameraControls&&!this[nf]?this[Do]=!0:this[tf]()),E.has("interactionPromptStyle")&&(this[ef].style.opacity=this.interactionPromptStyle==Fg.BASIC?"1":"0"),E.has("touchAction")){const C=this.touchAction;w.applyOptions({touchAction:C}),w.updateTouchActionStyle()}E.has("orbitSensitivity")&&(w.orbitSensitivity=this.orbitSensitivity),E.has("zoomSensitivity")&&(w.zoomSensitivity=this.zoomSensitivity),E.has("panSensitivity")&&(w.panSensitivity=this.panSensitivity),E.has("interpolationDecay")&&(w.setDamperDecayTime(this.interpolationDecay),M.setTargetDamperDecayTime(this.interpolationDecay)),E.has("a11y")&&this[gM](),this[eu]===!0&&Promise.resolve().then(()=>{w.jumpToGoal(),M.jumpToGoal(),this[Og](),this[eu]=!1})}async updateFraming(){const E=this[se],w=E.adjustedFoV(E.framedFoVDeg);await E.updateFraming();const M=E.adjustedFoV(E.framedFoVDeg),C=this[mt].getFieldOfView()/w;this[mt].setFieldOfView(M*C),this[tu]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(E,w,M){const C=this[os],S=this[Ug];if(S[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const _=new Array;_.push({x:Dl(w.x),y:Dl(w.y)});const R=[{x:_[0].x(0),y:_[0].y(0)}];M!=null&&(_.push({x:Dl(M.x),y:Dl(M.y)}),R.push({x:_[1].x(0),y:_[1].y(0)}));let O=performance.now();const{width:N,height:F}=this[se],H=this.getBoundingClientRect(),Q=j=>{for(const[K,te]of R.entries()){const{style:ae}=S[K];ae.transform=`translateX(${N*te.x}px) translateY(${F*te.y}px)`,j==="pointerdown"?ae.opacity="1":j==="pointerup"&&(ae.opacity="0");const we={pointerId:K-5678,pointerType:"touch",target:C,clientX:N*te.x+H.x,clientY:F*te.y+H.y,altKey:!0};C.dispatchEvent(new PointerEvent(j,we))}},z=()=>{const j=this[sf];if(j!==Qt.AUTOMATIC||!C.isConnected){for(const te of this[Ug])te.style.opacity="0";Q("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:j}})),document.removeEventListener("visibilitychange",D);return}const K=Math.min(1,(performance.now()-O)/E);for(const[te,ae]of R.entries())ae.x=_[te].x(K),ae.y=_[te].y(K);Q("pointermove"),K<1?requestAnimationFrame(z):(Q("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Qt.AUTOMATIC}})),document.removeEventListener("visibilitychange",D))},D=()=>{let j=0;document.visibilityState==="hidden"?j=performance.now()-O:O=performance.now()-j};document.addEventListener("visibilitychange",D),Q("pointerdown"),this[sf]=Qt.AUTOMATIC,requestAnimationFrame(z)}[(e=kg,t=ef,i=Ug,s=$f,r=Zc,o=$a,a=nf,l=Do,c=sf,u=mt,h=Qg,d=eu,f=Gg,m=tu,g=Xs,xM)](E){const w=this[mt],M=this[se];M.framedFoVDeg=E[0]*180/Math.PI,w.changeSource=Qt.NONE,w.setFieldOfView(M.adjustedFoV(M.framedFoVDeg)),this[qa]()}[vM](E){const w=this[mt];if(this[tu]){const{theta:M,phi:C}=this.getCameraOrbit();E[0]=M,E[1]=C,this[tu]=!1}w.changeSource=Qt.NONE,w.setOrbit(E[0],E[1],E[2]),this[qa]()}[bM](E){this[mt].applyOptions({minimumAzimuthalAngle:E[0],minimumPolarAngle:E[1],minimumRadius:E[2]}),this.jumpCameraToGoal()}[_M](E){this[mt].applyOptions({maximumAzimuthalAngle:E[0],maximumPolarAngle:E[1],maximumRadius:E[2]}),this[yM](E[2]),this.jumpCameraToGoal()}[wM](E){this[mt].applyOptions({minimumFieldOfView:E[0]*180/Math.PI}),this.jumpCameraToGoal()}[SM](E){const w=this[se].adjustedFoV(E[0]*180/Math.PI);this[mt].applyOptions({maximumFieldOfView:w}),this.jumpCameraToGoal()}[EM](E){const[w,M,C]=E;this[gt].arRenderer.isPresenting||this[se].setTarget(w,M,C),this[mt].changeSource=Qt.NONE,this[gt].arRenderer.updateTarget(),this[qa]()}[Ps](E,w){if(super[Ps](E,w),this[gt].isPresenting||!this[xa]())return;const M=this[mt],C=this[se],S=performance.now();if(this[Do]&&this.loaded&&S>this[Tu]+this.interactionPromptThreshold&&(this[Do]=!1,this[$a]=S,this[kg].classList.add("visible")),isFinite(this[$a])&&this.interactionPromptStyle===Fg.WIGGLE){const O=(S-this[$a])/EW%1,N=bW(O),F=_W(O);if(this[ef].style.opacity=`${F}`,N!==this[Zc]){const H=N*C.width*.05,Q=(N-this[Zc])*Math.PI/16;this[ef].style.transform=`translateX(${H}px)`,M.changeSource=Qt.AUTOMATIC,M.adjustOrbit(Q,0,0),this[Zc]=N}}const _=M.update(E,w),R=C.updateTarget(w);(_||R)&&this[Og]()}[tf](){this[Do]=!1,this[kg].classList.remove("visible"),this[$a]=1/0}[yM](E){const w=Math.max(this[se].farRadius(),E),M=0,C=Math.abs(2*w);this[mt].updateNearFar(M,C)}[AM](){const{theta:E,phi:w}=this[mt].getCameraSpherical(this[Qg]),M=(4+Math.floor((E%QW+OW)/eL))%4,C=Math.floor(w/UW),S=TW[M],R=`${RW[C]}${S}`,O=R;O in this[Xs]?this[Jp](this[Xs][O]):this[Jp](`View from stage ${R}`)}get[Pl](){let E=DW;return"interaction-prompt"in this[Xs]&&(E=`. ${this[Xs]["interaction-prompt"]}`),super[Pl].replace(/\.$/,"")+(this.cameraControls?E:"")}async[Zp](E){const w=this[mt],M=this[se],C=M.adjustedFoV(M.framedFoVDeg);super[Zp](E);const S=M.adjustedFoV(M.framedFoVDeg)/C,_=w.getFieldOfView()*(isFinite(S)?S:1);w.updateAspect(this[se].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[mt].setFieldOfView(_),this.jumpCameraToGoal()}[Ns](){super[Ns](),this[Gg]?this[tu]=!0:this[Gg]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(A=qa,p=Og,y=Jc,gM)](){if(typeof this.a11y=="string")if(this.a11y.startsWith("{"))try{this[Xs]=JSON.parse(this.a11y)}catch(E){console.warn("Error parsing a11y JSON:",E)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[Xs]={};else typeof this.a11y=="object"&&this.a11y!=null?this[Xs]=Object.assign({},this.a11y):this[Xs]={};this[os].setAttribute("aria-label",this[Pl])}}return nn([Le({type:Boolean,attribute:"camera-controls"})],v.prototype,"cameraControls",void 0),nn([Fr({intrinsics:ZD,observeEffects:!0,updateHandler:vM}),Le({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],v.prototype,"cameraOrbit",void 0),nn([Fr({intrinsics:kW,observeEffects:!0,updateHandler:EM}),Le({type:String,attribute:"camera-target",hasChanged:()=>!0})],v.prototype,"cameraTarget",void 0),nn([Fr({intrinsics:mM,observeEffects:!0,updateHandler:xM}),Le({type:String,attribute:"field-of-view",hasChanged:()=>!0})],v.prototype,"fieldOfView",void 0),nn([Fr({intrinsics:NW,updateHandler:bM}),Le({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],v.prototype,"minCameraOrbit",void 0),nn([Fr({intrinsics:FW,updateHandler:_M}),Le({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],v.prototype,"maxCameraOrbit",void 0),nn([Fr({intrinsics:PW,updateHandler:wM}),Le({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],v.prototype,"minFieldOfView",void 0),nn([Fr({intrinsics:mM,updateHandler:SM}),Le({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],v.prototype,"maxFieldOfView",void 0),nn([Le({type:Number,attribute:"interaction-prompt-threshold"})],v.prototype,"interactionPromptThreshold",void 0),nn([Le({type:String,attribute:"interaction-prompt"})],v.prototype,"interactionPrompt",void 0),nn([Le({type:String,attribute:"interaction-prompt-style"})],v.prototype,"interactionPromptStyle",void 0),nn([Le({type:Number,attribute:"orbit-sensitivity"})],v.prototype,"orbitSensitivity",void 0),nn([Le({type:Number,attribute:"zoom-sensitivity"})],v.prototype,"zoomSensitivity",void 0),nn([Le({type:Number,attribute:"pan-sensitivity"})],v.prototype,"panSensitivity",void 0),nn([Le({type:String,attribute:"touch-action"})],v.prototype,"touchAction",void 0),nn([Le({type:Boolean,attribute:"disable-zoom"})],v.prototype,"disableZoom",void 0),nn([Le({type:Boolean,attribute:"disable-pan"})],v.prototype,"disablePan",void 0),nn([Le({type:Boolean,attribute:"disable-tap"})],v.prototype,"disableTap",void 0),nn([Le({type:Number,attribute:"interpolation-decay"})],v.prototype,"interpolationDecay",void 0),nn([Le()],v.prototype,"a11y",void 0),v};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VW=.018,CM=2,zW=300,HW=new Ve,MM=new L,IM=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),rf=Math.PI/8,of=.04,af=10,Qt={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class jW extends ms{constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=Qt.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new Ge,this.panPerPixel=0,this.spherical=new zf,this.goalSpherical=new zf,this.thetaDamper=new Xn,this.phiDamper=new Xn,this.radiusDamper=new Xn,this.logFov=Math.log(IM.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Xn,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=s=>{if(this.enablePan)s.preventDefault();else for(const r of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:r.id})))},this.touchModeZoom=(s,r)=>{if(!this._disableZoom){const o=this.twoTouchDistance(this.pointers[0],this.pointers[1]),a=of*this.zoomSensitivity*(this.lastSeparation-o)*50/this.scene.height;this.lastSeparation=o,this.userAdjustOrbit(0,0,a)}this.panPerPixel>0&&this.movePan(s,r)},this.disableScroll=s=>{s.preventDefault()},this.touchModeRotate=(s,r)=>{const{touchAction:o}=this._options;if(!this.touchDecided&&o!=="none"){this.touchDecided=!0;const a=Math.abs(s),l=Math.abs(r);if(this.changeSource===Qt.USER_INTERACTION&&(o==="pan-y"&&l>a||o==="pan-x"&&a>l)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(s,r)},this.onPointerDown=s=>{if(this.pointers.length>2)return;const{element:r}=this;this.pointers.length===0&&(r.addEventListener("pointermove",this.onPointerMove),r.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=s.clientX,this.startPointerPosition.clientY=s.clientY,this.startTime=performance.now());try{r.setPointerCapture(s.pointerId)}catch{}this.pointers.push({clientX:s.clientX,clientY:s.clientY,id:s.pointerId}),this.isUserPointing=!1,s.pointerType==="touch"?(this.changeSource=s.altKey?Qt.AUTOMATIC:Qt.USER_INTERACTION,this.onTouchChange(s)):(this.changeSource=Qt.USER_INTERACTION,this.onMouseDown(s)),this.changeSource===Qt.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=s=>{const r=this.pointers.find(c=>c.id===s.pointerId);if(r==null)return;if(s.pointerType==="mouse"&&s.buttons===0){this.onPointerUp(s);return}const o=this.pointers.length,a=(s.clientX-r.clientX)/o,l=(s.clientY-r.clientY)/o;a===0&&l===0||(r.clientX=s.clientX,r.clientY=s.clientY,s.pointerType==="touch"?(this.changeSource=s.altKey?Qt.AUTOMATIC:Qt.USER_INTERACTION,this.touchMode!==null&&this.touchMode(a,l)):(this.changeSource=Qt.USER_INTERACTION,this.panPerPixel>0?this.movePan(a,l):this.handleSinglePointerMove(a,l)))},this.onPointerUp=s=>{const{element:r}=this,o=this.pointers.findIndex(a=>a.id===s.pointerId);o!==-1&&this.pointers.splice(o,1),this.panPerPixel>0&&!s.altKey&&this.resetRadius(),this.pointers.length===0?(r.removeEventListener("pointermove",this.onPointerMove),r.removeEventListener("pointerup",this.onPointerUp),r.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(s)):this.touchMode!==null&&this.onTouchChange(s),this.scene.element[$f].style.opacity=0,r.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=s=>{this.changeSource=Qt.USER_INTERACTION;const r=s.deltaY*(s.deltaMode==1?18:1)*of*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,r),s.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=s=>{const{changeSource:r}=this;this.changeSource=Qt.USER_INTERACTION,(s.shiftKey&&this.enablePan?this.panKeyCodeHandler(s):this.orbitZoomKeyCodeHandler(s))?(s.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=r},this._options=Object.assign({},IM),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,e===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new zf){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=t===0?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,t=this.goalSpherical.phi,i=this.goalSpherical.radius){const{minimumAzimuthalAngle:s,maximumAzimuthalAngle:r,minimumPolarAngle:o,maximumPolarAngle:a,minimumRadius:l,maximumRadius:c}=this._options,{theta:u,phi:h,radius:d}=this.goalSpherical,f=_s(e,s,r);!isFinite(s)&&!isFinite(r)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-f)+f);const m=_s(t,o,a),g=_s(i,l,c);return f===u&&m===h&&g===d||!isFinite(f)||!isFinite(m)||!isFinite(g)?!1:(this.goalSpherical.theta=f,this.goalSpherical.phi=m,this.goalSpherical.radius=g,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=_s(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){const{theta:s,phi:r,radius:o}=this.goalSpherical,{minimumRadius:a,maximumRadius:l,minimumFieldOfView:c,maximumFieldOfView:u}=this._options,h=this.spherical.theta-s,d=Math.PI-.001,f=s-_s(e,-d-h,d-h),m=r-t,g=i===0?0:((i>0?l:a)-o)/(Math.log(i>0?u:c)-this.goalLogFov),A=o+i*(isFinite(g)?g:(l-a)*2);if(this.setOrbit(f,m,A),i!==0){const p=this.goalLogFov+i;this.setFieldOfView(Math.exp(p))}}jumpToGoal(){this.update(0,OD)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:i,maximumRadius:s}=this._options,r=this.spherical.theta-this.goalSpherical.theta;return Math.abs(r)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(r)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,s),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&t!=="none"?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Wi(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return(t-Math.floor(t))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:i,clientY:s}=e,{clientX:r,clientY:o}=t,a=r-i,l=o-s;return Math.sqrt(a*a+l*l)}handleSinglePointerMove(e,t){const i=this.pixelLengthToSphericalAngle(e),s=this.pixelLengthToSphericalAngle(t);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,s,0)}initializePan(){const{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=VW*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){const{scene:i}=this,s=MM.set(e,t,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;s.multiplyScalar(r);const o=i.getTarget();o.add(s.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(o,o),i.setTarget(o.x,o.y,o.z)}recenter(e){if(performance.now()>this.startTime+zW||Math.abs(e.clientX-this.startPointerPosition.clientX)>CM||Math.abs(e.clientY-this.startPointerPosition.clientY)>CM)return;const{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(i==null){const{cameraTarget:s}=t.element;t.element.cameraTarget="",t.element.cameraTarget=s,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(HW.set(0,0));if(t==null)return;e.target.worldToLocal(t.position);const i=e.getTarget(),{theta:s,phi:r}=this.spherical,o=s-e.yaw,a=MM.set(Math.sin(r)*Math.sin(o),Math.cos(r),Math.sin(r)*Math.cos(o)),l=a.dot(t.position.sub(i));i.add(a.multiplyScalar(l)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-l)}onTouchChange(e){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),e.altKey||(this.scene.element[$f].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(e.button===2||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[$f].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,of*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-1*of*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-rf,0);break;case"ArrowDown":this.userAdjustOrbit(0,rf,0);break;case"ArrowLeft":this.userAdjustOrbit(-rf,0,0);break;case"ArrowRight":this.userAdjustOrbit(rf,0,0);break;default:t=!1;break}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-1*af);break;case"ArrowDown":this.movePan(0,af);break;case"ArrowLeft":this.movePan(-1*af,0);break;case"ArrowRight":this.movePan(af,0);break;default:t=!1;break}return t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=30,TM=.8,RM=1.5,qW=20,$W=.2,XW=.25,KW=10,Xa=150,BM=5,YW=.1,zr={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},Rv={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},nu=new L,Ka=new ei,JW=new Fe,ZW=new L,e7=new _n(45,1,.1,100),DM=new ui().setFromPoints([new L(0,0,0),new L(0,0,-1)]),t7=new Er;class n7 extends ms{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new L,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new L,this.relativeOrientation=new ei,this.scaleLine=new Ih(DM),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new L,this.goalYaw=0,this.goalScale=1,this.xDamper=new Xn,this.yDamper=new Xn,this.zDamper=new Xn,this.yawDamper=new Xn,this.pitchDamper=new Xn,this.rollDamper=new Xn,this.scaleDamper=new Xn,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=t=>{const i=this.presentedScene,s=t.target;if(this.placementBox.controllerIntersection(i,s)!=null)this.selectedController!=null&&(this.selectedController.userData.line.visible=!1,i.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/i.pivot.scale.x,this.scaleLine.visible=!0)),s.attach(i.pivot),this.selectedController=s,i.setShadowIntensity(.01);else{const r=s===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(s.quaternion).invert().multiply(i.pivot.getWorldQuaternion(Ka)),r.userData.turning=!1,s.userData.turning=!0,s.userData.line.visible=!1}},this.onControllerSelectEnd=t=>{const i=t.target;if(i.userData.turning=!1,i.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,this.selectedController!=null&&this.selectedController!=i)return;const s=this.presentedScene;s.attach(s.pivot),this.selectedController=null,this.goalYaw=Math.atan2(s.pivot.matrix.elements[8],s.pivot.matrix.elements[10]),this.goalPosition.x=s.pivot.position.x,this.goalPosition.z=s.pivot.position.z},this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new eM(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const i=this.transientHitTestSource;if(i==null)return;const s=this.frame.getHitTestResultsForTransientInput(i),r=this.presentedScene,o=this.placementBox;if(s.length===1){this.inputSource=t.inputSource;const{axes:a}=this.inputSource.gamepad,l=o.getHit(this.presentedScene,a[0],a[1]);o.show=!0,l!=null?(this.isTranslating=!0,this.lastDragPosition.copy(l)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=a[0]*RM)}else if(s.length===2){o.show=!0,this.isTwoFingering=!0;const{separation:a}=this.fingerPolar(s);this.firstRatio=a/r.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){EC();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:[],optionalFeatures:["hit-test","dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return EC(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,t=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise((c,u)=>{requestAnimationFrame(()=>c())});e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),t===!0&&(this.xrLight=new oW(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const c=this.presentedScene;c.add(this.xrLight),c.environment=this.xrLight.environment}));const s=await this.resolveARSession();s.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const r=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;const o=await s.requestReferenceSpace("viewer");this.xrMode=s.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const a=qW*Math.PI/180,l=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(a),z:-Math.cos(a)});s.requestHitTestSource({space:o,offsetRay:l}).then(c=>{this.initialHitSource=c}),this.xrMode!=="screen-space"&&(this.setupControllers(),this.xDamper.setDecayTime(Xa),this.yDamper.setDecayTime(Xa),this.zDamper.setDecayTime(Xa),this.yawDamper.setDecayTime(Xa),this.pitchDamper.setDecayTime(Xa),this.rollDamper.setDecayTime(Xa)),this.currentSession=s,this.placementBox=new eM(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:zr.SESSION_STARTED})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const e=this.presentedScene;if(e.add(this.controller1),e.add(this.controller2),!this.controller1.userData.line){const t=new Ih(DM);t.name="line",t.scale.z=BM,this.controller1.userData.turning=!1,this.controller1.userData.line=t,this.controller1.add(t),this.controller2.userData.turning=!1;const i=t.clone();this.controller2.userData.line=i,this.controller2.add(i),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:s}=e,r=YW/Math.max(s.x,s.y,s.z),o=new xt(t7);o.name="box",o.scale.copy(s).multiplyScalar(r),o.visible=!1,this.controller1.userData.box=o,e.add(o);const a=o.clone();this.controller2.userData.box=a,e.add(a)}}hover(e){if(this.xrMode==="screen-space"||this.selectedController==e)return!1;const t=this.presentedScene,i=this.placementBox.controllerIntersection(t,e);return e.userData.box.visible=(i==null||e.userData.turning)&&!this.isTwoFingering,e.userData.line.scale.z=i==null?BM:i.distance,i!=null}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await e}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(e!=null){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;e!=null&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,t!=null){const{element:o}=t;this.xrLight!=null&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.add(t.pivot),t.pivot.quaternion.set(0,0,0,1),t.pivot.position.set(0,0,0),t.pivot.scale.set(1,1,1),t.setShadowOffset(0);const a=this.turntableRotation;a!=null&&(t.yaw=a);const l=this.oldShadowIntensity;l!=null&&t.setShadowIntensity(l),t.setEnvironmentAndSkybox(o[_u],o[wu]);const c=this.oldTarget;t.setTarget(c.x,c.y,c.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0);const{width:u,height:h}=o.getBoundingClientRect();t.setSize(u,h),requestAnimationFrame(()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Qt.NONE}}))})}this.renderer.height=0;const i=this.exitWebXRButtonContainer;i!=null&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const s=this.transientHitTestSource;s!=null&&(s.cancel(),this.transientHitTestSource=null);const r=this.initialHitSource;r!=null&&(r.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.xrMode!=="screen-space"&&(this.controller1!=null&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),this.controller2!=null&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:zr.NOT_PRESENTING})}updateView(e){const t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(e7),t.xrCamera=i.getCamera();const{elements:s}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(s[1],s[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const o=e.recommendedViewportScale;e.requestViewportScale(Math.max(o,XW))}const r=i.getBaseLayer();if(r!=null){const o=r instanceof XRWebGLLayer?r.getViewport(e):i.getBinding().getViewSubImage(r,e).viewport;this.threeRenderer.setViewport(o.x,o.y,o.width,o.height)}}placeInitially(){const e=this.presentedScene,{pivot:t,element:i}=e,{position:s}=t,r=e.getCamera(),{width:o,height:a}=this.overlay.getBoundingClientRect();e.setSize(o,a),r.projectionMatrixInverse.copy(r.projectionMatrix).invert();const{theta:l}=i.getCameraOrbit(),c=r.getWorldDirection(nu);e.yaw=Math.atan2(-c.x,-c.z)-l,this.goalYaw=e.yaw;const u=Math.max(1,2*e.boundingSphere.radius);s.copy(r.position).add(c.multiplyScalar(u)),this.updateTarget();const h=e.getTarget();if(s.add(h).sub(this.oldTarget),this.goalPosition.copy(s),e.setHotspotsVisibility(!0),this.xrMode==="screen-space"){const{session:d}=this.frame;d.addEventListener("selectstart",this.onSelectStart),d.addEventListener("selectend",this.onSelectEnd),d.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(f=>{this.transientHitTestSource=f})}}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return t!=null&&(nu.copy(t).sub(this.presentedScene.getCamera().position),nu.length()>KW)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(i==null)return null;const s=JW.fromArray(i.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(s.elements[4],s.elements[6])),s.elements[5]>.75!==this.placeOnWall?ZW.setFromMatrixPosition(s):null}moveToFloor(e){const t=this.initialHitSource;if(t==null)return;const i=e.getHitTestResults(t);if(i.length==0)return;const s=i[0],r=this.getHitPoint(s);r!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(r):this.goalPosition.y=r.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:zr.OBJECT_PLACED}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,s=i[0]-t[0],r=i[1]-t[1],o=Math.atan2(r,s);let a=this.lastAngle-o;return a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),this.lastAngle=o,{separation:Math.sqrt(s*s+r*r),deltaYaw:a}}setScale(e){const t=e/this.firstRatio;this.goalScale=Math.abs(t-1)<$W?1:t}processInput(e){const t=this.transientHitTestSource;if(t==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const i=e.getHitTestResultsForTransientInput(t),s=this.presentedScene,r=s.pivot.scale.x;if(this.isTwoFingering){if(i.length<2)this.isTwoFingering=!1;else{const{separation:o,deltaYaw:a}=this.fingerPolar(i);this.placeOnWall===!1&&(this.goalYaw+=a),s.canScale&&this.setScale(o)}return}else if(i.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:o}=this.fingerPolar(i);this.firstRatio=o/r;return}if(this.isRotating){const o=this.inputSource.gamepad.axes[0]*RM;this.goalYaw+=o-this.lastAngle,this.lastAngle=o}else this.isTranslating&&i.forEach(o=>{if(o.inputSource!==this.inputSource)return;let a=null;if(o.results.length>0&&(a=this.getHitPoint(o.results[0])),a==null&&(a=this.getTouchLocation()),a!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const l=a.y-this.lastDragPosition.y;if(l<0){this.placementBox.offsetHeight=l/r,this.presentedScene.setShadowOffset(l);const c=nu.copy(s.getCamera().position),u=-l/(c.y-a.y);c.multiplyScalar(u),a.multiplyScalar(1-u).add(c)}}this.goalPosition.add(a),this.lastDragPosition.copy(a)}})}moveScene(e){const t=this.presentedScene,{pivot:i}=t,s=this.placementBox;if(s.updateOpacity(e),this.controller1&&(this.controller1.userData.turning&&(i.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&i.quaternion.premultiply(Ka.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),i.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(i.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&i.quaternion.premultiply(Ka.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),i.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const d=this.controllerSeparation();this.setScale(d),this.scaleLine.scale.z=-d,this.scaleLine.lookAt(this.controller2.position)}const r=t.pivot.scale.x;if(this.goalScale!==r){const d=this.scaleDamper.update(r,this.goalScale,e,1);t.pivot.scale.set(d,d,d)}if(i.parent!==t)return;const{position:o}=i,a=t.boundingSphere.radius,l=this.goalPosition;let c=Qt.NONE;if(!l.equals(o)){c=Qt.USER_INTERACTION;let{x:d,y:f,z:m}=o;if(d=this.xDamper.update(d,l.x,e,a),f=this.yDamper.update(f,l.y,e,a),m=this.zDamper.update(m,l.z,e,a),o.set(d,f,m),this.xrMode==="screen-space"&&!this.isTranslating){const g=l.y-f;this.placementComplete&&this.placeOnWall===!1?(s.offsetHeight=g/t.pivot.scale.x,t.setShadowOffset(g)):g===0&&(this.placementComplete=!0,s.show=!1,t.setShadowIntensity(TM))}this.xrMode!=="screen-space"&&l.equals(o)&&t.setShadowIntensity(TM)}t.updateTarget(e),Ka.setFromAxisAngle(nu.set(0,1,0),this.goalYaw);const u=t.pivot.quaternion.angleTo(Ka),h=u-this.yawDamper.update(u,0,e,Math.PI);t.pivot.quaternion.rotateTowards(Ka,h),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:c}}))}onWebXRFrame(e,t){if(this.xrMode!=="screen-space"){const a=this.hover(this.controller1),l=this.hover(this.controller2);this.placementBox.show=(a||l)&&!this.isTwoFingering}this.frame=t,++this.frames;const i=this.threeRenderer.xr.getReferenceSpace(),s=t.getViewerPose(i);s==null&&this.tracking===!0&&this.frames>WW&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:Rv.NOT_TRACKING}));const r=this.presentedScene;if(s==null||r==null||!r.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:Rv.TRACKING}));let o=!0;for(const a of s.views){if(this.updateView(a),o){this.moveToFloor(t),this.processInput(t);const l=e-this.lastTick;this.moveScene(l),this.renderer.preRender(r,e,l),this.lastTick=e,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),o=!1}}}function i7(n){const e=new Map,t=new Map,i=n.clone();return tL(n,i,function(s,r){e.set(r,s),t.set(s,r)}),i.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,o=e.get(s),a=o.skeleton.bones;r.skeleton=o.skeleton.clone(),r.bindMatrix.copy(o.bindMatrix),r.skeleton.bones=a.map(function(l){return t.get(l)}),r.bind(r.skeleton,r.bindMatrix)}),i}function tL(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)tL(n.children[i],e.children[i],t)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=Symbol("prepared"),Xp=Symbol("prepare"),gs=Symbol("preparedGLTF"),Kp=Symbol("clone");class s7{static prepare(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[LM])return e;const t=this[Xp](e);return t[LM]=!0,t}static[Xp](e){const{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[gs].parser}get animations(){return this[gs].animations}get scene(){return this[gs].scene}get scenes(){return this[gs].scenes}get cameras(){return this[gs].cameras}get asset(){return this[gs].asset}get userData(){return this[gs].userData}constructor(e){this[gs]=e}clone(){const e=this.constructor,t=this[Kp]();return new e(t)}dispose(){this.scenes.forEach(e=>{e.traverse(t=>{const i=t;if(!i.material)return;(Array.isArray(i.material)?i.material:[i.material]).forEach(r=>{for(const o in r){const a=r[o];if(a instanceof Nt){const l=a.source.data;l.close!=null&&l.close(),a.dispose()}}r.dispose()}),i.geometry.dispose()})})}[Kp](){const e=this[gs],t=i7(this.scene);r7(t,this.scene);const i=[t],s=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:s})}}const r7=(n,e)=>{nL(n,e,(t,i)=>{i.userData.variantMaterials!==void 0&&(t.userData.variantMaterials=new Map(i.userData.variantMaterials)),i.userData.variantData!==void 0&&(t.userData.variantData=i.userData.variantData),i.userData.originalMaterial!==void 0&&(t.userData.originalMaterial=i.userData.originalMaterial)})},nL=(n,e,t)=>{t(n,e);for(let i=0;i<n.children.length;i++)nL(n.children[i],e.children[i],t)},PM=Symbol("threeGLTF"),NM=Symbol("gltf"),FM=Symbol("gltfElementMap"),kM=Symbol("threeObjectMap"),UM=Symbol("parallelTraverseThreeScene"),OM=Symbol("correlateOriginalThreeGLTF"),QM=Symbol("correlateCloneThreeGLTF");class Lh{static from(e,t){return t!=null?this[QM](e,t):this[OM](e)}static[OM](e){const t=e.parser.json,i=e.parser.associations,s=new Map,r={name:"Default"},o={type:"materials",index:-1};for(const a of i.keys())a instanceof hs&&i.get(a)==null&&(o.index<0&&(t.materials==null&&(t.materials=[]),o.index=t.materials.length,t.materials.push(r)),a.name=r.name,i.set(a,{materials:o.index}));for(const[a,l]of i){l&&(a.userData=a.userData||{},a.userData.associations=l);for(const c in l)if(c!=null&&c!=="primitives"){const u=c,d=(t[u]||[])[l[u]];if(d==null)continue;let f=s.get(d);f==null&&(f=new Set,s.set(d,f)),f.add(a)}}return new Lh(e,t,i,s)}static[QM](e,t){const i=t.threeGLTF,s=t.gltf,r=JSON.parse(JSON.stringify(s)),o=new Map,a=new Map;for(let l=0;l<i.scenes.length;l++)this[UM](i.scenes[l],e.scenes[l],(c,u)=>{const h=t.threeObjectMap.get(c);if(h!=null){for(const d in h)if(d!=null&&d!=="primitives"){const f=d,m=h[f],g=r[f][m],A=o.get(u)||{};A[f]=m,o.set(u,A);const p=a.get(g)||new Set;p.add(u),a.set(g,p)}}});return new Lh(e,r,o,a)}static[UM](e,t,i){const s=(r,o)=>{if(i(r,o),r.isObject3D){const a=r,l=o;if(a.material)if(Array.isArray(a.material))for(let c=0;c<a.material.length;++c)i(a.material[c],l.material[c]);else i(a.material,l.material);for(let c=0;c<r.children.length;++c)s(r.children[c],o.children[c])}};s(e,t)}get threeGLTF(){return this[PM]}get gltf(){return this[NM]}get gltfElementMap(){return this[FM]}get threeObjectMap(){return this[kM]}constructor(e,t,i,s){this[PM]=e,this[NM]=t,this[FM]=s,this[kM]=i}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=Symbol("correlatedSceneGraph");class o7 extends s7{static[Xp](e){const t=super[Xp](e);t[iu]==null&&(t[iu]=Lh.from(t));const{scene:i}=t,s=new qi(void 0,1/0);return i.traverse(r=>{r.renderOrder=1e3,r.frustumCulled=!1,r.name||(r.name=r.uuid);const o=r;if(o.material){const{geometry:a}=o;o.castShadow=!0,o.isSkinnedMesh&&(a.boundingSphere=s,a.boundingBox=null);const l=o.material;if(l.isMeshBasicMaterial===!0&&(l.toneMapped=!1),l.shadowSide=fs,l.aoMap){const{gltf:c,threeObjectMap:u}=t[iu],h=u.get(l);if(c.materials!=null&&h!=null&&h.materials!=null){const d=c.materials[h.materials];d.occlusionTexture&&d.occlusionTexture.texCoord===0&&a.attributes.uv!=null&&a.setAttribute("uv2",a.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[gs][iu]}[Kp](){const e=super[Kp](),t=new Map;return e.scene.traverse(i=>{const s=i;if(s.material){const o=s.material;if(o!=null){if(t.has(o.uuid)){s.material=t.get(o.uuid);return}s.material=o.clone(),t.set(o.uuid,s.material)}}const r=i;r.target!==void 0&&r.add(r.target)}),e[iu]=Lh.from(e,this.correlatedSceneGraph),e}}const iL=(n,e,t)=>{let i;switch(n){case Jt:i=new Uint8ClampedArray(e*t*4);break;case rn:i=new Uint16Array(e*t*4);break;case po:i=new Uint32Array(e*t*4);break;case wE:i=new Int8Array(e*t*4);break;case SE:i=new Int16Array(e*t*4);break;case Rm:i=new Int32Array(e*t*4);break;case Kt:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let lf;const a7=(n,e,t,i)=>{if(lf!==void 0)return lf;const s=new ji(1,1,i);e.setRenderTarget(s);const r=new xt(new br,new Gi({color:16777215}));e.render(r,t),e.setRenderTarget(null);const o=iL(n,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,o),s.dispose(),r.geometry.dispose(),r.material.dispose(),lf=o[0]!==0,lf};class qE{constructor(e){var t,i,s,r,o,a,l,c,u,h,d,f,m,g,A,p;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(v){throw this._renderer.setRenderTarget(null),v}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const y={format:Pt,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:et,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:et,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS:Xt,wrapT:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapT)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT:Xt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=qE.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new ga,this._camera=new Cc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!a7(this._type,this._renderer,this._camera,y)){let v;switch(this._type){case rn:v=this._renderer.extensions.has("EXT_color_buffer_float")?Kt:void 0;break}v!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Kt}`),this._type=v):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new xt(new br,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new ji(this.width,this.height,y),this._renderTarget.texture.mapping=((A=e.renderTargetOptions)===null||A===void 0?void 0:A.mapping)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.mapping:sc}static instantiateRenderer(){const e=new cD;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=iL(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Wh(this.toArray(),this.width,this.height,Pt,this._type,(e==null?void 0:e.mapping)||sc,(e==null?void 0:e.wrapS)||Xt,(e==null?void 0:e.wrapT)||Xt,(e==null?void 0:e.magFilter)||et,(e==null?void 0:e.minFilter)||et,(e==null?void 0:e.anisotropy)||1,Mt);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Si&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Nt&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Nt&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const l7=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,c7=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class u7 extends Si{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:s,gainMapMax:r,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:l7,fragmentShader:c7,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new L(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new L().fromArray(t)},offsetSdr:{value:new L().fromArray(i)},gainMapMin:{value:new L().fromArray(s)},gainMapMax:{value:new L().fromArray(r)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Rs,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class sL extends Error{}class rL extends Error{}const su=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(o=>o.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},h7=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),s=e.slice(t,i+10);try{const r=su(s,"hdrgm:GainMapMin","0"),o=su(s,"hdrgm:GainMapMax"),a=su(s,"hdrgm:Gamma","1"),l=su(s,"hdrgm:OffsetSDR","0.015625"),c=su(s,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),h=u?u[1]:"0",d=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!d)throw new Error("Incomplete gainmap metadata");const f=d[1];return{gainMapMin:Array.isArray(r)?r.map(m=>parseFloat(m)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(o)?o.map(m=>parseFloat(m)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(m=>parseFloat(m)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(m=>parseFloat(m)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(m=>parseFloat(m)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(f)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class d7{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=r.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(r.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${r.getUint8(a).toString(16)}`));return}if(c=r.getUint8(a+1),s&&console.log(`Marker: ${c.toString(16)}`),c===226){s&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(r.getUint32(u)===1297106432){const h=u+4;let d;if(r.getUint16(h)===18761)d=!1;else if(r.getUint16(h)===19789)d=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(h+2,!d)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const f=r.getUint32(h+4,!d);if(f<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const m=h+f,g=r.getUint16(m,!d),A=m+2;let p=0;for(let E=A;E<A+12*g;E+=12)r.getUint16(E,!d)===45057&&(p=r.getUint32(E+8,!d));const v=m+2+g*12+4,x=[];for(let E=v;E<v+p*16;E+=16){const w={MPType:r.getUint32(E,!d),size:r.getUint32(E+4,!d),dataOffset:r.getUint32(E+8,!d),dependantImages:r.getUint32(E+12,!d),start:-1,end:-1,isFII:!1};w.dataOffset?(w.start=h+w.dataOffset,w.isFII=!1):(w.start=0,w.isFII=!0),w.end=w.start+w.size,x.push(w)}if(this.options.extractNonFII&&x.length){const E=new Blob([r]),w=[];for(const M of x){if(M.isFII&&!this.options.extractFII)continue;const C=E.slice(M.start,M.end+1,"image/jpeg");w.push(C)}t(w)}}}a+=2+r.getUint16(a+2)}})}}const f7=async n=>{const e=h7(n);if(!e)throw new rL("Gain map XMP metadata not found");const i=await new d7({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new sL("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},GM=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=s=>{t(s)},i.src=URL.createObjectURL(n)});class p7 extends Os{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new eD}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new u7({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Nt,sdr:new Nt});return new qE({width:16,height:16,type:rn,colorSpace:Mt,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([r?GM(r):Promise.resolve(void 0),GM(o)]);l=d[0],a=d[1],c=!0}else{const d=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=d[0],a=d[1]}const u=new Nt(l||new ImageData(2,2),sc,Xt,Xt,et,nS,Pt,Jt,1,Mt);u.flipY=c,u.needsUpdate=!0;const h=new Nt(a,sc,Xt,Xt,et,nS,Pt,Jt,1,St);h.flipY=c,h.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=h,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class m7 extends p7{load(e,t,i,s){const r=this.prepareQuadRenderer(),o=new mr(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,h;try{const d=await f7(l);c=d.sdr,u=d.gainMap,h=d.metadata}catch(d){if(d instanceof rL||d instanceof sL)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw d}try{await this.render(r,h,c,u)}catch(d){this.manager.itemError(e),typeof s=="function"&&s(d),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof s=="function"&&s(a)}),r}}class A7 extends KV{constructor(e){super(e),this.type=rn}parse(e){const o=function(C,S){switch(C){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(S||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(S||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(S||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(S||""))}},u=`
`,h=function(C,S,_){S=S||1024;let O=C.pos,N=-1,F=0,H="",Q=String.fromCharCode.apply(null,new Uint16Array(C.subarray(O,O+128)));for(;0>(N=Q.indexOf(u))&&F<S&&O<C.byteLength;)H+=Q,F+=Q.length,O+=128,Q+=String.fromCharCode.apply(null,new Uint16Array(C.subarray(O,O+128)));return-1<N?(C.pos+=F+N+1,H+Q.slice(0,N)):!1},d=function(C){const S=/^#\?(\S+)/,_=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*FORMAT=(\S+)\s*$/,N=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,F={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let H,Q;for((C.pos>=C.byteLength||!(H=h(C)))&&o(1,"no header found"),(Q=H.match(S))||o(3,"bad initial token"),F.valid|=1,F.programtype=Q[1],F.string+=H+`
`;H=h(C),H!==!1;){if(F.string+=H+`
`,H.charAt(0)==="#"){F.comments+=H+`
`;continue}if((Q=H.match(_))&&(F.gamma=parseFloat(Q[1])),(Q=H.match(R))&&(F.exposure=parseFloat(Q[1])),(Q=H.match(O))&&(F.valid|=2,F.format=Q[1]),(Q=H.match(N))&&(F.valid|=4,F.height=parseInt(Q[1],10),F.width=parseInt(Q[2],10)),F.valid&2&&F.valid&4)break}return F.valid&2||o(3,"missing format specifier"),F.valid&4||o(3,"missing image size specifier"),F},f=function(C,S,_){const R=S;if(R<8||R>32767||C[0]!==2||C[1]!==2||C[2]&128)return new Uint8Array(C);R!==(C[2]<<8|C[3])&&o(3,"wrong scanline width");const O=new Uint8Array(4*S*_);O.length||o(4,"unable to allocate buffer space");let N=0,F=0;const H=4*R,Q=new Uint8Array(4),z=new Uint8Array(H);let D=_;for(;D>0&&F<C.byteLength;){F+4>C.byteLength&&o(1),Q[0]=C[F++],Q[1]=C[F++],Q[2]=C[F++],Q[3]=C[F++],(Q[0]!=2||Q[1]!=2||(Q[2]<<8|Q[3])!=R)&&o(3,"bad rgbe scanline format");let j=0,K;for(;j<H&&F<C.byteLength;){K=C[F++];const ae=K>128;if(ae&&(K-=128),(K===0||j+K>H)&&o(3,"bad scanline data"),ae){const we=C[F++];for(let X=0;X<K;X++)z[j++]=we}else z.set(C.subarray(F,F+K),j),j+=K,F+=K}const te=R;for(let ae=0;ae<te;ae++){let we=0;O[N]=z[ae+we],we+=R,O[N+1]=z[ae+we],we+=R,O[N+2]=z[ae+we],we+=R,O[N+3]=z[ae+we],N+=4}D--}return O},m=function(C,S,_,R){const O=C[S+3],N=Math.pow(2,O-128)/255;_[R+0]=C[S+0]*N,_[R+1]=C[S+1]*N,_[R+2]=C[S+2]*N,_[R+3]=1},g=function(C,S,_,R){const O=C[S+3],N=Math.pow(2,O-128)/255;_[R+0]=Id.toHalfFloat(Math.min(C[S+0]*N,65504)),_[R+1]=Id.toHalfFloat(Math.min(C[S+1]*N,65504)),_[R+2]=Id.toHalfFloat(Math.min(C[S+2]*N,65504)),_[R+3]=Id.toHalfFloat(1)},A=new Uint8Array(e);A.pos=0;const p=d(A),y=p.width,v=p.height,x=f(A.subarray(A.pos),y,v);let E,w,M;switch(this.type){case Kt:M=x.length/4;const C=new Float32Array(M*4);for(let _=0;_<M;_++)m(x,_*4,C,_*4);E=C,w=Kt;break;case rn:M=x.length/4;const S=new Uint16Array(M*4);for(let _=0;_<M;_++)g(x,_*4,S,_*4);E=S,w=rn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:y,height:v,data:E,header:p.string,gamma:p.gamma,exposure:p.exposure,type:w}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(o,a){switch(o.type){case Kt:case rn:o.colorSpace=Mt,o.minFilter=et,o.magFilter=et,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,r,i,s)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},y7={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class VM extends ga{constructor(e){super(),this.position.y=-3.5;const t=new Er;t.deleteAttribute("uv");const i=new Th({metalness:0,side:Cn}),s=new Th({metalness:0}),r=e=="legacy"?g7:y7,o=new nD(16777215,r.topLight.intensity,28,2);o.position.set(...r.topLight.position),this.add(o);const a=new xt(t,i);a.position.set(...r.room.position),a.scale.set(...r.room.scale),this.add(a);for(const l of r.boxes){const c=new xt(t,s);c.position.set(...l.position),c.rotation.set(0,l.rotation,0),c.scale.set(...l.scale),this.add(c)}for(const l of r.lights){const c=new xt(t,this.createAreaLightMaterial(l.intensity));c.position.set(...l.position),c.scale.set(...l.scale),this.add(c)}}createAreaLightMaterial(e){const t=new Gi;return t.color.setScalar(e),t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=.04,Ya=20,x7=/\.hdr(\.js)?$/;class zM{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(e){return this._ldrLoader==null&&(this._ldrLoader=new tD),this._ldrLoader.setWithCredentials(e),this._ldrLoader}imageLoader(e){return this._imageLoader==null&&(this._imageLoader=new m7(this.threeRenderer)),this._imageLoader.setWithCredentials(e),this._imageLoader}hdrLoader(e){return this._hdrLoader==null&&(this._hdrLoader=new A7,this._hdrLoader.setDataType(rn)),this._hdrLoader.setWithCredentials(e),this._hdrLoader}async getLottieLoader(e){if(this._lottieLoader==null){const{LottieLoader:t}=await import(this.lottieLoaderUrl);this._lottieLoader=new t}return this._lottieLoader.setWithCredentials(e),this._lottieLoader}async loadImage(e,t){const i=await new Promise((s,r)=>this.ldrLoader(t).load(e,s,()=>{},r));return i.name=e,i.flipY=!1,i}async loadLottie(e,t,i){const s=await this.getLottieLoader(i);s.setQuality(t);const r=await new Promise((o,a)=>s.load(e,o,()=>{},a));return r.name=e,r}async loadEquirect(e,t=!1,i=()=>{}){try{const s=x7.test(e),r=s?this.hdrLoader(t):this.imageLoader(t),o=await new Promise((a,l)=>r.load(e,c=>{const{renderTarget:u}=c;if(u!=null){const{texture:h}=u;c.dispose(!1),a(h)}else a(c)},c=>{i(c.loaded/c.total*.9)},l));return i(1),o.name=e,o.mapping=Dp,s||(o.colorSpace=St),o}finally{i&&i(1)}}async generateEnvironmentMapAndSkybox(e=null,t=null,i=()=>{},s=!1){const r=t!=="legacy";(t==="legacy"||t==="neutral")&&(t=null),t=vD(t);let o=Promise.resolve(null),a;e&&(o=this.loadEquirectFromUrl(e,s,i)),t?a=this.loadEquirectFromUrl(t,s,i):e?a=this.loadEquirectFromUrl(e,s,i):a=r?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[l,c]=await Promise.all([a,o]);if(l==null)throw new Error("Failed to load environment map.");return{environmentMap:l,skybox:c}}async loadEquirectFromUrl(e,t,i){if(!this.skyboxCache.has(e)){const s=this.loadEquirect(e,t,i);this.skyboxCache.set(e,s)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await y6();const i=this.threeRenderer,s=new NE(256,{generateMipmaps:!1,type:rn,format:Pt,colorSpace:Mt,depthBuffer:!0}),r=new Ev(.1,100,s),o=r.renderTarget.texture;o.name=t;const a=i.outputColorSpace,l=i.toneMapping;return i.toneMapping=Bs,i.outputColorSpace=Mt,r.update(i,e),this.blurCubemap(s,v7),i.toneMapping=l,i.outputColorSpace=a,o}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new VM("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new VM("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(Ya);const s=new Er,r=new xt(s,this.blurMaterial);this.blurScene=new ga,this.blurScene.add(r)}const i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,s){const o=e.width,a=isFinite(i)?Math.PI/(2*o):2*Math.PI/(2*Ya-1),l=i/a,c=isFinite(i)?1+Math.floor(3*l):Ya;c>Ya&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${c} samples when the maximum is set to ${Ya}`);const u=[];let h=0;for(let m=0;m<Ya;++m){const g=m/l,A=Math.exp(-g*g/2);u.push(A),m==0?h+=A:m<c&&(h+=2*A)}for(let m=0;m<u.length;m++)u[m]=u[m]/h;const d=this.blurMaterial.uniforms;d.envMap.value=e.texture,d.samples.value=c,d.weights.value=u,d.latitudinal.value=s==="latitudinal",d.dTheta.value=a,new Ev(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),i=new L(0,1,0);return new Si({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:Rs,depthTest:!1,depthWrite:!1,side:Cn})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=.2,Vg=40,zg=60,HM=5,Ja=[1,.79,.62,.5,.4,.31,.25],b7=3,jM="high-performance",_7=1.3;class as extends ms{static get singleton(){return this._singleton||(this._singleton=new as({powerPreference:(self.ModelViewerElement||{}).powerPreference||jM,debug:_C()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new as({powerPreference:(self.ModelViewerElement||{}).powerPreference||jM,debug:_C()});for(const t of e)t.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return Ja[this.scaleStep]}set minScale(e){let t=1;for(;t<Ja.length&&!(Ja[t]<e);)++t;this.lastStep=t-1}constructor(e){super(),this.loader=new $n(o7),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=b7,this.avgFrameDuration=(zg+Vg)/2,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;(t=this.textureUtils)===null||t===void 0||t.dispose(),this.textureUtils=new zM(this.threeRenderer);for(const i of this.scenes)i.element[qp]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new cD({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=bh}catch(t){console.warn(t)}this.arRenderer=new n7(this),this.textureUtils=this.canRender?new zM(this.threeRenderer):null,$n.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new Ve;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((i,s)=>this.render(i,s))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[Fv]}countVisibleScenes(){const{canvas3D:e}=this;let t=0,i=null;for(const r of this.scenes){const{element:o}=r;o.modelIsVisible&&r.externalRenderer==null&&++t,e.parentElement===r.canvas.parentElement&&(i=r)}const s=t>1;if(i!=null){const r=s&&!this.multipleScenesVisible,o=!i.element.modelIsVisible;if(r||o){const{width:a,height:l}=this.sceneSize(i);this.copyPixels(i,a,l),e.parentElement.removeChild(e)}}this.multipleScenesVisible=s}updateRendererSize(){var e;const t=window.devicePixelRatio;if(t!==this.dpr)for(const r of this.scenes){const{element:o}=r;o[cl](o.getBoundingClientRect())}let i=0,s=0;for(const r of this.scenes)i=Math.max(i,r.width),s=Math.max(s,r.height);if(!(i===this.width&&s===this.height&&t===this.dpr)){this.width=i,this.height=s,this.dpr=t,i=Math.ceil(i*t),s=Math.ceil(s*t),this.canRender&&this.threeRenderer.setSize(i,s,!1);for(const r of this.scenes){const{canvas:o}=r;o.width=i,o.height=s,r.forceRescale(),(e=r.effectRenderer)===null||e===void 0||e.setSize(i,s)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=_s(E7*(e-this.avgFrameDuration),-HM,HM),this.avgFrameDuration>zg?++this.scaleStep:this.avgFrameDuration<Vg&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=(zg+Vg)/2)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else if(e.scaleStep!=0)e.scaleStep=0,this.rescaleCanvas(e);else return!1;return!0}rescaleCanvas(e){const t=Ja[e.scaleStep],i=Math.ceil(this.width/t),s=Math.ceil(this.height/t),{style:r}=e.canvas;r.width=`${i}px`,r.height=`${s}px`,this.canvas3D.style.width=`${i}px`,this.canvas3D.style.height=`${s}px`;const o=this.dpr*t,a=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:o,minimumDpr:this.dpr*Ja[this.lastStep],pixelWidth:Math.ceil(e.width*o),pixelHeight:Math.ceil(e.height*o),reason:a}}))}sceneSize(e){const{dpr:t}=this,i=Ja[e.scaleStep],s=Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),r=Math.min(Math.ceil(e.height*i*t),this.canvas3D.height);return{width:s,height:r}}copyPixels(e,t,i){const s=e.context;if(s==null){console.log("could not acquire 2d context");return}s.clearRect(0,0,t,i),s.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){const{element:s,exposure:r,toneMapping:o}=e;s[Ps](t,i);const a=typeof r=="number"&&!Number.isNaN(r),l=s.environmentImage,c=s.skyboxImage,u=o===bh&&(l==="neutral"||l==="legacy"||!l&&!c);this.threeRenderer.toneMappingExposure=(a?r:1)*(u?_7:1)}render(e,t){if(t!=null){this.arRenderer.onWebXRFrame(e,t);return}const i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);const{canvas3D:s}=this;for(const r of this.orderedScenes()){const{element:o}=r;if(!o.loaded||!o.modelIsVisible&&r.renderCount>0||(this.preRender(r,e,i),!this.shouldRender(r)))continue;if(r.externalRenderer!=null){const c=r.getCamera();c.updateMatrix();const{matrix:u,projectionMatrix:h}=c,d=u.elements.slice(),f=r.getTarget();d[12]+=f.x,d[13]+=f.y,d[14]+=f.z,r.externalRenderer.render({viewMatrix:d,projectionMatrix:h.elements});continue}if(!o.modelIsVisible&&!this.multipleScenesVisible)for(const c of this.scenes)c.element.modelIsVisible&&c.queueRender();const{width:a,height:l}=this.sceneSize(r);r.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-l,a,l),r.effectRenderer!=null?r.effectRenderer.render(i):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=r.toneMapping,this.threeRenderer.render(r,r.camera)),this.multipleScenesVisible||!r.element.modelIsVisible&&r.renderCount===0?this.copyPixels(r,a,l):s.parentElement!==r.canvas.parentElement&&(r.canvas.parentElement.appendChild(s),r.canvas.classList.remove("show")),r.hasRendered(),++r.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe=Symbol("correlatedObjects"),dt=Symbol("onUpdate");class $h{constructor(e,t){this[dt]=e,this[qe]=t}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new Gi,w7=new br(2,2);let S7=0;const Wn=Symbol("threeTexture"),qM=Symbol("threeTextures");let C7=class extends $h{get[Wn](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}get[qM](){return this[qe]}constructor(e,t){super(e,new Set(t?[t]:[])),this[Wn].image.src||(this[Wn].image.src=t.name?t.name:"adhoc_image"+S7++),this[Wn].image.name||(this[Wn].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[Wn].image.name||""}get uri(){return this[Wn].image.src}get bufferView(){return this[Wn].image.bufferView}get element(){const e=this[Wn];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[Wn];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return this.uri!=null?"external":"embedded"}set name(e){for(const t of this[qM])t.image.name=e}update(){const e=this[Wn];e&&e.isCanvasTexture&&!e.animation&&(this[Wn].needsUpdate=!0,this[dt]())}async createThumbnail(e,t){const i=new ga;WM.map=this[Wn];const s=new xt(w7,WM);i.add(s);const r=new Cc(-1,1,1,-1,0,1),{threeRenderer:o}=as.singleton,a=new ji(e,t);o.setRenderTarget(a),o.render(i,r),o.setRenderTarget(null);const l=new Uint8Array(e*t*4);o.readRenderTargetPixels(a,0,0,e,t,l),Jr.width=e,Jr.height=t;const c=Jr.getContext("2d"),u=c.createImageData(e,t);return u.data.set(l),c.putImageData(u,0,0),new Promise(async(h,d)=>{Jr.toBlob(f=>{if(!f)return d("Failed to capture thumbnail.");h(URL.createObjectURL(f))},"image/png")})}};var An;(function(n){n[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.NearestMipmapNearest=9984]="NearestMipmapNearest",n[n.LinearMipmapNearest=9985]="LinearMipmapNearest",n[n.NearestMipmapLinear=9986]="NearestMipmapLinear",n[n.LinearMipmapLinear=9987]="LinearMipmapLinear"})(An||(An={}));var co;(function(n){n[n.ClampToEdge=33071]="ClampToEdge",n[n.MirroredRepeat=33648]="MirroredRepeat",n[n.Repeat=10497]="Repeat"})(co||(co={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new Map([[co.Repeat,ps],[co.ClampToEdge,Xt],[co.MirroredRepeat,Aa]]),Bv=new Map([[ps,co.Repeat],[Xt,co.ClampToEdge],[Aa,co.MirroredRepeat]]),M7=new Map([[An.Nearest,an],[An.Linear,et],[An.NearestMipmapNearest,Hh],[An.LinearMipmapNearest,oa],[An.NearestMipmapLinear,$r],[An.LinearMipmapLinear,Yn]]),oL=new Map([[an,An.Nearest],[et,An.Linear],[Hh,An.NearestMipmapNearest],[oa,An.LinearMipmapNearest],[$r,An.NearestMipmapLinear],[Yn,An.LinearMipmapLinear]]),I7=new Map([[An.Nearest,an],[An.Linear,et]]),aL=new Map([[an,An.Nearest],[et,An.Linear]]),T7=n=>oL.has(n),R7=n=>aL.has(n),B7=n=>Bv.has(n),D7=(n,e)=>{switch(n){case"minFilter":return T7(e);case"magFilter":return R7(e);case"wrapS":case"wrapT":return B7(e);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${n}" on Sampler`)}},Ks=Symbol("threeTexture"),XM=Symbol("threeTextures"),Br=Symbol("setProperty");class L7 extends $h{get[Ks](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}get[XM](){return this[qe]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[Ks].name||""}get minFilter(){return oL.get(this[Ks].minFilter)}get magFilter(){return aL.get(this[Ks].magFilter)}get wrapS(){return Bv.get(this[Ks].wrapS)}get wrapT(){return Bv.get(this[Ks].wrapT)}get rotation(){return this[Ks].rotation}get scale(){return kv(this[Ks].repeat)}get offset(){return kv(this[Ks].offset)}setMinFilter(e){this[Br]("minFilter",M7.get(e))}setMagFilter(e){this[Br]("magFilter",I7.get(e))}setWrapS(e){this[Br]("wrapS",$M.get(e))}setWrapT(e){this[Br]("wrapT",$M.get(e))}setRotation(e){e==null&&(e=0),this[Br]("rotation",e)}setScale(e){e==null&&(e={u:1,v:1}),this[Br]("repeat",new Ve(e.u,e.v))}setOffset(e){e==null&&(e={u:0,v:0}),this[Br]("offset",new Ve(e.u,e.v))}[Br](e,t){if(D7(e,t))for(const i of this[XM])i[e]=t,i.needsUpdate=!0;this[dt]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=Symbol("image"),YM=Symbol("sampler"),JM=Symbol("threeTexture");class lL extends $h{get[JM](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,new Set(t?[t]:[])),this[YM]=new L7(e,t),this[KM]=new C7(e,t)}get name(){return this[JM].name||""}set name(e){for(const t of this[qe])t.name=e}get sampler(){return this[YM]}get source(){return this[KM]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cL,uL,hL;const zo=Symbol("texture"),Ho=Symbol("transform"),Hg=Symbol("materials"),ZM=Symbol("usage"),Za=Symbol("onUpdate"),Mu=Symbol("activeVideo");var Ne;(function(n){n[n.Base=0]="Base",n[n.MetallicRoughness=1]="MetallicRoughness",n[n.Normal=2]="Normal",n[n.Occlusion=3]="Occlusion",n[n.Emissive=4]="Emissive",n[n.Clearcoat=5]="Clearcoat",n[n.ClearcoatRoughness=6]="ClearcoatRoughness",n[n.ClearcoatNormal=7]="ClearcoatNormal",n[n.SheenColor=8]="SheenColor",n[n.SheenRoughness=9]="SheenRoughness",n[n.Transmission=10]="Transmission",n[n.Thickness=11]="Thickness",n[n.Specular=12]="Specular",n[n.SpecularColor=13]="SpecularColor",n[n.Iridescence=14]="Iridescence",n[n.IridescenceThickness=15]="IridescenceThickness",n[n.Anisotropy=16]="Anisotropy"})(Ne||(Ne={}));class Ll{constructor(e,t,i,s){this[cL]=null,this[uL]={rotation:0,scale:new Ve(1,1),offset:new Ve(0,0)},this[hL]=!1,i&&(this[Ho].rotation=i.rotation,this[Ho].scale.copy(i.repeat),this[Ho].offset.copy(i.offset),this[zo]=new lL(e,i)),this[Za]=e,this[Hg]=s,this[ZM]=t}get texture(){return this[zo]}setTexture(e){var t,i;const s=e!=null?e.source[Wn]:null,r=(t=this[zo])===null||t===void 0?void 0:t.source[Wn];if(r!=null&&r.isVideoTexture?this[Mu]=!1:!((i=this[zo])===null||i===void 0)&&i.source.animation&&this[zo].source.animation.removeEventListener("enterFrame",this[Za]),this[zo]=e,s!=null&&s.isVideoTexture){const a=s.image;if(this[Mu]=!0,a.requestVideoFrameCallback!=null){const l=()=>{this[Mu]&&(this[Za](),a.requestVideoFrameCallback(l))};a.requestVideoFrameCallback(l)}else{const l=()=>{this[Mu]&&(this[Za](),requestAnimationFrame(l))};requestAnimationFrame(l)}}else(e==null?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[Za]);let o=St;if(this[Hg])for(const a of this[Hg]){switch(this[ZM]){case Ne.Base:a.map=s;break;case Ne.MetallicRoughness:o=Mt,a.metalnessMap=s,a.roughnessMap=s;break;case Ne.Normal:o=Mt,a.normalMap=s;break;case Ne.Occlusion:o=Mt,a.aoMap=s;break;case Ne.Emissive:a.emissiveMap=s;break;case Ne.Clearcoat:a.clearcoatMap=s;break;case Ne.ClearcoatRoughness:a.clearcoatRoughnessMap=s;break;case Ne.ClearcoatNormal:a.clearcoatNormalMap=s;break;case Ne.SheenColor:a.sheenColorMap=s;break;case Ne.SheenRoughness:a.sheenRoughnessMap=s;break;case Ne.Transmission:a.transmissionMap=s;break;case Ne.Thickness:a.thicknessMap=s;break;case Ne.Specular:a.specularIntensityMap=s;break;case Ne.SpecularColor:a.specularColorMap=s;break;case Ne.Iridescence:a.iridescenceMap=s;break;case Ne.IridescenceThickness:a.iridescenceThicknessMap=s;break;case Ne.Anisotropy:a.anisotropyMap=s;break}a.needsUpdate=!0}s&&(s.colorSpace=o,s.rotation=this[Ho].rotation,s.repeat=this[Ho].scale,s.offset=this[Ho].offset),this[Za]()}}cL=zo,uL=Ho,hL=Mu;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=Symbol("threeMaterial"),cf=Symbol("threeMaterials"),eI=Symbol("baseColorTexture"),tI=Symbol("metallicRoughnessTexture");class P7 extends $h{get[cf](){return this[qe]}get[ru](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,t);const{map:i,metalnessMap:s}=t.values().next().value;this[eI]=new Ll(e,Ne.Base,i,t),this[tI]=new Ll(e,Ne.MetallicRoughness,s,t)}get baseColorFactor(){const e=[0,0,0,this[ru].opacity];return this[ru].color.toArray(e),e}get metallicFactor(){return this[ru].metalness}get roughnessFactor(){return this[ru].roughness}get baseColorTexture(){return this[eI]}get metallicRoughnessTexture(){return this[tI]}setBaseColorFactor(e){const t=new Ie;e instanceof Array?t.fromArray(e):t.set(e);for(const i of this[cf])i.color.set(t),e instanceof Array&&e.length>3?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[dt]()}setMetallicFactor(e){for(const t of this[cf])t.metalness=e;this[dt]()}setRoughnessFactor(e){for(const t of this[cf])t.roughness=e;this[dt]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nI,iI;const sI=Symbol("pbrMetallicRoughness"),rI=Symbol("normalTexture"),oI=Symbol("occlusionTexture"),aI=Symbol("emissiveTexture"),Rt=Symbol("backingThreeMaterial"),lI=Symbol("applyAlphaCutoff"),jg=Symbol("getAlphaMode"),el=Symbol("lazyLoadGLTFInfo"),Wg=Symbol("initialize"),Dv=Symbol("getLoadedMaterial"),xe=Symbol("ensureMaterialIsLoaded"),cI=Symbol("gltfIndex"),Iu=Symbol("setActive"),Wl=Symbol("variantIndices"),qg=Symbol("isActive"),uI=Symbol("modelVariants"),$g=Symbol("name"),si=Symbol("pbrTextures");class Xg extends $h{get[(nI=Wl,iI=si,Rt)](){return this[qe].values().next().value}constructor(e,t,i,s,r,o,a=void 0){super(e,r),this[nI]=new Set,this[iI]=new Map,this[cI]=t,this[qg]=i,this[uI]=s,this[$g]=o,a==null?this[Wg]():this[el]=a}[Wg](){const e=this[dt],t=this[qe];this[sI]=new P7(e,t);const{normalMap:i,aoMap:s,emissiveMap:r}=t.values().next().value;this[rI]=new Ll(e,Ne.Normal,i,t),this[oI]=new Ll(e,Ne.Occlusion,s,t),this[aI]=new Ll(e,Ne.Emissive,r,t);const o=a=>{this[si].set(a,new Ll(e,a,null,t))};o(Ne.Clearcoat),o(Ne.ClearcoatRoughness),o(Ne.ClearcoatNormal),o(Ne.SheenColor),o(Ne.SheenRoughness),o(Ne.Transmission),o(Ne.Thickness),o(Ne.Specular),o(Ne.SpecularColor),o(Ne.Iridescence),o(Ne.IridescenceThickness),o(Ne.Anisotropy)}async[Dv](){if(this[el]!=null){const e=await this[el].doLazyLoad();return this[Wg](),this[el]=void 0,this.ensureLoaded=async()=>{},e}return null}colorFromRgb(e){const t=new Ie;return e instanceof Array?t.fromArray(e):t.set(e),t}[xe](){if(this[el]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[Dv]()}get isLoaded(){return this[el]==null}get isActive(){return this[qg]}[Iu](e){this[qg]=e}get name(){return this[$g]||""}set name(e){if(this[$g]=e,this[qe]!=null)for(const t of this[qe])t.name=e}get pbrMetallicRoughness(){return this[xe](),this[sI]}get normalTexture(){return this[xe](),this[rI]}get occlusionTexture(){return this[xe](),this[oI]}get emissiveTexture(){return this[xe](),this[aI]}get emissiveFactor(){return this[xe](),this[Rt].emissive.toArray()}get index(){return this[cI]}hasVariant(e){const t=this[uI].get(e);return t!=null&&this[Wl].has(t.index)}setEmissiveFactor(e){this[xe]();const t=this.colorFromRgb(e);for(const i of this[qe])i.emissive.set(t);this[dt]()}[jg](){return this[Rt].transparent?"BLEND":this[Rt].alphaTest>0?"MASK":"OPAQUE"}[lI](){this[xe]();for(const e of this[qe])this[jg]()==="MASK"?e.alphaTest==null&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[xe]();for(const t of this[qe])t.alphaTest=e,t.needsUpdate=!0;this[lI](),this[dt]()}getAlphaCutoff(){return this[xe](),this[Rt].alphaTest}setDoubleSided(e){this[xe]();for(const t of this[qe])t.side=e?gn:fs,t.needsUpdate=!0;this[dt]()}getDoubleSided(){return this[xe](),this[Rt].side==gn}setAlphaMode(e){this[xe]();const t=(i,s)=>{i.transparent=s,i.depthWrite=!s};for(const i of this[qe])t(i,e==="BLEND"),e==="MASK"?i.alphaTest=.5:i.alphaTest=void 0,i.needsUpdate=!0;this[dt]()}getAlphaMode(){return this[xe](),this[jg]()}get emissiveStrength(){return this[xe](),this[Rt].emissiveIntensity}setEmissiveStrength(e){this[xe]();for(const t of this[qe])t.emissiveIntensity=e;this[dt]()}get clearcoatFactor(){return this[xe](),this[Rt].clearcoat}get clearcoatRoughnessFactor(){return this[xe](),this[Rt].clearcoatRoughness}get clearcoatTexture(){return this[xe](),this[si].get(Ne.Clearcoat)}get clearcoatRoughnessTexture(){return this[xe](),this[si].get(Ne.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[xe](),this[si].get(Ne.ClearcoatNormal)}get clearcoatNormalScale(){return this[xe](),this[Rt].clearcoatNormalScale.x}setClearcoatFactor(e){this[xe]();for(const t of this[qe])t.clearcoat=e;this[dt]()}setClearcoatRoughnessFactor(e){this[xe]();for(const t of this[qe])t.clearcoatRoughness=e;this[dt]()}setClearcoatNormalScale(e){this[xe]();for(const t of this[qe])t.clearcoatNormalScale=new Ve(e,e);this[dt]()}get ior(){return this[xe](),this[Rt].ior}setIor(e){this[xe]();for(const t of this[qe])t.ior=e;this[dt]()}get sheenColorFactor(){return this[xe](),this[Rt].sheenColor.toArray()}get sheenColorTexture(){return this[xe](),this[si].get(Ne.SheenColor)}get sheenRoughnessFactor(){return this[xe](),this[Rt].sheenRoughness}get sheenRoughnessTexture(){return this[xe](),this[si].get(Ne.SheenRoughness)}setSheenColorFactor(e){this[xe]();const t=this.colorFromRgb(e);for(const i of this[qe])i.sheenColor.set(t),i.sheen=1;this[dt]()}setSheenRoughnessFactor(e){this[xe]();for(const t of this[qe])t.sheenRoughness=e,t.sheen=1;this[dt]()}get transmissionFactor(){return this[xe](),this[Rt].transmission}get transmissionTexture(){return this[xe](),this[si].get(Ne.Transmission)}setTransmissionFactor(e){this[xe]();for(const t of this[qe])t.transmission=e;this[dt]()}get thicknessFactor(){return this[xe](),this[Rt].thickness}get thicknessTexture(){return this[xe](),this[si].get(Ne.Thickness)}get attenuationDistance(){return this[xe](),this[Rt].attenuationDistance}get attenuationColor(){return this[xe](),this[Rt].attenuationColor.toArray()}setThicknessFactor(e){this[xe]();for(const t of this[qe])t.thickness=e;this[dt]()}setAttenuationDistance(e){this[xe]();for(const t of this[qe])t.attenuationDistance=e;this[dt]()}setAttenuationColor(e){this[xe]();const t=this.colorFromRgb(e);for(const i of this[qe])i.attenuationColor.set(t);this[dt]()}get specularFactor(){return this[xe](),this[Rt].specularIntensity}get specularTexture(){return this[xe](),this[si].get(Ne.Specular)}get specularColorFactor(){return this[xe](),this[Rt].specularColor.toArray()}get specularColorTexture(){return this[xe](),this[si].get(Ne.SheenColor)}setSpecularFactor(e){this[xe]();for(const t of this[qe])t.specularIntensity=e;this[dt]()}setSpecularColorFactor(e){this[xe]();const t=this.colorFromRgb(e);for(const i of this[qe])i.specularColor.set(t);this[dt]()}get iridescenceFactor(){return this[xe](),this[Rt].iridescence}get iridescenceTexture(){return this[xe](),this[si].get(Ne.Iridescence)}get iridescenceIor(){return this[xe](),this[Rt].iridescenceIOR}get iridescenceThicknessMinimum(){return this[xe](),this[Rt].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[xe](),this[Rt].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[xe](),this[si].get(Ne.IridescenceThickness)}setIridescenceFactor(e){this[xe]();for(const t of this[qe])t.iridescence=e;this[dt]()}setIridescenceIor(e){this[xe]();for(const t of this[qe])t.iridescenceIOR=e;this[dt]()}setIridescenceThicknessMinimum(e){this[xe]();for(const t of this[qe])t.iridescenceThicknessRange[0]=e;this[dt]()}setIridescenceThicknessMaximum(e){this[xe]();for(const t of this[qe])t.iridescenceThicknessRange[1]=e;this[dt]()}get anisotropyStrength(){return this[xe](),this[Rt].anisotropy}get anisotropyRotation(){return this[xe](),this[Rt].anisotropyRotation}get anisotropyTexture(){return this[xe](),this[si].get(Ne.Anisotropy)}setAnisotropyStrength(e){this[xe]();for(const t of this[qe])t.anisotropy=e;this[dt]()}setAnisotropyRotation(e){this[xe]();for(const t of this[qe])t.anisotropyRotation=e;this[dt]()}}let dL=class{constructor(e){this.name="",this.children=new Array,this.name=e}};class Kg extends dL{constructor(e,t,i,s){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:r,threeGLTF:o,threeObjectMap:a}=s;this.parser=o.parser,this.modelVariants=i,this.mesh.userData.variantData=i;const l=a.get(e.material);l.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=l.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const c=e.userData.associations||{};if(c.meshes==null){console.error("Mesh is missing primitive index association");return}const d=((r.meshes||[])[c.meshes].primitives||[])[c.primitives];if(d==null){console.error("Mesh primitive definition is missing.");return}if(d.material!=null)this.materials.set(d.material,t[d.material]);else{const f=t.findIndex(m=>m.name==="Default");f>=0?this.materials.set(f,t[f]):console.warn("gltfPrimitive has no material!")}if(d.extensions&&d.extensions.KHR_materials_variants){const f=d.extensions.KHR_materials_variants,g=o.parser.json.extensions.KHR_materials_variants.variants;for(const A of f.mappings){const p=t[A.material];this.materials.set(A.material,p);for(const y of A.variants){const{name:v}=g[y];this.variantToMaterialMap.set(y,p),p[Wl].add(y),i.has(v)||i.set(v,{name:v,index:y})}}}}async setActiveMaterial(e){const t=this.materials.get(e);if(e!==this.activeMaterialIdx){const i=t[qe],s=await t[Dv]();s!=null?this.mesh.material=s:this.mesh.material=i.values().next().value,this.parser.assignFinalMaterial(this.mesh),i.add(this.mesh.material),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(e==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(this.variantToMaterialMap!=null&&e!=null){const t=this.variantToMaterialMap.get(e);if(t!=null)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(t.material!=null)continue;const i=await this.enableVariantHelper(e);i!=null&&(t.material=i)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const s=this.modelVariants.get(t).index;return e[Wl].add(s),this.variantToMaterialMap.set(s,e),this.materials.set(e.index,e),this.updateVariantUserData(s,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;t!=null&&t.delete(e)}}updateVariantUserData(e,t){t[Wl].add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[qe].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return t!=null&&this.variantInfo.has(t.index)?(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hI,dI,fI,pI,mI,AI;const Lo=Symbol("materials"),uf=Symbol("hierarchy"),gI=Symbol("roots"),Ys=Symbol("primitives"),fL=Symbol("prepareVariantsForExport"),pL=Symbol("switchVariant"),mL=Symbol("materialFromPoint"),Lv=Symbol("nodeFromPoint"),AL=Symbol("nodeFromIndex"),Pn=Symbol("variantData"),Pv=Symbol("availableVariants"),Yg=Symbol("modelOnUpdate"),yI=Symbol("cloneMaterial");class N7{constructor(e,t,i,s){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=s}}class F7{constructor(e,t=()=>{}){this[hI]=new Array,this[dI]=new Array,this[fI]=new Array,this[pI]=new Array,this[mI]=()=>{},this[AI]=new Map,this[Yg]=t;const{gltf:i,threeGLTF:s,gltfElementMap:r}=e;for(const[l,c]of i.materials.entries()){const u=r.get(c);if(u!=null)this[Lo].push(new Xg(t,l,!0,this[Pn],u,c.name));else{const d=(i.materials||[])[l],f=new Set;r.set(d,f);const m=async()=>{const g=await s.parser.getDependency("material",l);return f.add(g),g};this[Lo].push(new Xg(t,l,!1,this[Pn],f,c.name,new N7(i,r,d,m)))}}const o=new Map,a=new Array;for(const l of s.scene.children)a.push(l);for(;a.length>0;){const l=a.pop();let c=null;l instanceof xt?(c=new Kg(l,this.materials,this[Pn],e),this[Ys].push(c)):c=new dL(l.name);const u=o.get(l);u!=null?u.children.push(c):this[gI].push(c),this[uf].push(c);for(const h of l.children)a.push(h),o.set(l,c)}}get materials(){return this[Lo]}[(hI=Lo,dI=uf,fI=gI,pI=Ys,mI=Yg,AI=Pn,Pv)](){const e=Array.from(this[Pn].values());return e.sort((t,i)=>t.index-i.index),e.map(t=>t.name)}getMaterialByName(e){const t=this[Lo].filter(i=>i.name===e);return t.length>0?t[0]:null}[AL](e,t){const i=this[uf].find(s=>{if(s instanceof Kg){const{meshes:r,primitives:o}=s.mesh.userData.associations;if(r==e&&o==t)return!0}return!1});return i??null}[Lv](e){return this[uf].find(t=>t instanceof Kg&&t.mesh===e.object)}[mL](e){return this[Lv](e).getActiveMaterial()}async[pL](e){for(const t of this[Ys])await t.enableVariant(e);for(const t of this.materials)t[Iu](!1);for(const t of this[Ys])this.materials[t.getActiveMaterial().index][Iu](!0)}async[fL](){const e=new Array;for(const t of this[Ys])e.push(t.instantiateVariants());await Promise.all(e)}[yI](e,t){const i=this.materials[e];i.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const s=i[qe],r=new Set;for(const[a,l]of s.entries()){const c=l.clone();c.name=t+(s.size>1?"_inst"+a:""),r.add(c)}const o=new Xg(this[Yg],this[Lo].length,!1,this[Pn],r,t);return this[Lo].push(o),o}createMaterialInstanceForVariant(e,t,i,s=!0){let r=null;for(const o of this[Ys]){const a=this[Pn].get(i);a!=null&&o.variantInfo.has(a.index)||o.getMaterial(e)!=null&&(this.hasVariant(i)||this.createVariant(i),r==null&&(r=this[yI](e,t)),o.addVariant(r,i))}if(s&&r!=null){r[Iu](!0),this.materials[e][Iu](!1);for(const o of this[Ys])o.enableVariant(i)}return r}createVariant(e){this[Pn].has(e)?console.warn(`Variant '${e}'' already exists`):this[Pn].set(e,{name:e,index:this[Pn].size})}hasVariant(e){return this[Pn].has(e)}setMaterialToVariant(e,t){if(this[Pv]().find(i=>i===t)==null){console.warn(`Can't add material to '${t}', the variant does not exist.'`);return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const i of this[Ys]){const s=i.getMaterial(e);s!=null&&i.addVariant(s,t)}}updateVariantName(e,t){const i=this[Pn].get(e);i!=null&&(i.name=t,this[Pn].set(t,i),this[Pn].delete(e))}deleteVariant(e){const t=this[Pn].get(e);if(t!=null){for(const i of this.materials)i.hasVariant(e)&&i[Wl].delete(t.index);for(const i of this[Ys])i.deleteVariant(t.index);this[Pn].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jg=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Xf=Symbol("currentGLTF"),Kf=Symbol("originalGltfJson"),jo=Symbol("model"),Zg=Symbol("getOnUpdateMethod"),ou=Symbol("buildTexture"),k7=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this[e]=void 0,this[t]=null,this[i]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[jo]}get availableVariants(){return this.model?this.model[Pv]():[]}get originalGltfJson(){return this[Kf]}[(e=jo,t=Xf,i=Kf,Zg)](){return()=>{this[yn]()}}[ou](o){return o.colorSpace=St,o.wrapS=ps,o.wrapT=ps,new lL(this[Zg](),o)}async createTexture(o,a="image/png"){const{textureUtils:l}=this[gt],c=await l.loadImage(o,this.withCredentials);return c.userData.mimeType=a,this[ou](c)}async createLottieTexture(o,a=1){const{textureUtils:l}=this[gt],c=await l.loadLottie(o,a,this.withCredentials);return this[ou](c)}createVideoTexture(o){const a=document.createElement("video");a.crossOrigin=this.withCredentials?"use-credentials":"anonymous",a.src=o,a.muted=!0,a.playsInline=!0,a.loop=!0,a.play();const l=new NV(a);return this[ou](l)}createCanvasTexture(){const o=document.createElement("canvas"),a=new UV(o);return this[ou](a)}async updated(o){if(super.updated(o),o.has("variantName")){const a=this[va].beginActivity("variant-update");a(.1);const l=this[jo],{variantName:c}=this;l!=null&&(await l[pL](c),this[yn](),this.dispatchEvent(new CustomEvent("variant-applied"))),a(1)}if(o.has("orientation")||o.has("scale")){if(!this.loaded)return;const a=this[se];a.applyTransform(),a.updateBoundingBox(),a.updateShadow(),this[gt].arRenderer.onUpdateScene(),this[yn]()}}[Ns](){super[Ns]();const{currentGLTF:o}=this[se];if(o!=null){const{correlatedSceneGraph:a}=o;a!=null&&o!==this[Xf]&&(this[jo]=new F7(a,this[Zg]()),this[Kf]=JSON.parse(JSON.stringify(a.gltf))),"variants"in o.userData&&this.requestUpdate("variantName")}this[Xf]=o}async exportScene(o){const a=this[se];return new Promise(async(l,c)=>{const u={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(u,o),u.animations=a.animations,u.truncateDrawRange=!0;const h=a.shadow;let d=!1;h!=null&&(d=h.visible,h.visible=!1),await this[jo][fL](),new $p().register(m=>new sW(m)).parse(a.model,m=>l(new Blob([u.binary?m:JSON.stringify(m)],{type:u.binary?"application/octet-stream":"application/json"})),()=>c("glTF export failed"),u),h!=null&&(h.visible=d)})}materialFromPoint(o,a){const l=this[jo];if(l==null)return null;const c=this[se],u=c.getNDC(o,a),h=c.hitFromPoint(u);return h==null||h.face==null?null:l[mL](h)}}return Jg([Le({type:String,attribute:"variant-name"})],s.prototype,"variantName",void 0),Jg([Le({type:String,attribute:"orientation"})],s.prototype,"orientation",void 0),Jg([Le({type:String,attribute:"scale"})],s.prototype,"scale",void 0),s};/* @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7 extends xt{constructor(){super(void 0,new Gi({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(e=this.height,t=this.radius,i=128){(e!=this.height||t!=this.radius||i!=this.resolution)&&(this.height=e,this.radius=t,this.resolution=i,e>0&&t>0&&(this.geometry.dispose(),this.geometry=O7(e,t,i)))}}function O7(n,e,t){const i=new OE(e,2*t,t);i.scale(1,1,-1);const s=i.getAttribute("position"),r=new L;for(let o=0;o<s.count;++o)if(r.fromBufferAttribute(s,o),r.y<0){const a=-n*3/2,l=r.y<a?-n/r.y:1-r.y*r.y/(3*a*a);r.multiplyScalar(l),r.toArray(s.array,3*o)}return s.needsUpdate=!0,i}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new L,e0=new L,t0=new L,df=new Ge,vI=new gi,xI=new ei;class gL extends Lj{constructor(e){super(document.createElement("div")),this.normal=new L(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(e){if(e==null)return;const t=ur(e)[0].terms;for(let i=0;i<3;++i)this.position.setComponent(i,ws(t[i]).number);this.updateMatrixWorld()}updateNormal(e){if(e==null)return;const t=ur(e)[0].terms;for(let i=0;i<3;++i)this.normal.setComponent(i,t[i].number)}updateSurface(){const{mesh:e,tri:t,bary:i}=this;if(e==null||t==null||i==null)return;e.getVertexPosition(t.x,hf),e.getVertexPosition(t.y,e0),e.getVertexPosition(t.z,t0),hf.toArray(df.elements,0),e0.toArray(df.elements,3),t0.toArray(df.elements,6),this.position.copy(i).applyMatrix3(df);const s=this.parent;s.worldToLocal(e.localToWorld(this.position)),vI.set(hf,e0,t0),vI.getNormal(this.normal).transformDirection(e.matrixWorld);const r=s.parent;xI.setFromAxisAngle(hf.set(0,1,0),-r.rotation.y),this.normal.applyQuaternion(xI)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const i=t,s=i.dataset.visibilityAttribute;if(s!=null){const r=`data-${s}`;i.toggleAttribute(r,e)}i.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}const Q7={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},G7={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function EI(n,e,t){return(1-t)*n+t*e}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=9,V7=6,n0=2,z7=.3;class H7 extends bt{constructor(e,t,i){super(),this.camera=new Cc,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new K2,this.horizontalBlurMaterial=new Si(Q7),this.verticalBlurMaterial=new Si(G7),this.intensity=0,this.softness=1,this.boundingBox=new Kn,this.size=new L,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:s}=this;s.rotation.x=Math.PI/2,s.left=-.5,s.right=.5,s.bottom=-.5,s.top=.5,this.add(s);const r=new br,o=new Gi({opacity:1,transparent:!0,side:Cn});this.floor=new xt(r,o),this.floor.userData.noHit=!0,s.add(this.floor),this.blurPlane=new xt(r),this.blurPlane.visible=!1,s.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(a){a.fragmentShader=a.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.depthMaterial.side=gn,this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}setScene(e,t,i){const{boundingBox:s,size:r,rotation:o,position:a}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?n0:1),this.boundingBox.getCenter(a),i==="back"){const{min:l,max:c}=s;[l.y,l.z]=[l.z,l.y],[c.y,c.z]=[c.z,c.y],[r.y,r.z]=[r.z,r.y],o.x=Math.PI/2,o.y=Math.PI}else o.x=0,o.y=0;if(this.isAnimated){const l=s.min.y,c=s.max.y;r.y=this.maxDimension,s.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),s.min.y=l,s.max.y=c,r.set(this.maxDimension,c-l,this.maxDimension)}i==="bottom"?a.y=s.min.y:a.z=s.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:i}=this,s=this.isAnimated?n0:1,r=s*Math.pow(2,bI-e*(bI-V7));this.setMapSize(r);const o=t.y/2,a=t.y*s;i.near=0,i.far=EI(a,o,e),this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=n0);const i=Math.floor(t.x>t.z?e:e*t.x/t.z),s=Math.floor(t.x>t.z?e*t.z/t.x:e),r=10,o=r+i,a=r+s;if(this.renderTarget!=null&&(this.renderTarget.width!==o||this.renderTarget.height!==a)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const l={format:Pt};this.renderTarget=new ji(o,a,l),this.renderTargetBlur=new ji(o,a,l),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+r/i),t.z*(1+r/s),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*EI(z7,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return .001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const s=e.xr.enabled;e.xr.enabled=!1;const r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=s,e.setRenderTarget(r),e.setClearAlpha(i)}blurShadow(e){const{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:s,renderTarget:r,renderTargetBlur:o,blurPlane:a}=this;a.visible=!0,a.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(o),e.render(a,t),a.material=s,s.uniforms.v.value=1/this.renderTarget.height,s.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(r),e.render(a,t),a.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=10,i0=100,s0=new L,wI=new L,SI=new L,ff=new yz,j7=new L,au=new Ve;class W7 extends ga{constructor({canvas:e,element:t,width:i,height:s}){super(),this.annotationRenderer=new Pj,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.appendedAnimations=[],this.markedAnimations=[],this.camera=new _n(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new bt,this.target=new bt,this.animationNames=[],this.boundingBox=new Kn,this.boundingSphere=new qi,this.size=new L,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=bh,this.canScale=!0,this.isDirty=!1,this.goalTarget=new L,this.targetDamperX=new Xn,this.targetDamperY=new Xn,this.targetDamperZ=new Xn,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new U7,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new _n(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(i,s),this.target.name="Target",this.mixer=new gz(this.target);const{domElement:r}=this.annotationRenderer,{style:o}=r;o.display="none",o.pointerEvents="none",o.position="absolute",o.top="0",this.element.shadowRoot.querySelector(".default").appendChild(r),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,t=()=>{}){if(!e||e===this.url){t(1);return}if(this.reset(),this.url=e,this.externalRenderer!=null){const a=await this.externalRenderer.load(t);this.boundingSphere.radius=a.framedRadius,this.idealAspect=a.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let i;try{i=await new Promise(async(a,l)=>{this.cancelPendingSourceChange=()=>l();try{const c=await this.element[gt].loader.load(e,this.element,t);a(c)}catch(c){l(c)}})}catch(a){if(a==null)return;throw a}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=i,i!=null&&(this._model=i.scene,this.target.add(i.scene));const{animations:s}=i,r=new Map,o=[];for(const a of s)r.set(a.name,a),o.push(a.name);this.animations=s,this.animationsByName=r,this.animationNames=o,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;e!=null&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;t!=null&&(t.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[Xf]=null,this.element[Kf]=null,this.element[jo]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(!(this.width===e&&this.height===t)){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.externalRenderer!=null){const i=window.devicePixelRatio;this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new Kn;e.traverse(i=>{const s=i;if(!s.material||!s.material.transparent)return;t.setFromObject(s);const o=t.getSize(j7),a=Math.min(o.x,o.y,o.z);Math.max(o.x,o.y,o.z)<i0*a||this.markBakedShadow(s)})}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,i=new Kn;this.boundingBox.getSize(this.size);for(const s of this.bakedShadows)i.setFromObject(s),!(i.min.y<e.y+this.size.y/i0&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z)&&(i.min.z<e.z+this.size.z/i0&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(s))}applyTransform(){const{model:e}=this;if(e==null)return;const t=ur(this.element.orientation)[0].terms,i=ws(t[0]).number,s=ws(t[1]).number,r=ws(t[2]).number;e.quaternion.setFromEuler(new Wi(s,r,i,"YXZ"));const o=ur(this.element.scale)[0].terms;e.scale.set(o[0].number,o[1].number,o[2].number)}updateBoundingBox(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.findBakedShadows(e);const t=(i,s)=>i.expandByPoint(s);this.setBakedShadowVisibility(!1),this.boundingBox=Kd(e,t,new Kn),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(i=>this.unmarkBakedShadow(i)),this.boundingBox=Kd(e,t,new Kn)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget());const i=(r,o)=>Math.max(r,t.distanceToSquared(o));this.boundingSphere.radius=Math.sqrt(Kd(e,i,0));const s=(r,o)=>{o.sub(t);const a=Math.sqrt(o.x*o.x+o.z*o.z);return Math.max(r,a/(this.idealCameraDistance()-Math.abs(o.y)))};this.idealAspect=Kd(e,s,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(this.xrCamera!=null)au.set(e/window.screen.width,t/window.screen.height);else{const i=this.element.getBoundingClientRect();au.set((e-i.x)/this.width,(t-i.y)/this.height)}return au.multiplyScalar(2).subScalar(1),au.y*=-1,au}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[gt].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(t),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?_I:1)}setGroundedSkybox(){const e=ur(this.element.skyboxHeight)[0].terms[0],t=ws(e).number,i=_I*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(t,i),this.groundedSkybox.position.y=t-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(OD)}updateTarget(e){const t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{const s=this.boundingSphere.radius/10;let{x:r,y:o,z:a}=i;return r=this.targetDamperX.update(r,t.x,e,s),o=this.targetDamperY.update(o,t.y,e,s),a=this.targetDamperZ.update(a,t.z,e,s),this.groundedSkybox.position.x=-r,this.groundedSkybox.position.z=-a,this.target.position.set(r,o,a),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:i,z:s}=this.position;this.yaw=Math.atan2(e-i,t-s)}get model(){return this._model}set yaw(e){this.pivot.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===Op&&(e&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,t=0,i=zl,s=1/0){if(this._currentGLTF==null)return;const{animations:r}=this;if(r==null||r.length===0)return;let o=null;if(e!=null&&(o=this.animationsByName.get(e),o==null)){const a=parseInt(e);!isNaN(a)&&a>=0&&a<r.length&&(o=r[a])}o==null&&(o=r[0]);try{const{currentAnimationAction:a}=this,l=this.mixer.clipAction(o,this);l.timeScale!=this.element.timeScale&&(l.timeScale=this.element.timeScale),this.currentAnimationAction=l,this.element.paused?this.mixer.stopAllAction():(l.paused=!1,a!=null&&l!==a?l.crossFadeFrom(a,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),l.setLoop(i,s),l.enabled=!0,l.clampWhenFinished=!0,l.play()}catch(a){console.error(a)}}appendAnimation(e="",t=zl,i=1/0,s=1,r=1,o=!1,a=!1,l=!0,c=null,u=!1){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:h}=this;if(h==null||h.length===0)return;let d=null;const f=1.25;if(e&&(d=this.animationsByName.get(e)),d!=null){typeof i=="string"?isNaN(i)?(i=1/0,console.warn("Invalid repetitionCount value, repetitionCount is set to Infinity")):i=Math.max(parseInt(i),1):typeof i=="number"&&i<1&&(i=1),i===1&&t!==Ch&&(t=Ch),typeof s=="string"&&(isNaN(s)?(s=1,console.warn("Invalid weight value, weight is set to 1")):s=parseFloat(s)),typeof r=="string"&&(isNaN(r)?(r=1,console.warn("Invalid timeScale value, timeScale is set to 1")):r=parseFloat(r)),typeof o=="string"&&(o.toLowerCase().trim()==="true"?o=!0:o.toLowerCase().trim()==="false"?o=!1:isNaN(o)?(o=!1,console.warn("Invalid fade value, fade is set to false")):o=parseFloat(o)),typeof a=="string"&&(a.toLowerCase().trim()==="true"?a=!0:a.toLowerCase().trim()==="false"?a=!1:isNaN(a)?(a=!1,console.warn("Invalid warp value, warp is set to false")):a=parseFloat(a)),typeof c=="string"&&(isNaN(c)||(c=parseFloat(c)));try{const m=this.mixer.existingAction(d)||this.mixer.clipAction(d,this),g=m.timeScale;u&&this.appendedAnimations.includes(e)&&(this.markedAnimations.map(A=>A.name).includes(e)||this.markedAnimations.push({name:e,loopMode:t,repetitionCount:i})),typeof c=="number"&&(m.time=Math.min(Math.max(c,0),d.duration)),typeof o=="boolean"&&o?m.fadeIn(f):typeof o=="number"?m.fadeIn(Math.max(o,0)):s>=0&&(m.weight=Math.min(Math.max(s,0),1)),typeof a=="boolean"&&a?m.warp(l?g:0,r,f):typeof a=="number"?m.warp(l?g:0,r,Math.max(a,0)):m.timeScale=r,m.isRunning()||(m.time==d.duration&&m.stop(),m.setLoop(t,i),m.paused=!1,m.enabled=!0,m.clampWhenFinished=!0,m.play()),this.appendedAnimations.includes(e)||this.element[se].appendedAnimations.push(e)}catch(m){console.error(m)}}}detachAnimation(e="",t=!0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:i}=this;if(i==null||i.length===0)return;let s=null;const r=1.5;if(e&&(s=this.animationsByName.get(e)),s!=null){typeof t=="string"&&(t.toLowerCase().trim()==="true"?t=!0:t.toLowerCase().trim()==="false"?t=!1:isNaN(t)?(t=!0,console.warn("Invalid fade value, fade is set to true")):t=parseFloat(t));try{const o=this.mixer.existingAction(s)||this.mixer.clipAction(s,this);typeof t=="boolean"&&t?o.fadeOut(r):typeof t=="number"?o.fadeOut(Math.max(t,0)):o.stop();const a=this.element[se].appendedAnimations.filter(l=>l!==e);this.element[se].appendedAnimations=a}catch(o){console.error(o)}}}updateAnimationLoop(e="",t=zl,i=1/0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:s}=this;if(s==null||s.length===0)return;let r=null;if(e&&(r=this.animationsByName.get(e)),r!=null)try{const o=this.mixer.existingAction(r)||this.mixer.clipAction(r,this);o.stop(),o.setLoop(t,i),o.play()}catch(o){console.error(o)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(e!=null){const t=this.element.arPlacement==="wall"?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;t!=null&&t.needsUpdate==!0&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(e<=0&&this.shadow==null))){if(this.shadow==null){const t=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new H7(this,this.shadowSoftness,t)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;t!=null&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;t!=null&&t.setOffset(e)}getHit(e=this){return ff.intersectObject(e,!0).find(i=>i.object.visible&&!i.object.userData.noHit)}hitFromController(e,t=this){return ff.setFromXRController(e),this.getHit(t)}hitFromPoint(e,t=this){return ff.setFromCamera(e,this.getCamera()),this.getHit(t)}positionAndNormalFromPoint(e,t=this){var i;const s=this.hitFromPoint(e,t);if(s==null)return null;const r=s.point,o=s.face!=null?s.face.normal.clone().applyNormalMatrix(new Ge().getNormalMatrix(s.object.matrixWorld)):ff.ray.direction.clone().multiplyScalar(-1),a=(i=s.uv)!==null&&i!==void 0?i:null;return{position:r,normal:o,uv:a}}surfaceFromPoint(e,t=this){const i=this.element.model;if(i==null)return null;const s=this.hitFromPoint(e,t);if(s==null||s.face==null)return null;const r=i[Lv](s),{meshes:o,primitives:a}=r.mesh.userData.associations,l=new L,c=new L,u=new L,{a:h,b:d,c:f}=s.face,m=s.object;m.getVertexPosition(h,l),m.getVertexPosition(d,c),m.getVertexPosition(f,u);const g=new gi(l,c,u),A=new L;return g.getBarycoord(m.worldToLocal(s.point),A),`${o} ${a} ${h} ${d} ${f} ${A.x.toFixed(3)} ${A.y.toFixed(3)} ${A.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element),this.updateSurfaceHotspot(e)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let i=0,s=t.length;i<s;i++){const r=t[i];r instanceof gL&&e(r)}}updateSurfaceHotspot(e){if(e.surface==null||this.element.model==null)return;const t=ur(e.surface)[0].terms;if(t.length!=8){console.warn(e.surface+" does not have exactly 8 numbers.");return}const i=this.element.model[AL](t[0].number,t[1].number);if(i==null){console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const s=i.mesh.geometry.attributes.position.count,r=new L(t[2].number,t[3].number,t[4].number);if(r.x>=s||r.y>=s||r.z>=s){console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const o=new L(t[5].number,t[6].number,t[7].number);e.mesh=i.mesh,e.tri=r,e.bary=o,e.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots(e=>{e.updateSurface()})}updateHotspotsVisibility(e){this.forHotspots(t=>{s0.copy(e),wI.setFromMatrixPosition(t.matrixWorld),s0.sub(wI),SI.copy(t.normal).transformDirection(this.target.matrixWorld),s0.dot(SI)<0?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;const{schemaElement:i,element:s}=this,{alt:r,poster:o,iosSrc:a}=s;if(e!=null){const l=[{"@type":"MediaObject",contentUrl:e,encodingFormat:((t=e.split(".").pop())===null||t===void 0?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];a&&l.push({"@type":"MediaObject",contentUrl:a,encodingFormat:"model/vnd.usdz+zip"});const c={"@context":"http://schema.org/","@type":"3DModel",image:o??void 0,name:r??void 0,encoding:l};i.textContent=JSON.stringify(c),document.head.appendChild(i)}else i.parentElement!=null&&i.parentElement.removeChild(i)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7 extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),this.ongoingActivityCount===1&&this.announceTotalProgress(t,0,e),i=>{let s;return s=Math.max(_s(i,0,1),t.progress),s!==t.progress&&this.announceTotalProgress(t,s,e),t.progress}}announceTotalProgress(e,t,i){let s=0,r=0;t==1&&(e.completed=!0);for(const l of this.ongoingActivities){const{progress:c}=l;s+=1-c,l.completed&&r++}const o=e.progress;e.progress=t,this.totalProgress+=(t-o)*(1-this.totalProgress)/s;const a=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:a,reason:i}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fm=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},CI,MI,II,TI,RI,BI,DI,LI,PI,NI,FI,kI,UI;const $7=10,X7=50,K7=0,Y7=300,J7=150,Jr=document.createElement("canvas"),r0=Symbol("fallbackResizeHandler"),OI=Symbol("defaultAriaLabel"),pf=Symbol("resizeObserver"),tl=Symbol("clearModelTimeout"),o0=Symbol("onContextLost"),nl=Symbol("loaded"),a0=Symbol("status"),l0=Symbol("onFocus"),c0=Symbol("onBlur"),cl=Symbol("updateSize"),mf=Symbol("intersectionObserver"),Wo=Symbol("isElementInViewport"),Yp=Symbol("announceModelVisibility"),Pl=Symbol("ariaLabel"),Nv=Symbol("altDefaulted"),lu=Symbol("statusElement"),Jp=Symbol("updateStatus"),Tu=Symbol("loadedTime"),ql=Symbol("updateSource"),QI=Symbol("markLoaded"),Yf=Symbol("container"),os=Symbol("input"),Fv=Symbol("canvas"),se=Symbol("scene"),yn=Symbol("needsRender"),Ps=Symbol("tick"),Ns=Symbol("onModelLoad"),Zp=Symbol("onResize"),gt=Symbol("renderer"),va=Symbol("progressTracker"),GI=Symbol("getLoaded"),xa=Symbol("getModelIsVisible"),gc=Symbol("shouldAttemptPreload"),Hr=n=>({x:n.x,y:n.y,z:n.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),kv=n=>({u:n.x,v:n.y,toString(){return`${this.u} ${this.v}`}});class Xh extends qo{static get is(){return"model-viewer"}static set modelCacheSize(e){$n[Or].evictionThreshold=e}static get modelCacheSize(){return $n[Or].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),as.singleton.minScale=e}static get minimumRenderScale(){return as.singleton.minScale}get loaded(){return this[GI]()}get[(CI=Wo,MI=nl,II=Tu,TI=a0,RI=tl,BI=r0,DI=Yp,LI=pf,PI=mf,NI=va,gt)](){return as.singleton}get modelIsVisible(){return this[xa]()}constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[CI]=!1,this[MI]=!1,this[II]=0,this[TI]="",this[RI]=null,this[BI]=bC(()=>{const s=this.getBoundingClientRect();this[cl](s)},X7),this[DI]=bC(s=>{const r=this.modelIsVisible;r!==s&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:r}}))},K7),this[LI]=null,this[PI]=null,this[NI]=new q7,this[FI]=()=>{this[lu].textContent=this[a0]},this[kI]=()=>{this[lu].textContent=""},this[UI]=s=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:s.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;T6(e),this[Yf]=e.querySelector(".container"),this[os]=e.querySelector(".userInput"),this[Fv]=e.querySelector("canvas"),this[lu]=e.querySelector("#status"),this[OI]=this[os].getAttribute("aria-label");let t,i;if(this.isConnected){const s=this.getBoundingClientRect();t=s.width,i=s.height}else t=Y7,i=J7;this[se]=new W7({canvas:this[Fv],element:this,width:t,height:i}),Promise.resolve().then(()=>{this[cl](this.getBoundingClientRect())}),hg&&(this[pf]=new ResizeObserver(s=>{if(!this[gt].isPresenting)for(let r of s)r.target===this&&this[cl](r.contentRect)})),dg?this[mf]=new IntersectionObserver(s=>{for(let r of s)if(r.target===this){const o=this.modelIsVisible;this[Wo]=r.isIntersecting,this[Yp](o),this[Wo]&&!this.loaded&&this[ql]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[Wo]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),hg?this[pf].observe(this):self.addEventListener("resize",this[r0]),dg&&this[mf].observe(this),this.addEventListener("focus",this[l0]),this.addEventListener("blur",this[c0]);const e=this[gt];e.addEventListener("contextlost",this[o0]),e.registerScene(this[se]),this[tl]!=null&&(self.clearTimeout(this[tl]),this[tl]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),hg?this[pf].unobserve(this):self.removeEventListener("resize",this[r0]),dg&&this[mf].unobserve(this),this.removeEventListener("focus",this[l0]),this.removeEventListener("blur",this[c0]);const e=this[gt];e.removeEventListener("contextlost",this[o0]),e.unregisterScene(this[se]),this[tl]=self.setTimeout(()=>{this[se].dispose(),this[tl]=null},$7)}updated(e){super.updated(e),e.has("src")&&(this.src==null?(this[nl]=!1,this[Tu]=0,this[se].reset()):this.src!==this[se].url&&(this[nl]=!1,this[Tu]=0,this[ql]())),e.has("alt")&&this[os].setAttribute("aria-label",this[Pl]),e.has("generateSchema")&&(this.generateSchema?this[se].updateSchema(this.src):this[se].updateSchema(null))}toDataURL(e,t){return this[gt].displayCanvas(this[se]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,s=e?e.idealAspect:void 0,{width:r,height:o,idealAspect:a,aspect:l}=this[se],{dpr:c,scaleFactor:u}=this[gt];let h=r*u*c,d=o*u*c,f=0,m=0;if(s===!0)if(a>l){const g=d;d=Math.round(h/a),m=(g-d)/2}else{const g=h;h=Math.round(d*a),f=(g-h)/2}Jr.width=h,Jr.height=d;try{return new Promise(async(g,A)=>{Jr.getContext("2d").drawImage(this[gt].displayCanvas(this[se]),f,m,h,d,0,0,h,d),Jr.toBlob(p=>{if(!p)return A(new Error("Unable to retrieve canvas blob"));g(p)},t,i)})}finally{this[cl]({width:r,height:o})}}registerEffectComposer(e){e.setRenderer(this[gt].threeRenderer),e.setMainCamera(this[se].getCamera()),e.setMainScene(this[se]),this[se].effectRenderer=e}unregisterEffectComposer(){this[se].effectRenderer=null}registerRenderer(e){this[se].externalRenderer=e}unregisterRenderer(){this[se].externalRenderer=null}get[Pl](){return this[Nv]}get[Nv](){return this.alt==null||this.alt==="null"?this[OI]:this.alt}[GI](){return this[nl]}[xa](){return this.loaded&&this[Wo]}[gc](){return!!this.src&&this[Wo]}[cl]({width:e,height:t}){e===0||t===0||(this[Yf].style.width=`${e}px`,this[Yf].style.height=`${t}px`,this[Zp]({width:e,height:t}))}[Ps](e,t){var i;(i=this[se].effectRenderer)===null||i===void 0||i.beforeRender(e,t)}[QI](){this[nl]||(this[nl]=!0,this[Tu]=performance.now())}[yn](){this[se].queueRender()}[Ns](){}[Jp](e){this[a0]=e;const t=this.getRootNode();t!=null&&t.activeElement===this&&this[lu].textContent!=e&&(this[lu].textContent=e)}[(FI=l0,kI=c0,Zp)](e){this[se].setSize(e.width,e.height)}async[(UI=o0,ql)](){const e=this[se];if(this.loaded||!this[gc]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[Jp]("Loading"),e.stopAnimation();const t=this[va].beginActivity("model-load"),i=this.src;try{const s=e.setSource(i,o=>t(_s(o,0,1)*.95)),r=this[qp]();await Promise.all([s,r]),this[QI](),this[Ns](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(o=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),o()})})})}catch(s){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:s}}))}finally{t(1)}}}Fm([Le({type:String})],Xh.prototype,"alt",void 0);Fm([Le({type:String})],Xh.prototype,"src",void 0);Fm([Le({type:Boolean,attribute:"with-credentials"})],Xh.prototype,"withCredentials",void 0);Fm([Le({type:Boolean,attribute:"generate-schema"})],Xh.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u0=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const VI=1e3,Af=Symbol("changeAnimation"),zI=Symbol("appendAnimation"),HI=Symbol("detachAnimation"),pi=Symbol("paused"),Z7={repetitions:1/0,pingpong:!1},eq={pingpong:!1,repetitions:null,weight:1,timeScale:1,fade:!1,warp:!1,relativeWarp:!0,time:null},tq={fade:!0},nq=n=>{var e;class t extends n{constructor(...s){super(s),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[se].subscribeMixerEvent("loop",r=>{const o=r.action._loopCount,a=r.action._clip.name,l=r.action._clip.uuid,c=this[se].markedAnimations.find(u=>u.name===a);if(c){this[se].updateAnimationLoop(c.name,c.loopMode,c.repetitionCount);const u=this[se].markedAnimations.filter(h=>h.name!==a);this[se].markedAnimations=u}this.dispatchEvent(new CustomEvent("loop",{detail:{count:o,name:a,uuid:l}}))}),this[se].subscribeMixerEvent("finished",r=>{if(!this[se].appendedAnimations.includes(r.action._clip.name))this[pi]=!0;else{const o=this[se].appendedAnimations.filter(a=>a!==r.action._clip.name);this[se].appendedAnimations=o}this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[se].animationNames:[]}get duration(){return this[se].duration}get paused(){return this[pi]}get currentTime(){return this[se].animationTime}get appendedAnimations(){return this[se].appendedAnimations}set currentTime(s){this[se].animationTime=s,this[yn]()}get timeScale(){return this[se].animationTimeScale}set timeScale(s){this[se].animationTimeScale=s}pause(){this[pi]||(this[pi]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(s){this.availableAnimations.length>0&&(this[pi]=!1,this[Af](s),this.dispatchEvent(new CustomEvent("play")))}appendAnimation(s,r){this.availableAnimations.length>0&&(this[pi]=!1,this[zI](s,r),this.dispatchEvent(new CustomEvent("append-animation")))}detachAnimation(s,r){this.availableAnimations.length>0&&(this[pi]=!1,this[HI](s,r),this.dispatchEvent(new CustomEvent("detach-animation")))}[(e=pi,Ns)](){super[Ns](),this[pi]=!0,this.animationName!=null&&this[Af](),this.autoplay&&this.play()}[Ps](s,r){super[Ps](s,r),!(this[pi]||!this[xa]()&&!this[gt].isPresenting)&&(this[se].updateAnimation(r/VI),this[yn]())}updated(s){super.updated(s),s.has("autoplay")&&this.autoplay&&this.play(),s.has("animationName")&&this[Af]()}[Af](s=Z7){var r;const o=(r=s.repetitions)!==null&&r!==void 0?r:1/0,a=s.pingpong?Op:o===1?Ch:zl;this[se].playAnimation(this.animationName,this.animationCrossfadeDuration/VI,a,o),this[pi]&&(this[se].updateAnimation(0),this[yn]())}[zI](s="",r=eq){var o;const a=(o=r.repetitions)!==null&&o!==void 0?o:1/0,l=r.pingpong?Op:a===1?Ch:zl,c=!!r.repetitions||"pingpong"in r;this[se].appendAnimation(s||this.animationName,l,a,r.weight,r.timeScale,r.fade,r.warp,r.relativeWarp,r.time,c),this[pi]&&(this[se].updateAnimation(0),this[yn]())}[HI](s="",r=tq){this[se].detachAnimation(s||this.animationName,r.fade),this[pi]&&(this[se].updateAnimation(0),this[yn]())}}return u0([Le({type:Boolean})],t.prototype,"autoplay",void 0),u0([Le({type:String,attribute:"animation-name"})],t.prototype,"animationName",void 0),u0([Le({type:Number,attribute:"animation-crossfade-duration"})],t.prototype,"animationCrossfadeDuration",void 0),t};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=Symbol("hotspotMap"),h0=Symbol("mutationCallback"),cu=Symbol("observer"),d0=Symbol("addHotspot"),jI=Symbol("removeHotspot"),f0=new Fe,iq=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this[e]=new Map,this[t]=o=>{o.forEach(a=>{(!(a instanceof MutationRecord)||a.type==="childList")&&(a.addedNodes.forEach(l=>{this[d0](l)}),a.removedNodes.forEach(l=>{this[jI](l)}),this[yn]())})},this[i]=new MutationObserver(this[h0])}connectedCallback(){super.connectedCallback();for(let a=0;a<this.children.length;++a)this[d0](this.children[a]);const{ShadyDOM:o}=self;o==null?this[cu].observe(this,{childList:!0}):this[cu]=o.observeChildren(this,this[h0])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:o}=self;o==null?this[cu].disconnect():o.unobserveChildren(this[cu])}[(e=Po,t=h0,i=cu,Ns)](){super[Ns]();const o=this[se];o.forHotspots(a=>{o.updateSurfaceHotspot(a)})}[Ps](o,a){super[Ps](o,a);const l=this[se],{annotationRenderer:c}=l,u=l.getCamera();l.shouldRender()&&(l.animateSurfaceHotspots(),l.updateHotspotsVisibility(u.position),c.domElement.style.display="",c.render(l,u))}updateHotspot(o){const a=this[Po].get(o.name);a!=null&&(a.updatePosition(o.position),a.updateNormal(o.normal),a.surface=o.surface,this[se].updateSurfaceHotspot(a),this[yn]())}queryHotspot(o){const a=this[Po].get(o);if(a==null)return null;const l=Hr(a.position),c=Hr(a.normal),u=a.facingCamera,h=this[se],d=h.getCamera(),f=new L;f.setFromMatrixPosition(a.matrixWorld),f.project(d);const m=h.width/2,g=h.height/2;f.x=f.x*m+m,f.y=-(f.y*g)+g;const A=Hr(new L(f.x,f.y,f.z));return!Number.isFinite(A.x)||!Number.isFinite(A.y)?null:{position:l,normal:c,canvasPosition:A,facingCamera:u}}positionAndNormalFromPoint(o,a){const l=this[se],c=l.getNDC(o,a),u=l.positionAndNormalFromPoint(c);if(u==null)return null;f0.copy(l.target.matrixWorld).invert();const h=Hr(u.position.applyMatrix4(f0)),d=Hr(u.normal.transformDirection(f0));let f=null;return u.uv!=null&&(f=kv(u.uv)),{position:h,normal:d,uv:f}}surfaceFromPoint(o,a){const l=this[se],c=l.getNDC(o,a);return l.surfaceFromPoint(c)}[d0](o){if(!(o instanceof HTMLElement&&o.slot.indexOf("hotspot")===0))return;let a=this[Po].get(o.slot);a!=null?a.increment():(a=new gL({name:o.slot,position:o.dataset.position,normal:o.dataset.normal,surface:o.dataset.surface}),this[Po].set(o.slot,a),this[se].addHotspot(a)),this[se].queueRender()}[jI](o){if(!(o instanceof HTMLElement))return;const a=this[Po].get(o.slot);a&&(a.decrement()&&(this[se].removeHotspot(a),this[Po].delete(o.slot)),this[se].queueRender())}}return s};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Gn=Uint8Array,xi=Uint16Array,$E=Int32Array,XE=new Gn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),KE=new Gn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),WI=new Gn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yL=function(n,e){for(var t=new xi(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new $E(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return{b:t,r:s}},vL=yL(XE,2),sq=vL.b,Uv=vL.r;sq[28]=258,Uv[258]=28;var rq=yL(KE,0),qI=rq.r,Ov=new xi(32768);for(var Dt=0;Dt<32768;++Dt){var Dr=(Dt&43690)>>1|(Dt&21845)<<1;Dr=(Dr&52428)>>2|(Dr&13107)<<2,Dr=(Dr&61680)>>4|(Dr&3855)<<4,Ov[Dt]=((Dr&65280)>>8|(Dr&255)<<8)>>1}var Ju=function(n,e,t){for(var i=n.length,s=0,r=new xi(e);s<i;++s)n[s]&&++r[n[s]-1];var o=new xi(e);for(s=1;s<e;++s)o[s]=o[s-1]+r[s-1]<<1;var a;if(t){a=new xi(1<<e);var l=15-e;for(s=0;s<i;++s)if(n[s])for(var c=s<<4|n[s],u=e-n[s],h=o[n[s]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[Ov[h]>>l]=c}else for(a=new xi(i),s=0;s<i;++s)n[s]&&(a[s]=Ov[o[n[s]-1]++]>>15-n[s]);return a},Ea=new Gn(288);for(var Dt=0;Dt<144;++Dt)Ea[Dt]=8;for(var Dt=144;Dt<256;++Dt)Ea[Dt]=9;for(var Dt=256;Dt<280;++Dt)Ea[Dt]=7;for(var Dt=280;Dt<288;++Dt)Ea[Dt]=8;var em=new Gn(32);for(var Dt=0;Dt<32;++Dt)em[Dt]=5;var oq=Ju(Ea,9,0),aq=Ju(em,5,0),xL=function(n){return(n+7)/8|0},EL=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Gn(n.subarray(e,t))},lq=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],km=function(n,e,t){var i=new Error(e||lq[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,km),!t)throw i;return i},Js=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},uu=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},p0=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var s=t.length,r=t.slice();if(!s)return{t:_L,l:0};if(s==1){var o=new Gn(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(E,w){return E.f-w.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,u=1,h=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=s-1;)a=t[t[c].f<t[h].f?c++:h++],l=t[c!=u&&t[c].f<t[h].f?c++:h++],t[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=r[0].s,i=1;i<s;++i)r[i].s>d&&(d=r[i].s);var f=new xi(d+1),m=Qv(t[u-1],f,0);if(m>e){var i=0,g=0,A=m-e,p=1<<A;for(r.sort(function(w,M){return f[M.s]-f[w.s]||w.f-M.f});i<s;++i){var y=r[i].s;if(f[y]>e)g+=p-(1<<m-f[y]),f[y]=e;else break}for(g>>=A;g>0;){var v=r[i].s;f[v]<e?g-=1<<e-f[v]++-1:++i}for(;i>=0&&g;--i){var x=r[i].s;f[x]==e&&(--f[x],++g)}m=e}return{t:new Gn(f),l:m}},Qv=function(n,e,t){return n.s==-1?Math.max(Qv(n.l,e,t+1),Qv(n.r,e,t+1)):e[n.s]=t},$I=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new xi(++e),i=0,s=n[0],r=1,o=function(l){t[i++]=l},a=1;a<=e;++a)if(n[a]==s&&a!=e)++r;else{if(!s&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(s),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(s);r=1,s=n[a]}return{c:t.subarray(0,i),n:e}},hu=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},bL=function(n,e,t){var i=t.length,s=xL(e+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var r=0;r<i;++r)n[s+r+4]=t[r];return(s+4+i)*8},XI=function(n,e,t,i,s,r,o,a,l,c,u){Js(e,u++,t),++s[256];for(var h=p0(s,15),d=h.t,f=h.l,m=p0(r,15),g=m.t,A=m.l,p=$I(d),y=p.c,v=p.n,x=$I(g),E=x.c,w=x.n,M=new xi(19),C=0;C<y.length;++C)++M[y[C]&31];for(var C=0;C<E.length;++C)++M[E[C]&31];for(var S=p0(M,7),_=S.t,R=S.l,O=19;O>4&&!_[WI[O-1]];--O);var N=c+5<<3,F=hu(s,Ea)+hu(r,em)+o,H=hu(s,d)+hu(r,g)+o+14+3*O+hu(M,_)+2*M[16]+3*M[17]+7*M[18];if(l>=0&&N<=F&&N<=H)return bL(e,u,n.subarray(l,l+c));var Q,z,D,j;if(Js(e,u,1+(H<F)),u+=2,H<F){Q=Ju(d,f,0),z=d,D=Ju(g,A,0),j=g;var K=Ju(_,R,0);Js(e,u,v-257),Js(e,u+5,w-1),Js(e,u+10,O-4),u+=14;for(var C=0;C<O;++C)Js(e,u+3*C,_[WI[C]]);u+=3*O;for(var te=[y,E],ae=0;ae<2;++ae)for(var we=te[ae],C=0;C<we.length;++C){var X=we[C]&31;Js(e,u,K[X]),u+=_[X],X>15&&(Js(e,u,we[C]>>5&127),u+=we[C]>>12)}}else Q=oq,z=Ea,D=aq,j=em;for(var C=0;C<a;++C){var ne=i[C];if(ne>255){var X=ne>>18&31;uu(e,u,Q[X+257]),u+=z[X+257],X>7&&(Js(e,u,ne>>23&31),u+=XE[X]);var he=ne&31;uu(e,u,D[he]),u+=j[he],he>3&&(uu(e,u,ne>>5&8191),u+=KE[he])}else uu(e,u,Q[ne]),u+=z[ne]}return uu(e,u,Q[256]),u+z[256]},cq=new $E([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_L=new Gn(0),uq=function(n,e,t,i,s,r){var o=r.z||n.length,a=new Gn(i+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(i,a.length-s),c=r.l,u=(r.r||0)&7;if(e){u&&(l[0]=r.r>>3);for(var h=cq[e-1],d=h>>13,f=h&8191,m=(1<<t)-1,g=r.p||new xi(32768),A=r.h||new xi(m+1),p=Math.ceil(t/3),y=2*p,v=function(P){return(n[P]^n[P+1]<<p^n[P+2]<<y)&m},x=new $E(25e3),E=new xi(288),w=new xi(32),M=0,C=0,S=r.i||0,_=0,R=r.w||0,O=0;S+2<o;++S){var N=v(S),F=S&32767,H=A[N];if(g[F]=H,A[N]=F,R<=S){var Q=o-S;if((M>7e3||_>24576)&&(Q>423||!c)){u=XI(n,l,0,x,E,w,C,_,O,S-O,u),_=M=C=0,O=S;for(var z=0;z<286;++z)E[z]=0;for(var z=0;z<30;++z)w[z]=0}var D=2,j=0,K=f,te=F-H&32767;if(Q>2&&N==v(S-te))for(var ae=Math.min(d,Q)-1,we=Math.min(32767,S),X=Math.min(258,Q);te<=we&&--K&&F!=H;){if(n[S+D]==n[S+D-te]){for(var ne=0;ne<X&&n[S+ne]==n[S+ne-te];++ne);if(ne>D){if(D=ne,j=te,ne>ae)break;for(var he=Math.min(te,ne-2),ce=0,z=0;z<he;++z){var Te=S-te+z&32767,ke=g[Te],He=Te-ke&32767;He>ce&&(ce=He,H=Te)}}}F=H,H=g[F],te+=F-H&32767}if(j){x[_++]=268435456|Uv[D]<<18|qI[j];var _t=Uv[D]&31,Je=qI[j]&31;C+=XE[_t]+KE[Je],++E[257+_t],++w[Je],R=S+D,++M}else x[_++]=n[S],++E[n[S]]}}for(S=Math.max(S,R);S<o;++S)x[_++]=n[S],++E[n[S]];u=XI(n,l,c,x,E,w,C,_,O,S-O,u),c||(r.r=u&7|l[u/8|0]<<3,u-=7,r.h=A,r.p=g,r.i=S,r.w=R)}else{for(var S=r.w||0;S<o+c;S+=65535){var It=S+65535;It>=o&&(l[u/8|0]=c,It=o),u=bL(l,u+1,n.subarray(S,It))}r.i=o}return EL(a,0,i+xL(u)+s)},hq=function(){for(var n=new Int32Array(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&-306674912)^t>>>1;n[e]=t}return n}(),dq=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=hq[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},fq=function(n,e,t,i,s){if(!s&&(s={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),o=new Gn(r.length+n.length);o.set(r),o.set(n,r.length),n=o,s.w=r.length}return uq(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,s)},wL=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},bn=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};function pq(n,e){return fq(n,e||{},0,0)}var SL=function(n,e,t,i){for(var s in n){var r=n[s],o=e+s,a=i;Array.isArray(r)&&(a=wL(i,r[1]),r=r[0]),r instanceof Gn?t[o]=[r,a]:(t[o+="/"]=[new Gn(0),a],SL(r,o,t,i))}},KI=typeof TextEncoder<"u"&&new TextEncoder,mq=typeof TextDecoder<"u"&&new TextDecoder,Aq=0;try{mq.decode(_L,{stream:!0}),Aq=1}catch{}function tm(n,e){var t;if(KI)return KI.encode(n);for(var i=n.length,s=new Gn(n.length+(n.length>>1)),r=0,o=function(c){s[r++]=c},t=0;t<i;++t){if(r+5>s.length){var a=new Gn(r+8+(i-t<<1));a.set(s),s=a}var l=n.charCodeAt(t);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|n.charCodeAt(++t)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return EL(s,0,r)}var Gv=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;i>65535&&km(9),e+=i+4}return e},YI=function(n,e,t,i,s,r,o,a){var l=i.length,c=t.extra,u=a&&a.length,h=Gv(c);bn(n,e,o!=null?33639248:67324752),e+=4,o!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(r<0&&8),n[e++]=s&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var d=new Date(t.mtime==null?Date.now():t.mtime),f=d.getFullYear()-1980;if((f<0||f>119)&&km(10),bn(n,e,f<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),e+=4,r!=-1&&(bn(n,e,t.crc),bn(n,e+4,r<0?-r-2:r),bn(n,e+8,t.size)),bn(n,e+12,l),bn(n,e+14,h),e+=16,o!=null&&(bn(n,e,u),bn(n,e+6,t.attrs),bn(n,e+10,o),e+=14),n.set(i,e),e+=l,h)for(var m in c){var g=c[m],A=g.length;bn(n,e,+m),bn(n,e+2,A),n.set(g,e+4),e+=4+A}return u&&(n.set(a,e),e+=u),e},gq=function(n,e,t,i,s){bn(n,e,101010256),bn(n,e+8,t),bn(n,e+10,t),bn(n,e+12,i),bn(n,e+16,s)};function yq(n,e){e||(e={});var t={},i=[];SL(n,"",t,e);var s=0,r=0;for(var o in t){var a=t[o],l=a[0],c=a[1],u=c.level==0?0:8,h=tm(o),d=h.length,f=c.comment,m=f&&tm(f),g=m&&m.length,A=Gv(c.extra);d>65535&&km(11);var p=u?pq(l,c):l,y=p.length,v=dq();v.p(l),i.push(wL(c,{size:l.length,crc:v.d(),c:p,f:h,m,u:d!=o.length||m&&f.length!=g,o:s,compression:u})),s+=30+d+A+y,r+=76+2*(d+A)+(g||0)+y}for(var x=new Gn(r+22),E=s,w=r-s,M=0;M<i.length;++M){var h=i[M];YI(x,h.o,h,h.f,h.u,h.c.length);var C=30+h.f.length+Gv(h.extra);x.set(h.c,h.o+C),YI(x,s,h,h.f,h.u,h.c.length,h.o,h.m),s+=16+C+(h.m?h.m.length:0)}return gq(x,s,i.length,w,E),x}class vq{constructor(){this.textureUtils=null}setTextureUtils(e){this.textureUtils=e}parse(e,t,i,s){this.parseAsync(e,s).then(t).catch(i)}async parseAsync(e,t={}){t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,quickLookCompatible:!1,maxTextureSize:1024},t);const i={},s="model.usda";i[s]=null;let r=CL();r+=Eq(t);const o={},a={};e.traverseVisible(c=>{if(c.isMesh){const u=c.geometry,h=c.material;if(h.isMeshStandardMaterial){const d="geometries/Geometry_"+u.id+".usda";if(!(d in i)){const f=Sq(u);i[d]=_q(f)}h.uuid in o||(o[h.uuid]=h),r+=wq(c,u,h)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",c)}else c.isCamera&&(r+=Pq(c))}),r+=bq(),r+=Bq(o,a,t.quickLookCompatible),i[s]=tm(r),r=null;for(const c in a){let u=a[c];if(u.isCompressedTexture===!0){if(this.textureUtils===null)throw new Error("THREE.USDZExporter: setTextureUtils() must be called to process compressed textures.");u=await this.textureUtils.decompress(u)}const h=xq(u.image,u.flipY,t.maxTextureSize),d=await new Promise(f=>h.toBlob(f,"image/png",1));i[`textures/Texture_${c}.png`]=new Uint8Array(await d.arrayBuffer())}let l=0;for(const c in i){const u=i[c],h=34+c.length;l+=h;const d=l&63;if(d!==4){const f=64-d,m=new Uint8Array(f);i[c]=[u,{extra:{12345:m}}]}l=u.length}return yq(i,{level:0})}}function xq(n,e,t){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const i=t/Math.max(n.width,n.height),s=document.createElement("canvas");s.width=n.width*Math.min(1,i),s.height=n.height*Math.min(1,i);const r=s.getContext("2d");return e===!0&&(r.translate(0,s.height),r.scale(1,-1)),r.drawImage(n,0,0,s.width,s.height),s}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const Fn=7;function CL(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`}function Eq(n){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{${n.includeAnchoringProperties===!0?`
		token preliminary:anchoring:type = "${n.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${n.ar.planeAnchoring.alignment}"
	`:""}
`}function bq(){return`
		}
	}
}

`}function _q(n){let e=CL();return e+=n,tm(e)}function wq(n,e,t){const i="Object_"+n.id,s=ML(n.matrixWorld);return n.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",n),`def Xform "${i}" (
	prepend references = @./geometries/Geometry_${e.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${s}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${t.id}>
}

`}function ML(n){const e=n.elements;return`( ${gf(e,0)}, ${gf(e,4)}, ${gf(e,8)}, ${gf(e,12)} )`}function gf(n,e){return`(${n[e+0]}, ${n[e+1]}, ${n[e+2]}, ${n[e+3]})`}function Sq(n){return`
def "Geometry"
{
${Cq(n)}
}
`}function Cq(n){const e="Geometry",t=n.attributes,i=t.position.count;return`
	def Mesh "${e}"
	{
		int[] faceVertexCounts = [${Mq(n)}]
		int[] faceVertexIndices = [${Iq(n)}]
		normal3f[] normals = [${Vv(t.normal,i)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${Vv(t.position,i)}]
${Rq(t)}
		uniform token subdivisionScheme = "none"
	}
`}function Mq(n){const e=n.index!==null?n.index.count:n.attributes.position.count;return Array(e/3).fill(3).join(", ")}function Iq(n){const e=n.index,t=[];if(e!==null)for(let i=0;i<e.count;i++)t.push(e.getX(i));else{const i=n.attributes.position.count;for(let s=0;s<i;s++)t.push(s)}return t.join(", ")}function Vv(n,e){if(n===void 0)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const t=[];for(let i=0;i<n.count;i++){const s=n.getX(i),r=n.getY(i),o=n.getZ(i);t.push(`(${s.toPrecision(Fn)}, ${r.toPrecision(Fn)}, ${o.toPrecision(Fn)})`)}return t.join(", ")}function Tq(n){const e=[];for(let t=0;t<n.count;t++){const i=n.getX(t),s=n.getY(t);e.push(`(${i.toPrecision(Fn)}, ${1-s.toPrecision(Fn)})`)}return e.join(", ")}function Rq(n){let e="";for(let i=0;i<4;i++){const s=i>0?i:"",r=n["uv"+s];r!==void 0&&(e+=`
		texCoord2f[] primvars:st${s} = [${Tq(r)}] (
			interpolation = "vertex"
		)`)}const t=n.color;if(t!==void 0){const i=t.count;e+=`
	color3f[] primvars:displayColor = [${Vv(t,i)}] (
		interpolation = "vertex"
		)`}return e}function Bq(n,e,t=!1){const i=[];for(const s in n){const r=n[s];i.push(Dq(r,e,t))}return`def "Materials"
{
${i.join("")}
}

`}function Dq(n,e,t=!1){const i="			",s=[],r=[];function o(a,l,c){const u=a.source.id+"_"+a.flipY;e[u]=a;const h=a.channel>0?"st"+a.channel:"st",d={1e3:"repeat",1001:"clamp",1002:"mirror"},f=a.repeat.clone(),m=a.offset.clone(),g=a.rotation,A=Math.sin(g),p=Math.cos(g);return m.y=1-m.y-f.y,t?(m.x=m.x/f.x,m.y=m.y/f.y,m.x+=A/f.x,m.y+=p-1):(m.x+=A*f.x,m.y+=(1-p)*f.y),`
		def Shader "PrimvarReader_${l}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${h}"
			float2 outputs:result
		}

		def Shader "Transform2d_${l}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${n.id}/PrimvarReader_${l}.outputs:result>
			float inputs:rotation = ${(g*(180/Math.PI)).toFixed(Fn)}
			float2 inputs:scale = ${ZI(f)}
			float2 inputs:translation = ${ZI(m)}
			float2 outputs:result
		}

		def Shader "Texture_${a.id}_${l}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${u}.png@
			float2 inputs:st.connect = </Materials/Material_${n.id}/Transform2d_${l}.outputs:result>
			${c!==void 0?"float4 inputs:scale = "+Lq(c):""}
			token inputs:sourceColorSpace = "${a.colorSpace===Ui?"raw":"sRGB"}"
			token inputs:wrapS = "${d[a.wrapS]}"
			token inputs:wrapT = "${d[a.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${n.transparent||n.alphaTest>0?"float outputs:a":""}
		}`}return n.side===gn&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",n),n.map!==null?(s.push(`${i}color3f inputs:diffuseColor.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:rgb>`),n.transparent?s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:a>`):n.alphaTest>0&&(s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:a>`),s.push(`${i}float inputs:opacityThreshold = ${n.alphaTest}`)),r.push(o(n.map,"diffuse",n.color))):s.push(`${i}color3f inputs:diffuseColor = ${JI(n.color)}`),n.emissiveMap!==null?(s.push(`${i}color3f inputs:emissiveColor.connect = </Materials/Material_${n.id}/Texture_${n.emissiveMap.id}_emissive.outputs:rgb>`),r.push(o(n.emissiveMap,"emissive",new Ie(n.emissive.r*n.emissiveIntensity,n.emissive.g*n.emissiveIntensity,n.emissive.b*n.emissiveIntensity)))):n.emissive.getHex()>0&&s.push(`${i}color3f inputs:emissiveColor = ${JI(n.emissive)}`),n.normalMap!==null&&(s.push(`${i}normal3f inputs:normal.connect = </Materials/Material_${n.id}/Texture_${n.normalMap.id}_normal.outputs:rgb>`),r.push(o(n.normalMap,"normal"))),n.aoMap!==null&&(s.push(`${i}float inputs:occlusion.connect = </Materials/Material_${n.id}/Texture_${n.aoMap.id}_occlusion.outputs:r>`),r.push(o(n.aoMap,"occlusion",new Ie(n.aoMapIntensity,n.aoMapIntensity,n.aoMapIntensity)))),n.roughnessMap!==null?(s.push(`${i}float inputs:roughness.connect = </Materials/Material_${n.id}/Texture_${n.roughnessMap.id}_roughness.outputs:g>`),r.push(o(n.roughnessMap,"roughness",new Ie(n.roughness,n.roughness,n.roughness)))):s.push(`${i}float inputs:roughness = ${n.roughness}`),n.metalnessMap!==null?(s.push(`${i}float inputs:metallic.connect = </Materials/Material_${n.id}/Texture_${n.metalnessMap.id}_metallic.outputs:b>`),r.push(o(n.metalnessMap,"metallic",new Ie(n.metalness,n.metalness,n.metalness)))):s.push(`${i}float inputs:metallic = ${n.metalness}`),n.alphaMap!==null?(s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.alphaMap.id}_opacity.outputs:r>`),s.push(`${i}float inputs:opacityThreshold = 0.0001`),r.push(o(n.alphaMap,"opacity"))):s.push(`${i}float inputs:opacity = ${n.opacity}`),n.isMeshPhysicalMaterial&&(n.clearcoatMap!==null?(s.push(`${i}float inputs:clearcoat.connect = </Materials/Material_${n.id}/Texture_${n.clearcoatMap.id}_clearcoat.outputs:r>`),r.push(o(n.clearcoatMap,"clearcoat",new Ie(n.clearcoat,n.clearcoat,n.clearcoat)))):s.push(`${i}float inputs:clearcoat = ${n.clearcoat}`),n.clearcoatRoughnessMap!==null?(s.push(`${i}float inputs:clearcoatRoughness.connect = </Materials/Material_${n.id}/Texture_${n.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`),r.push(o(n.clearcoatRoughnessMap,"clearcoatRoughness",new Ie(n.clearcoatRoughness,n.clearcoatRoughness,n.clearcoatRoughness)))):s.push(`${i}float inputs:clearcoatRoughness = ${n.clearcoatRoughness}`),s.push(`${i}float inputs:ior = ${n.ior}`)),`
	def Material "Material_${n.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${s.join(`
`)}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${n.id}/PreviewSurface.outputs:surface>

${r.join(`
`)}

	}
`}function JI(n){return`(${n.r}, ${n.g}, ${n.b})`}function Lq(n){return`(${n.r}, ${n.g}, ${n.b}, 1.0)`}function ZI(n){return`(${n.x}, ${n.y})`}function Pq(n){const e=n.name?n.name:"Camera_"+n.id,t=ML(n.matrixWorld);return n.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",n),n.isOrthographicCamera?`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${n.near.toPrecision(Fn)}, ${n.far.toPrecision(Fn)})
			float horizontalAperture = ${((Math.abs(n.left)+Math.abs(n.right))*10).toPrecision(Fn)}
			float verticalAperture = ${((Math.abs(n.top)+Math.abs(n.bottom))*10).toPrecision(Fn)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${n.near.toPrecision(Fn)}, ${n.far.toPrecision(Fn)})
			float focalLength = ${n.getFocalLength().toPrecision(Fn)}
			float focusDistance = ${n.focus.toPrecision(Fn)}
			float horizontalAperture = ${n.getFilmWidth().toPrecision(Fn)}
			token projection = "perspective"
			float verticalAperture = ${n.getFilmHeight().toPrecision(Fn)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=n=>e=>{try{const t=ur(e),i=(t.length?t[0].terms:[]).filter(s=>s&&s.type==="ident").map(s=>s.value).filter(s=>n.indexOf(s)>-1);return new Set(i)}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var No=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let e1=!1,t1=!1;const n1="#model-viewer-no-ar-fallback",Fq=Nq(["quick-look","scene-viewer","webxr","none"]),kq="webxr scene-viewer quick-look",Li={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},Zs=Symbol("arButtonContainer"),i1=Symbol("enterARWithWebXR"),s1=Symbol("openSceneViewer"),r1=Symbol("openIOSARQuickLook"),Uq=Symbol("canActivateAR"),yf=Symbol("arMode"),m0=Symbol("arModes"),il=Symbol("arAnchor"),vf=Symbol("preload"),xf=Symbol("onARButtonContainerClick"),A0=Symbol("onARStatus"),g0=Symbol("onARTracking"),y0=Symbol("onARTap"),du=Symbol("selectARMode"),v0=Symbol("triggerLoad"),Oq=n=>{var e,t,i,s,r,o,a,l,c,u;class h extends n{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arUsdzMaxTextureSize="auto",this.arPlacement="floor",this.arModes=kq,this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[t]=this.shadowRoot.querySelector(".ar-button"),this[i]=document.createElement("a"),this[s]=new Set,this[r]=Li.NONE,this[o]=!1,this[a]=f=>{f.preventDefault(),this.activateAR()},this[l]=({status:f})=>{(f===zr.NOT_PRESENTING||this[gt].arRenderer.presentedScene===this[se])&&(this.setAttribute("ar-status",f),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:f}})),f===zr.NOT_PRESENTING?this.removeAttribute("ar-tracking"):f===zr.SESSION_STARTED&&this.setAttribute("ar-tracking",Rv.TRACKING))},this[c]=({status:f})=>{this.setAttribute("ar-tracking",f),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:f}}))},this[u]=f=>{f.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[yf]!==Li.NONE}connectedCallback(){super.connectedCallback(),this[gt].arRenderer.addEventListener("status",this[A0]),this.setAttribute("ar-status",zr.NOT_PRESENTING),this[gt].arRenderer.addEventListener("tracking",this[g0]),this[il].addEventListener("message",this[y0])}disconnectedCallback(){super.disconnectedCallback(),this[gt].arRenderer.removeEventListener("status",this[A0]),this[gt].arRenderer.removeEventListener("tracking",this[g0]),this[il].removeEventListener("message",this[y0])}update(f){super.update(f),f.has("arScale")&&(this[se].canScale=this.arScale!=="fixed"),f.has("arPlacement")&&(this[se].updateShadow(),this[yn]()),f.has("arModes")&&(this[m0]=Fq(this.arModes)),(f.has("ar")||f.has("arModes")||f.has("src")||f.has("iosSrc")||f.has("arUsdzMaxTextureSize"))&&this[du]()}async activateAR(){switch(this[yf]){case Li.QUICK_LOOK:await this[r1]();break;case Li.WEBXR:await this[i1]();break;case Li.SCENE_VIEWER:this[s1]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(e=Uq,t=Zs,i=il,s=m0,r=yf,o=vf,a=xf,l=A0,c=g0,u=y0,du)](){var f;let m=Li.NONE;if(this.ar){if(this.src!=null)for(const g of this[m0]){if(g==="webxr"&&yD&&!e1&&await this[gt].arRenderer.supportsPresentation()){m=Li.WEBXR;break}if(g==="scene-viewer"&&!t1&&(p6||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(!((f=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)===null||f===void 0)&&f.includes("XR")))){m=Li.SCENE_VIEWER;break}if(g==="quick-look"&&xC){m=Li.QUICK_LOOK;break}}m===Li.NONE&&this.iosSrc!=null&&xC&&(m=Li.QUICK_LOOK)}if(m!==Li.NONE)this[Zs].classList.add("enabled"),this[Zs].addEventListener("click",this[xf]);else if(this[Zs].classList.contains("enabled")){this[Zs].removeEventListener("click",this[xf]),this[Zs].classList.remove("enabled");const g=zr.FAILED;this.setAttribute("ar-status",g),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:g}}))}this[yf]=m}async[i1](){console.log("Attempting to present in AR with WebXR..."),await this[v0]();try{this[Zs].removeEventListener("click",this[xf]);const{arRenderer:f}=this[gt];f.placeOnWall=this.arPlacement==="wall",await f.present(this[se],this.xrEnvironment)}catch(f){console.warn("Error while trying to present in AR with WebXR"),console.error(f),await this[gt].arRenderer.stopPresenting(),e1=!0,console.warn("Falling back to next ar-mode"),await this[du](),this.activateAR()}finally{this[du]()}}async[v0](){this.loaded||(this[vf]=!0,this[ql](),await v6(this,"load"),this[vf]=!1)}[gc](){return super[gc]()||this[vf]}[s1](){const f=self.location.toString(),m=new URL(f),g=new URL(this.src,f);g.hash&&(g.hash="");const A=new URLSearchParams(g.search);if(m.hash=n1,A.set("mode","ar_preferred"),A.has("disable_occlusion")||A.set("disable_occlusion","true"),this.arScale==="fixed"&&A.set("resizable","false"),this.arPlacement==="wall"&&A.set("enable_vertical_placement","true"),A.has("sound")){const v=new URL(A.get("sound"),f);A.set("sound",v.toString())}if(A.has("link")){const v=new URL(A.get("link"),f);A.set("link",v.toString())}const p=`intent://arvr.google.com/scene-viewer/1.2?${A.toString()+"&file="+encodeURIComponent(g.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(m.toString())};end;`,y=()=>{self.location.hash===n1&&(t1=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[du]())};self.addEventListener("hashchange",y,{once:!0}),this[il].setAttribute("href",p),console.log("Attempting to present in AR with Scene Viewer..."),this[il].click()}async[r1](){const f=!this.iosSrc;this[Zs].classList.remove("enabled");const m=f?await this.prepareUSDZ():this.iosSrc,g=new URL(m,self.location.toString());if(f){const y=self.location.toString(),v=new URL(y),x=new URL(this.src,v);x.hash&&(g.hash=x.hash)}this.arScale==="fixed"&&(g.hash&&(g.hash+="&"),g.hash+="allowsContentScaling=0");const A=this[il];A.setAttribute("rel","ar");const p=document.createElement("img");A.appendChild(p),A.setAttribute("href",g.toString()),f&&A.setAttribute("download","model.usdz"),A.style.display="none",A.isConnected||this.shadowRoot.appendChild(A),console.log("Attempting to present in AR with Quick Look..."),A.click(),A.removeChild(p),f&&URL.revokeObjectURL(m),this[Zs].classList.add("enabled")}async prepareUSDZ(){const f=this[va].beginActivity("usdz-conversion");await this[v0]();const{model:m,shadow:g,target:A}=this[se];if(m==null)return"";let p=!1;g!=null&&(p=g.visible,g.visible=!1),f(.2);const y=new vq;A.remove(m),m.position.copy(A.position),m.updateWorldMatrix(!1,!0);const v=await y.parseAsync(m,{maxTextureSize:isNaN(this.arUsdzMaxTextureSize)?1/0:Math.max(parseInt(this.arUsdzMaxTextureSize),16)});m.position.set(0,0,0),A.add(m);const x=new Blob([v],{type:"model/vnd.usdz+zip"}),E=URL.createObjectURL(x);return f(1),g!=null&&(g.visible=p),E}}return No([Le({type:Boolean,attribute:"ar"})],h.prototype,"ar",void 0),No([Le({type:String,attribute:"ar-scale"})],h.prototype,"arScale",void 0),No([Le({type:String,attribute:"ar-usdz-max-texture-size"})],h.prototype,"arUsdzMaxTextureSize",void 0),No([Le({type:String,attribute:"ar-placement"})],h.prototype,"arPlacement",void 0),No([Le({type:String,attribute:"ar-modes"})],h.prototype,"arModes",void 0),No([Le({type:String,attribute:"ios-src"})],h.prototype,"iosSrc",void 0),No([Le({type:Boolean,attribute:"xr-environment"})],h.prototype,"xrEnvironment",void 0),h};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x0=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Qq=100,Gq="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",Vq="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",zq="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",E0={AUTO:"auto",MANUAL:"manual"},o1={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},sl=Symbol("defaultProgressBarElement"),b0=Symbol("posterContainerElement"),rl=Symbol("defaultPosterElement"),fu=Symbol("shouldDismissPoster"),_0=Symbol("hidePoster"),Ef=Symbol("modelIsRevealed"),w0=Symbol("updateProgressBar"),Hq=Symbol("ariaLabelCallToAction"),S0=Symbol("onProgress"),jq=n=>{var e,t,i,s,r,o,a,l;class c extends n{static set dracoDecoderLocation(h){$n.setDRACODecoderLocation(h)}static get dracoDecoderLocation(){return $n.getDRACODecoderLocation()}static set ktx2TranscoderLocation(h){$n.setKTX2TranscoderLocation(h)}static get ktx2TranscoderLocation(){return $n.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(h){$n.setMeshoptDecoderLocation(h)}static get meshoptDecoderLocation(){return $n.getMeshoptDecoderLocation()}static set lottieLoaderLocation(h){as.singleton.textureUtils.lottieLoaderUrl=h}static get lottieLoaderLocation(){return as.singleton.textureUtils.lottieLoaderUrl}static mapURLs(h){as.singleton.loader[Vo].manager.setURLModifier(h)}dismissPoster(){this.loaded?this[_0]():(this[fu]=!0,this[ql]())}showPoster(){const h=this[b0];if(h.classList.contains("show"))return;h.classList.add("show"),this[os].classList.remove("show");const d=this[rl];d.removeAttribute("tabindex"),d.removeAttribute("aria-hidden");const f=this.modelIsVisible;this[Ef]=!1,this[Yp](f)}getDimensions(){return Hr(this[se].size)}getBoundingBoxCenter(){return Hr(this[se].boundingBox.getCenter(new L))}constructor(...h){super(...h),this.poster=null,this.reveal=E0.AUTO,this.loading=o1.AUTO,this[e]=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".slot.poster"),this[s]=this.shadowRoot.querySelector("#default-poster"),this[r]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[o]=this[rl].getAttribute("aria-label"),this[a]=g6(A=>{const p=this[sl].parentNode;requestAnimationFrame(()=>{this[sl].style.transform=`scaleX(${A})`,A===0&&(p.removeChild(this[sl]),p.appendChild(this[sl])),this[sl].classList.toggle("hide",A===1)})},Qq),this[l]=A=>{const p=A.detail.totalProgress,y=A.detail.reason;p===1&&(this[w0].flush(),this.loaded&&(this[fu]||this.reveal===E0.AUTO)&&this[_0]()),this[w0](p),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:p,reason:y}}))};const d=self.ModelViewerElement||{},f=d.dracoDecoderLocation||Gq;$n.setDRACODecoderLocation(f);const m=d.ktx2TranscoderLocation||Vq;$n.setKTX2TranscoderLocation(m),d.meshoptDecoderLocation&&$n.setMeshoptDecoderLocation(d.meshoptDecoderLocation);const g=d.lottieLoaderLocation||zq;as.singleton.textureUtils.lottieLoaderUrl=g}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[va].addEventListener("progress",this[S0])}disconnectedCallback(){super.disconnectedCallback(),this[va].removeEventListener("progress",this[S0])}async updated(h){super.updated(h),h.has("poster")&&this.poster!=null&&(this[rl].style.backgroundImage=`url(${this.poster})`),h.has("alt")&&this[rl].setAttribute("aria-label",this[Nv]),(h.has("reveal")||h.has("loading"))&&this[ql]()}[(e=Ef,t=fu,i=b0,s=rl,r=sl,o=Hq,a=w0,l=S0,gc)](){return!!this.src&&(this[fu]||this.loading===o1.EAGER||this.reveal===E0.AUTO&&this[Wo])}[_0](){this[fu]=!1;const h=this[b0];if(!h.classList.contains("show"))return;h.classList.remove("show"),this[os].classList.add("show");const d=this.modelIsVisible;this[Ef]=!0,this[Yp](d);const f=this.getRootNode();f&&f.activeElement===this&&this[os].focus();const m=this[rl];m.setAttribute("aria-hidden","true"),m.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[xa](){return super[xa]()&&this[Ef]}}return x0([Le({type:String})],c.prototype,"poster",void 0),x0([Le({type:String})],c.prototype,"reveal",void 0),x0([Le({type:String})],c.prototype,"loading",void 0),c};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C0=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Wq=Math.PI/32,qq=3e3,$q={basis:[Nm(On(Wq,"rad"))],keywords:{auto:[null]}},ol=Symbol("autoRotateStartTime"),M0=Symbol("radiansPerSecond"),a1=Symbol("syncRotationRate"),I0=Symbol("onCameraChange"),Xq=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=qq,this.rotationPerSecond="auto",this[e]=performance.now(),this[t]=0,this[i]=o=>{this.autoRotate&&o.detail.source==="user-interaction"&&(this[ol]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[I0]),this[ol]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[I0]),this[ol]=performance.now()}updated(o){super.updated(o),o.has("autoRotate")&&(this[ol]=performance.now())}[(e=ol,t=M0,a1)](o){this[M0]=o[0]}[Ps](o,a){if(super[Ps](o,a),!this.autoRotate||!this[xa]()||this[gt].isPresenting)return;const l=Math.min(a,o-this[ol]-this.autoRotateDelay);l>0&&(this[se].yaw=this.turntableRotation+this[M0]*l*.001)}get turntableRotation(){return this[se].yaw}resetTurntableRotation(o=0){this[se].yaw=o}}return i=I0,C0([Le({type:Boolean,attribute:"auto-rotate"})],s.prototype,"autoRotate",void 0),C0([Le({type:Number,attribute:"auto-rotate-delay"})],s.prototype,"autoRotateDelay",void 0),C0([Fr({intrinsics:$q,updateHandler:a1}),Le({type:String,attribute:"rotation-per-second"})],s.prototype,"rotationPerSecond",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq=iq(k7(Xq(w6(GW(Oq(jq(nq(Xh))))))));customElements.define("model-viewer",Kq);const Yq=[{title:"Propeller",icon:b.jsx(y2,{className:"w-7 h-7 text-primary-400"}),image:"/assets/propeller2.webp",description:"Captures ambient airflow as your vehicle moves, designed for minimal drag and maximum energy capture at speeds ≥30 km/h."},{title:"Torque Converter",icon:b.jsx(M4,{className:"w-7 h-7 text-primary-400"}),image:"/assets/torque.webp",description:"Transforms the propeller's rotation into smooth, consistent mechanical energy, ensuring stable operation during speed variations."},{title:"Gear Set",icon:b.jsx(g2,{className:"w-7 h-7 text-primary-400"}),image:"/assets/Gearset.webp",description:"Optimizes the rotational speed and torque from the converter to maximize efficiency across different driving conditions."},{title:"Magnetic Induction Generator",icon:b.jsx(F4,{className:"w-7 h-7 text-primary-400"}),image:"/assets/Generator.webp",description:"Converts the mechanical energy into electricity, directly feeding your EV's battery with a continuous charge while driving."}],Jq=()=>{const n=V.useRef(null);return p4({target:n,offset:["start end","end start"]}),b.jsx("section",{id:"technology",ref:n,className:"py-32 bg-gradient-to-b from-dark-800 to-dark-900 text-white overflow-hidden scroll-mt-[120px]",children:b.jsxs("div",{className:"container mx-auto px-6 lg:px-10",children:[b.jsxs(Ts.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-24",children:[b.jsx("h2",{className:"text-4xl font-bold mb-4",children:"How LCM Technology Works"}),b.jsx("p",{className:"text-white/70 text-lg max-w-2xl mx-auto",children:"A seamless four-stage process converts ambient airflow into usable electricity — powering your EV without additional drag."})]}),Yq.map((e,t)=>{const i=t*.2;return b.jsxs(Ts.div,{initial:{opacity:0,y:60},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:i},viewport:{once:!0},className:"flex flex-col md:flex-row items-center gap-10 mb-24",children:[b.jsx("img",{src:e.image,alt:e.title,className:"md:w-1/2 w-full h-[300px] object-cover rounded-xl shadow-lg"}),b.jsxs("div",{className:"md:w-1/2 w-full space-y-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[e.icon,b.jsx("h3",{className:"text-2xl font-semibold",children:e.title})]}),b.jsx("p",{className:"text-white/70 leading-relaxed text-base",children:e.description})]})]},t)}),b.jsxs(Ts.div,{initial:{opacity:0,y:80},whileInView:{opacity:1,y:0},transition:{duration:1},viewport:{once:!0},className:"text-center mt-20",children:[b.jsx("h3",{className:"text-3xl font-bold mb-4",children:"Final Integrated System"}),b.jsx("p",{className:"text-white/70 mb-6 max-w-xl mx-auto",children:"All components combined into a single seamless energy unit that charges your EV while driving."}),b.jsx("div",{className:"w-full max-w-3xl mx-auto rounded-2xl overflow-hidden border border-white/10 shadow-2xl bg-black",children:b.jsx("model-viewer",{src:"/assets/models/lcmf.glb",alt:"Final EV Assembly","auto-rotate":!0,"camera-controls":!0,"shadow-intensity":"1",exposure:"1",ar:!0,style:{width:"100%",height:"400px"}})})]})]})})},Zq="/assets/img/difdesign-DS5Jpavz.webp",e$=({icon:n,title:e,description:t})=>b.jsxs("div",{className:"bg-dark-800 hover:bg-dark-700 border border-white/10 rounded-xl p-6 transition-all duration-300 group",children:[b.jsx("div",{className:"bg-primary-500/10 text-primary-400 p-3 rounded-lg inline-flex mb-4 group-hover:bg-primary-500 group-hover:text-white transition-all duration-300",children:n}),b.jsx("h3",{className:"font-display font-semibold text-xl text-white mb-2",children:e}),b.jsx("p",{className:"text-white/70",children:t})]}),t$=()=>{const n=[{icon:b.jsx(y2,{className:"h-6 w-6"}),title:"Zero Additional Drag",description:"Strategically placed to utilize natural airflow without adding resistance to the vehicle's aerodynamics."},{icon:b.jsx(v4,{className:"h-6 w-6"}),title:"Continuous In-Drive Charging",description:"Provides a constant power source while driving, extending range and reducing charging stops."},{icon:b.jsx(g2,{className:"h-6 w-6"}),title:"Works at ≥30 km/h",description:"Begins generating power at just 30 km/h, making it effective for both city and highway driving."},{icon:b.jsx(g4,{className:"h-6 w-6"}),title:"Smooth Battery Health Maintenance",description:"Delivers consistent power input that helps maintain optimal battery health and longevity."},{icon:b.jsx(T4,{className:"h-6 w-6"}),title:"Eco-Friendly Power",description:"Generates clean energy from an otherwise wasted resource, further enhancing the sustainability of EVs."},{icon:b.jsx(x4,{className:"h-6 w-6"}),title:"Perfect for Urban Conditions",description:"Especially effective in traffic conditions where traditional regenerative braking is less efficient."}];return b.jsx("section",{id:"benefits",className:"py-20 bg-gradient-to-b from-dark-800 to-dark-900",children:b.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[b.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[b.jsx("h2",{className:"font-display font-bold text-3xl md:text-4xl text-white mb-4",children:"Why Choose LCM Technology?"}),b.jsx("p",{className:"text-white/70 text-lg",children:"Our innovative charging solution offers unique advantages that complement and enhance existing EV technology."})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:n.map((e,t)=>b.jsx(e$,{icon:e.icon,title:e.title,description:e.description},t))}),b.jsx("div",{className:"bg-gradient-to-r from-primary-500/20 via-secondary-500/20 to-primary-500/20 rounded-2xl p-8 border border-white/10",children:b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"font-display font-semibold text-2xl text-white mb-4",children:"Different By Design"}),b.jsx("p",{className:"text-white/80 mb-4",children:"Unlike solar panels that depend on sunlight or external chargers that require stopping, LCM works seamlessly while you drive, in any weather, day or night."}),b.jsxs("ul",{className:"space-y-2",children:[b.jsxs("li",{className:"flex items-center text-white/80",children:[b.jsx("span",{className:"h-2 w-2 bg-primary-500 rounded-full mr-2"}),"No dependency on external conditions"]}),b.jsxs("li",{className:"flex items-center text-white/80",children:[b.jsx("span",{className:"h-2 w-2 bg-primary-500 rounded-full mr-2"}),"Complements regenerative braking"]}),b.jsxs("li",{className:"flex items-center text-white/80",children:[b.jsx("span",{className:"h-2 w-2 bg-primary-500 rounded-full mr-2"}),"Works during constant-speed highway driving"]})]})]}),b.jsx("div",{className:"bg-dark-800 border border-white/10 rounded-xl overflow-hidden",children:b.jsx("img",{src:Zq,alt:"LCM Technology Closeup",className:"w-full h-auto"})})]})})]})})},n$=()=>b.jsx("section",{id:"comparison",className:"py-20 bg-gradient-to-b from-dark-900 to-dark-800",children:b.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[b.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[b.jsx("h2",{className:"font-display font-bold text-3xl md:text-4xl text-white mb-4",children:"LCM vs. Other Charging Technologies"}),b.jsx("p",{className:"text-white/70 text-lg",children:"See how our innovative Loop Charging Module compares to traditional charging methods."})]}),b.jsx("div",{className:"overflow-x-auto pb-6",children:b.jsxs("table",{className:"w-full min-w-[768px] border-collapse",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"p-4 text-left bg-dark-800 border-b border-white/10 text-white font-display",children:"Features"}),b.jsx("th",{className:"p-4 text-center bg-primary-500/20 border-b border-primary-500/30 text-white font-display",children:"LCM"}),b.jsx("th",{className:"p-4 text-center bg-dark-800 border-b border-white/10 text-white font-display",children:"Traditional EV Chargers"}),b.jsx("th",{className:"p-4 text-center bg-dark-800 border-b border-white/10 text-white font-display",children:"Regenerative Braking"}),b.jsx("th",{className:"p-4 text-center bg-dark-800 border-b border-white/10 text-white font-display",children:"Solar Panel EV Roofs"})]})}),b.jsxs("tbody",{children:[b.jsxs("tr",{children:[b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-white font-medium",children:"Works While Driving"}),b.jsx("td",{className:"p-4 bg-primary-500/10 border-b border-primary-500/30 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Nr,{className:"h-5 w-5 text-red-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})})]}),b.jsxs("tr",{children:[b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-white font-medium",children:"Real-Time Charging"}),b.jsx("td",{className:"p-4 bg-primary-500/10 border-b border-primary-500/30 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})})]}),b.jsxs("tr",{children:[b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-white font-medium",children:"Requires External Setup"}),b.jsx("td",{className:"p-4 bg-primary-500/10 border-b border-primary-500/30 text-center",children:b.jsx(Nr,{className:"h-5 w-5 text-green-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-red-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Nr,{className:"h-5 w-5 text-green-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Nr,{className:"h-5 w-5 text-green-500 mx-auto"})})]}),b.jsxs("tr",{children:[b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-white font-medium",children:"Efficiency at Low Speeds"}),b.jsx("td",{className:"p-4 bg-primary-500/10 border-b border-primary-500/30 text-center",children:b.jsxs("div",{className:"flex items-center justify-center",children:[b.jsx(Bn,{className:"h-5 w-5 text-primary-500"}),b.jsx("span",{className:"text-xs text-white/70 ml-1",children:"(≥30 km/h)"})]})}),b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-center",children:b.jsx(Nr,{className:"h-5 w-5 text-red-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-center",children:b.jsx(Nr,{className:"h-5 w-5 text-red-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 border-b border-white/10 text-center",children:b.jsx(A2,{className:"h-5 w-5 text-yellow-500 mx-auto"})})]}),b.jsxs("tr",{children:[b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-white font-medium",children:"Battery Safety"}),b.jsx("td",{className:"p-4 bg-primary-500/10 border-b border-primary-500/30 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-800 border-b border-white/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})})]}),b.jsxs("tr",{children:[b.jsx("td",{className:"p-4 bg-dark-700 text-white font-medium",children:"Works in All Weather"}),b.jsx("td",{className:"p-4 bg-primary-500/10 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 text-center",children:b.jsx(Bn,{className:"h-5 w-5 text-primary-500 mx-auto"})}),b.jsx("td",{className:"p-4 bg-dark-700 text-center",children:b.jsx(Nr,{className:"h-5 w-5 text-red-500 mx-auto"})})]})]})]})}),b.jsxs("div",{className:"mt-12 bg-dark-700 rounded-xl p-6 border border-white/10",children:[b.jsx("h3",{className:"font-display font-semibold text-xl text-white mb-4",children:"The LCM Advantage: A Complete Solution"}),b.jsx("p",{className:"text-white/70 mb-4",children:"While each charging technology has its benefits, LCM offers a unique advantage by providing continuous charging during normal driving conditions—filling the gaps where other systems are inefficient."}),b.jsx("p",{className:"text-white/70",children:"LCM is designed to work alongside existing technologies like regenerative braking, creating a comprehensive charging ecosystem that maximizes range and minimizes the need for external charging."})]})]})}),i$="/assets/img/Manufacturing-T4WJMlBm.webp",s$=({icon:n,title:e,description:t})=>b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"mr-4 mt-1 bg-primary-500/20 p-2 rounded-lg text-primary-400",children:n}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-medium text-white text-lg mb-2",children:e}),b.jsx("p",{className:"text-white/70",children:t})]})]}),r$=()=>{const n=t=>{t.preventDefault(),ra("partnership")},e=[{icon:b.jsx(b4,{className:"h-5 w-5"}),title:"Integration Feasibility",description:"Designed for seamless integration into existing EV hood spaces with minimal modifications to the vehicle's structure."},{icon:b.jsx(L4,{className:"h-5 w-5"}),title:"Safety & Compliance",description:"Engineered to meet all automotive safety standards with comprehensive testing for durability, vibration resistance, and weatherproofing."},{icon:b.jsx(E4,{className:"h-5 w-5"}),title:"Real-Time Battery Communication",description:"Advanced BMS integration allows for intelligent charging that adapts to your battery's current state and requirements."},{icon:b.jsx(I4,{className:"h-5 w-5"}),title:"OEM Customization",description:"Flexible design allows for customization to meet specific OEM requirements and vehicle form factors."}];return b.jsx("section",{id:"integration",className:"py-20 bg-gradient-to-b from-dark-800 to-dark-900",children:b.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[b.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[b.jsx("h2",{className:"font-display font-bold text-3xl md:text-4xl text-white mb-4",children:"EV Integration"}),b.jsx("p",{className:"text-white/70 text-lg",children:"We're currently testing LCM with modified EVs to ensure seamless integration for manufacturers."})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"bg-dark-800 border border-white/10 rounded-2xl overflow-hidden shadow-lg mb-6",children:b.jsx("img",{src:i$,alt:"EV CAD Diagram with LCM",className:"w-full h-auto",loading:"lazy"})}),b.jsxs("div",{className:"bg-dark-800 border border-white/10 rounded-xl p-4",children:[b.jsx("h4",{className:"font-display font-medium text-white mb-2",children:"Implementation Process"}),b.jsxs("ol",{className:"space-y-2",children:[b.jsxs("li",{className:"flex items-center text-white/70",children:[b.jsx("span",{className:"bg-primary-500 text-white w-5 h-5 rounded-full flex items-center justify-center mr-3 flex-shrink-0 text-xs font-medium",children:"1"}),"Initial assessment of vehicle hood space and airflow dynamics"]}),b.jsxs("li",{className:"flex items-center text-white/70",children:[b.jsx("span",{className:"bg-primary-500 text-white w-5 h-5 rounded-full flex items-center justify-center mr-3 flex-shrink-0 text-xs font-medium",children:"2"}),"Custom LCM design adaptation for specific vehicle model"]}),b.jsxs("li",{className:"flex items-center text-white/70",children:[b.jsx("span",{className:"bg-primary-500 text-white w-5 h-5 rounded-full flex items-center justify-center mr-3 flex-shrink-0 text-xs font-medium",children:"3"}),"Integration with vehicle's battery management system"]}),b.jsxs("li",{className:"flex items-center text-white/70",children:[b.jsx("span",{className:"bg-primary-500 text-white w-5 h-5 rounded-full flex items-center justify-center mr-3 flex-shrink-0 text-xs font-medium",children:"4"}),"Testing phase with performance monitoring and optimization"]}),b.jsxs("li",{className:"flex items-center text-white/70",children:[b.jsx("span",{className:"bg-primary-500 text-white w-5 h-5 rounded-full flex items-center justify-center mr-3 flex-shrink-0 text-xs font-medium",children:"5"}),"Final implementation and production setup"]})]})]})]}),b.jsxs("div",{children:[b.jsx("div",{className:"space-y-8",children:e.map((t,i)=>b.jsx(s$,{icon:t.icon,title:t.title,description:t.description},i))}),b.jsxs("div",{className:"mt-10 bg-gradient-to-r from-primary-500/20 to-secondary-500/20 rounded-xl p-6 border border-white/10",children:[b.jsx("h3",{className:"font-display font-semibold text-xl text-white mb-3",children:"Partner with us for early integration"}),b.jsx("p",{className:"text-white/80 mb-4",children:"We're looking for forward-thinking EV manufacturers interested in being at the forefront of this technology. Early adopters will have the opportunity to shape the development and gain a competitive advantage."}),b.jsx("a",{href:"#contact",onClick:n,className:"inline-block bg-primary-500 hover:bg-primary-600 text-white px-6 py-3 rounded-full font-medium transition-colors",children:"Explore Partnership Opportunities"})]})]})]})]})})},o$=({title:n,description:e,status:t,date:i})=>{const s={completed:b.jsx(_4,{className:"h-5 w-5 text-green-500"}),"in-progress":b.jsx(C4,{className:"h-5 w-5 text-primary-500 animate-pulse"}),upcoming:b.jsx(A2,{className:"h-5 w-5 text-yellow-500"})},r={completed:"Completed","in-progress":"In Progress",upcoming:"Upcoming"},o={completed:"bg-green-500/10 text-green-500 border-green-500/20","in-progress":"bg-primary-500/10 text-primary-500 border-primary-500/20",upcoming:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"};return b.jsxs("div",{className:"relative flex items-start pb-12",children:[b.jsx("div",{className:"absolute top-0 left-6 h-full w-px bg-white/10"}),b.jsx("div",{className:`absolute top-0 left-0 w-12 h-12 rounded-full flex items-center justify-center z-10 ${t==="completed"?"bg-green-500/20":t==="in-progress"?"bg-primary-500/20":"bg-dark-700"}`,children:s[t]}),b.jsxs("div",{className:"ml-20",children:[b.jsxs("div",{className:"flex flex-col md:flex-row md:items-center mb-2 gap-2",children:[b.jsx("h3",{className:"font-display font-semibold text-xl text-white mr-3",children:n}),b.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${o[t]}`,children:r[t]})]}),b.jsx("p",{className:"text-white/70 mb-2",children:e}),b.jsx("p",{className:"text-sm text-white/50",children:i})]})]})},a$=()=>{const n=[{title:"Prototype Built",description:"First working prototype of LCM technology developed and tested in controlled laboratory environment.",status:"completed",date:"Feb 2025"},{title:"Bench Testing",description:"Comprehensive performance testing across various simulated conditions to refine the technology.",status:"completed",date:"Mar 2025"},{title:"Electrical Integration Research for Electric Vehicles (EVs)",description:" Conducting in-depth research on the seamless electrical integration of the Loop Charging Module (LCM) with electric vehicle systems.",status:"in-progress",date:"May - Jun 2025"},{title:"BMS modification",description:"Modifying the EV's Battery Management System (BMS) to enable simultaneous charging and discharging of the battery pack",status:"upcoming",date:"Jul 2025"},{title:"Initial Trials of Electrical Integration",description:"Executing preliminary trials to evaluate the electrical integration of the Loop Charging Module (LCM) with electric vehicle systems",status:"upcoming",date:"Jul 2025"},{title:"Vehicle-Level Integration",description:"Integrating the Loop Charging Module (LCM) into an electric vehicle for real-world testing, performance evaluation, and system validation.",status:"upcoming",date:"Aug 2025"},{title:"Regulatory Compliance and Certifications",description:" Securing essential certifications and regulatory approvals to enable large-scale manufacturing and market deployment.",status:"upcoming",date:"Sep 2025"},{title:"OEM Pilot Program",description:"Partnerships with select vehicle manufacturers for initial production integration.",status:"upcoming",date:"Oct 2025"}];return b.jsx("section",{id:"timeline",className:"py-20 bg-gradient-to-b from-dark-900 to-dark-800",children:b.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[b.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[b.jsx("h2",{className:"font-display font-bold text-3xl md:text-4xl text-white mb-4",children:"Development Timeline"}),b.jsx("p",{className:"text-white/70 text-lg",children:"Follow our journey from prototype to OEM integration as we bring this revolutionary technology to market."})]}),b.jsxs("div",{className:"bg-dark-800 border border-white/10 rounded-2xl p-8 shadow-lg relative",children:[b.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-primary-500/5 to-secondary-500/5 rounded-2xl"}),b.jsx("div",{className:"relative z-10",children:n.map((e,t)=>b.jsx(o$,{title:e.title,description:e.description,status:e.status,date:e.date},t))})]})]})})},l$="/assets/img/Wes-BfAKo1g5.webp",c$="/assets/img/Jay-B5uFF4rK.webp",u$="/assets/img/Ani-SJDLJaQJ.webp",h$="/assets/img/Nav-KfRHaoGj.webp",d$="/assets/img/Dur-DihixU6A.webp",f$="/assets/img/che-hVgZ72Ca.webp",p$="/assets/img/tanmay-6ezqsSXw.webp",l1=400,m$=600,A$=320,g$=[{name:"Wesly Jambarapu",role:"CEO & Founder",background:"As CEO of LCM, I pioneer breakthrough solution of LCM that enable electric vehicles to charge while in motion",image:l$,social:{linkedin:"https://www.linkedin.com/in/wesly-j/",email:"wesly.lcm@gmail.com"}},{name:"Jayshri Bej",role:"Co-Founder & CRO",background:"As CRO of LCM, I steer project management, ensuring our solutions meet real-world needs and scale effectively",image:c$,social:{linkedin:"https://www.linkedin.com/in/jayshri-bej/",email:"jayshribej7@gmail.com"}},{name:"Anil Kumar",role:"Co-Founder & CPO",background:"As CPO, I bridge technology and business to create products that redefine industry standards.",image:u$,social:{linkedin:"https://www.linkedin.com/in/anilkumar-pidamarthi/",email:"anilkumarpidamarthi123@gmail.com"}},{name:"Naveen Islavath",role:"Co-Founder & CFO",background:"As CFO, I manage financial operations and drive strategic partnerships to fuel LCM's growth.",image:h$,social:{linkedin:"https://www.linkedin.com/in/naveen-islavath-b992021ba",email:"naveenssc2019@gmail.com"}},{name:"Durga Prasad",role:"CTO",background:"As CTO, I architect and drive the core technology powering LCM's breakthrough EV charging solutions.",image:d$,social:{linkedin:"https://www.linkedin.com/in/durga-prasad-nuthalapati-646b73233/",email:"durgaprasad69110@gmail.com"}},{name:"Chethan Ashray C",role:"COO",background:"As COO, I streamline operations at LCM to ensure seamless delivery of innovative EV charging solutions.",image:f$,social:{linkedin:"https://www.linkedin.com/in/chethan-ashray-1351b0329",email:"chethanashray16@gmail.com"}},{name:"Tanmay Arora",role:"Fractional COO & Strategic Advisor",background:"4x CEO, award-winning business consultant & TedX speaker, bringing global leadership and strategic depth to LCM.",image:p$,social:{linkedin:"https://www.linkedin.com/in/tanmayaroraaa",email:"tanmayaroramba@gmail.com"}}],y$={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},v$={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},x$=({member:n})=>b.jsxs(Ts.div,{variants:v$,className:"bg-dark-800 rounded-2xl overflow-hidden border border-white/10 hover:border-primary-500/30 transition-all duration-300 group shadow-lg flex flex-col",style:{minHeight:m$,maxWidth:l1,width:l1,margin:"0 auto"},children:[b.jsxs("div",{className:"w-full",style:{height:A$,position:"relative",overflow:"hidden",flexShrink:0},children:[b.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-top transition-transform duration-500 group-hover:scale-105"}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),b.jsxs("div",{className:"flex flex-col flex-grow justify-between p-8",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"font-display font-semibold text-2xl text-white mb-1",children:n.name}),b.jsx("p",{className:"text-primary-400 mb-2 text-lg",children:n.role}),b.jsx("p",{className:"text-white/70 text-base mb-4",children:n.background})]}),b.jsxs("div",{className:"flex space-x-4 mt-auto",children:[n.social.linkedin&&b.jsx("a",{href:n.social.linkedin,className:"text-white/60 hover:text-primary-500 transition-colors","aria-label":`${n.name}'s LinkedIn profile`,target:"_blank",rel:"noopener noreferrer",children:b.jsx(EE,{size:22})}),n.social.email&&b.jsx("a",{href:`mailto:${n.social.email}`,className:"text-white/60 hover:text-primary-500 transition-colors","aria-label":`Email ${n.name}`,children:b.jsx(zy,{size:22})})]})]})]}),E$=()=>b.jsx("div",{className:"min-h-screen bg-dark-900",children:b.jsx("section",{className:"py-20",children:b.jsxs("div",{className:"container mx-auto px-4",children:[b.jsxs(Ts.div,{className:"text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[b.jsx(N4,{className:"h-12 w-12 text-primary-500 mx-auto mb-4"}),b.jsx("h2",{className:"font-display font-bold text-3xl md:text-4xl text-white mb-4",children:"Core Team"}),b.jsx("p",{className:"text-white/70 text-lg max-w-2xl mx-auto",children:"Our team brings together expertise from leading automotive companies, research institutions, and technology innovators."})]}),b.jsx(Ts.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12",variants:y$,initial:"hidden",animate:"visible",children:g$.map((n,e)=>b.jsx(x$,{member:n},e))})]})})});class Kh{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const b$=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},wn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:b$()},YE=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},_$=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=YE(n);wn.publicKey=t.publicKey,wn.blockHeadless=t.blockHeadless,wn.storageProvider=t.storageProvider,wn.blockList=t.blockList,wn.limitRate=t.limitRate,wn.origin=t.origin||e},IL=async(n,e,t={})=>{const i=await fetch(wn.origin+n,{method:"POST",headers:t,body:e}),s=await i.text(),r=new Kh(i.status,s);if(i.ok)return r;throw r},TL=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},w$=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},RL=n=>n.webdriver||!n.languages||n.languages.length===0,BL=()=>new Kh(451,"Unavailable For Headless Browser"),S$=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},C$=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},M$=(n,e)=>n instanceof FormData?n.get(e):n[e],DL=(n,e)=>{if(C$(n))return!1;S$(n.list,n.watchVariable);const t=M$(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},LL=()=>new Kh(403,"Forbidden"),I$=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},T$=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},PL=async(n,e,t)=>{if(!e.throttle||!t)return!1;I$(e.throttle,e.id);const i=e.id||n;return await T$(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},NL=()=>new Kh(429,"Too Many Requests"),R$=async(n,e,t,i)=>{const s=YE(i),r=s.publicKey||wn.publicKey,o=s.blockHeadless||wn.blockHeadless,a=s.storageProvider||wn.storageProvider,l={...wn.blockList,...s.blockList},c={...wn.limitRate,...s.limitRate};return o&&RL(navigator)?Promise.reject(BL()):(TL(r,n,e),w$(t),t&&DL(l,t)?Promise.reject(LL()):await PL(location.pathname,c,a)?Promise.reject(NL()):IL("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},B$=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},D$=n=>typeof n=="string"?document.querySelector(n):n,L$=async(n,e,t,i)=>{const s=YE(i),r=s.publicKey||wn.publicKey,o=s.blockHeadless||wn.blockHeadless,a=wn.storageProvider||s.storageProvider,l={...wn.blockList,...s.blockList},c={...wn.limitRate,...s.limitRate};if(o&&RL(navigator))return Promise.reject(BL());const u=D$(t);TL(r,n,e),B$(u);const h=new FormData(u);return DL(l,h)?Promise.reject(LL()):await PL(location.pathname,c,a)?Promise.reject(NL()):(h.append("lib_version","4.4.1"),h.append("service_id",n),h.append("template_id",e),h.append("user_id",r),IL("/api/v1.0/email/send-form",h))},P$={init:_$,send:R$,sendForm:L$,EmailJSResponseStatus:Kh},N$=n=>{if(!n.serviceId||!n.templateId||!n.publicKey)throw new Error("Missing required EmailJS configuration. Please check your environment variables.");return n},T0=N$({serviceId:"service_kdlpd9q",templateId:"template_8j6otsg",publicKey:"OKoHNz-uKkvFDes5M"}),c1=6e4,F$=n=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n),k$=n=>{const e={};return n.name.length<2&&(e.name="Name must be at least 2 characters long"),F$(n.email)||(e.email="Please enter a valid email address"),n.message.length<10&&(e.message="Message must be at least 10 characters long"),e},U$=()=>{const n=V.useRef(null),[e,t]=V.useState({name:"",email:"",inquiryType:"demo",message:""}),[i,s]=V.useState(!1),[r,o]=V.useState(!1),[a,l]=V.useState(null),[c,u]=V.useState({}),[h,d]=V.useState(0),f=V.useCallback(p=>{const{name:y,value:v}=p.target;t(x=>({...x,[y]:v})),u(x=>({...x,[y]:void 0}))},[]),m=V.useCallback(async p=>{p.preventDefault(),l(null);const y=k$(e);if(Object.keys(y).length>0){u(y);return}const v=Date.now();if(v-h<c1){l(`Please wait ${Math.ceil((c1-(v-h))/1e3)} seconds before submitting again`);return}s(!0);try{if(!n.current)throw new Error("Form not found");await P$.sendForm(T0.serviceId,T0.templateId,n.current,T0.publicKey),o(!0),d(Date.now()),t({name:"",email:"",inquiryType:"demo",message:""})}catch(x){console.error("Form submission failed:",x),l("Failed to send message. Please try again or contact us directly.")}finally{s(!1)}},[e,h]),g=V.useCallback(p=>{p.preventDefault(),ra("integration")},[]),A=V.useCallback(p=>{p.preventDefault(),ra("technical")},[]);return V.useEffect(()=>{const y=new URLSearchParams(window.location.hash.split("?")[1]).get("inquiryType");y&&t(v=>({...v,inquiryType:y}))},[]),b.jsx("section",{id:"contact",className:"py-20 bg-gradient-to-b from-dark-900 to-dark-800",children:b.jsx("div",{className:"container mx-auto px-4 md:px-6",children:b.jsxs("div",{className:"bg-gradient-to-br from-primary-500/20 via-dark-800 to-secondary-500/20 rounded-2xl p-8 md:p-12 border border-white/10 shadow-xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-primary-500/10 rounded-full blur-3xl"}),b.jsx("div",{className:"absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-secondary-500/10 rounded-full blur-3xl"}),b.jsxs("div",{className:"relative z-10",children:[b.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12",children:[b.jsx("h2",{className:"font-display font-bold text-3xl md:text-4xl text-white mb-4",children:"Let's Build the Future of EVs Together"}),b.jsx("p",{className:"text-white/70 text-lg",children:"Whether you're interested in a demonstration, exploring partnership opportunities, or just want to learn more, we'd love to hear from you."}),b.jsx("div",{className:"mt-6 flex justify-center",children:b.jsx("a",{href:"https://www.linkedin.com/company/loop-charging-module-lcm/posts/?feedView=all",target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-white transition-colors","aria-label":"LCM LinkedIn",children:b.jsx(EE,{size:28})})})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[b.jsx("div",{className:"bg-dark-800/80 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:r?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"bg-primary-500/20 rounded-full p-4 inline-flex mb-6",children:b.jsx(jw,{className:"h-8 w-8 text-primary-400"})}),b.jsx("h3",{className:"font-display font-semibold text-2xl text-white mb-4",children:"Message Sent Successfully!"}),b.jsx("p",{className:"text-white/70 mb-6",children:"Thank you for reaching out. Our team will get back to you as soon as possible."}),b.jsx("button",{onClick:()=>o(!1),className:"bg-primary-500 hover:bg-primary-600 text-white px-6 py-3 rounded-full font-medium transition-colors",children:"Send Another Message"})]}):b.jsxs("form",{ref:n,onSubmit:m,noValidate:!0,children:[b.jsx("h3",{className:"font-display font-semibold text-xl text-white mb-6",children:"Contact Us"}),a&&b.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-6 text-red-400",children:a}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"name",className:"block text-white/80 mb-2 text-sm",children:"Full Name"}),b.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:f,className:`w-full bg-dark-700 border ${c.name?"border-red-500":"border-white/10"} rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-500/50`,placeholder:"Your name"}),c.name&&b.jsx("p",{className:"mt-1 text-sm text-red-400",children:c.name})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-white/80 mb-2 text-sm",children:"Email Address"}),b.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:f,className:`w-full bg-dark-700 border ${c.email?"border-red-500":"border-white/10"} rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-500/50`,placeholder:"your.email@example.com"}),c.email&&b.jsx("p",{className:"mt-1 text-sm text-red-400",children:c.email})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"inquiryType",className:"block text-white/80 mb-2 text-sm",children:"Type of Inquiry"}),b.jsxs("select",{id:"inquiryType",name:"inquiryType",value:e.inquiryType,onChange:f,className:"w-full bg-dark-700 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-500/50",children:[b.jsx("option",{value:"demo",children:"Book a Demo"}),b.jsx("option",{value:"partnership",children:"Partnership Opportunity"}),b.jsx("option",{value:"integration",children:"Integration Feasibility Study"}),b.jsx("option",{value:"technical",children:"Technical Question"}),b.jsx("option",{value:"other",children:"Other"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"message",className:"block text-white/80 mb-2 text-sm",children:"Message"}),b.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:f,rows:4,className:`w-full bg-dark-700 border ${c.message?"border-red-500":"border-white/10"} rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-500/50`,placeholder:"Tell us how we can help you..."}),c.message&&b.jsx("p",{className:"mt-1 text-sm text-red-400",children:c.message})]}),b.jsx("div",{className:"pt-2",children:b.jsx("button",{type:"submit",disabled:i,className:`w-full bg-primary-500 hover:bg-primary-600 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center ${i?"opacity-70 cursor-not-allowed":""}`,children:i?b.jsxs(b.Fragment,{children:[b.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):b.jsxs(b.Fragment,{children:[b.jsx(D4,{className:"mr-2 h-4 w-4"})," Send Message"]})})})]})]})}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-dark-800/80 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[b.jsx("h3",{className:"font-display font-semibold text-xl text-white mb-4",children:"Request an Integration Feasibility Study"}),b.jsx("p",{className:"text-white/70 mb-6",children:"Our engineering team will evaluate how LCM can be integrated into your specific vehicle models, providing a comprehensive analysis and implementation roadmap."}),b.jsx("a",{href:"#contact",className:"inline-block w-full bg-secondary-500 hover:bg-secondary-600 text-white px-6 py-3 rounded-lg font-medium transition-colors text-center",onClick:g,children:"Request Feasibility Study"})]}),b.jsxs("div",{className:"bg-dark-800/80 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[b.jsx("h3",{className:"font-display font-semibold text-xl text-white mb-4",children:"Talk to Our Engineers"}),b.jsx("p",{className:"text-white/70 mb-6",children:"Have technical questions about LCM? Schedule a consultation with our engineering team to discuss specifications, integration requirements, and performance data."}),b.jsx("a",{href:"#contact",className:"inline-block w-full bg-dark-700 hover:bg-dark-600 text-white border border-white/20 px-6 py-3 rounded-lg font-medium transition-colors text-center",onClick:A,children:"Schedule Technical Consultation"})]}),b.jsxs("div",{className:"bg-gradient-to-r from-primary-500/10 to-secondary-500/10 rounded-xl p-6 border border-white/10",children:[b.jsxs("div",{className:"flex items-center mb-4",children:[b.jsx("div",{className:"bg-white/10 p-2 rounded-lg mr-3",children:b.jsx(jw,{className:"h-5 w-5 text-white"})}),b.jsx("h3",{className:"font-display font-medium text-white",children:"Fast-Track Demo"})]}),b.jsx("p",{className:"text-white/70 text-sm",children:"For qualified OEMs, we offer expedited demonstrations of our working prototypes at your facility."})]})]})]})]})]})})})},u1=({question:n,answer:e,isOpen:t,toggleOpen:i})=>b.jsxs("div",{className:"border-b border-white/10 last:border-0",children:[b.jsxs("button",{className:"w-full flex justify-between items-center py-5 text-left focus:outline-none",onClick:i,children:[b.jsx("h3",{className:"font-display font-medium text-lg text-white",children:n}),t?b.jsx(S4,{className:"h-5 w-5 text-primary-400 flex-shrink-0"}):b.jsx(w4,{className:"h-5 w-5 text-white/60 flex-shrink-0"})]}),b.jsx("div",{className:`overflow-hidden transition-all duration-300 ${t?"max-h-96 opacity-100 pb-5":"max-h-0 opacity-0"}`,children:b.jsx("p",{className:"text-white/70",children:e})})]}),O$=()=>{const[n,e]=V.useState(0),t=r=>{r.preventDefault(),ra("other")},i=[{question:"How much power does LCM generate?",answer:"LCM typically generates between 1-3 kW of power depending on the vehicle speed and airflow conditions. At highway speeds of 60+ km/h, it reaches optimal performance, providing continuous charging that can significantly extend your EV's range."},{question:"Does it work on existing EVs?",answer:"While LCM is primarily designed for integration into new EV models at the manufacturing stage, we are developing retrofit solutions for select existing EV models. The feasibility depends on the vehicle's hood space and front-end design. Contact us for a specific assessment for your vehicle."},{question:"What about battery wear and safety?",answer:"LCM is designed with battery health as a priority. The system includes advanced power management that delivers smooth, consistent charging current that complies with all battery management system (BMS) protocols. This helps maintain battery health and can actually extend battery lifespan by reducing deep discharge cycles."},{question:"What happens in dust or rain?",answer:"LCM is engineered to automotive-grade specifications for all weather conditions. The system includes protective housing that prevents water ingress and filters that manage dust and debris. Performance remains consistent in rain, and the system is designed to operate across a wide temperature range."},{question:"Does LCM increase vehicle weight significantly?",answer:"No, the entire LCM system typically weighs less than 10kg, which is significantly lighter than alternative range-extension solutions such as additional battery capacity. The weight-to-benefit ratio makes it an extremely efficient addition to any EV."},{question:"How does LCM affect vehicle aerodynamics?",answer:"LCM is designed to have zero additional aerodynamic drag. The system is integrated within the existing hood space and utilizes airflow that is already entering the vehicle's front-end. Extensive wind tunnel testing confirms that vehicles with LCM maintain their original drag coefficient."}],s=r=>{e(n===r?null:r)};return b.jsx("section",{id:"faq",className:"py-20 bg-gradient-to-b from-dark-800 to-dark-900",children:b.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[b.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[b.jsx("h2",{className:"font-display font-bold text-3xl md:text-4xl text-white mb-4",children:"Frequently Asked Questions"}),b.jsx("p",{className:"text-white/70 text-lg",children:"Get answers to common questions about LCM technology, performance, and integration."})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[b.jsx("div",{className:"bg-dark-800 rounded-xl border border-white/10 p-6 overflow-hidden",children:i.slice(0,3).map((r,o)=>b.jsx(u1,{question:r.question,answer:r.answer,isOpen:n===o,toggleOpen:()=>s(o)},o))}),b.jsx("div",{className:"bg-dark-800 rounded-xl border border-white/10 p-6 overflow-hidden",children:i.slice(3,6).map((r,o)=>b.jsx(u1,{question:r.question,answer:r.answer,isOpen:n===o+3,toggleOpen:()=>s(o+3)},o+3))})]}),b.jsxs("div",{className:"mt-12 text-center",children:[b.jsx("p",{className:"text-white/80 mb-4",children:"Have more questions? We're here to help."}),b.jsx("a",{href:"#contact",onClick:t,className:"inline-block bg-primary-500 hover:bg-primary-600 text-white px-6 py-3 rounded-full font-medium transition-colors",children:"Ask Us Anything"})]})]})})},Q$=V.lazy(()=>ym(()=>import("./Team-Cla8x4X4.js"),[])),G$=V.lazy(()=>ym(()=>import("./Careers-BLcDaul4.js"),[])),V$=V.lazy(()=>ym(()=>import("./FAQ-B58wlDuQ.js"),[])),z$=V.lazy(()=>ym(()=>import("./TimelinePage-c6u8QzFW.js"),[]));function H$(){const{pathname:n}=Fs(),e=xm();return V.useEffect(()=>{var s;const t=(s=window.history.state)==null?void 0:s.usr,i=t==null?void 0:t.scrollTo;if(i&&typeof i=="string"){let r=0;const o=50,a=80,l=()=>{const c=document.getElementById(i);if(c){const h=c.getBoundingClientRect().top+window.pageYOffset-a;window.scrollTo({top:h,behavior:"smooth"});const d={...t,scrollTo:void 0},f={...window.history.state,usr:d};e(n,{replace:!0,state:f})}else if(r++,r<o)requestAnimationFrame(l);else{console.warn(`ScrollToTop: Element with id '${i}' not found after ${o} attempts. Scrolling to top.`),window.scrollTo({top:0,behavior:"smooth"});const u={...t,scrollTo:void 0},h={...window.history.state,usr:u};e(n,{replace:!0,state:h})}};requestAnimationFrame(l)}else window.scrollTo({top:0,behavior:"smooth"})},[n,e]),null}function j$(){return b.jsx(Eu,{children:b.jsxs(Il,{children:[b.jsx(Q4,{}),b.jsx(Jq,{}),b.jsx(t$,{}),b.jsx(n$,{}),b.jsx(r$,{}),b.jsx(a$,{}),b.jsx(E$,{}),b.jsx(O$,{}),b.jsx(U$,{})]})})}function W$(){const n=Fs();return b.jsx(V.Suspense,{fallback:b.jsx("div",{className:"fixed inset-0 bg-dark-900 flex items-center justify-center text-white",children:"Loading page..."}),children:b.jsxs(lk,{location:n,children:[b.jsx(al,{path:"/",element:b.jsx(j$,{})}),b.jsx(al,{path:"/team",element:b.jsx(Eu,{children:b.jsx(Il,{children:b.jsx(Q$,{})})})}),b.jsx(al,{path:"/careers",element:b.jsx(Eu,{children:b.jsx(Il,{children:b.jsx(G$,{})})})}),b.jsx(al,{path:"/faq",element:b.jsx(Eu,{children:b.jsx(Il,{children:b.jsx(V$,{})})})}),b.jsx(al,{path:"/timeline",element:b.jsx(Eu,{children:b.jsx(Il,{children:b.jsx(z$,{})})})})]},n.pathname)})}function q$(){const n=Fs();return b.jsxs(b.Fragment,{children:[b.jsx(H$,{}),b.jsx(kR,{mode:"wait",initial:!1,children:b.jsx(W$,{},n.pathname)})]})}function $$(){return b.jsx(mk,{basename:"/",children:b.jsx(q$,{})})}wR(document.getElementById("root")).render(b.jsx(V.StrictMode,{children:b.jsx($$,{})}));export{u$ as A,f$ as C,d$ as D,c$ as J,Ai as L,zy as M,h$ as N,Il as P,jw as R,D4 as S,p$ as T,N4 as U,l$ as W,EE as a,C4 as b,Et as c,kR as d,S4 as e,w4 as f,a$ as g,b as j,Ts as m,V as r,xm as u};
